{"version":3,"sources":["utilities/camelcase.js","utilities/methods.js","utilities/svgs.js","utilities/themedPaths.js","utilities/validation.js","utilities/azureMapUtils.js","components/shared/ajaxError/ajaxError.js","components/shared/componentArray/componentArray.js","components/shared/contextMenu/contextMenu.js","components/shared/contextMenu/contextMenuAlign.js","components/shared/contextMenu/searchInput/searchInput.js","components/shared/indicator/indicator.js","components/shared/modal/modalFadeBox/modalFadeBox.js","components/shared/modal/modalContent/modalContent.js","components/shared/modal/modalHeader/modalHeader.js","components/shared/modal/modalFooter/modalFooter.js","components/shared/modal/content/content.js","components/shared/modal/modal/modal.js","components/shared/pageTitle/pageTitle.js","components/shared/pageStats/statProperty/statProperty.js","components/shared/pageContent/pageContent.js","components/shared/pcsGrid/pcsGrid.js","components/shared/propertyGrid/propertyCell.js","components/shared/propertyGrid/propertyGrid.js","components/shared/propertyGrid/propertyGridHeader.js","components/shared/propertyGrid/propertyRow.js","components/shared/protected/protected.impl.js","components/shared/protected/protected.container.js","components/shared/protected/protectedError.js","components/shared/refreshBar/refreshBar.js","components/shared/refreshBar/refreshBar.container.js","components/shared/svg/themedSvg.js","components/shared/svg/themedSvg.container.js","components/shared/timeSeriesInsightsLink/timeSeriesInsightsLink.js","components/shared/timeSeriesInsightsLink/timeSeriesInsightsLink.container.js","components/shared/panel/panel.js","components/shared/panel/panelContent.js","components/shared/panel/panelOverlay.js","components/shared/panel/panelError.js","components/shared/panel/panelErrorBoundary.js","components/shared/panel/panelHeader.js","components/shared/panel/panelHeaderLabel.js","components/shared/panel/panelMsg.js","components/shared/panel/panelParagraph.js","components/shared/grid/grid.js","components/shared/grid/cell.js","components/shared/generateMapsFlyout/generateMapsFlyout.js","components/shared/generateMapsFlyout/generateMapsFlyout.container.js","components/shared/noMapImage/noMapImage.js","components/shared/successMessage/successMessage.js","components/shared/propertiesTable/tableRenderer.js","components/shared/propertiesTable/propertiesTable.js","store/utilities.js","app.config.js","components/shared/flyout/flyout.js","components/shared/flyout/flyoutHeader.js","components/shared/flyout/flyoutTitle.js","components/shared/flyout/flyoutCloseBtn.js","components/shared/flyout/flyoutContent.js","components/shared/flyout/flyoutSection/accordionProvider.js","components/shared/flyout/flyoutSection/index.js","components/shared/flyout/flyoutSection/flyoutSection.js","components/shared/flyout/flyoutSection/flyoutSectionHeader.js","components/shared/flyout/flyoutSection/flyoutSectionContent.js","components/shared/flyout/index.js","applicationInsights.js","store/reducers/devicesReducer.js","services/models/authModels.js","services/models/telemetryModels.js","services/models/farmModels.js","services/models/mapsModels.js","services/models/jobsModels.js","services/models/sensorModels.js","services/models/roleModels.js","store/reducers/sensorsReducer.js","services/telemetryService.js","services/deviceService.js","services/farmService.js","services/jobsService.js","services/mapService.js","services/sensorService.js","services/alertService.js","services/roleService.js","store/reducers/farmsReducer.js","store/reducers/appReducer.js","utilities/httpClient.js","components/shared/svg/svg.js","components/shared/cellRenderers/countRenderer/countRenderer.js","components/shared/cellRenderers/timeRenderer/timeRenderer.js","components/shared/cellRenderers/lastTriggerRenderer/lastTriggerRenderer.js","components/shared/cellRenderers/linkRenderer/linkRenderer.js","components/shared/cellRenderers/severityRenderer/severityRenderer.js","components/shared/cellRenderers/softSelectLinkRenderer/softSelectLinkRenderer.js","components/shared/cellRenderers/deviceModelTypeRenderer/deviceModelTypeRenderer.js","components/shared/cellRenderers/deviceStatusRenderer/deviceStatusRenderer.js","components/shared/cellRenderers/jobStatusRenderer/jobStatusRenderer.js","components/shared/cellRenderers/farmSelectRenderer/farmSelectRenderer.js","components/shared/cellRenderers/ruleNameRenderer/ruleNameRenderer.js","store/reducers/rulesAlertsReducer.js","components/shared/pcsGrid/pcsGridConfig.js","store/reducers/jobsReducer.js","store/reducers/rolesReducer.js","i18n.js","store/reducers/mapsReducer.js","components/pages/devices/devicesGrid/devicesGridConfig.js","components/shared/telemetryPanel/telemetryPanel.container.js","components/pages/devices/deviceProperties/deviceProperties.js","components/pages/devices/flyouts/deviceDetails/deviceDetails.js","components/pages/devices/flyouts/deviceDetails/deviceDetails.container.js","components/pages/devices/devicesGrid/devicesGrid.js","components/pages/devices/devicesGrid/devicesGrid.container.js","components/pages/devices/devices.js","components/pages/devices/devices.container.js","components/pages/rules/rulesGrid/rulesGridConfig.js","components/pages/rules/flyouts/ruleEditor/actionEmailSetup.js","components/pages/rules/flyouts/ruleEditor/actionEmailSetup.container.js","components/pages/rules/flyouts/shared/ruleSummary.js","components/pages/rules/flyouts/shared/ruleSummaryAuto.js","components/pages/rules/flyouts/shared/ruleSummaryAuto.container.js","components/pages/rules/flyouts/ruleEditor/ruleEditor.js","components/pages/rules/flyouts/ruleEditor/ruleEditor.container.js","components/pages/rules/flyouts/editRuleFlyout.js","components/pages/rules/flyouts/newRuleFlyout.js","components/pages/rules/flyouts/ruleViewer/ruleViewer.js","components/pages/rules/flyouts/ruleViewer/ruleViewer.container.js","components/pages/rules/flyouts/ruleDetailsFlyout.js","components/pages/rules/flyouts/ruleStatus/ruleStatus.js","components/pages/rules/flyouts/ruleStatus/ruleStatus.container.js","components/pages/rules/flyouts/ruleDelete/deleteRule.js","components/pages/rules/flyouts/ruleDelete/deleteRule.container.js","components/pages/rules/rulesGrid/rulesGrid.js","components/pages/rules/rules.js","components/pages/rules/rules.container.js","components/pages/farms/farmsGrid/farmsGridConfig.js","components/pages/farms/farmsGrid/farmsGrid.js","components/pages/farms/emptyFarm/emptyFarm.js","components/pages/farms/farmsSummary.js","components/pages/farms/farms.js","components/pages/farms/farms.container.js","components/pages/farmDetails/panels/overview/overviewPanel.js","components/shared/mapsModal/modalHeader/modalHeader.js","components/shared/azureMapPanel/FullscreenControl.js","components/shared/azureMapPanel/azureMap.js","components/pages/farmDetails/panels/sensorPlacementMap/mapPanel.js","components/pages/farmDetails/panels/sensorPlacementMap/mapPanel.container.js","components/pages/farmDetails/panels/sensorPlacementMap/sensorPlacementMap.js","components/shared/mapsModal/modal/modal.js","components/pages/farmDetails/panels/satelliteIndicesMap/satelliteIndicesMap.js","components/pages/farmDetails/panels/soilMoistureMap/soilMoistureMap.js","components/pages/farmDetails/panels/alerts/alertsPanel.js","components/pages/farmDetails/panels/alerts/alertsPanel.container.js","components/pages/farmDetails/panels/map/mapPanel.js","components/pages/farmDetails/panels/map/mapPanel.container.js","components/pages/farmDetails/panels/drone/drone.js","components/pages/farmDetails/farmDetails.js","components/pages/farmDetails/farmDetails.container.js","components/shared/toolTip/toolTip.js","components/pages/maps/mapsGrid/mapsGridConfig.js","components/pages/maps/mapsGrid/mapsGrid.js","components/shared/filter/filterControl.js","components/pages/maps/maps.js","components/pages/maps/maps.container.js","components/pages/jobs/jobsGrid/jobsGridConfig.js","components/pages/jobs/jobsGrid/jobsGrid.js","components/pages/jobs/jobs.js","components/pages/jobs/jobs.container.js","components/pages/sensors/sensorsGrid/sensorsGridConfig.js","components/pages/sensors/sensorProperties/sensorProperties.js","components/pages/sensors/flyouts/sensorDetails.js","components/pages/sensors/flyouts/sensorDetails.container.js","components/pages/sensors/sensorsGrid/sensorsGrid.js","components/pages/sensors/sensors.js","components/pages/sensors/sensors.container.js","components/pages/alerts/alertsGrid/alertsGridConfig.js","components/pages/alerts/alertsGrid/alertsGrid.js","components/pages/alerts/alerts.js","components/pages/alerts/alerts.container.js","components/shared/deleteModal/deleteModal.js","components/shared/forms/btn.js","components/shared/forms/btnToolbar.js","components/shared/forms/errorMsg.js","components/shared/forms/fileInput.js","components/shared/forms/formLabel.js","components/shared/forms/formGroup.js","components/shared/forms/duration.js","components/shared/forms/select.js","components/shared/forms/formControl.js","components/shared/forms/formSection.js","components/shared/forms/hyperlink.js","components/shared/forms/pill.js","components/shared/forms/pillGroup.js","components/shared/forms/radio.js","components/shared/forms/sectionDesc.js","components/shared/forms/summaryBody.js","components/shared/forms/summaryCount.js","components/shared/forms/summarySection.js","components/shared/forms/toggleBtn.js","components/shared/forms/tooltip.js","components/shared/forms/successMsg.js","services/models/deviceModels.js","store/reducers/userReducer.js","components/pages/farms/panels/map/azureMap.js","components/pages/farms/panels/map/PolygonDrawingTool.js","components/pages/farms/panels/map/mapPanel.js","components/pages/farms/panels/map/mapPanel.container.js","components/pages/farms/panels/descriptionPanel/descriptionPanel.js","components/pages/farms/panels/geoJSON/geoJSON.js","components/pages/farms/flyouts/farmEditor/farmEditor.js","components/pages/farms/flyouts/farmEditor/farmEditor.container.js","utilities/ajaxModels.js","utilities/constants.js","services/authService.js","services/userService.js","components/shared/telemetryPanel/utils.js","components/pages/farms/flyouts/index.js","components/shell/flyouts/settings/settings.js","components/shell/flyouts/accessControl/accessControl.js","components/shared/telemetryPanel/telemetryPanel.js","components/shared/telemetryPanel/chartColorObjects.js","components/pages/devices/flyouts/associateDevices/associateDevices.js","components/pages/farms/flyouts/addDevices/addDevices.js","components/pages/farms/flyouts/addDevices/addDeviceGrid/addDeviceGridConfig.js","components/pages/farms/flyouts/addDevices/addDeviceGrid/addDeviceGrid.js","components/pages/farms/flyouts/addDevices/selectDevices.js","components/pages/devices/flyouts/associateDevices/associateDeviceGrid/associateDeviceGridConfig.js","components/pages/devices/flyouts/associateDevices/associateDeviceGrid/associateDeviceGrid.js","components/pages/devices/flyouts/associateDevices/manualAssociate.js","components/shell/flyouts/accessControl/accessControl.container.js","components/shared/generateMapsFlyout/datePickerElement.js","assets/icons/gatewayBig.svg","assets/icons/nodeBig.svg","assets/icons/onlineStatus.svg","assets/icons/offlineStatus.svg","assets/icons/onlineStatusBig.svg","assets/icons/infoBubble.svg","assets/icons/GatewayBlack.svg","assets/icons/gateway.svg","assets/icons/node.svg","components/shell/flyouts/accessControl/utils.js","components/shell/flyouts/profile/profile.container.js","components/shell/flyouts/profile/profile.js","components/shell/flyouts/settings/settings.container.js","components/shell/flyouts/settings/applicationSettings.js","components/shell/flyouts/settings/applicationSettings.container.js","polyfills.js","components/pages/devices/flyouts/associateDevices/associateDevices.container.js","components/pages/farms/flyouts/editFarmFlyout.js","components/pages/farms/flyouts/newFarmFlyout.js","components/pages/farms/flyouts/addDevices/index.js","components/pages/farms/flyouts/addDevices/addDevices.container.js","assets/icons/ackAlert.svg","assets/icons/apply.svg","assets/icons/cancelX.svg","assets/icons/carat.svg","assets/icons/changeStatus.svg","assets/icons/checkmark.svg","assets/icons/chevron.svg","assets/icons/chevronRight.svg","assets/icons/closeAlert.svg","assets/icons/colon.svg","assets/icons/farmbeats.svg","assets/icons/copy.svg","assets/icons/critical.svg","assets/icons/alerts.svg","assets/icons/download.svg","assets/icons/addDevice.svg","assets/icons/deviceIcon.svg","assets/icons/disableToggle.svg","assets/icons/disabled.svg","assets/icons/edit.svg","assets/icons/ellipsis.svg","assets/icons/enableToggle.svg","assets/icons/errorAsterisk.svg","assets/icons/failed.svg","assets/icons/glimmer.svg","assets/icons/hamburger.svg","assets/icons/info.svg","assets/icons/linkTo.svg","assets/icons/loadingToggle.svg","assets/icons/manageFilters.svg","assets/icons/packages.svg","assets/icons/physicalDevice.svg","assets/icons/plus.svg","assets/icons/questionMark.svg","assets/icons/radioSelected.svg","assets/icons/radioUnselected.svg","assets/icons/reconfigure.svg","assets/icons/refresh.svg","assets/icons/ruleDisabled.svg","assets/icons/ruleEnabled.svg","assets/icons/SIMManagement.svg","assets/icons/searchIcon.svg","assets/icons/SensorHubBlack.svg","assets/icons/settings.svg","assets/icons/simulatedDevice.svg","assets/icons/tabDashboard.svg","assets/icons/calendar.svg","assets/icons/tabDeployments.svg","assets/icons/tabMaintenance.svg","assets/icons/tabLayouts.svg","assets/icons/trash.svg","assets/icons/upload.svg","assets/icons/warning.svg","assets/icons/x.svg","assets/icons/abort.svg","assets/icons/rejected.svg","assets/icons/waiting.svg","assets/icons/filter.svg","assets/icons/filterApplied.svg","assets/icons/jobs.svg","assets/icons/rules.svg","assets/icons/sensors.svg","assets/icons/farms.svg","assets/icons/devices.svg","assets/icons/maps.svg","assets/icons/links.svg","assets/icons/noMapImage.svg","assets/icons/datePicker.svg","assets/icons/IconDarkCheckmarkBubble.svg","assets/icons/IconDarkInfoBubble.svg","assets/icons/IconDarkQuestionBubble.svg","assets/icons/IconLightCheckmarkBubble.svg","assets/icons/IconLightInfoBubble.svg","assets/icons/IconLightQuestionBubble.svg","components/app.js","assets/images/profile.png","components/shell/flyouts/accessControl/assignRole.container.js","components/shell/flyouts/accessControl/assignRole.js","components/shell/flyouts/accessControl/deleteRoleAssignmentRenderer.js","components/shared/telemetryPanel/datePickerElement.js","components/pages/devices/flyouts/associateDevices/index.js","components/shell/header/breadcrumbs.js","components/shell/header/header.js","components/shell/header/header.container.js","components/shell/navigation/navigation.js","components/shell/navigation/navigationContainer.js","components/shell/main/main.js","components/shell/pageNotFound/pageNotFound.js","components/shell/pageNotFound/pageNotFound.container.js","components/shell/shell.js","components/shared/telemetryPanel/telemetryChart.js","components/shared/telemetryPanel/telemetryChart.container.js","store/rootEpic.js","store/rootReducer.js","components/app.container.js","registerServiceWorker.js","index.js","store/configureStore.js"],"names":["input","options","Object","assign","pascalCase","postProcess","x","charAt","toUpperCase","slice","Array","isArray","map","trim","filter","length","join","toLowerCase","test","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","c","preserveCamelCase","replace","m","p1","isFunc","value","isObject","int","num","parseInt","joinClasses","classNames","name","isValidEmail","match","getItems","response","Items","items","camelCaseKeys","data","entries","reduce","acc","key","toCamelcase","reshape","model","keys","dot","copy","camelCaseReshape","translateColumnDefs","t","columnDefs","columnDef","headerName","undefined","headerTooltip","isDef","val","displayable","Config","emptyValue","isJSON","isNull","obj","JSON","parse","e","console","log","renderUndefined","isEmptyCheck","getEnumTranslation","rootPath","defaultVal","fullPath","isValidExtension","file","fileExt","split","pop","validExtensions","indexOf","formatConditions","rule","conditions","trigger","emptyFieldValue","getCentroid","geometry","coordinates","itr1","itr2","pointA","pointB","factor1","factor2","xCoordinate","yCoordinate","geoJSONValidation","require","define","position","errors","push","i18n","getFormattedTelemtery","metric","deviceId","time","update","$auto","$set","handleKeyPressInput","event","func","keyCode","which","getSceneFile","LatestMapSceneId","fileType","callback","maps","imageUrlSelectObj","blobUrl","noMaps","noPngMaps","MapService","getMapFileByIdAndType","subscribe","imageUrlMaps","contentTypeLabelsMap","get","contentType","pngImageType","downloadSASUrl","label","selectedObject","mapFileDownloadSelectObject","mapData","url","latestMapIndex","latestMapDate","moment","date","format","dateFormat","latestCreatedAt","createdAt","mapFound","isMapFilesPending","sceneError","getSceneData","sceneMapType","farmId","mapsData","noMapImage","svgs","NoMapImage","getLatestFarmMapFileById","sort","a","b","Date","id","getSceneAndSceneFile","getJobSelectObjectData","JobsStatusValues","submittedStatus","acceptedStatus","runningStatus","pendingRetryStatus","failedStatus","succeededStatus","stoppedStatus","getPNGFilefromSceneFiles","pngUrl","ele","caseInsensitiveStringComparator","localeCompare","getAffectedDevicesCount","sensorMeasures","condition","field","filteredMeasures","Set","sensorModelIds","this","props","sensorModels","sensorModel","some","sensorMeasure","includes","deviceIds","sensors","sensor","sensorModelId","devices","device","tabs","dashboard","TabDashboardIconPath","DevicesButtonPath","SensorsButtonPath","deployments","TabDeploymentsIconPath","maintenance","TabMaintenanceIconPath","packages","TabPackagesIconPath","layouts","TabLayoutsIconPath","example","InfoBubbleIconPath","farms","FarmsButtonPath","jobs","JobsButtonPath","rules","RulesButtonPath","MapsButtonPath","alerts","AlertsIconPath","generic","DeviceGenericIconPath","sensorhub","SensorboxIconPath","subedge","SubedgeIconPath","gateway","deviceModelGateway","GatewayIconPath","deviceModelGatewayBig","GatewayBigIconPath","node","NodeIconPath","nodeBig","NodeBigIconPath","online","OnlineIconPath","offline","OfflineIconPath","onlineBig","OnlineBigIconPath","calendar","CalendarIconPath","ackAlert","AckAlertIconPath","FilterPath","appliedFilter","AppliedFilterPath","addDevice","addDevicePath","apply","ApplyIconPath","cancelX","CancelXIconPath","abort","AbortButtonPath","waiting","WaitingButtonPath","rejected","RejectedButtonPath","downloadButton","DownloadButtonPath","carat","CaratIconPath","changeStatus","ChangeStatusPath","checkmark","CheckmarkIconPath","chevron","ChevronIconPath","chevronRight","ChevronRightIconPath","closeAlert","CloseAlertIconPath","colon","ColonIconPath","farmbeats","FarmbeatsIconPath","CopyIconPath","critical","CriticalIconPath","disableToggle","DisableToggleIconPath","disabled","DisabledIconPath","edit","EditIconPath","ellipsis","EllipsisIconPath","enableToggle","EnableToggleIconPath","error","ErrorIconPath","failed","FailedIconPath","glimmer","GlimmerIconPath","hamburger","HamburgerIconPath","info","InfoIconPath","infoBubble","links","LinksIconPath","linkTo","LinkToPath","loadingToggle","LoadingToggleIconPath","manageFilters","ManageFiltersIconPath","physicalDevice","PhysicalDeviceIconPath","plus","PlusIconPath","questionMark","QuestionMarkIconPath","radioSelected","RadioSelectedIconPath","radioUnselected","RadioUnselectedIconPath","reconfigure","ReconfigureIconPath","refresh","RefreshIconPath","ruleDisabled","RuleDisabledIconPath","ruleEnabled","RuleEnabledIconPath","search","SearchIconPath","settings","SettingsIconPath","simmanagement","SIMManagementIconPath","simulatedDevice","SimulatedDeviceIconPath","trash","TrashIconPath","upload","UploadIconPath","warning","WarningIconPath","gatewayBig","XIconPath","datePicker","DatePickerIconPath","themedPaths","checkmarkBubble","dark","IconDarkCheckmarkBubble","light","IconLightCheckmarkBubble","IconDarkInfoBubble","IconLightInfoBubble","questionBubble","IconDarkQuestionBubble","IconLightQuestionBubble","Validator","constructor","validator","validators","rejectors","check","checker","msg","checkDuplicate","checkerArray","reject","rejector","shouldReject","hasErrors","notEmpty","latValidation","toString","RegExp","longValidation","reportingIntervalValidation","nameValidation","notDuplicate","valuesToCompare","form","editItemName","find","item","displayName","templateName","noSpaces","maxlength","maxLength","charlength","minlength","Link","args","super","onChange","target","type","checked","finalVal","mappers","mapFunc","set","to","selector","setter","state","getLinkedChildren","_","idx","forkTo","link","component","Error","setState","withValidator","LinkedComponent","Component","AzureMaps","window","atlas","zoomToGeometry","boundingBox","BoundingBox","fromData","setCamera","bounds","padding","AjaxError","className","message","ComponentArray","children","ContextMenu","ContextMenuAlign","left","SearchInput","rest","path","Dot","validSizes","validPatterns","Indicator","size","pattern","sizeClass","has","patternClass","ModalFadeBox","onClick","ModalContent","ModalHeader","ModalFooter","onClickDisagree","onClickAgree","withNamespaces","Modal","listenKeyboard","onClose","onOverlayClick","preventDefault","disagree","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","content","onEulaAgree","PageTitle","titleValue","PageContent","PcsGrid","registerResizeEvent","resizeEvents","next","onGridReady","gridReadyEvent","gridApi","api","sizeColumnsToFit","refreshRows","updateRowData","onSelectionChanged","onHardSelectChange","getSelectedRows","onRowClicked","rowEvent","defaultPcsGridProps","suppressDragLeaveHidesColumns","suppressCellSelection","suppressRowClickSelection","suppressLoadingOverlay","suppressNoRowsOverlay","sortingOrder","sortIndices","subscriptions","Rx","Subject","debounceTime","gridResizeDebounceTime","forEach","sub","unsubscribe","componentDidUpdate","prevProps","softSelectId","rowData","onSoftSelectChange","getSoftSelectId","context","style","restProps","gridParams","modules","AllCommunityModules","headerHeight","ROW_HEIGHT","rowHeight","rowClassRules","pcsLoadingTemplate","loadingContainer","suppressMovableColumns","PropertyCell","title","PropertyGrid","PropertyGridHeader","PropertyRow","ProtectedImpl","userHasPermission","permissions","userPermissions","permission","hasPermission","Protected","connect","getUser","ProtectedError","RefreshBar","isPending","svg","ThemedSvgContainer","theme","getTheme","paths","TimeSeriesInsightsLink","href","i18nKey","contextHelpUrls","exploreTimeSeries","TimeSeriesInsightsLinkContainer","Panel","PanelContent","PanelOverlay","PanelError","PanelErrorBoundary","hasError","componentDidCatch","PanelHeader","PanelHeaderLabel","PanelMsg","PanelParagraph","Grid","Cell","lastYearDate","jobTypeId","initialState","itemCount","successCount","changesApplied","farmName","isChecked","startDate","endDate","mapGenerated","farm","sensorMeasureName","flyoutName","jobError","selectDate","confirmStatus","noJobType","jobCreationError","GenerateMapsFlyout","subscription","updateMapsItems","onDateSelect","subtract","jobsDateFormat","onApplyEvent","bind","selectFarm","selectSensorMeasure","generateMaps","getsensorMeasureSelectObject","getFarmId","jobTypeslastUpdated","jobTypesError","fetchJobTypes","sensorsLastUpdated","isSensorsPending","fetchSensors","sensorModelsLastUpdated","isSensorModelsPending","fetchSensorModels","isDevicesPending","devicesLastUpdated","fetchDevices","satelliteIndicesMap","soilMoistureMap","sensorPlacementMap","appInsights","trackEvent","picker","insertJob","jobQuery","mapType","requestProps","stringify","JobsService","submitJob","toNewJobsRequestModel","job","formIsValid","farmNameLink","every","y","sensorMeasureNameLink","validFarm","validsensorMeasure","sensorMeasureNames","concat","soilMoistureMeatureType","from","farmsSelectObject","isJobTypesPending","isFarmsPending","farmsError","jobTypeName","jobTypes","isApiPending","jobType","weekendDate","today","onSubmit","pathname","matchProp","clearable","searchable","icon","placeholder","defaultChecked","String","inputValue","SuccessMessage","successMsg","primary","GenerateMapsFlyoutContainer","farmsMap","getFarmsMap","getSensors","getSensorModels","getDevices","getJobTypes","getSensorLastUpdated","getSensorPendingStatus","getSensorModelLastUpdated","getSensorModelPendingStatus","getDevicesLastUpdated","getDevicesPendingStatus","getJobTypesError","getJobTypesPendingStatus","getJobTypesLastUpdated","dispatch","jobsEpics","actions","fetchFarms","farmEpics","sensorEpics","deviceEpics","jobsRedux","src","alt","TableRenderer","colonAvailable","itemKey","itemValue","PropertiesTable","leftTableData","rightTableData","isTableColon","defaultProps","createAction","staticPayload","creator","payload","meta","handleUncaughtError","Observable","empty","createEpicCase","params","rawType","epic","rawEpic","action","action$","store","catch","ofType","flatMap","chooseEpicParam","createEpicScenario","cases","scenario","caseName","actionTypes","epics","getEpics","createReducerScenario","multiType","reducer","createReducerCase","reducers","actionReducers","actionName","actionType","matchTypes","reducerMapping","getReducer","errorPendingInitialState","pending","setPending","flag","setError","resetPendingAndErrorReducer","pendingReducer","errorReducer","resetErrorReducer","getPending","getError","toActionCreator","actionCreator","fromAction","baseUrl","process","REACT_APP_BASE_SERVICE_URL","global","DeploymentConfig","backendEndpoint","serviceUrls","auth","config","iotHubManager","telemetry","deviceSimulation","diagnostics","privacy","template","scene","sceneFile","deviceModel","roleAssignment","roleDefinition","graphApiUsers","accessDenied","rolesAndPermissions","ruleActionsEmail","deploymentPriority","apiGetAllMaxItems","graphApiUserBufferSize","showWalkthroughExamples","defaultAjaxTimeout","maxRetryAttempts","retryWaitTime","retryableStatusCodes","paginationPageSize","smallGridPageSize","clickDebounceTime","dashboardRefreshInterval","telemetryRefreshInterval","actionSetupPollingInterval","actionSetupPollingTimeLimit","simulationId","maxTopAlerts","maxAlertsCount","mapCenterPosition","ruleSeverity","alertStatus","open","closed","acknowledged","maxLogoFileSizeInBytes","edgeDevice","deviceType","simulated","physical","jobModel","submitted","accepted","running","pendingRetry","succeeded","stopped","stopRequested","authenticationType","symmetricKey","x509","authenticationKey","autoKey","manualKey","Flyout","FlyoutHeader","FlyoutTitle","FlyoutCloseBtn","FlyoutContent","AccordionProvider","toggle","accordionIsOpen","isCollapsable","isClosed","accordionIsCollapsable","getChildContext","toggleAccordion","Children","only","childContextTypes","PropTypes","bool","isRequired","withAccordion","ComponentToWrap","contextTypes","AccordionCollapsableContent","Container","collapsable","Header","sectionProps","Content","Title","CloseBtn","Section","reactPlugin","ReactPlugin","globallyUniqueSessionId","uuidv4","initialize","instrumentationKey","historyObject","ApplicationInsights","maxBatchInterval","disableFetchTracking","extensions","extensionConfig","identifier","history","loadAppInsights","addTelemetryInitializer","telemetryItem","ext","app","sesId","handleError","of","redux","registerError","forkJoin","deviceService","getDeviceModels","FarmService","getFarms","devicetypes","devicetypemap","Map","deviceTypeNamemap","farmMap","deviceModelType","deviceModelId","deviceModelName","deviceMapWithParent","devicePrarent","parentDeviceId","parentDevice","updateDevices","fetchDeviceModel","updateDevicesModel","refreshDevices","$actions","appRedux","updateActiveDeviceGroup","distinctUntilChanged","deleteDevicesById","deleteDevice","deleteDevices","deviceSchema","schema","Entity","deviceListSchema","deviceModelSchema","deviceModelListSchema","entities","deviceModelEntities","deviceModelItems","lastUpdated","deviceModelLastUpdated","fetchableTypes","fetchDevicesByCondition","fetchEdgeAgent","normalize","result","deviceModels","updateDevicesByCondition","devicesByCondition","isFetching","spliceArr","idxAcc","payloadItem","$unset","$splice","insertDevices","inserted","isNew","$merge","modifyDevices","updateTags","updatedTagData","updatedTags","updatedDevices","tags","deletedTags","updateProperties","updatedPropertyData","updatedProperties","desiredProperties","deletedProperties","updateModuleStatus","updateAction","deviceModuleStatus","resetPendingAndError","getDevicesReducer","getEntities","getDevicesError","getDeviceModelEntities","getDeviceModelItems","getDeviceModelError","getDeviceModelLastUpdated","getDeviceModelsPendingStatus","createSelector","getDeviceById","getDeviceModuleStatusPendingStatus","getDeviceModelsMap","deviceEntities","deviceItems","devicesMap","deviceModelsMap","methods","resources","readAll","resource","createFarms","editFarms","deleteFarms","addDevices","deleteSensors","createMaps","createRules","deleteRules","updateRules","addUser","deleteUser","readRoleAssignments","authDisabledUser","email","roles","values","getAtomicPermissions","atomicPermissions","expandedActions","expandedNotActions","notActions","expandedResources","resourceTypes","allowedActions","ruleCalculations","ruleOperators","ruleAPIOperators","toRulesModel","toRuleModel","lastModifiedAt","severityLevel","status","severity","description","properties","deleted","updatedConditions","operator","toAlertsModel","toAlertModel","ruleDescription","ruleId","ruleActions","deviceMsgReceived","toMessagesModel","toTelemetryModel","timestamps","continuationToken","toStatusModel","toEditRuleRequestModel","Calculations","Actions","act","parameters","notes","recipients","subject","Conditions","toTelemetryRequestModel","alarmQueryModel","order","limit","toTelemetryQueryModel","alertQueryModel","sensorId","searchSpan","toFarmsModel","toFarmModel","toNewFarmRequestModel","crops","address","toMapsItemModel","source","jobId","sequence","toSceneFileItemModel","sceneId","downloadSasUrl","toSceneFileItemsModel","toMapsItemsModel","toJobsItemModel","currentState","output","farmIds","arguments","typeId","toJobTypesItemModel","toJobTypesItemsModel","toJobsItemsModel","argumentsObject","duration","diff","asDays","farm_id","farm_ids","force","measure_name","SensorModelsModel","SensorModelModel","manufacturer","productCode","SensorsModel","SensorModel","hardwareId","location","port","RoleDefinitionsModel","RoleDefinitionModel","RoleAssignmentsModel","RoleAssignmentModel","roleDefinitionId","objectId","objectIdType","tenantId","toNewRoleAssignmentRequestModel","sensorService","updateSensors","updateSensorModels","deleteSensorsById","deleteSensor","deleteSensorsbyId","sensorSchema","sensorListSchema","sensorModelSchema","sensorModelsListSchema","sensorEntities","sensorItems","sensorlastUpdated","sensorModelEntities","sensorModelItems","getSensorsReducer","getSensorError","getSensorModelsError","ENDPOINT","RULES_ENDPOINT","TelemetryService","HttpClient","post","put","queryFilter","getTelemetry","toISOString","start","end","never","body","getTelemetryByMessages","delete","deletedRuleId","toDevicesModel","deviceModelsModel","toDeviceModel","deletedDeviceId","JOB_ENDPOINT","JOBTYPE_ENDPOINT","patch","SCENE_ENDPOINT","SCENE_FILE_ENDPOINT","mapTypes","types","sceneFileType","mapFileParams","sceneFileTypes","generateDownloadSASUrl","query","getMapsItems","delay","AlertService","roleService","userObjId","updateFarms","deleteFarm","farmSchema","farmListSchema","farmEntities","farmItems","insertFarm","modifyFarm","getFarmsReducer","getFarmEntities","getFarmItems","getFarmsLastUpdated","getFarmsError","getFarmsPendingStatus","count","getFarmById","FarmEntities","FarmItems","FarmMap","initializeApp","fetchUser","fetchCurrentUserPermissions","AuthService","getCurrentUser","updateUser","currentUser","getRoleAssignmentsByUserObjId","accountIdentifier","roleAssignments","getRoleDefinitionById","updateUserPermissions","fetchTelemetryStatus","getStatus","updateTelemetryProperties","detectRouteChange","actionSettingsSchema","actionSettingsListSchema","deviceGroups","deviceGroupFilters","activeDeviceGroupId","version","releaseNotesUrl","timeSeriesExplorerUrl","logo","isDefaultLogo","timeInterval","azureMapsKey","user","consentGranted","actionSettings","applicationPermissionsAssigned","actionPollingTimeout","fetchDeviceGroups","fetchDeviceGroupFilters","updateLogo","fetchLogo","fetchActionSettings","pollActionSettings","fetchSolutionSettings","userName","eTag","$push","tsiExplorerUrl","updateSolutionSettings","updateActionSettings","pick","temp","updateActionPollingTimeout","getReleaseInformation","updateTimeInterval","getAppReducer","getVersion","getTimeSeriesExplorerUrl","getAzureMapsKey","getSettings","getLogo","getCurrentUserEmail","getName","getReleaseNotes","setLogoError","setLogoPendingStatus","getLogoPendingStatus","getTimeInterval","getActionSettings","getActionSettingsPendingStatus","getActionSettingsError","getActionPollingStatus","getActionPollingError","getActionPollingTimeout","getApplicationPermissionsAssigned","withAuth","graphAuth","ajax","method","createAjaxRequest","ajaxResponse","responseType","ajaxError","throw","RetryableAjaxError","classifyError","retryWhen","retryHandler","getAccessTokenGraph","getAccessTokenApi","token","jsonHeaders","headers","authenticationHeaders","timeout","retryAttempts","retryDelay","error$","zip","range","attempt","isRetryable","Accept","Authorization","Svg","svgsSupported","SVGSVGElement","svgClassName","checkForEmpty","gridValueFormatters","TimeRenderer","formattedTime","utc","local","unix","formatTime","EMPTY_FIELD_VAL","LinkRenderer","svgPath","onLinkClick","NavLink","getSvg","SeverityRenderer","iconOnly","cleanValue","cellClasses","SoftSelectLinkRenderer","stopPropagation","deviceModelTypeRenderer","deviceStatusRenderer","JobStatusRenderer","onMouseEnter","FarmSelectRenderer","onFarmSelect","selectedFarm","onFarmSelectChange","toSelectOptions","farmOptions","selectFarmLink","ruleNameRenderer","color","rulesHandleError","rulesRedux","rulesRegisterError","fetchAlerts","getAlerts","alertsRedux","updateAlerts","alertsRegisterError","alertsHandleError","fetchRules","getRules","deleteRule","alertSchema","alertListSchema","ruleSchema","ruleListSchema","alertsInitialState","alertEntities","alertItems","alertLastUpdated","rulesInitialState","ruleEntities","ruleItems","ruleLastUpdated","alertsFetchableTypes","rulesFetchableTypes","alertsIsFetching","insertRules","modifyRules","updateRuleCount","updateRuleLastTrigger","lastTrigger","updateRuleWithFarmId","rulesIsFetching","getAlertsReducer","getAlertEntities","getAlertsLastUpdated","getAlertsError","getAlertsPendingStatus","getAlertsRuleBased","ruleAdded","alertsByRule","alert","ruleName","counts","getAlertCountsByRuleId","lastOccurrence","getAlertLatestOccurrenceByRuleId","total","latestOccurrence","currentOccurrence","isAfter","getRulesReducer","getRulesLastUpdated","getRulesError","getRulesPendingStatus","includeDeleted","sortableConditions","getRuleById","checkboxColumn","lockPosition","cellClass","headerClass","suppressResize","suppressSizeToFit","resizable","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMovable","width","fetchJobs","getJobsItems","updateJobs","getJobTypesItems","updateJobTypes","abortJob","abortJobs","itemSchema","itemListSchema","jobTypesSchema","jobTypesListSchema","jobEntities","jobTypesEntities","jobItems","jobTypesItems","jobLastUpdated","jobtypeLastUpdated","jobTypeLastUpdated","getJobsReducer","getJobsLastUpdated","getJobsError","getJobsPendingStatus","getJobTypesEntities","getJobTypesMap","jobTypeEntities","jobTypeItems","JobTypeMap","getJobs","jobTypesMap","FarmIds","FarmNamesArray","FarmsNames","start_date","fetchRoleAssignments","getRoleAssignments","updateRoleAssignments","fetchRoleDefinitions","getRoleDefinitions","updateRoleDefinitions","deleteRoleAssignmentById","deleteRoleAssignment","do","callbacks","success","addRoleAssignment","mergeRoleAssignment","roleAssignmentSchema","roleAssignmentListSchema","roleDefinitionSchema","roleDefinitionListSchema","roleAssignmentEntities","roleAssignmentItems","roleAssignmentLastUpdated","roleDefinitionEntities","roleDefinitionItems","roleDefinitionLastUpdated","roleDefinitions","clearError","role","getRolesReducer","getRoleAssignmentLastUpdated","getFetchRoleAssignmentError","getAddRoleAssignmentError","getDeleteRoleAssignmentError","getFetchRoleAssignmentPendingStatus","getAddRoleAssignmentPendingStatus","getDeleteRoleAssignmentPendingStatus","getRoleDefinitionLastUpdated","getRoleDefinitionError","getRoleDefinitionPendingStatus","use","Backend","LanguageDetector","reactI18nextModule","init","fallbackLng","ns","defaultNS","debug","interpolation","escapeValue","react","wait","cellResponse","fetchMapFiles","mapFiles","updateMapsFiles","fetchMaps","updateMaps","mapEntities","mapItems","isTooltipVisible","updateTooltip","imageType","imageUrl","imageTypeStartIndex","imageTypeLastIndex","substring","getMapsReducer","getMapEntities","getTooltipPendingStatus","getMapItems","getMapsLastUpdated","getMapsError","getMapsPendingStatus","getMaps","mapName","getMapTypes","mapTypeEntities","mapTypeItems","deviceColumnDefs","cellRendererFramework","comparator","warnings","valueFormatter","childDeviceColumnDefs","defaultDeviceGridProps","enableColResize","multiSelect","pagination","rowSelection","defaultChildDeviceGridProps","TelemetryPanelContainer","devicesError","sensorsError","sensorModelsError","TelemetryPanel","propTypes","showHeader","DeviceProperties","React","latitude","longitude","reportingInterval","filterByParentId","memoizeOne","list","parentId","object","DeviceDetails","sensorLastUpdated","devicesGridProps","domLayout","suppressFlyouts","filteredSensorIds","sensorIds","withAITracking","DeviceDetailsContainer","deviceLastUpdated","closedFlyoutState","openFlyoutName","softSelectedDeviceId","softSelectedId","DevicesGrid","deviceGridApi","openAssociateDevicesFlyout","openModel","ModelName","openModelName","closeModel","selectedDeviceList","openFlyout","openDelePopup","openPopup","getOpenFlyout","closeFlyout","getDeleteModel","deleteConfirmation","returnObjects","deleteItem","deleteBtn","deleteDevicePending","deleteModalError","deleteModalSuccess","setSelectedDevices","selectedDevices","onContextMenuChange","contextBtns","associateDevices","populateDevicesState","gridProps","deltaRowDataMode","enableSorting","unSortIcon","getRowNodeId","setSelected","isSelected","devicesEpics","closedDeletePopupState","openDeleteDevicePopup","Devices","closeDeletePopup","searchOnChange","setQuickFilter","ruleDeleted","deviceList","deviceError","farmLastUpdated","farmError","DevicesContainer","ids","devicesRedux","rulesColumnDefs","severityIconOnly","explore","defaultRulesGridProps","ActionEmailSetup","clickedSetup","actionSettingsIsPending","actionSettingsError","actionIsPolling","actionsEmailIsEnabled","actionsEmailSetupUrl","showPending","showError","showSetupLink","showSetupIncomplete","showSetupComplete","ActionEmailSetupContainer","actionPollingError","RuleSummary","devicesAffected","RuleSummaryAuto","call","RuleSummaryAutoContainer","string","conditionKey","actionKey","newCondition","newAction","isHealthRule","isAlphaNumericRegex","nonAlphaNumeric","RuleEditor","fetchApiData","sensorModelsIsPending","setFormState","formData","actionEnabled","enabled","ruleStatus","editableRule","toSelectOption","addCondition","conditionsLink","filteredModelMeasures","deleteCondition","index","newEmail","calculation","timePeriod","updateRule","updatedRule","isEditedRuleSucceeded","createRule","createdRule","isNewRuleSucceeded","onGroupIdChange","prevState","sensorMeasuresForCurrentFarm","fieldQueryPending","getDeviceCountAndFields","formControlChange","onAddEmail","newEmailLink","newState","deleteEmail","onStatusToggle","onCalculationChange","onFieldChange","onOperatorChange","onSeverityChange","onCloseClick","deletePill","onActionToggle","sensorError","fieldOptions","groupId","farmsLastUpdated","affectedDevicesCount","componentWillMount","componentWillReceiveProps","nextProps","ruleNameLink","deviceGroupLink","actionsLink","measureNamesAlreadyAdded","uniqueSensorMeasures","measure","add","getConditionFields","layoutList","Matches","sensortype","sensorTypeId","layoutId","moduleFields","healthMonitorId","listSKU","filteredSensors","requiredValidator","formDataLink","descriptionLink","severityLink","enabledLink","conditionLinks","conditionLink","fieldLink","operatorLink","valueLink","isNaN","actionLinks","actionLink","parametersLink","recipientsLink","notesLink","subjectLink","conditionsHaveErrors","actionsHaveErrors","operatorOptions","onKeyPress","pills","onSvgClick","altSvgText","actionsLength","RuleEditorContainer","EditRuleFlyout","onTopXClose","NewRuleFlyout","RuleViewer","fillData","checkData","RuleViewerContainer","RuleDetailsFlyout","goToEditMode","isEditable","RuleStatus","onToggle","changeRuleStatus","requestPropList","isRuleStatusChanged","ruleStatusError","RuleStatusContainer","DeleteRule","isRuleDeleted","ruleDeletionError","DeleteRuleContainer","rulesAlertsEpics","softSelectedRuleId","RulesGrid","openEditRuleFlyout","openStatusFlyout","openDeleteFlyout","openNewRuleFlyout","setSelectedRules","selectedRules","addNewRule","Rules","rulesGridApi","getRulesList","farmList","ruleslist","rulesList","isRulesPending","refreshRulesData","RulesContainer","farmColumnDefs","crop","createdOn","defaultFarmGridProps","eviBlobUrl","eviBlobUrlError","FarmGrid","farmGridApi","rowId","selectedObjs","deviceCount","softSelectedDevice","EmptyFarm","backgroundColor","FarmsSummary","onCloseFlyout","Farms","farmsLength","generalProps","Switch","Route","exact","Redirect","FarmsContainer","OverviewPanel","onlineDeviceCount","offlineDeviceCount","nodesCount","gatewaysCount","deviceDataloaded","showOverlay","totalDevices","modalClose","mapDownload","FullscreenControl","_options","hideIfUnsupported","_darkColor","_fullscreenCss","onAdd","_map","isSupported","_resource","_getTranslations","getStyle","language","events","_mapStyleChanged","_getColorFromMapStyle","mapContainer","getMapContainer","css","document","createElement","changeEventName","innerHTML","appendChild","_container","classList","setAttribute","flexDirection","_button","view","isFullscreen","exitFullscreen","requestFullscreen","_updateBtn","onRemove","remove","removeClass","addClass","ariaLabel","exit","lang","AzureMap","initializeMap","shouldComponentUpdate","mapDivId","center","zoom","onMapReady","controls","control","StyleControl","ZoomControl","MapPanel","popup","Popup","calculatePins","openDeviceDetails","selectedDeviceId","closeDeviceDetails","mounting","geoJson","polygon","Polygon","MultiPolygon","addPolygons","opacity","overwrite","sensorPlacementLatLong","normal","devicesToPins","addPins","fillColor","extractGeoLocatedDevices","devicePin","latLong","Feature","Point","zoomToPins","pins","lons","lats","swLon","Math","min","swLat","neLon","max","neLat","setCameraBounds","mapKeyIsPending","page","Fragment","right","MapPanelContainer","SensorPlacementMap","isModalOpen","sensorPlacementUrl","onSensorPlacementClick","onModalclose","generateSensorPlacementUrl","modalName","LatestMapScene","getLatestSensorPlacementMapByFarmId","sensor_placements","noMapUrl","downloadOptionRenderer","option","downloadMapFile","extension","xhr","XMLHttpRequest","getDownloadRequest","onload","URL","webkitURL","createObjectURL","tag","download","contentTypeExtensionsMap","click","removeChild","send","mapDate","isMapFound","mapModalType","closeMenuOnSelect","defaultValue","optionRenderer","SatelliteIndicesMap","eviSceneDataCallback","eviSelectedObject","eviMapData","eviUrl","isEviMapFound","eviMapFileDownloadSelectObject","ndwiSceneDataCallback","ndwiSelectedObject","ndwiMapData","ndwiUrl","isNdwiMapFound","ndwiMapFileDownloadSelectObject","onError","isModalopen","isEviMapBroken","isNdwiMapBroken","farmNameLoading","onMapImageClick","getEviSceneData","getNdwiSceneData","modalMapName","eviMapType","ndwiMapType","SoilMoistureMap","sceneDataCallback","onImgError","onSoilMoistureClick","getSoilMoistureSceneData","isSoilMoistureImageBroken","AlertsPanel","minWidth","nominalDeviceLayer","warningDevicesLayer","criticalDevicesLayer","classname","cluster","pin","features","setPopupOptions","buildDevicePopup","popupContentBox","innerText","onclick","geoLocatedDevices","deviceToMapPin","Drone","onDroneClick","getDroneSceneData","isDroneImageBroken","deleteFarmPending","openModalName","currentActiveAlerts","topAlerts","alertsPerDeviceId","soilMoistureUrl","openWarningCount","openCriticalCount","countMaxAlerts","devicesInAlert","lastRefreshed","FarmDetails","refreshRules","rulesError","getOpenModal","itemId","closeModal","onDelete","openDeleteFarm","goBack","getDeviceStatus","onlineCount","offlineCount","gatewayCount","DeviceCount","farmIdFromPathNameFirstIndex","farmIdFromPathNameLastIndex","farmIdFromPathName","farmNameError","getSensorIds","deviceModelsLastUpdated","deviceModelsError","mapsError","mapsLastUpdated","extractfarmNames","farmsSelectObj","satelliteIndicesJobTypeName","soilMoistureJobTypeName","sensorPlacementJobTypeName","isDeviceModelsPending","selectObject","currentFarm","isFlyoutOpen","AzureMapError","codeSource","FarmDetailsContainer","getRuleEntities","isMapsPending","mapsEpics","farmRedux","ToolTip","closeTooltip","mapsColumnDefs","defaultmapsGridProps","blobUrlError","MapsGrid","mapsGridApi","getFarmByID","farmid","eachRowData","getSceneById","onModalClose","FilterControl","handleOnChange","getElementByFilterContent","FormElementType","select","filterKey","List","typeProps","selectedValue","singleDatePicker","IconClass","containerType","containerIcon","containerPlaceHolder","containerValue","getFilterCount","stateKey","getOwnPropertyNames","onFilterClick","filterCount","isFilterOn","appliedFilters","filterConfig","applyCallback","onResetClick","stateObjfromProps","FilterList","header","element","farmsNameObject","mapsTypesObject","filteredMaps","Maps","mapGridApi","toSelectOptionFromArray","updateToolTipPendingStatus","filterMapsFlyout","openFilterFlyout","handleChangeMapType","selectedMapType","handleChangeFarmName","selectedFarmName","FilterControlstate","filterState","filterMapType","map_type","selectedDate","farm_name","isBetween","modalIsOpen","modalclose","modalopen","isModalopentrue","isTooltipPending","resetCallback","MapContainer","mapsRedux","jobsColumnDefs","typeOfJob","cellStyle","overflow","startTime","endTime","defaultjobsGridProps","selectedJobs","abortJobPending","JobsGrid","openModal","ModalName","abortJobsClick","jobsGridApi","setselectedJobs","allowAbortJob","modal","jobTypesObject","filteredJobs","Jobs","jobGridApi","isCalculating","selectedStatus","selectedJobType","filtersApplied","jobsLastUpdated","jobsError","filterJobsFlyout","filterJobsGrid","Filterobj","job_type","isJobsPending","JobsContainer","sensorsColumnDefs","sensorType","portType","portName","defaultSensorGridProps","SensorProperties","sensorData","SensorMeasuresArray","sensorName","SensorMeasuresList","modelName","locationCordinate","SensorDetails","SensorDetailsContainer","softSelectedSensorId","softSelectedSensorData","selectedSensorList","SensorsGrid","sensorGridApi","clickContextBtn","sensorListUpdate","getModel","deleteSensorPending","onColumnMoved","onSortChanged","Sensors","locFunc","lat","refreshSensorData","sensorDataMappingFromProp","sensorModelList","Sensorslist","modelType","sensorsList","Ids","sensorList","SensorContainer","sensorRedux","alertsColumnDefs","totalCount","defaultAlertsGridProps","softSelectedAlert","AlertsGrid","alertsGridApi","selectedAlerts","Alerts","rulesLastUpdated","alertsLastUpdated","alertsError","onRefresh","isAlertsPending","AlertsContainer","DeleteModal","genericCloseClick","eventName","par","Btn","btnProps","BtnToolbar","ErrorMsg","FileInput","setFileInputRef","fileInput","clickFileInput","accept","ref","FormLabel","formGroupId","htmlFor","labelProps","idCounter","FormGroup","childrenWithProps","child","isValidElement","cloneElement","Duration","newValue","createValueObject","liftChange","onBlur","evt","hours","minutes","seconds","ms","convertMsToUnits","floor","convertUnitsToMs","units","padStart","genericProps","onFocus","setTimeout","onChangeSelect","Select","FormControl","edited","selectControl","controlProps","getErrorMsg","errorState","valueOverrides","errorMsg","FormSection","Hyperlink","Pill","PillGroup","pill","radioInputCnt","Radio","radioInputElement","createRef","radioProps","contentChildren","current","SectionDesc","SummaryBody","SummaryCount","SummarySection","ToggleBtn","svgProps","Tooltip","SuccessMsg","deviceModelModel","createIoTHubDevice","toNewDeviceRequestModel","elevation","fetchUsers","bufferCount","userIds","UserService","getUsersByIds","mergeAll","mergeUsers","userSchema","userListSchema","userEntities","userItems","userlastUpdated","updateUsers","users","getUsersReducer","getUserLastUpdated","getUserError","getUserPendingStatus","getUsers","PolygonDrawingTool","beforeLayer","drawingEndedCallback","_self","_datasource","DataSource","_activeShape","sources","pl","layer","PolygonLayer","layers","LineLayer","strokeColor","strokeWidth","_dragHandleLayer","BubbleLayer","radius","mouseUp","ring","getCoordinates","setCoordinates","dragHandleSelected","pos1","pos2","dLat","PI","dLon","sin","cos","atan2","sqrt","groundResolution","pow","getCamera","pixelDistance","_handleRadius","endDrawing","mouseMove","clear","startDrawing","getCanvasContainer","cursor","Shape","setOptions","visible","datasource","drawingTools","getGeoJSON","setGeoJSONInvalidStatus","centerSet","currentGeoJSON","isPolygon","GeoJSON","polygonLayer","fetch","then","results","json","searchResults","latLon","lon","polygonShape","getElementById","styleOption","setStyle","searchAddress","searchQuery","searchUnsuccessful","showList","handleSearchInputChange","KeyCodes","Enter","DescriptionPanel","selectedPanel","geoSelect","toggleGeoJSONInput","geoSelectValue","isGeometryEmpty","disableMarkOnMap","isInvalid","geoString","isMultiPolygon","handleGeoJSONInput","geoJSONValue","invalid","geoJSONObject","valid","sampleGeoJSON","FarmEditor","newFarm","editableFarm","cropSuggestions","updateFarm","mergeMap","updatedFarm","isEditFarmSuccess","createFarm","isCreateFarmSuccess","isGeoJSONInvalid","isFormValid","farmAddressLink","farmCropLink","geoJSON","newForm","azureMapsKeyError","submitButtonDisabled","createFarmMode","FarmEditorContainer","withRouter","resp","errorMessage","InnerExceptionMessage","ExceptionMessage","Message","errorCode","authEnabled","warn","msalConfig","clientId","aad","appId","authority","instance","tenant","redirectUri","origin","msalInstance","UserAgentApplication","handleRedirectCallback","isDisabled","successCallback","doLoginIfNotLoggedInOrLoggingIn","getAccount","getLoginInProgress","loginRedirect","scopes","logout","create","observer","tokenRequest","acquireTokenSilent","accessToken","complete","acquireTokenRedirect","transformTelemetryResponse","getCurrentTelemetry","property","dataset","measureMap","Settings","openManageUsers","onFlyoutClose","toggleDiagnostics","diagnosticsOptIn","updateDiagnosticsOptIn","desiredSimulationState","isSimulationEnabled","logoFile","applicationName","loading","toggledSimulation","madeLogoUpdate","username","setLogoPending","rel","farmbeatsVersion","AccessControl","clearRolesError","requestedUserIds","setSuccess","getGridData","roleAssignmentFetchPending","roleDefinitionPending","userPending","reqdUserIds","userError","roleAssignmentFetchError","roleDefinitionError","userRoleAssignments","gridData","emailOrUpn","mail","userPrincipalName","skippedRoleAssignments","deleteRoleAssignmentsById","roleAssignmentAddError","roleAssignmentDeleteError","roleAssignmentAddPending","roleAssignmentDeletePending","DeleteRoleAssignmentRenderer","cellRendererParams","errorCallback","suppressSorting","defaulGridProps","dataFetchError","onActionError","actionPending","telemetryLive","isTelemetryPending","telemetryError","isRealTimeTelemetry","telemetryCustom","telemetryCustomDateRange","buttonActive","measureNameTypeMap","selectedMeasureType","selectedMeasureName","refreshEvent","getSensorMeasureData","telemetryPanelRefresh$","filterSensorIds","onLiveButtonClick","getSensorMeasureNameUnitMap","getCustomTelemetryStream","switchMap","getTelemetryBySensorIdP1D","toArray","getTelemetryByDisplayName","telemetryState","validSensorModelIds","measureNameMeasureTypeList","deviceIdNameList","deviceIdNameMap","sensorIdDisplayNameList","sensorIdDisplayNameMap","prototype","hasOwnProperty","sensorMeasureNameUnitList","unit","telemetryCurrent","getTelemetryBySensorIdForDateRange","refreshTelemetryData","istelemetryPending","tsiEndpoint","sensorMeasureNameUnitMap","classNameLive","classNameDatePicker","measureType","tKey","telemetryKey","colors","chartColorObjects","toUrl","selectedTab","associateDeviceError","isAssociateDevicePending","deviceFarmMapping","isAssociateDevicesSuccessful","AssociateDevices","selectedDevice","editableDevice","updateDevice","updatedDevice","deviceParent","onDeviceFarmMappingChange","newDeviceMapping","areDevicesAssigned","validity","deviceModelError","onClickTabChange","addDeviceError","isAddDevicePending","isAddDeviceSuccessful","AddDevices","addDeviceColumnDefs","deviceName","defaultAddDeviceGridProps","AddDeviceGrid","addDeviceGridApi","SelectDevices","mapDevicesToFarm","associateDeviceColumnDefs","assignToFarm","defaultAssociateDeviceGridProps","AssociateDeviceGrid","associateDeviceGridApi","farmApplyToAll","deviceMapping","ManualAssociate","onApplyFarmToAll","row","applyToAllLink","AccessControlContainer","userLastUpdated","userEpics","roleEpics","updateRoleAssignment","rolesRedux","DatePickerElement","minDate","showDropdowns","maxDate","opens","onApply","module","exports","getDisplayValueFromSuggestion","suggestion","startsWith","suggestionRenderer","matchingValueFromSuggestion","ProfileContainer","SettingsContainer","appEpics","ApplicationSettings","renderSvgLogo","renderUploadContainer","applicationNameLink","isValidFile","currentLogo","previewLogo","newLogoName","currentApplicationName","fileNameClass","onUpload","enableEdit","files","validating","validFile","searchString","substr","defineProperty","searchElement","fromIndex","TypeError","o","len","n","k","abs","endsWith","searchStr","Position","targetLength","padString","repeat","ownProps","resArray","predicate","thisArg","kValue","configurable","writable","AssociateDevicesContainer","isFarmPending","isDevicePending","isDeviceModelPending","farmsEpics","deviceRedux","EditFarmFlyout","NewFarmFlyout","AddDevicesContainer","App","openSystemSettings","openUserProfile","initAppInsights","appInsightsInstrumentationKey","tabsConfig","labelId","pagesConfig","crumbsConfig","crumbs","matchParam","shellProps","denyAccess","AddUserContainer","AddUser","formValid","roleDefinitionOption","suggestions","suggestionsFetchSubscription","roleChangeHandler","inputChangeHandler","onSuggestionsFetchRequested","onSuggestionsClearRequested","getSuggestionValue","getUserSuggestions","emailId","getUserByEmailOrUpn","roleSelectOptions","autoSuggestInputProps","renderSuggestion","inputProps","renderInputComponent","spellCheck","deletePending","Crumb","Chevron","CrumbFromConfig","crumb","isLast","separator","Breadcrumbs","parentHasClass","searchClasses","searchClass","parentNode","docLinks","translationId","handleWindowMousedown","openDropdown","toggleDropdown","ProfileImagePath","HeaderContainer","NavIcon","TabLink","activeClassName","Navigation","collapseNav","innerWidth","lastWidth","collapsed","toggleExpanded","dispatchEvent","Event","isExpanded","getLogoPending","aria-label","tabProps","NavigationContainer","Main","PageNotFoundContainer","Shell","registerRouteEvent","listen","userEmail","PageNotFound","extend","TelemetryChart","handleWindowBlur","renderChart","handleWindowFocus","chartId","telemetryChartCount","tsiClient","TsiClient","lineChart","ux","LineChart","chartData","noAnimate","grid","legend","tooltip","canDownload","yAxisState","offset","TelemetryChartContainer","mapEpics","sensorsEpic","rootEpic","combineEpics","rootReducer","combineReducers","appReducer","devicesReducer","rulesAlertsReducer","farmReducer","mapReducer","jobsReducer","sensorsReducer","userReducer","roleReducer","AppContainer","isLocalhost","Boolean","hostname","register","navigator","refreshing","swUrl","serviceWorker","ready","registration","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","confirm","postMessage","onLoad","epicMiddleware","createEpicMiddleware","createStore","composeWithDevTools","applyMiddleware","configureStore","ReactDOM","registerServiceWorker"],"mappings":"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AAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,+B,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAA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","file":"static/js/main.2a3ee6ff.chunk.js","sourcesContent":["// Copyright (c) Microsoft. All rights reserved.\n\n// This code is a copy of the code made available by https://www.npmjs.com/package/camelcase\n// Since the original module isn't supported by create-react-app we are using the code manually here\n// as a workaround.\n\nconst preserveCamelCase = input => {\n  let isLastCharLower = false;\n  let isLastCharUpper = false;\n  let isLastLastCharUpper = false;\n\n  for (let i = 0; i < input.length; i++) {\n    const c = input[i];\n\n    if (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {\n      input = input.slice(0, i) + \"-\" + input.slice(i);\n      isLastCharLower = false;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = true;\n      i++;\n    } else if (\n      isLastCharUpper &&\n      isLastLastCharUpper &&\n      /[a-zA-Z]/.test(c) &&\n      c.toLowerCase() === c\n    ) {\n      input = input.slice(0, i - 1) + \"-\" + input.slice(i - 1);\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = false;\n      isLastCharLower = true;\n    } else {\n      isLastCharLower = c.toLowerCase() === c;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = c.toUpperCase() === c;\n    }\n  }\n\n  return input;\n};\n\nexport default (input, options) => {\n  options = Object.assign(\n    {\n      pascalCase: false\n    },\n    options\n  );\n\n  const postProcess = x =>\n    options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x;\n\n  if (Array.isArray(input)) {\n    input = input\n      .map(x => x.trim())\n      .filter(x => x.length)\n      .join(\"-\");\n  } else {\n    input = input.trim();\n  }\n\n  if (input.length === 0) {\n    return \"\";\n  }\n\n  if (input.length === 1) {\n    return options.pascalCase ? input.toUpperCase() : input.toLowerCase();\n  }\n\n  if (/^[a-z\\d]+$/.test(input)) {\n    return postProcess(input);\n  }\n\n  const hasUpperCase = input !== input.toLowerCase();\n\n  if (hasUpperCase) {\n    input = preserveCamelCase(input);\n  }\n\n  input = input\n    .replace(/^[.\\- ]+/, \"\") // Removed _ for displaying in Telemetry Chart\n    .toLowerCase()\n    .replace(/[.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase()); // Removed _ for displaying in Telemetry Chart\n\n  return postProcess(input);\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport dot from \"dot-object\";\nimport toCamelcase from \"./camelcase\";\nimport i18n from \"i18n\";\nimport update from \"immutability-helper\";\nimport { MapService } from \"services\";\nimport {\n  dateFormat,\n  downloadSASUrl,\n  date,\n  id,\n  fileType,\n  latestMapIndex,\n  createdAt,\n  // contentTypeInitials,\n  svgs,\n  JobsStatusValues,\n  pngImageType,\n  contentTypeLabelsMap\n} from \"utilities\";\nimport moment from \"moment\";\n\n/** Tests if a value is a function */\nexport const isFunc = value => typeof value === \"function\";\n\n/** Tests if a value is an object */\nexport const isObject = value => typeof value === \"object\";\n\n/** Tests if a value is an empty object */\nexport const isEmptyObject = obj =>\n  Object.keys(obj).length === 0 && obj.constructor === Object;\n\n/** Converts a value to an integer */\nexport const int = num => parseInt(num, 10);\n\n/** Converts a value to a float */\nexport const float = num => parseFloat(num, 10);\n\n/** Merges css classnames into a single string */\nexport const joinClasses = (...classNames) =>\n  classNames\n    .filter(name => !!name)\n    .join(\" \")\n    .trim();\n\n/** Convert a string of type 'true' or 'false' to its boolean equivalent */\nexport const stringToBoolean = value => {\n  if (typeof value !== \"string\") return value;\n  const str = value.toLowerCase();\n  if (str === \"true\") return true;\n  else if (str === \"false\") return false;\n};\n\n/** Returns true if value is an email address */\nexport const isValidEmail = value => {\n  return value.match(\n    /^$|^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  );\n};\n\n/** Returns either Items or items from the given object, allowing for either casing from the server */\nexport const getItems = response => response.Items || response.items || [];\n\n/**\n * Convert object keys to be camelCased\n */\nexport const camelCaseKeys = data => {\n  if (Array.isArray(data)) {\n    return data.map(camelCaseKeys);\n  } else if (data !== null && isObject(data)) {\n    return Object.entries(data).reduce((acc, [key, value]) => {\n      acc[toCamelcase(key)] = camelCaseKeys(value);\n      return acc;\n    }, {});\n  }\n  return data;\n};\n\n/** Takes an object and converts it to another structure using dot-notation */\nexport const reshape = (response, model) => {\n  return Object.keys(model).reduce(\n    (acc, key) => dot.copy(key, model[key], response, acc),\n    {}\n  );\n};\n\n/** Takes an object, camel cases the keys, and converts it to another structure using dot-notation */\nexport const camelCaseReshape = (response, model) => {\n  return reshape(camelCaseKeys(response), model);\n};\n\n/**\n * A helper method for translating headerNames and headerTooltips of columnDefs.\n * If headerTooltip is provided, it will be translated.\n * If headerTooltip is not provided, the headerName will be used to ensure headers\n * can be deciphered even when the column is too narrow to show the entire header.\n */\nexport const translateColumnDefs = (t, columnDefs) => {\n  return columnDefs.map(columnDef => {\n    const headerName = columnDef.headerName\n      ? t(columnDef.headerName)\n      : undefined;\n    const headerTooltip = columnDef.headerTooltip\n      ? t(columnDef.headerTooltip)\n      : headerName;\n    return { ...columnDef, headerName, headerTooltip };\n  });\n};\n\n/** A helper method for creating comparator methods for sorting arrays of objects */\nexport const compareByProperty = (property, reverse) => (a, b) => {\n  if (b[property] > a[property]) return reverse ? -1 : 1;\n  if (b[property] < a[property]) return reverse ? 1 : -1;\n  return 0;\n};\n\n/** Returns true if the value is defined */\nexport const isDef = val => val !== null && val !== undefined && val !== \"\";\n\nexport const displayable = val => (isDef(val) ? val : Config.emptyValue);\n\nexport const isJSON = val => {\n  try {\n    if (isNull(val)) return false;\n    if (val.length === 0) return true;\n    const obj = JSON.parse(val);\n    if (obj && typeof obj === \"object\") {\n      return true;\n    }\n  } catch (e) {\n    console.log(\"Error while parsing json: \", e); // eslint-disable-line no-console\n    return false;\n  }\n  return false;\n};\n\nexport const isNull = val => val === null;\n\n/** Return a generic config value if the value is undefined */\nexport const renderUndefined = value =>\n  !isDef(value) ? Config.emptyValue : value;\n\nexport const isEmptyCheck = obj => {\n  return obj ? false : !(obj.length === 0) ? false : true;\n};\n\n/** Converts an enum string with its translated string. */\nexport const getEnumTranslation = (t, rootPath, name, defaultVal) => {\n  const fullPath = `${rootPath}.${name}`;\n  const val = t(fullPath);\n  if (val === fullPath) {\n    return defaultVal || name;\n  }\n  return val;\n};\n\n/** Converts a packageType enum to a translated string equivalent */\nexport const getPackageTypeTranslation = (packageType, t) =>\n  getEnumTranslation(\n    t,\n    \"packageTypes\",\n    toCamelcase(packageType),\n    t(\"packageTypes.unknown\")\n  );\n\n/** Converts a packageType enum to a translated string equivalent */\nexport const getConfigTypeTranslation = (configType, t) =>\n  getEnumTranslation(t, \"configTypes\", toCamelcase(configType), configType);\n\n/** Converts a deployment status code to a translated string equivalent */\nexport const getEdgeAgentStatusCode = (code, t) =>\n  getEnumTranslation(t, \"edgeAgentStatus\", code, t(\"edgeAgentStatus.unknown\"));\n\n/** Converts a job status code to a translated string equivalent */\nexport const getStatusCode = (code, t) =>\n  getEnumTranslation(\n    t,\n    \"maintenance.jobStatus\",\n    code,\n    t(\"maintenance.jobStatus.queued\")\n  );\n\n/** Converts a device status to a translated string equivalent */\nexport const getDeviceStatusTranslation = (status, t) =>\n  getEnumTranslation(t, \"deployments.details\", status, status);\n\n/* A helper method to copy text to the clipbaord */\nexport const copyToClipboard = data => {\n  const textField = document.createElement(\"textarea\");\n  textField.innerText = data;\n  document.body.appendChild(textField);\n  textField.select();\n  document.execCommand(\"copy\");\n  textField.remove();\n};\n\nexport const isValidExtension = file => {\n  if (!file) return false;\n  const fileExt = file.name\n    .split(\".\")\n    .pop()\n    .toLowerCase();\n  return Config.validExtensions.indexOf(\".\" + fileExt) > -1;\n};\n\n// Helper construct from and to parameters for time intervals\nexport const getIntervalParams = timeInterval => {\n  switch (timeInterval) {\n    case \"P1D\":\n      return [\n        { from: \"NOW-P1D\", to: \"NOW\" },\n        { from: \"NOW-P2D\", to: \"NOW-P1D\" }\n      ];\n\n    case \"P7D\":\n      return [\n        { from: \"NOW-P7D\", to: \"NOW\" },\n        { from: \"NOW-P14D\", to: \"NOW-P7D\" }\n      ];\n\n    case \"P1M\":\n      return [\n        { from: \"NOW-P1M\", to: \"NOW\" },\n        { from: \"NOW-P2M\", to: \"NOW-P1M\" }\n      ];\n\n    default:\n      // Use PT1H as the default case\n      return [\n        { from: \"NOW-PT1H\", to: \"NOW\" },\n        { from: \"NOW-PT2H\", to: \"NOW-PT1H\" }\n      ];\n  }\n};\n\n// Helper to format conditions for display\nexport const formatConditions = rule => {\n  if (rule && Array.isArray(rule.conditions) && rule.conditions.length) {\n    return rule.conditions\n      .map(trigger => trigger[\"field\"] || Config.emptyFieldValue)\n      .join(\" & \");\n  }\n  return Config.emptyFieldValue;\n};\n\n// Helper to get Centroid of a polygon\nexport const getCentroid = geometry => {\n  const coordinates = geometry[0];\n  let itr1;\n  let itr2;\n  let pointA;\n  let pointB;\n  let factor1 = 0;\n  let factor2 = 0;\n  let xCoordinate = 0;\n  let yCoordinate = 0;\n\n  for (\n    itr1 = 0, itr2 = coordinates.length - 1;\n    itr1 < coordinates.length;\n    itr2 = itr1, itr1 += 1\n  ) {\n    pointA = coordinates[itr1];\n    pointB = coordinates[itr2];\n    factor1 += pointA[0] * pointB[1];\n    factor1 -= pointA[1] * pointB[0];\n  }\n  factor1 *= 3;\n\n  for (\n    itr1 = 0, itr2 = coordinates.length - 1;\n    itr1 < coordinates.length;\n    itr2 = itr1, itr1 += 1\n  ) {\n    pointA = coordinates[itr1];\n    pointB = coordinates[itr2];\n    factor2 = pointA[0] * pointB[1] - pointA[1] * pointB[0];\n    xCoordinate += (pointA[0] + pointB[0]) * factor2;\n    yCoordinate += (pointA[1] + pointB[1]) * factor2;\n  }\n\n  return [xCoordinate / factor1, yCoordinate / factor1];\n};\n\nexport const geoJSONValidation = require(\"geojson-validation\");\n\ngeoJSONValidation.define(\"Position\", function(position) {\n  // the postion must be valid point on the earth, x between -180 and 180\n  const errors = [];\n  if (position.length > 2) {\n    errors.push(i18n.t(\"farms.panels.geoJSON.invalidCoordinates\"));\n  }\n  if (position[0] < -180 || position[0] > 180) {\n    errors.push(i18n.t(\"farms.panels.geoJSON.invalidXCoordinate\"));\n  }\n  if (position[1] < -90 || position[1] > 90) {\n    errors.push(i18n.t(\"farms.panels.geoJSON.invalidYCoordinate\"));\n  }\n  return errors;\n});\n\nexport const getFormattedTelemtery = (\n  acc,\n  { metric, deviceId, time, data }\n) => {\n  return !data\n    ? acc\n    : update(acc, {\n        [metric]: {\n          $auto: {\n            [deviceId]: {\n              $auto: {\n                \"\": {\n                  $auto: {\n                    [time]: {\n                      $auto: {\n                        val: { $set: data }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      });\n};\n\nexport const handleKeyPressInput = (event, func, keyCode) => {\n  if (event.which === keyCode) {\n    func();\n  }\n};\n\nexport const getSceneAndSceneFile = (\n  sceneMapType,\n  farmId,\n  mapsData,\n  callback\n) => {\n  let LatestMapSceneId;\n  const noMapImage = svgs.NoMapImage;\n  MapService.getLatestFarmMapFileById(sceneMapType, farmId).subscribe(\n    maps => {\n      if (maps.length !== 0) {\n        maps.sort((a, b) => new Date(b.date) - new Date(a.date));\n        LatestMapSceneId = maps[latestMapIndex][id];\n        const mapById = mapsData.filter(map => map.id === LatestMapSceneId);\n\n        if (mapById !== undefined) {\n          getSceneFile(LatestMapSceneId, fileType, callback, maps);\n        }\n      } else {\n        const mapData = {\n          mapFound: false,\n          url: noMapImage\n        };\n        callback({}, mapData, null);\n      }\n    },\n    sceneError => callback({}, {}, sceneError)\n  );\n};\n\nexport const getSceneFile = (LatestMapSceneId, fileType, callback, maps) => {\n  const imageUrlSelectObj = [];\n  let blobUrl = undefined;\n  let noMaps = false;\n  let noPngMaps = true;\n  MapService.getMapFileByIdAndType(LatestMapSceneId, fileType).subscribe(\n    imageUrlMaps => {\n      if (imageUrlMaps !== undefined) {\n        // var imageTypeStartIndex;\n        // var imageTypeLastIndex;\n        blobUrl = undefined;\n        noMaps = false;\n        noPngMaps = true;\n        if (imageUrlMaps.length === 0) {\n          noMaps = true;\n        }\n\n        for (let i = 0; i < imageUrlMaps.length; i++) {\n          if (\n            contentTypeLabelsMap.get(imageUrlMaps[i].contentType) ===\n            pngImageType\n          ) {\n            blobUrl = imageUrlMaps[i].downloadSASUrl;\n            noPngMaps = false;\n          }\n          imageUrlSelectObj.push({\n            label:\n              contentTypeLabelsMap.get(imageUrlMaps[i].contentType) ||\n              imageUrlMaps[i].contentType,\n            value: imageUrlMaps[i].downloadSASUrl,\n            contentType: imageUrlMaps[i].contentType\n          });\n        }\n      }\n      const selectedObject = {\n        mapFileDownloadSelectObject: imageUrlSelectObj\n      };\n      const mapData = {\n        url:\n          imageUrlMaps && imageUrlMaps[latestMapIndex]\n            ? imageUrlMaps[latestMapIndex][downloadSASUrl]\n            : undefined,\n        latestMapDate: maps\n          ? moment(maps[latestMapIndex][date]).format(dateFormat)\n          : undefined,\n        latestCreatedAt: maps\n          ? moment(maps[latestMapIndex][createdAt]).format(dateFormat)\n          : undefined,\n        mapFound: true,\n        noMaps: noMaps,\n        noPngMaps: noPngMaps,\n        isMapFilesPending: false,\n        blobUrl: blobUrl\n      };\n      callback(selectedObject, mapData, null);\n    },\n    sceneError => callback({}, {}, sceneError)\n  );\n};\n\nexport const getSceneData = (sceneMapType, farmId, mapsData, callback) => {\n  getSceneAndSceneFile(sceneMapType, farmId, mapsData, callback);\n};\n\nexport const getJobSelectObjectData = () => [\n  {\n    label: i18n.t(\"maps.status.submitted\"),\n    value: JobsStatusValues.submittedStatus\n  },\n  {\n    label: i18n.t(\"maps.status.accepted\"),\n    value: JobsStatusValues.acceptedStatus\n  },\n  {\n    label: i18n.t(\"maps.status.running\"),\n    value: JobsStatusValues.runningStatus\n  },\n  {\n    label: i18n.t(\"maps.status.pendingRetry\"),\n    value: JobsStatusValues.pendingRetryStatus\n  },\n  { label: i18n.t(\"maps.status.failed\"), value: JobsStatusValues.failedStatus },\n  {\n    label: i18n.t(\"maps.status.succeeded\"),\n    value: JobsStatusValues.succeededStatus\n  },\n  {\n    label: i18n.t(\"maps.status.stopped\"),\n    value: JobsStatusValues.stoppedStatus\n  }\n];\n\nexport const getPNGFilefromSceneFiles = selectedObject => {\n  let pngUrl = null;\n  selectedObject.mapFileDownloadSelectObject.map(ele =>\n    ele.label === pngImageType ? (pngUrl = ele.value) : null\n  );\n  return pngUrl;\n};\n\nexport function caseInsensitiveStringComparator(a, b) {\n  return (a || \"\").toLowerCase().localeCompare((b || \"\").toLowerCase());\n}\n\nexport function getAffectedDevicesCount(farmId, conditions) {\n  const sensorMeasures = conditions.map(condition => condition.field);\n  const filteredMeasures = [...new Set(sensorMeasures)];\n  const filteredSensorModels = this.props.sensorModels.filter(sensorModel =>\n    sensorModel.sensorMeasures.some(sensorMeasure =>\n      filteredMeasures.includes(sensorMeasure.name)\n    )\n  );\n  const sensorModelIds = filteredSensorModels.map(\n    sensorMeasure => sensorMeasure.id\n  );\n  const filteredSensors = this.props.sensors.filter(sensor =>\n    sensorModelIds.includes(sensor.sensorModelId)\n  );\n  const deviceIds = filteredSensors.map(sensor => sensor.deviceId);\n  const devicesList = this.props.devices.filter(device =>\n    deviceIds.includes(device.id)\n  );\n  const affectedDevices = devicesList.filter(\n    device => device.farmId === farmId\n  );\n  return affectedDevices.length;\n}\n\nexport function isTwoSetsSame(setA, setB) {\n  if (setA.size === setB.size) {\n    for (const elem of setB) {\n      if (!setA.has(elem)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport AckAlertIconPath from \"assets/icons/ackAlert.svg\";\nimport ApplyIconPath from \"assets/icons/apply.svg\";\nimport CancelXIconPath from \"assets/icons/cancelX.svg\";\nimport CaratIconPath from \"assets/icons/carat.svg\";\nimport ChangeStatusPath from \"assets/icons/changeStatus.svg\";\nimport CheckmarkIconPath from \"assets/icons/checkmark.svg\";\nimport ChevronIconPath from \"assets/icons/chevron.svg\";\nimport ChevronRightIconPath from \"assets/icons/chevronRight.svg\";\nimport CloseAlertIconPath from \"assets/icons/closeAlert.svg\";\nimport ColonIconPath from \"assets/icons/colon.svg\";\nimport FarmbeatsIconPath from \"assets/icons/farmbeats.svg\";\nimport CopyIconPath from \"assets/icons/copy.svg\";\nimport CriticalIconPath from \"assets/icons/critical.svg\";\nimport AlertsIconPath from \"assets/icons/alerts.svg\";\nimport GatewayBigIconPath from \"assets/icons/gatewayBig.svg\";\nimport NodeBigIconPath from \"assets/icons/nodeBig.svg\";\nimport OnlineIconPath from \"assets/icons/onlineStatus.svg\";\nimport OfflineIconPath from \"assets/icons/offlineStatus.svg\";\nimport OnlineBigIconPath from \"assets/icons/onlineStatusBig.svg\";\nimport DownloadButtonPath from \"assets/icons/download.svg\";\nimport addDevicePath from \"assets/icons/addDevice.svg\";\nimport DeviceGenericIconPath from \"assets/icons/deviceIcon.svg\";\nimport DisableToggleIconPath from \"assets/icons/disableToggle.svg\";\nimport DisabledIconPath from \"assets/icons/disabled.svg\";\nimport EditIconPath from \"assets/icons/edit.svg\";\nimport EllipsisIconPath from \"assets/icons/ellipsis.svg\";\nimport EnableToggleIconPath from \"assets/icons/enableToggle.svg\";\nimport ErrorIconPath from \"assets/icons/errorAsterisk.svg\";\nimport FailedIconPath from \"assets/icons/failed.svg\";\nimport GlimmerIconPath from \"assets/icons/glimmer.svg\";\nimport HamburgerIconPath from \"assets/icons/hamburger.svg\";\nimport InfoBubbleIconPath from \"assets/icons/infoBubble.svg\";\nimport InfoIconPath from \"assets/icons/info.svg\";\nimport LinkToPath from \"assets/icons/linkTo.svg\";\nimport LoadingToggleIconPath from \"assets/icons/loadingToggle.svg\";\nimport ManageFiltersIconPath from \"assets/icons/manageFilters.svg\";\nimport TabPackagesIconPath from \"assets/icons/packages.svg\";\nimport PhysicalDeviceIconPath from \"assets/icons/physicalDevice.svg\";\nimport PlusIconPath from \"assets/icons/plus.svg\";\nimport QuestionMarkIconPath from \"assets/icons/questionMark.svg\";\nimport RadioSelectedIconPath from \"assets/icons/radioSelected.svg\";\nimport RadioUnselectedIconPath from \"assets/icons/radioUnselected.svg\";\nimport ReconfigureIconPath from \"assets/icons/reconfigure.svg\";\nimport RefreshIconPath from \"assets/icons/refresh.svg\";\nimport RuleDisabledIconPath from \"assets/icons/ruleDisabled.svg\";\nimport RuleEnabledIconPath from \"assets/icons/ruleEnabled.svg\";\nimport SIMManagementIconPath from \"assets/icons/SIMManagement.svg\";\nimport SearchIconPath from \"assets/icons/searchIcon.svg\";\nimport SensorboxIconPath from \"assets/icons/SensorHubBlack.svg\";\nimport SettingsIconPath from \"assets/icons/settings.svg\";\nimport SimulatedDeviceIconPath from \"assets/icons/simulatedDevice.svg\";\nimport SubedgeIconPath from \"assets/icons/GatewayBlack.svg\";\nimport TabDashboardIconPath from \"assets/icons/tabDashboard.svg\";\nimport CalendarIconPath from \"assets/icons/calendar.svg\";\nimport TabDeploymentsIconPath from \"assets/icons/tabDeployments.svg\";\nimport TabMaintenanceIconPath from \"assets/icons/tabMaintenance.svg\";\nimport TabLayoutsIconPath from \"assets/icons/tabLayouts.svg\";\nimport TrashIconPath from \"assets/icons/trash.svg\";\nimport UploadIconPath from \"assets/icons/upload.svg\";\nimport WarningIconPath from \"assets/icons/warning.svg\";\nimport XIconPath from \"assets/icons/x.svg\";\nimport GatewayIconPath from \"assets/icons/gateway.svg\";\nimport NodeIconPath from \"assets/icons/node.svg\";\n\nimport AbortButtonPath from \"assets/icons/abort.svg\";\nimport RejectedButtonPath from \"assets/icons/rejected.svg\";\nimport WaitingButtonPath from \"assets/icons/waiting.svg\";\nimport FilterPath from \"assets/icons/filter.svg\";\nimport AppliedFilterPath from \"assets/icons/filterApplied.svg\";\nimport JobsButtonPath from \"assets/icons/jobs.svg\";\nimport RulesButtonPath from \"assets/icons/rules.svg\";\nimport SensorsButtonPath from \"assets/icons/sensors.svg\";\nimport FarmsButtonPath from \"assets/icons/farms.svg\";\nimport DevicesButtonPath from \"assets/icons/devices.svg\";\nimport MapsButtonPath from \"assets/icons/maps.svg\";\nimport LinksIconPath from \"assets/icons/links.svg\";\nimport NoMapImage from \"assets/icons/noMapImage.svg\";\nimport DatePickerIconPath from \"assets/icons/datePicker.svg\";\n/** A helper object mapping svg names to their paths */\nexport const svgs = {\n  tabs: {\n    dashboard: TabDashboardIconPath,\n    devices: DevicesButtonPath,\n    sensors: SensorsButtonPath,\n    deployments: TabDeploymentsIconPath,\n    maintenance: TabMaintenanceIconPath,\n    packages: TabPackagesIconPath,\n    layouts: TabLayoutsIconPath,\n    example: InfoBubbleIconPath,\n    farms: FarmsButtonPath,\n    jobs: JobsButtonPath,\n    rules: RulesButtonPath,\n    maps: MapsButtonPath,\n    alerts: AlertsIconPath\n  },\n  devices: {\n    generic: DeviceGenericIconPath,\n    sensorhub: SensorboxIconPath,\n    subedge: SubedgeIconPath,\n    gateway: SubedgeIconPath,\n    deviceModelGateway: GatewayIconPath,\n    deviceModelGatewayBig: GatewayBigIconPath,\n    node: NodeIconPath,\n    nodeBig: NodeBigIconPath,\n    online: OnlineIconPath,\n    offline: OfflineIconPath,\n    onlineBig: OnlineBigIconPath\n  },\n  NoMapImage: NoMapImage,\n  calendar: CalendarIconPath,\n  ackAlert: AckAlertIconPath,\n  filter: FilterPath,\n  appliedFilter: AppliedFilterPath,\n  addDevice: addDevicePath,\n  apply: ApplyIconPath,\n  cancelX: CancelXIconPath,\n  abort: AbortButtonPath,\n  waiting: WaitingButtonPath,\n  rejected: RejectedButtonPath,\n  downloadButton: DownloadButtonPath,\n  carat: CaratIconPath,\n  changeStatus: ChangeStatusPath,\n  checkmark: CheckmarkIconPath,\n  chevron: ChevronIconPath,\n  chevronRight: ChevronRightIconPath,\n  closeAlert: CloseAlertIconPath,\n  colon: ColonIconPath,\n  farmbeats: FarmbeatsIconPath,\n  copy: CopyIconPath,\n  critical: CriticalIconPath,\n  disableToggle: DisableToggleIconPath,\n  disabled: DisabledIconPath,\n  edit: EditIconPath,\n  ellipsis: EllipsisIconPath,\n  enableToggle: EnableToggleIconPath,\n  error: ErrorIconPath,\n  failed: FailedIconPath,\n  glimmer: GlimmerIconPath,\n  hamburger: HamburgerIconPath,\n  info: InfoIconPath,\n  infoBubble: InfoBubbleIconPath,\n  links: LinksIconPath,\n  linkTo: LinkToPath,\n  loadingToggle: LoadingToggleIconPath,\n  manageFilters: ManageFiltersIconPath,\n  physicalDevice: PhysicalDeviceIconPath,\n  plus: PlusIconPath,\n  questionMark: QuestionMarkIconPath,\n  radioSelected: RadioSelectedIconPath,\n  radioUnselected: RadioUnselectedIconPath,\n  reconfigure: ReconfigureIconPath,\n  refresh: RefreshIconPath,\n  ruleDisabled: RuleDisabledIconPath,\n  ruleEnabled: RuleEnabledIconPath,\n  search: SearchIconPath,\n  settings: SettingsIconPath,\n  simmanagement: SIMManagementIconPath,\n  simulatedDevice: SimulatedDeviceIconPath,\n  trash: TrashIconPath,\n  upload: UploadIconPath,\n  warning: WarningIconPath,\n  node: NodeIconPath,\n  nodeBig: NodeBigIconPath,\n  gateway: GatewayIconPath,\n  gatewayBig: GatewayBigIconPath,\n  online: OnlineIconPath,\n  offline: OfflineIconPath,\n  onlineBig: OnlineBigIconPath,\n  x: XIconPath,\n  datePicker: DatePickerIconPath\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport IconDarkCheckmarkBubble from \"assets/icons/IconDarkCheckmarkBubble.svg\";\nimport IconDarkInfoBubble from \"assets/icons/IconDarkInfoBubble.svg\";\nimport IconDarkQuestionBubble from \"assets/icons/IconDarkQuestionBubble.svg\";\nimport IconLightCheckmarkBubble from \"assets/icons/IconLightCheckmarkBubble.svg\";\nimport IconLightInfoBubble from \"assets/icons/IconLightInfoBubble.svg\";\nimport IconLightQuestionBubble from \"assets/icons/IconLightQuestionBubble.svg\";\n\n/** A helper object mapping to themed(dark/light) paths */\nexport const themedPaths = {\n  checkmarkBubble: {\n    dark: IconDarkCheckmarkBubble,\n    light: IconLightCheckmarkBubble\n  },\n  infoBubble: { dark: IconDarkInfoBubble, light: IconLightInfoBubble },\n  questionBubble: {\n    dark: IconDarkQuestionBubble,\n    light: IconLightQuestionBubble\n  }\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { Component } from \"react\";\nimport update from \"immutability-helper\";\n\nimport { isFunc, isDef, isNull } from \"utilities\";\n\n/** Contains logic for validating a value */\nexport class Validator {\n  static notEmpty = x => {\n    if (Array.isArray(x)) return x.length > 0;\n    if (typeof x === \"number\") return true;\n    return !!x;\n  };\n\n  static latValidation = x => {\n    if (x.toString().includes(\"Syncing \")) return true;\n    const isLatitude = /^(\\+|-)?(?:90(?:(?:\\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\\.[0-9]{1,6})?))$/;\n    const pattern = new RegExp(isLatitude);\n    return pattern.test(x);\n  };\n\n  static longValidation = x => {\n    if (x.toString().includes(\"Syncing \")) return true;\n    const isLongitude = /^(\\+|-)?(?:180(?:(?:\\.0{1,6})?)|(?:[0-9]|[1-9][0-9]|1[0-7][0-9])(?:(?:\\.[0-9]{1,6})?))$/;\n    const pattern = new RegExp(isLongitude);\n    return pattern.test(x);\n  };\n\n  static reportingIntervalValidation = x => {\n    if (x.toString().includes(\"Syncing \")) return true;\n    const isReportingInterval = /^(1[2-8][0-9]|19[0-9]|[2-9][0-9]{2}|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-7][0-9]{4}|8[0-5][0-9]{3}|86[0-3][0-9]{2}|86400)$/;\n    const pattern = new RegExp(isReportingInterval);\n    return pattern.test(x);\n  };\n\n  static nameValidation = x => {\n    const isNameRegex = /^[A-Za-z0-9_]+[A-Za-z0-9_\\s]*$/;\n    const pattern = new RegExp(isNameRegex);\n    return pattern.test(x);\n  };\n\n  static notDuplicate = (value, valuesToCompare, form, editItemName) => {\n    let match = true;\n    // have to check enterted value is exists to avoid duplicate value\n    if (value !== editItemName) {\n      // while edit, it should have to check for other then the editing object\n\n      if (form === \"devices\") {\n        const deviceObj = valuesToCompare.find(\n          item =>\n            item.displayName\n              .trim()\n              .toString()\n              .toLowerCase() ===\n            value\n              .trim()\n              .toString()\n              .toLowerCase()\n        );\n\n        if (deviceObj !== undefined) match = false;\n      } else if (form === \"templates\") {\n        const tempObj = valuesToCompare.find(\n          item =>\n            item.templateName\n              .trim()\n              .toString()\n              .toLowerCase() ===\n            value\n              .trim()\n              .toString()\n              .toLowerCase()\n        );\n\n        if (tempObj !== undefined) match = false;\n      } else if (form === \"rules\") {\n        const tempObj = valuesToCompare.find(\n          item =>\n            item.name\n              .trim()\n              .toString()\n              .toLowerCase() ===\n            value\n              .trim()\n              .toString()\n              .toLowerCase()\n        );\n\n        if (tempObj !== undefined) match = false;\n      } else if (form === \"farms\") {\n        const farmObj = valuesToCompare.find(\n          item =>\n            item.name\n              .trim()\n              .toString()\n              .toLowerCase() ===\n            value\n              .trim()\n              .toString()\n              .toLowerCase()\n        );\n\n        if (farmObj !== undefined) match = false;\n      }\n    }\n    return match;\n  };\n\n  static noSpaces = x => {\n    if (x.trim().length === 0 && x.match(/\\s/g))\n      return (x = x.replace(/\\s/g, \"\"));\n    return !!x;\n  };\n\n  static maxlength = (value, maxLength) => {\n    if (!isNull(value) && value.length > maxLength) return false;\n    return true;\n  };\n\n  static charlength = x => {\n    if (!isNull(x) && x.length > 25) return false;\n    return true;\n  };\n\n  static minlength = x => {\n    if (!isNull(x) && x.length < 3) return false;\n    return true;\n  };\n\n  constructor(validator = {}) {\n    this.validators = validator.validators || [];\n    this.rejectors = validator.rejectors || [];\n  }\n\n  /**\n   * Adds a checking function to the validator list\n   * If the function returns false, validation fails\n   */\n  check(checker, msg = true) {\n    this.validators = [\n      ...this.validators,\n      value => (checker(value) ? \"\" : isFunc(msg) ? msg(value) : msg)\n    ];\n    return this;\n  }\n\n  checkDuplicate(checkerArray, msg = true) {\n    this.validators = [\n      ...this.validators,\n      value => (checkerArray(value, []) ? \"\" : isFunc(msg) ? msg(value) : msg)\n    ];\n    return this;\n  }\n  /**\n   * Adds a rejection function to the rejector list\n   * If the function returns false, the value is rejected\n   */\n  reject(rejector) {\n    this.rejectors = [...this.rejectors, rejector];\n    return this;\n  }\n\n  shouldReject(value) {\n    return this.rejectors.some(rejector => rejector(value));\n  }\n\n  hasErrors(value) {\n    let error = \"\";\n    for (let i = 0; i < this.validators.length; i++) {\n      error = this.validators[i](value);\n      if (error) return error;\n    }\n    return error;\n  }\n}\n\n/** Links to a part of a component state */\nexport class Link extends Validator {\n  /** Accepts either an existing link or a component and state key name */\n  constructor(...args) {\n    super();\n\n    if (args.length === 1 && args[0] instanceof Link) {\n      const [link] = args;\n      this.component = link.component;\n      this.setter = link.setter;\n      this.selector = link.selector;\n    } else if (args.length >= 2) {\n      const [component, name] = args;\n      this.component = component;\n      this.setter = value => ({ [name]: value });\n      this.selector = state => state[name];\n    } else {\n      throw new Error(\"Link class: Invalid constructor signature.\");\n    }\n\n    this.mappers = [];\n  }\n\n  onChange = ({ target: { value, type, checked } }) => {\n    if (this.shouldReject(value)) return;\n    const finalVal = this.mappers.reduce(\n      (val, mapFunc) => mapFunc(val),\n      type === \"checkbox\" ? checked : value\n    );\n    this.set(finalVal);\n  };\n\n  /** Links to property in the component state */\n  to = name => {\n    const { selector, setter } = this;\n    this.setter = value => setter({ [name]: value });\n    this.selector = state => selector(state)[name];\n    return this;\n  };\n\n  /** Adds a function for mapping an input value to a new value */\n  map = func => {\n    this.mappers = [...this.mappers, func];\n    return this;\n  };\n\n  /**\n   * Updates the value of the component state property the Link is\n   * connected to.\n   */\n  set(value) {\n    this.component.setState(\n      update(this.component.state, this.setter({ $set: value }))\n    );\n    return this;\n  }\n\n  get value() {\n    // In case the user defaults a value to be undefined, always default to the empty string\n    // to prevent switching between a controlled and uncontrolled input\n    const val = this.selector(this.component.state);\n    return isDef(val) ? val : \"\";\n  }\n\n  get error() {\n    return this.hasErrors(this.value);\n  }\n\n  /** Allows the link to use predefined validator logic */\n  withValidator(validator) {\n    this.validators = validator.validators;\n    this.rejectors = validator.rejectors;\n    return this;\n  }\n\n  /** A helper method for array state properties */\n  getLinkedChildren = mapFunc => {\n    return this.value.map((_, idx) => mapFunc(this.forkTo(idx), idx));\n  };\n\n  /**\n   * Used to create a new Link instance using the state property hierarchy of an\n   * existing instance\n   */\n  forkTo = name => new Link(this).to(name);\n}\n\n/** A helper for creating components with links into the component state */\nexport class LinkedComponent extends Component {\n  linkTo = name => new Link(this, name);\n}\n","const AzureMaps = window.atlas;\n\nexport function zoomToGeometry(map, geometry) {\n  const boundingBox = AzureMaps.data.BoundingBox.fromData(geometry);\n\n  map.setCamera({ bounds: boundingBox, padding: 50 });\n}\n\n// Use with caution. Might not work as expected.\nexport function zoomToPins(map, pins) {\n  const lons = [];\n  const lats = [];\n  pins.forEach(({ geometry: { coordinates: [longitude, latitude] } }) => {\n    lons.push(longitude);\n    lats.push(latitude);\n  });\n\n  const swLon = Math.min.apply(null, lons);\n  const swLat = Math.min.apply(null, lats);\n  const neLon = Math.max.apply(null, lons);\n  const neLat = Math.max.apply(null, lats);\n\n  // Zoom the map to the bounding box of the devices\n  map.setCameraBounds({\n    bounds: [swLon, swLat, neLon, neLat],\n    padding: 50\n  });\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { ErrorMsg } from \"../forms\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./ajaxError.scss\";\n\nexport const AjaxError = ({ error, t, className }) => (\n  <div className={joinClasses(\"ajax-error-container\", className)}>\n    <ErrorMsg>\n      {t(\"errorFormat\", {\n        message: error.message\n      })}\n    </ErrorMsg>\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport const ComponentArray = ({ children }) => children;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./contextMenu.scss\";\n\nexport const ContextMenu = ({ children, className }) => (\n  <div className={joinClasses(\"context-menu-container\", className)}>\n    {children}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./contextMenu.scss\";\n\nexport const ContextMenuAlign = ({ children, className, left }) => (\n  <div\n    className={joinClasses(\n      \"context-menu-align-container\",\n      className,\n      left ? \"left\" : \"right\"\n    )}\n  >\n    {children}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { Svg } from \"components/shared\";\nimport { svgs, joinClasses } from \"utilities\";\n\nimport \"./searchInput.scss\";\n\nexport const SearchInput = ({ children, className, ...rest }) => (\n  <div className={joinClasses(\"context-menu-search-input\", className)}>\n    <Svg path={svgs.search} className=\"search-icon\" />\n    <input {...rest} className=\"search-input\" type=\"text\" />\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./indicator.scss\";\n\nconst Dot = () => (\n  <div className=\"dot\">\n    <span className=\"inner\" />\n  </div>\n);\n\nconst validSizes = new Set([\"large\", \"medium\", \"normal\", \"small\", \"mini\"]);\nconst validPatterns = new Set([\"ring\", \"bar\"]);\n\n/** Creates a loading indicator */\nexport const Indicator = props => {\n  const { size, pattern, className } = props;\n  const sizeClass = validSizes.has(size) ? size : \"normal\";\n  const patternClass = validPatterns.has(pattern) ? pattern : \"ring\";\n  return (\n    <div\n      className={joinClasses(\n        \"wait-indicator\",\n        sizeClass,\n        patternClass,\n        className\n      )}\n    >\n      <Dot />\n      <Dot />\n      <Dot />\n      <Dot />\n      <Dot />\n      <Dot />\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./modalFadeBox.scss\";\n\n/** A presentational component containing the content of the modal */\nexport const ModalFadeBox = ({ children, className, onClick }) => (\n  <div onClick={onClick} className={joinClasses(\"modal-fade-box\", className)}>\n    {children}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./modalContent.scss\";\n\n/** A presentational component containing the content of the modal */\nexport const ModalContent = ({ children, className }) => (\n  <div className={joinClasses(\"modal-content\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./modalHeader.scss\";\n\n/* A presentational component containing the header of the modal */\nexport const ModalHeader = ({ children, className }) => (\n  <header className={joinClasses(\"modal-header\", className)}>\n    <div>{children}</div>\n  </header>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./modalFooter.scss\";\n\n/* A presentational component containing the footer of the modal */\nexport const ModalFooter = ({\n  children,\n  className,\n  onClickDisagree,\n  onClickAgree\n}) => (\n  <footer className={joinClasses(\"modal-footer\", className)}>\n    <button onClick={onClickDisagree} className=\"action\">\n      Disagree\n    </button>\n    <button onClick={onClickAgree} className=\"action\">\n      I Agree\n    </button>\n  </footer>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { withNamespaces } from \"react-i18next\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./content.scss\";\n\n/* A presentational component containing the footer of the modal */\nconst Content = ({ children, className, t }) => (\n  <div className={joinClasses(\"content\", className)}>\n    <div>\n      <div>\n        {\" \"}\n        <b>\n          {\" \"}\n          {t(\"eula.h1\")} <br /> {t(\"eula.h2\")}{\" \"}\n        </b>{\" \"}\n      </div>\n      <div> {t(\"eula.0_d\")} </div>\n      <ol>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.1_h\")} </b>\n          <ol type=\"a\">\n            <li>\n              {\" \"}\n              <b> {t(\"eula.1a_h\")} </b> {t(\"eula.1a_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.1b_h\")} </b> {t(\"eula.1b_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.1c_h\")} </b> {t(\"eula.1c_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.1d_h\")} </b> {t(\"eula.1d_d\")}{\" \"}\n            </li>\n          </ol>\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.2_h\")} </b>\n          <ol type=\"a\">\n            <li>\n              {\" \"}\n              <b> {t(\"eula.2a_h\")} </b> {t(\"eula.2a_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.2b_h\")} </b> {t(\"eula.2b_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.2c_h\")} </b> {t(\"eula.2c_d\")}{\" \"}\n            </li>\n          </ol>\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.3_h\")} </b> {t(\"eula.3_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.4_h\")} </b> {t(\"eula.3_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.5_h\")} </b> {t(\"eula.3_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.6_h\")} </b> {t(\"eula.6_d\")}\n          <ol type=\"a\">\n            <li> {t(\"eula.6a_d\")} </li>\n            <li> {t(\"eula.6b_d\")} </li>\n            <li> {t(\"eula.6c_d\")} </li>\n            <li> {t(\"eula.6d_d\")} </li>\n            <li> {t(\"eula.6e_d\")} </li>\n          </ol>\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.7_h\")} </b> {t(\"eula.7_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.8_h\")} </b> {t(\"eula.8_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.9_h\")} </b> {t(\"eula.9_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.10_h\")} </b> {t(\"eula.10_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.11_h\")} </b> {t(\"eula.11_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.12_h\")} </b> {t(\"eula.12_d\")}{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.13_h\")} </b> {t(\"eula.13_d\")}\n          <ol type=\"a\">\n            <li>\n              {\" \"}\n              <b> {t(\"eula.13a_h\")} </b> {t(\"eula.13a_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.13b_h\")} </b> {t(\"eula.13b_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.13c_h\")} </b>\n              <ol type=\"i\">\n                <li>\n                  {\" \"}\n                  <b> {t(\"eula.13c1_h\")} </b> {t(\"eula.13c1_d\")}{\" \"}\n                </li>\n                <li>\n                  {\" \"}\n                  <b> {t(\"eula.13c2_h\")} </b> {t(\"eula.13c2_d\")}{\" \"}\n                </li>\n              </ol>\n              {t(\"eula.13c_d\")}\n            </li>\n          </ol>\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.14_h\")} </b>{\" \"}\n        </li>{\" \"}\n        <br />\n        <li>\n          {\" \"}\n          <b>\n            {\" \"}\n            <div>{t(\"eula.15_h1\")} </div> {t(\"eula.15_h2\")}{\" \"}\n            <div> {t(\"eula.15_h3\")} </div>\n          </b>{\" \"}\n        </li>\n        <li>\n          {\" \"}\n          <b> {t(\"eula.16_h\")} </b> {t(\"eula.16_d\")}\n          <ol type=\"a\">\n            <li>\n              {\" \"}\n              <b> {t(\"eula.16a_h\")} </b> {t(\"eula.16a_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.16b_h\")} </b> {t(\"eula.16b_d\")}{\" \"}\n            </li>\n            <li>\n              {\" \"}\n              <b> {t(\"eula.16c_h\")} </b> {t(\"eula.16c_d\")}\n              <ol type=\"i\">\n                <li> {t(\"eula.16c1_d\")} </li>\n                <li> {t(\"eula.16c2_d\")} </li>\n                <li> {t(\"eula.16c3_d\")} </li>\n              </ol>\n            </li>\n          </ol>\n        </li>\n      </ol>\n    </div>\n  </div>\n);\n\nexport default withNamespaces()(Content);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { ModalContent, ModalFadeBox, ModalFooter, ModalHeader } from \"..\";\nimport Content from \"../content/content\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./modal.scss\";\n\nexport class Modal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      disagree: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.onClose) {\n      window.addEventListener(\"keydown\", this.listenKeyboard, true);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.onClose) {\n      window.removeEventListener(\"keydown\", this.listenKeyboard, true);\n    }\n  }\n\n  listenKeyboard = event => {\n    if (event.key === \"Escape\" || event.keyCode === 27) {\n      this.props.onClose();\n    }\n  };\n\n  onOverlayClick = event => {\n    event.preventDefault();\n  };\n\n  onClickDisagree = () => {\n    this.setState({\n      disagree: true\n    });\n  };\n\n  render() {\n    if (this.props.type === \"EULA\") {\n      return (\n        <div className={joinClasses(\"modal\", \"open\", this.props.className)}>\n          <article className=\"content-wrapper\">\n            <ModalHeader>Microsoft Software License Terms</ModalHeader>{\" \"}\n            {/* {this.props.header} />*/}\n            <Content>{this.props.content}</Content>\n            {this.state.disagree && (\n              <div id=\"disagree\">\n                {\" \"}\n                To start using the application please read and agree to the\n                terms by clicking on the <b> I Agree </b> button{\" \"}\n              </div>\n            )}\n            <ModalFooter\n              onClickAgree={this.props.onEulaAgree}\n              onClickDisagree={this.onClickDisagree}\n            />\n          </article>\n        </div>\n      );\n    }\n\n    return (\n      <div className={joinClasses(\"modal-container\", this.props.className)}>\n        <ModalFadeBox onClick={this.onOverlayClick} />\n        <ModalContent>{this.props.children}</ModalContent>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./pageTitle.scss\";\n\n/** A presentational component containing the title for a page */\nexport const PageTitle = ({ titleValue, className }) => (\n  <h1 className={joinClasses(\"page-title\", className)}>{titleValue}</h1>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\nimport { Svg } from \"components/shared\";\nimport \"./statProperty.scss\";\n\nconst validSizes = new Set([\"large\", \"medium\", \"small\", \"normal\"]);\n\n/** A presentational component containing statistics value, label and icon */\nexport const StatProperty = ({\n  value,\n  label,\n  size,\n  svg,\n  className,\n  svgClassName\n}) => {\n  const sizeClass = validSizes.has(size) ? size : \"normal\";\n  return (\n    <div className={joinClasses(\"stat-property\", className)}>\n      {svg && (\n        <Svg path={svg} className={joinClasses(\"stat-icon\", svgClassName)} />\n      )}\n      <div className={joinClasses(\"stat-value\", sizeClass)}>{value}</div>\n      <div className=\"stat-label\">{label}</div>\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./pageContent.scss\";\n\n/** A presentational component containing the content for a page */\nexport const PageContent = ({ className, children }) => (\n  <div className={joinClasses(\"page-content-container\", className)}>\n    {children}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { AgGridReact } from \"@ag-grid-community/react\";\nimport { AllCommunityModules } from \"@ag-grid-community/all-modules\";\nimport Rx from \"rxjs\";\nimport Config from \"app.config\";\nimport { isFunc } from \"utilities\";\nimport { Indicator } from \"../indicator/indicator\";\nimport { ROW_HEIGHT } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { sortIndices } from \"utilities\";\n\n// import \"../../../../node_modules/ag-grid-community/src/styles/ag-grid.scss\";\n// import \"../../../../node_modules/ag-grid-community/src/styles/ag-theme-dark.scss\";\nimport \"./pcsGrid.scss\";\n\n/**\n * PcsGrid is a helper wrapper around AgGrid. The primary functionality of this wrapper\n * is to allow easy reuse of the pcs dark grid theme. To see params, read the AgGrid docs.\n *\n * Props:\n *  getSoftSelectId: A method that when provided with the a row data object returns an id for that object\n *  softSelectId: The ID of the row data to be soft selected\n *  onHardSelectChange: Fires when rows are hard selected\n *  onSoftSelectChange: Fires when a row is soft selected\n * TODO (stpryor): Add design pagination\n */\nexport class PcsGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    this.defaultPcsGridProps = {\n      suppressDragLeaveHidesColumns: true,\n      suppressCellSelection: true,\n      // suppressClickEdit: true,\n      suppressRowClickSelection: true, // Suppress so that a row is only selectable by checking the checkbox\n      suppressLoadingOverlay: true,\n      suppressNoRowsOverlay: true,\n      sortingOrder: sortIndices\n    };\n\n    this.subscriptions = [];\n    this.resizeEvents = new Rx.Subject();\n  }\n\n  componentDidMount() {\n    this.subscriptions.push(\n      this.resizeEvents\n        .debounceTime(Config.gridResizeDebounceTime)\n        .filter(() => !!this.gridApi && !!this.props.sizeColumnsToFit)\n        .subscribe(() => this.gridApi.sizeColumnsToFit())\n    );\n    window.addEventListener(\"resize\", this.registerResizeEvent);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.registerResizeEvent);\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n\n  registerResizeEvent = () => this.resizeEvents.next(\"r\");\n\n  /** When new props are passed in, check if the soft select state needs to be updated */\n  componentDidUpdate(prevProps) {\n    if (prevProps.softSelectId !== this.props.softSelectId) {\n      this.refreshRows();\n    }\n    // Resize the grid if updating from 0 row data to 1+ rowData\n    if (\n      this.props.rowData &&\n      this.props.rowData.length &&\n      (!prevProps.rowData || !prevProps.rowData.length)\n    )\n      this.resizeEvents.next(\"r\");\n  }\n\n  /** Save the gridApi locally on load */\n  onGridReady = gridReadyEvent => {\n    this.gridApi = gridReadyEvent.api;\n    if (this.props.sizeColumnsToFit) {\n      this.resizeEvents.next(\"r\");\n    }\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  /**\n   * Refreshes the grid to update soft select CSS states\n   * Forces and update event\n   */\n  refreshRows = () => {\n    if (this.gridApi && isFunc(this.gridApi.updateRowData))\n      this.gridApi.updateRowData({ update: [] });\n  };\n\n  /** When a row is hard selected, try to fire a hard select event, plus any props callbacks */\n  onSelectionChanged = () => {\n    const { onHardSelectChange, onSelectionChanged } = this.props;\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(this.gridApi.getSelectedRows());\n    }\n    if (isFunc(onSelectionChanged)) {\n      onSelectionChanged();\n    }\n  };\n\n  /** When a row is clicked, select the row unless a soft select link was clicked */\n  onRowClicked = rowEvent => {\n    // console.log(rowEvent);\n    const className = rowEvent.event.target.className;\n    if (className.indexOf && className.indexOf(\"soft-select-link\") === -1) {\n      const { onRowClicked } = this.props;\n      if (isFunc(onRowClicked)) onRowClicked(rowEvent);\n    }\n  };\n\n  render() {\n    const {\n      onSoftSelectChange,\n      getSoftSelectId,\n      softSelectId,\n      context = {},\n      style,\n      ...restProps\n    } = this.props;\n    const gridParams = {\n      ...this.defaultPcsGridProps,\n      ...restProps,\n      modules: AllCommunityModules,\n      headerHeight: ROW_HEIGHT,\n      rowHeight: ROW_HEIGHT,\n      onGridReady: this.onGridReady,\n      onSelectionChanged: this.onSelectionChanged,\n      onRowClicked: this.onRowClicked,\n      rowClassRules: {\n        \"pcs-row-soft-selected\": ({ data }) =>\n          isFunc(getSoftSelectId)\n            ? getSoftSelectId(data) === softSelectId\n            : false\n      },\n      context: {\n        ...context,\n        onSoftSelectChange, // Pass soft select logic to cell renderers\n        getSoftSelectId // Pass soft select id logic to cell renderers\n      }\n    };\n    const { rowData, pcsLoadingTemplate } = this.props;\n\n    const loadingContainer = (\n      <div className=\"pcs-grid-loading-container\">\n        {!pcsLoadingTemplate ? <Indicator /> : pcsLoadingTemplate}\n      </div>\n    );\n    return (\n      <div\n        className={`pcs-grid-container ag-theme-dark ${\n          gridParams.suppressMovableColumns ? \"\" : \"movable-columns\"\n        }`}\n        style={style}\n      >\n        {!rowData ? loadingContainer : \"\"}\n        <AgGridReact {...gridParams} />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./propertyGrid.scss\";\n\nexport const PropertyCell = props => (\n  <div className={joinClasses(\"cell\", props.className)} title={props.title}>\n    {props.children}\n  </div>\n);\n\nPropertyCell.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./propertyGrid.scss\";\n\nexport const PropertyGrid = props => (\n  <div className={joinClasses(\"property-grid-container\", props.className)}>\n    {props.children}\n  </div>\n);\n\nPropertyGrid.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./propertyGrid.scss\";\n\nexport const PropertyGridHeader = props => (\n  <div className={joinClasses(\"grid-header\", props.className)}>\n    {props.children}\n  </div>\n);\n\nPropertyGridHeader.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./propertyGrid.scss\";\n\nexport const PropertyRow = props => (\n  <div className={joinClasses(\"row\", props.className)}>{props.children}</div>\n);\n\nPropertyRow.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { Component } from \"react\";\nimport { isFunc } from \"utilities\";\n\nexport class ProtectedImpl extends Component {\n  userHasPermission() {\n    let { permissions, userPermissions } = this.props;\n    userPermissions = new Set(userPermissions);\n    return permissions.reduce(\n      (acc, permission) => acc && userPermissions.has(permission),\n      true\n    );\n  }\n\n  render() {\n    const { children, permissions } = this.props;\n    const hasPermission = this.userHasPermission();\n    if (isFunc(children)) {\n      return children(hasPermission, permissions);\n    }\n    return hasPermission ? children : null;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\n// import { getUser } from 'store/reducers/appReducer';\nimport { ProtectedImpl } from \"./protected.impl\";\nimport { getUser } from \"store/reducers/appReducer\";\n\nconst mapStateToProps = state => ({\n  userPermissions: getUser(state).permissions\n});\n\nexport const Protected = connect(\n  mapStateToProps,\n  null\n)(ProtectedImpl);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { ErrorMsg } from \"../forms\";\nimport { joinClasses } from \"utilities\";\n\nexport const ProtectedError = ({ permissions, t, className }) => (\n  <ErrorMsg className={joinClasses(\"protected-error\", className)}>\n    {t(\"protected.permissionDenied\", { permissions })}\n  </ErrorMsg>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport { Btn } from \"components/shared\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { svgs, dateFormat } from \"utilities\";\n\nimport \"./refreshBar.scss\";\n\nexport class RefreshBar extends Component {\n  refresh = () => {\n    return !this.props.isPending && this.props.refresh();\n  };\n\n  render() {\n    const { t, isPending, time } = this.props;\n    return (\n      <div className=\"last-updated-container\">\n        {isPending || time ? (\n          <span className=\"time\">\n            <span className=\"refresh-text\">\n              {isPending\n                ? t(\"refreshBar.refreshing\")\n                : t(\"refreshBar.lastRefreshed\")}{\" \"}\n            </span>\n            {!isPending ? moment(time).format(dateFormat) : \"\"}\n          </span>\n        ) : null}\n        <Btn\n          svg={svgs.refresh}\n          className={`refresh-btn ${isPending ? \"refreshing\" : \"\"}`}\n          onClick={this.refresh}\n        />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { RefreshBar } from \"./refreshBar\";\n\nexport const RefreshBarContainer = connect(null)(RefreshBar);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Svg } from \"components/shared\";\n\nexport const ThemedSvg = ({ theme, paths, ...props } = {}) => (\n  <Svg path={(paths || {})[theme]} {...props} />\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { ThemedSvg } from \"./themedSvg\";\nimport { getTheme } from \"store/reducers/appReducer\";\n\nconst mapStateToProps = state => ({\n  theme: getTheme(state)\n});\n\nexport const ThemedSvgContainer = connect(\n  mapStateToProps,\n  null\n)(ThemedSvg);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Trans } from \"react-i18next\";\n\nimport Config from \"app.config\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { themedPaths } from \"utilities\";\nimport { Hyperlink, ThemedSvgContainer, Tooltip } from \"components/shared\";\nimport \"./timeSeriesInsightsLink.scss\";\n\nexport class TimeSeriesInsightsLink extends Component {\n  render() {\n    const { t, href } = this.props;\n\n    return (\n      <div className=\"time-series-explorer-container\">\n        <Hyperlink href={href} target=\"_blank\">\n          {t(\"timeSeriesInsights.explore\")}{\" \"}\n        </Hyperlink>\n        <Tooltip\n          content={\n            <Trans i18nKey={\"timeSeriesInsights.exploreTooltip\"}>\n              To view in TSI, get permissions from the solution owner.\n              <Hyperlink\n                href={Config.contextHelpUrls.exploreTimeSeries}\n                target=\"_blank\"\n              >\n                {t(\"timeSeriesInsights.learnMore\")}\n              </Hyperlink>\n            </Trans>\n          }\n        >\n          <ThemedSvgContainer paths={themedPaths.questionBubble} />\n        </Tooltip>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport { TimeSeriesInsightsLink } from \"./timeSeriesInsightsLink\";\n\nexport const TimeSeriesInsightsLinkContainer = withNamespaces()(\n  connect(null)(TimeSeriesInsightsLink)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./panel.scss\";\n\nexport const Panel = ({ className, children }) => (\n  <div className={joinClasses(\"panel-container\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelContent = ({ children, className }) => (\n  <div className={joinClasses(\"panel-content\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelOverlay = ({ children, className }) => (\n  <div className={joinClasses(\"panel-overlay-container\", className)}>\n    {children}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { PanelOverlay } from \"./panelOverlay\";\nimport { joinClasses } from \"utilities\";\n\nexport const PanelError = ({ children, className }) => (\n  <PanelOverlay className=\"error-overlay\">\n    <div className={joinClasses(\"panel-error-container\", className)}>\n      {children}\n    </div>\n  </PanelOverlay>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { Panel } from \"./panel\";\nimport { PanelError } from \"./panelError\";\n\nexport class PanelErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error, info) {\n    this.setState({ hasError: true });\n    // Log the error in the console so it can be more easily debugged\n    console.error(error); // eslint-disable-line no-console\n  }\n\n  render() {\n    return this.state.hasError ? (\n      <Panel>\n        <PanelError>{this.props.msg}</PanelError>\n      </Panel>\n    ) : (\n      this.props.children\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelHeader = ({ children, className }) => (\n  <div className={joinClasses(\"panel-header\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelHeaderLabel = ({ children, className }) => (\n  <h2 className={joinClasses(\"panel-header-label\", className)}>{children}</h2>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelMsg = ({ children, className }) => (\n  <div className={joinClasses(\"panel-message\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const PanelParagraph = ({ children, className }) => (\n  <p className={joinClasses(\"panel-paragraph\", className)}>{children}</p>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { joinClasses } from \"utilities\";\nimport \"./grid.scss\";\nexport const Grid = ({ className, children }) => (\n  <div className={joinClasses(\"grid-container\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./grid.scss\";\n\nexport const Cell = ({ className, children }) => (\n  <div className={joinClasses(\"grid-cell\", className)}>\n    <div className=\"grid-cell-contents\">{children}</div>\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { MapService, JobsService } from \"services\";\nimport {\n  Validator,\n  LinkedComponent,\n  isNull,\n  soilMoistureMeatureType\n} from \"utilities\";\nimport { svgs, isEmptyCheck } from \"utilities\";\nimport { DatePickerElement } from \"./datePickerElement\";\nimport { toNewJobsRequestModel } from \"services/models\";\nimport { Link } from \"react-router-dom\";\nimport {\n  AjaxError,\n  Btn,\n  SuccessMessage,\n  BtnToolbar,\n  ComponentArray,\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent,\n  FormGroup,\n  FormLabel,\n  Indicator,\n  Radio,\n  Svg,\n  Select\n} from \"components/shared\";\nimport \"./generateMapsFlyout.scss\";\nimport moment from \"moment\";\n\nimport {\n  soilMoistureMap,\n  sensorPlacementMap,\n  jobsDateFormat,\n  satelliteIndicesMap\n} from \"utilities\";\nimport { appInsights } from \"applicationInsights\";\n\nlet lastYearDate;\nlet jobTypeId = undefined;\n\nconst initialState = {\n  itemCount: 3,\n  isPending: false,\n  error: undefined,\n  successCount: 0,\n  changesApplied: false,\n  date: new Date(),\n  farmName: undefined,\n  isChecked: undefined,\n  startDate: undefined,\n  endDate: undefined,\n  mapGenerated: undefined,\n  farm: null,\n  sensorMeasureName: \"\",\n  flyoutName: undefined,\n  farmId: undefined,\n  jobError: undefined,\n  selectDate: false,\n  confirmStatus: undefined,\n  noJobType: false,\n  jobCreationError: undefined\n};\n\nexport class GenerateMapsFlyout extends LinkedComponent {\n  constructor(props) {\n    super(props);\n    this.state = { ...initialState, farm: props.farmId };\n    this.onApplyEvent = this.onApplyEvent.bind(this);\n    this.selectFarm = this.selectFarm.bind(this);\n    this.selectSensorMeasure = this.selectSensorMeasure.bind(this);\n    this.generateMaps = this.generateMaps.bind(this);\n    this.getsensorMeasureSelectObject = this.getsensorMeasureSelectObject.bind(\n      this\n    );\n    this.getFarmId = this.getFarmId.bind(this);\n\n    if (!props.jobTypeslastUpdated && !props.jobTypesError) {\n      props.fetchJobTypes();\n    }\n    if (!props.sensorsLastUpdated && !props.isSensorsPending) {\n      props.fetchSensors();\n    }\n    if (!props.sensorModelsLastUpdated && !props.isSensorModelsPending) {\n      props.fetchSensorModels();\n    }\n    if (!props.isDevicesPending && !props.devicesLastUpdated) {\n      props.fetchDevices();\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.flyoutName !== state.flyoutName) {\n      if (props.flyoutName === satelliteIndicesMap) {\n        return {\n          ...initialState,\n          flyoutName: props.flyoutName,\n          startDate: moment()\n            .subtract(7, \"d\")\n            .format(jobsDateFormat),\n          endDate: moment().format(jobsDateFormat)\n        };\n      }\n      if (props.flyoutName === soilMoistureMap) {\n        return {\n          ...initialState,\n          flyoutName: props.flyoutName,\n          startDate: moment()\n            .subtract(1, \"d\")\n            .format(jobsDateFormat),\n          endDate: moment()\n            .subtract(1, \"d\")\n            .format(jobsDateFormat)\n        };\n      }\n      if (props.flyoutName === sensorPlacementMap) {\n        lastYearDate = moment()\n          .subtract(365, \"d\")\n          .format(jobsDateFormat);\n        return {\n          ...initialState,\n          flyoutName: props.flyoutName,\n          startDate: lastYearDate,\n          endDate: moment().format(jobsDateFormat)\n        };\n      }\n    }\n    return null;\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n    appInsights.trackEvent({\n      name: \"UiEvent:FlyClose: Generate \" + this.props.flyoutName\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.flyoutName !== this.props.flyoutName) {\n      appInsights.trackEvent({\n        name: \"UiEvent:FlyChange: Generate \" + this.props.flyoutName\n      });\n    }\n  }\n\n  componentDidMount() {\n    appInsights.trackEvent({\n      name: \"UiEvent:FlyOpen: Generate \" + this.props.flyoutName\n    });\n    if (this.props.flyoutName === satelliteIndicesMap) {\n      this.setState({\n        flyoutName: this.props.flyoutName,\n        startDate: moment()\n          .subtract(7, \"d\")\n          .format(jobsDateFormat),\n        endDate: moment().format(jobsDateFormat)\n      });\n    } else if (this.props.flyoutName === soilMoistureMap) {\n      this.setState({\n        flyoutName: this.props.flyoutName,\n        startDate: moment()\n          .subtract(1, \"d\")\n          .format(jobsDateFormat),\n        endDate: moment()\n          .subtract(1, \"d\")\n          .format(jobsDateFormat)\n      });\n    } else {\n      lastYearDate = moment()\n        .subtract(365, \"d\")\n        .format(jobsDateFormat);\n      this.setState({\n        flyoutName: this.props.flyoutName,\n        startDate: lastYearDate,\n        endDate: moment().format(jobsDateFormat)\n      });\n    }\n  }\n\n  apply = event => {\n    event.preventDefault();\n    this.setState({ isPending: true, successCount: 0, error: null });\n    this.subscription = MapService.updateMapsItems().subscribe(\n      _ => {\n        this.setState({\n          successCount: this.state.successCount + this.state.itemCount\n        });\n      },\n      error => this.setState({ error, isPending: false }),\n      () =>\n        this.setState({\n          isPending: false,\n          confirmStatus: false\n        })\n    );\n  };\n\n  onDateSelect = ({ target: { value } }) => {\n    switch (value) {\n      case \"recommended\":\n        lastYearDate = moment()\n          .subtract(365, \"d\")\n          .format(jobsDateFormat);\n        this.setState({\n          selectDate: false,\n          startDate: lastYearDate,\n          endDate: moment().format(jobsDateFormat)\n        });\n        break;\n      case \"select-date\":\n        this.setState({ selectDate: true });\n        break;\n      case \"this-week\":\n        this.setState({\n          selectDate: false,\n          startDate: moment()\n            .subtract(7, \"d\")\n            .format(jobsDateFormat),\n          endDate: moment().format(jobsDateFormat)\n        });\n        break;\n      case \"yesterday\":\n        this.setState({\n          selectDate: false,\n          startDate: moment()\n            .subtract(1, \"d\")\n            .format(jobsDateFormat),\n          endDate: moment()\n            .subtract(1, \"d\")\n            .format(jobsDateFormat)\n        });\n\n        break;\n      default:\n    }\n  };\n\n  onApplyEvent(event, picker) {\n    const startDate = picker.startDate.format(jobsDateFormat);\n    const endDate = picker.endDate.format(jobsDateFormat);\n\n    this.setState({ startDate: startDate, endDate: endDate });\n  }\n\n  selectFarm(event) {\n    this.setState({\n      farm: event.target.value,\n      sensorMeasureName: \"\"\n    });\n  }\n\n  selectSensorMeasure(event) {\n    this.setState({ sensorMeasureName: event.target.value.value });\n  }\n\n  getFarmId() {\n    return this.props.farmId\n      ? this.props.farmId\n      : this.state.farm === null || this.state.farm === undefined\n        ? \"\"\n        : this.state.farm.value;\n  }\n\n  generateMaps() {\n    const { flyoutName, insertJob } = this.props;\n    const { startDate, endDate, sensorMeasureName } = this.state;\n    const jobQuery = {\n      startDate: startDate,\n      endDate: endDate,\n      farmId: this.getFarmId(),\n      sensorMeasureName: sensorMeasureName,\n      mapType: flyoutName,\n      jobTypeId: jobTypeId\n    };\n    if (jobTypeId === undefined) {\n      this.setState({\n        noJobType: true,\n        mapGenerated: false,\n        changesApplied: true\n      });\n    } else {\n      const requestProps = JSON.parse(JSON.stringify(jobQuery));\n      JobsService.submitJob(toNewJobsRequestModel(requestProps)).subscribe(\n        job => {\n          insertJob({ job });\n          this.setState({\n            isPending: false,\n            changesApplied: true,\n            mapGenerated: true\n          });\n        },\n        error => {\n          this.setState({\n            jobCreationError: error,\n            isPending: false,\n            changesApplied: true,\n            mapGenerated: false\n          });\n        }\n      );\n    }\n  }\n\n  formIsValid() {\n    const x = [this.farmNameLink].every(link => !link.error);\n    const y = [this.sensorMeasureNameLink].every(link => !link.error);\n    const { flyoutName, farmId } = this.props;\n    const { farm, sensorMeasureName } = this.state;\n\n    const validFarm = farmId !== undefined || (x && !isNull(farm));\n    const validsensorMeasure =\n      flyoutName !== soilMoistureMap || (y && !isEmptyCheck(sensorMeasureName));\n\n    return validFarm && validsensorMeasure;\n  }\n\n  getsensorMeasureSelectObject() {\n    const { devices, sensors, sensorModels } = this.props;\n    const farmId = this.getFarmId();\n\n    const sensorMeasureNames = devices\n      .filter(device => device.farmId === farmId)\n      .reduce(\n        (acc, device) =>\n          acc.concat(sensors.filter(sensor => sensor.deviceId === device.id)),\n        []\n      )\n      .reduce(\n        (acc, sensor) =>\n          acc.concat(\n            sensorModels.filter(\n              sensorModel => sensorModel.id === sensor.sensorModelId\n            )\n          ),\n        []\n      )\n      .reduce((acc, sensorModel) => acc.concat(sensorModel.sensorMeasures), [])\n      .filter(sensorMeasure => sensorMeasure.type === soilMoistureMeatureType)\n      .map(sensorMeasure => sensorMeasure.name);\n\n    return Array.from(new Set(sensorMeasureNames)).map(sensorMeasureName =>\n      Object({\n        label: sensorMeasureName,\n        value: sensorMeasureName\n      })\n    );\n  }\n\n  render() {\n    const {\n      t,\n      onClose,\n      flyoutName,\n      farmsSelectObject,\n      farmId,\n      isJobTypesPending,\n      isFarmsPending,\n      farmsError,\n      jobTypeName,\n      jobTypes,\n      jobTypesError\n    } = this.props;\n    const {\n      itemCount,\n      isPending,\n      jobCreationError,\n      selectDate,\n      changesApplied,\n      farm,\n      sensorMeasureName,\n      startDate,\n      endDate,\n      mapGenerated,\n      noJobType\n    } = this.state;\n    const isApiPending = isFarmsPending || isJobTypesPending;\n    const error = farmsError || jobTypesError;\n\n    jobTypeId = jobTypes\n      ? (jobTypes.find(jobType => jobType.name === jobTypeName) || {}).id\n      : undefined;\n\n    this.farmNameLink = this.linkTo(\"farm\").check(Validator.notEmpty, () =>\n      t(\"templates.flyouts.errorMsg.fieldCantBeEmpty\")\n    );\n    this.sensorMeasureNameLink = this.linkTo(\"sensorMeasureName\").check(\n      Validator.notEmpty,\n      () => t(\"templates.flyouts.errorMsg.fieldCantBeEmpty\")\n    );\n    const weekendDate = moment()\n      .subtract(7, \"d\")\n      .format(jobsDateFormat);\n    const today = moment().format(jobsDateFormat);\n\n    return (\n      <div className=\"mapsflyout\">\n        <Flyout>\n          <FlyoutHeader>\n            <FlyoutTitle>\n              <div className=\"bold\"> {flyoutName}</div>\n            </FlyoutTitle>\n            <FlyoutCloseBtn onClick={onClose} />\n          </FlyoutHeader>\n\n          <FlyoutContent>\n            {!!error && (\n              <AjaxError className=\"map-generation-error\" t={t} error={error} />\n            )}\n            {!error && isApiPending && (\n              <BtnToolbar className=\"map-flyout-indicator\">\n                <Indicator />\n              </BtnToolbar>\n            )}\n            {!error && !isApiPending && (\n              <form className=\"maps-flyout-container\" onSubmit={this.apply}>\n                <div className=\"maps-flyout-header\">\n                  {flyoutName === satelliteIndicesMap &&\n                    t(\"maps.flyouts.satteliteIndicesMapDescription\")}\n\n                  {flyoutName === soilMoistureMap &&\n                    t(\"maps.flyouts.soilMoistureMapDescription\")}\n\n                  {flyoutName === sensorPlacementMap &&\n                    t(\"maps.flyouts.sensorPlacementMapDescription\")}\n                </div>\n                {farmId !== undefined && (\n                  <div className=\"maps-flyout-descr\">\n                    {\n                      <Link\n                        to={{\n                          pathname: \"/maps\",\n                          state: {\n                            farmId: farmId\n                          }\n                        }}\n                      >\n                        {t(\"maps.flyouts.allMapsLink\")}\n                      </Link>\n                    }\n                  </div>\n                )}\n\n                {farmId === undefined && (\n                  <div className=\"bold\">{t(\"maps.flyouts.selectFarms\")}</div>\n                )}\n\n                {farmId === undefined && (\n                  <Select\n                    className=\"flyouts-select-list\"\n                    options={farmsSelectObject}\n                    matchProp={\"label\"}\n                    value={farm}\n                    clearable={false}\n                    searchable={true}\n                    onChange={this.selectFarm}\n                    icon={svgs.plus}\n                    placeholder={t(\"maps.flyouts.selectFarmPlaceholder\")}\n                    link={this.farmNameLink}\n                  />\n                )}\n\n                {flyoutName === soilMoistureMap && (\n                  <div className=\"bold soil-info\">\n                    {t(\"maps.flyouts.selectSensorMeasures\")}\n                    <div className=\"soil-tooltip\">\n                      <Svg\n                        className=\"summary-icon soil-tooltip\"\n                        path={svgs.infoBubble}\n                      />\n                      <span className=\"soil-tooltip soil-tooltip-text\">\n                        {t(\"maps.flyouts.soilMoistureTooltip\")}\n                      </span>\n                    </div>\n                  </div>\n                )}\n\n                {flyoutName === soilMoistureMap && (\n                  <Select\n                    className=\"flyouts-select-list soil-moisutre-measure\"\n                    options={this.getsensorMeasureSelectObject()}\n                    matchProp={\"label\"}\n                    value={sensorMeasureName}\n                    clearable={false}\n                    searchable={true}\n                    onChange={this.selectSensorMeasure}\n                    icon={svgs.plus}\n                    placeholder={t(\n                      \"maps.flyouts.selectSensorMeasurePlaceholder\"\n                    )}\n                    link={this.sensorMeasureNameLink}\n                  />\n                )}\n\n                <ComponentArray>\n                  <FormGroup className=\"radio\">\n                    <FormLabel>\n                      <div className=\"bold\">\n                        {t(\"maps.flyouts.selectDates\")}\n                      </div>\n                    </FormLabel>\n                    {flyoutName === soilMoistureMap && (\n                      <Radio\n                        name=\"date\"\n                        value=\"yesterday\"\n                        onClick={this.onDateSelect}\n                        defaultChecked\n                      >\n                        {t(\"maps.flyouts.yesterday\")}\n                      </Radio>\n                    )}\n                    <div>\n                      <div>\n                        {flyoutName === soilMoistureMap && (\n                          <Radio\n                            name=\"date\"\n                            value=\"this-week\"\n                            onClick={this.onDateSelect}\n                          >\n                            {t(\"maps.flyouts.past7Days\").concat(\n                              \"  (\",\n                              String(weekendDate),\n                              \" to \",\n                              String(today),\n                              \")\"\n                            )}\n                          </Radio>\n                        )}\n                      </div>\n                      {flyoutName === satelliteIndicesMap && (\n                        <Radio\n                          name=\"date\"\n                          value=\"this-week\"\n                          onClick={this.onDateSelect}\n                          defaultChecked={flyoutName === satelliteIndicesMap}\n                        >\n                          {t(\"maps.flyouts.thisWeek\").concat(\n                            \"  (\",\n                            String(weekendDate),\n                            \" to \",\n                            String(today),\n                            \")\"\n                          )}\n                        </Radio>\n                      )}\n                    </div>\n                    {flyoutName === sensorPlacementMap && (\n                      <Radio\n                        name=\"date\"\n                        value=\"recommended\"\n                        defaultChecked\n                        onClick={this.onDateSelect}\n                      >\n                        {t(\"maps.flyouts.recommended\")}\n                      </Radio>\n                    )}\n                    <div className=\"select-date-range\">\n                      {\n                        <Radio\n                          name=\"date\"\n                          value=\"select-date\"\n                          onClick={this.onDateSelect}\n                        >\n                          {t(\"maps.flyouts.selectDateRange\")}\n                        </Radio>\n                      }\n                      {selectDate && (\n                        <DatePickerElement\n                          inputValue={startDate + \" to \" + endDate}\n                          onApplyEvent={this.onApplyEvent}\n                        />\n                      )}\n                    </div>\n                  </FormGroup>\n                </ComponentArray>\n\n                {mapGenerated === true && (\n                  <SuccessMessage\n                    className=\"map-generation-success\"\n                    t={t}\n                    successMsg={t(\"maps.flyouts.jobSuccess\")}\n                  />\n                )}\n                {noJobType === true && (\n                  <AjaxError\n                    className=\"map-generation-error\"\n                    t={t}\n                    error={{ message: t(\"maps.flyouts.noJobType\") }}\n                  />\n                )}\n\n                {jobCreationError && (\n                  <AjaxError\n                    className=\"map-generation-error\"\n                    t={t}\n                    error={jobCreationError}\n                  />\n                )}\n                {!changesApplied && !isPending && (\n                  <BtnToolbar>\n                    {/* <Btn primary={true} onClick={onClose} className=\"cancel-btn\">\n                      {t(\"maps.flyouts.cancelButton\")}\n                    </Btn> */}\n                    {\n                      <Btn\n                        primary={true}\n                        disabled={\n                          isPending || itemCount === 0 || !this.formIsValid()\n                        }\n                        type=\"submit\"\n                        onClick={() => {\n                          this.generateMaps();\n                          appInsights.trackEvent({\n                            name:\n                              \"UiEvent:Click: Generate \" +\n                              flyoutName +\n                              \" Maps Btn\"\n                          });\n                        }}\n                        className=\"generate-map-btn\"\n                        id={\n                          !this.formIsValid()\n                            ? \"applyMapBtnDisabled\"\n                            : \"applyMapBtn\"\n                        }\n                      >\n                        {t(\"maps.flyouts.generateMapsButton\")}\n                      </Btn>\n                    }\n                  </BtnToolbar>\n                )}\n                {isPending && (\n                  <BtnToolbar className=\"button-box\">\n                    <Indicator />\n                  </BtnToolbar>\n                )}\n                {!!changesApplied && (\n                  <BtnToolbar>\n                    {/* <Btn primary={true} onClick={onClose} className=\"cancel-btn\">\n                      {t(\"maps.flyouts.cancelButton\")}\n                    </Btn> */}\n                  </BtnToolbar>\n                )}\n              </form>\n            )}\n          </FlyoutContent>\n        </Flyout>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { GenerateMapsFlyout } from \"./generateMapsFlyout\";\nimport { getFarmsMap, epics as farmEpics } from \"store/reducers/farmsReducer\";\n\nimport { redux as jobsRedux } from \"store/reducers/jobsReducer\";\n\nimport {\n  epics as jobsEpics,\n  getJobTypes,\n  getJobTypesError,\n  getJobTypesPendingStatus,\n  getJobTypesLastUpdated\n} from \"store/reducers/jobsReducer\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorModels,\n  getSensorLastUpdated,\n  getSensorPendingStatus,\n  getSensorModelPendingStatus,\n  getSensorModelLastUpdated\n} from \"store/reducers/sensorsReducer\";\nimport {\n  epics as deviceEpics,\n  getDevices,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus\n} from \"store/reducers/devicesReducer\";\n\nconst mapStateToProps = state => ({\n  farmsMap: getFarmsMap(state),\n  sensors: getSensors(state),\n  sensorModels: getSensorModels(state),\n  devices: getDevices(state),\n  jobTypes: getJobTypes(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  isSensorModelsPending: getSensorModelPendingStatus(state),\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n  jobTypesError: getJobTypesError(state),\n  isJobTypesPending: getJobTypesPendingStatus(state),\n  jobTypeslastUpdated: getJobTypesLastUpdated(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchJobTypes: () => dispatch(jobsEpics.actions.fetchJobTypes()),\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels()),\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices()),\n  insertJob: job => dispatch(jobsRedux.actions.insertJob(job))\n});\n\nexport const GenerateMapsFlyoutContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(GenerateMapsFlyout);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { svgs } from \"utilities\";\n\nimport \"./noMapImage.scss\";\n\nexport const NoMapImage = ({ msg, t, className }) => (\n  <div>\n    <div className={className ? className : `no-map-image`}>\n      <img src={svgs.NoMapImage} alt={t(\"maps.modal.noMap\")} />\n    </div>\n    <div className=\"no-map-text\">{msg}</div>\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { SuccessMsg } from \"../forms\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./successMessage.scss\";\n\nexport const SuccessMessage = ({ successMsg, t, className }) => (\n  <div className={joinClasses(\"success-message-container\", className)}>\n    <SuccessMsg>\n      {t(\"successMessage\", {\n        message: t(successMsg, { message: successMsg })\n      })}\n    </SuccessMsg>\n  </div>\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { displayable } from \"utilities\";\n\nexport const TableRenderer = ({ data, colonAvailable }) => (\n  <table>\n    <tbody>\n      {data &&\n        Object.entries(data).map(([itemKey, itemValue], key) => (\n          <tr key={key}>\n            <td className=\"label\">{displayable(itemKey)}</td>\n            <td>{colonAvailable ? \": \" : \"\"}</td>\n            <td>{displayable(itemValue)}</td>\n          </tr>\n        ))}\n    </tbody>\n  </table>\n);\n\nTableRenderer.propTypes = {\n  data: PropTypes.object,\n  colonAvailable: PropTypes.bool\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./propertiesTable.scss\";\nimport { TableRenderer } from \"./tableRenderer\";\n\nconst PropertiesTable = ({ leftTableData, rightTableData, isTableColon }) => (\n  <div className=\"properties-container\">\n    <TableRenderer data={leftTableData} colonAvailable={isTableColon} />\n    <TableRenderer data={rightTableData} colonAvailable={isTableColon} />\n  </div>\n);\n\nPropertiesTable.propTypes = {\n  leftTableData: PropTypes.object,\n  rightTableData: PropTypes.object,\n  isTableColon: PropTypes.bool\n};\n\nPropertiesTable.defaultProps = {\n  isTableColon: true\n};\n\nexport default PropertiesTable;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { Observable } from \"rxjs\";\nimport update from \"immutability-helper\";\n\n// A collection of helper objects for reducing store/redux-observable boilerplate\n\n/**\n * Utility method for generating redux action creators\n */\nexport const createAction = (type, staticPayload) => {\n  const creator = (payload, meta = {}) => ({ type, payload, ...meta });\n  const useStaticPayload = typeof staticPayload !== \"undefined\";\n  return useStaticPayload ? () => creator(staticPayload) : creator;\n};\n\n/**\n * Capture any uncaught errors to avoid causing the epic stream to fail\n */\nfunction handleUncaughtError(type) {\n  return error => {\n    console.error(`Uncaught error in epic \"${type}\":`, error); // eslint-disable-line no-console\n    return Observable.empty();\n  };\n}\n\n/**\n * A helper method for choosing between the epic and rawEpic parameters of the\n * createEpicCase input\n */\nfunction chooseEpicParam(type, epic, rawEpic) {\n  if (rawEpic) {\n    return (action$, store) =>\n      rawEpic(action$, store, type).catch(handleUncaughtError(type));\n  }\n  return (action$, store) =>\n    action$\n      .ofType(type)\n      .flatMap(action => epic(action, store, action$))\n      .catch(handleUncaughtError(type));\n}\n\n/**\n * A helper function creating epic scenarios\n * An epic scenario consists of three properties\n *  - The action type string\n *  - The action creator\n *  - The epic that handles actions of given type\n */\nexport function createEpicCase(params) {\n  if ((!params.type && !params.rawType) || (!params.epic && !params.rawEpic)) {\n    throw new Error(\n      'Error in createEpicCase: \"type\" and \"epic\" are required parameters'\n    );\n  }\n\n  // The scenario properties\n  const type = params.rawType || `EPIC_${params.type}`;\n  const action = createAction(type, params.staticPayload);\n  const epic = chooseEpicParam(type, params.epic, params.rawEpic);\n\n  return { type, action, epic };\n}\n\n/**\n * A helper function creating epics from epic cases.\n * An epic scenario takes an object of epic cases and returns\n * the following object:\n *  - actionTypes: An object of user defined names mapped to action type strings\n *  - actions: An object of user defined names mapped to action creators\n *  - epics: An object of user defined names mapped to epic\n */\nexport function createEpicScenario(cases = {}) {\n  const scenario = Object.keys(cases).reduce(\n    (acc, caseName) => {\n      const { type, action, epic } = createEpicCase(cases[caseName]);\n      return {\n        actionTypes: { ...acc.actionTypes, [caseName]: type },\n        actions: { ...acc.actions, [caseName]: action },\n        epics: { ...acc.epics, [caseName]: epic }\n      };\n    },\n    {\n      actionTypes: {},\n      actions: {},\n      epics: {}\n    }\n  );\n\n  const getEpics = () =>\n    Object.keys(scenario.epics).map(key => scenario.epics[key]);\n\n  return { ...scenario, getEpics };\n}\n\n/**\n * A helper function for creating reducer case property objects\n * A reducer case consists of three properties\n *  - The action type string\n *  - The action creator\n *  - The reducer that handles actions of given type\n */\nfunction createReducerCase(params) {\n  if (\n    (!params.type && !params.rawType && !params.multiType) ||\n    !params.reducer\n  ) {\n    throw new Error(\n      'Error in createReducerCase: \"type\" and \"reducer\" are required parameters'\n    );\n  }\n\n  // The scenario properties\n  const type = params.multiType || params.rawType || `REDUX_${params.type}`;\n  const action = !params.multiType\n    ? createAction(type, params.staticPayload)\n    : undefined;\n  const reducer = params.reducer;\n\n  return { type, action, reducer };\n}\n\n/**\n * A helper function creating reducers from reducer cases.\n * A reducer scenario takes an object of reducer cases and returns\n * the following object:\n *  - actionTypes: An object of user defined names mapped to action type strings\n *  - actions: An object of user defined names mapped to action creators\n *  - reducers: An object of user defined names mapped to reducer functions\n */\nexport function createReducerScenario(cases = {}) {\n  // A mapping from scenario names to their reducer properties\n  const { actionTypes, actions, reducers } = Object.keys(cases).reduce(\n    (acc, caseName) => {\n      const { type, action, reducer } = createReducerCase(cases[caseName]);\n      return {\n        actionTypes: { ...acc.actionTypes, [caseName]: type },\n        actions: { ...acc.actions, [caseName]: action },\n        reducers: { ...acc.reducers, [caseName]: reducer }\n      };\n    },\n    {\n      actionTypes: {},\n      actions: {},\n      reducers: {}\n    }\n  );\n\n  // A mapping from action type strings to their reducers\n  // Used for fast lookup of action types in the primary reducer method\n  const actionReducers = Object.keys(reducers).reduce((acc, actionName) => {\n    const actionType = actionTypes[actionName];\n    const matchTypes = Array.isArray(actionType) ? actionType : [actionType];\n    const reducer = reducers[actionName];\n    const reducerMapping = matchTypes.reduce(\n      (acc, type) => ({ ...acc, [type]: reducer }),\n      {}\n    );\n    return { ...acc, ...reducerMapping };\n  }, {});\n\n  // The full reducer for the scenario\n  const getReducer = (initialState = {}) => (state = initialState, action) => {\n    if (action.type in actionReducers) {\n      return actionReducers[action.type](state, action);\n    }\n    return state;\n  };\n\n  return { actionTypes, actions, reducers, getReducer };\n}\n\n/*\n * Many reducers need to track loading states and error states.\n * These methods make managing these states easily replicable\n * across reducers.\n */\nexport const errorPendingInitialState = { pending: {}, errors: {} };\n\n// setPending and setError are intended to be used inside immutability-helper update\nexport const setPending = (type, flag) => ({\n  pending: { [type]: { $set: flag } }\n});\n\nexport const setError = (type, error) => ({\n  errors: { [type]: { $set: error } }\n});\n\nexport const resetPendingAndErrorReducer = (state, { payload }) =>\n  update(state, {\n    ...setPending(payload, false),\n    ...setError(payload)\n  });\n\nexport const pendingReducer = (state, { type }) =>\n  update(state, {\n    ...setPending(type, true),\n    ...setError(type)\n  });\n\nexport const errorReducer = (state, { payload, error }) =>\n  update(state, {\n    ...setPending(payload, false),\n    ...setError(payload, error)\n  });\n\nexport const resetErrorReducer = (state, { payload }) =>\n  update(state, {\n    errors: { $set: {} }\n  });\n\nexport const getPending = (state, type) => state.pending[type];\nexport const getError = (state, type) => state.errors[type];\n\nexport const toActionCreator = (actionCreator, fromAction) => payload =>\n  actionCreator(payload, { fromAction });\n","// Copyright (c) Microsoft. All rights reserved.\nconst baseUrl =\n  process.env.REACT_APP_BASE_SERVICE_URL ||\n  global.DeploymentConfig.backendEndpoint;\n// TODO : Remove hard coded URL\nconst validExtensions = [\".png\", \".jpeg\", \".jpg\", \".svg\"];\n\nexport const graphApiResourceUrl = \"https://graph.microsoft.com\";\n\nconst Config = {\n  serviceUrls: {\n    // agadhikaTODO Some of these don't exist\n    auth: `${baseUrl}/auth/v1/`,\n    config: `${baseUrl}/config/v1/`,\n    iotHubManager: `${baseUrl}/iothubmanager/v1/`,\n    telemetry: `${baseUrl}/Telemetry`,\n    deviceSimulation: `${baseUrl}/devicesimulation/v1/`,\n    diagnostics: `${baseUrl}/diagnostics/v1/`,\n    privacy: \"https://privacy.microsoft.com/privacystatement\",\n    template: `${baseUrl}/sensorboxmanager/v1/`,\n    scene: `${baseUrl}/Scene`,\n    sceneFile: `${baseUrl}/SceneFile`,\n    deviceModel: `${baseUrl}/DeviceModel`,\n    farms: `${baseUrl}/Farm`,\n    device: `${baseUrl}/Device`,\n    sensors: `${baseUrl}/Sensor`,\n    sensorModel: `${baseUrl}/SensorModel`,\n    job: `${baseUrl}/Job`,\n    alerts: `${baseUrl}/Alert`,\n    jobType: `${baseUrl}/JobType`,\n    rules: `${baseUrl}/Rule`,\n    roleAssignment: `${baseUrl}/RoleAssignment`,\n    roleDefinition: `${baseUrl}/RoleDefinition`,\n\n    graphApiUsers: `${graphApiResourceUrl}/v1.0/users`\n\n    // TODO: Determine if should query java or dotnet\n  },\n\n  contextHelpUrls: {\n    accessDenied:\n      \"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac#add-or-remove-users\",\n    rolesAndPermissions:\n      \"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac\",\n    ruleActionsEmail:\n      \"https://go.microsoft.com/fwlink/?linkid=2041110&clcid=0x409\",\n    exploreTimeSeries:\n      \"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac-tsi\",\n    deploymentPriority:\n      \"https://docs.microsoft.com/en-us/azure/iot-edge/module-deployment-monitoring#priority\"\n  },\n  // Constants\n  apiGetAllMaxItems: 1000,\n  graphApiUserBufferSize: 15, // agadhikaTODO find out optimal size\n  showWalkthroughExamples: false,\n  defaultAjaxTimeout: 20000, // 20s\n  maxRetryAttempts: 2,\n  retryWaitTime: 2000, // On retryable error, retry after 2s\n  retryableStatusCodes: new Set([0, 401, 502, 503]),\n  paginationPageSize: 14,\n  smallGridPageSize: 8,\n  clickDebounceTime: 180, // ms\n  gridResizeDebounceTime: 200, // ms\n  dashboardRefreshInterval: 15000, // 15 seconds\n  telemetryRefreshInterval: 120 * 1000, // 2 minutes\n  actionSetupPollingInterval: 20 * 1000, // every 20 seconds\n  actionSetupPollingTimeLimit: 2 * 60 * 1000, // for up to 2 minutes\n  simulationId: \"1\",\n  validExtensions: validExtensions.join(),\n  emptyFieldValue: \"---\", // for use in grid columns\n  emptyValue: \"--\", // for use in stat components\n  maxTopAlerts: 5,\n  maxAlertsCount: 1000,\n  mapCenterPosition: [-122.3320708, 47.606], // Default to Seattle\n  ruleSeverity: {\n    info: \"info\",\n    warning: \"warning\",\n    critical: \"critical\"\n  },\n  alertStatus: {\n    open: \"open\",\n    closed: \"closed\",\n    acknowledged: \"acknowledged\"\n  },\n  maxLogoFileSizeInBytes: 307200,\n  device: {\n    device: \"IoT device\",\n    edgeDevice: \"IoT Edge device\"\n  },\n  deviceType: {\n    simulated: \"Simulated\",\n    physical: \"Real\"\n  },\n  deviceModel: {\n    node: \"node\",\n    gateway: \"gateway\",\n    online: \"online\",\n    offline: \"offline\"\n  },\n  jobModel: {\n    submitted: \"submitted\",\n    accepted: \"accepted\",\n    running: \"running\",\n    pendingRetry: \"pendingretry\",\n    failed: \"failed\",\n    succeeded: \"succeeded\",\n    stopped: \"stopped\",\n    stopRequested: \"stoprequested\"\n  },\n  authenticationType: {\n    symmetricKey: \"Symmetric key\",\n    x509: \"X.509\"\n  },\n  authenticationKey: {\n    autoKey: \"Auto generate keys\",\n    manualKey: \"Enter keys manually\"\n  }\n};\n\nexport default Config;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport \"./flyout.scss\";\n\nexport const Flyout = ({ children }) => (\n  <div className=\"flyout-container\">{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const FlyoutHeader = ({ className, children }) => (\n  <div className={joinClasses(\"flyout-header\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const FlyoutTitle = ({ className, children }) => (\n  <div className={joinClasses(\"flyout-title\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Btn } from \"components/shared\";\nimport { svgs } from \"utilities\";\n\nexport const FlyoutCloseBtn = props => (\n  <Btn {...props} svg={svgs.x} className=\"flyout-close-btn\" />\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const FlyoutContent = ({ className, children }) => (\n  <div className={joinClasses(\"flyout-content\", className)}>{children}</div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component, Children } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// A provider for passing accordion collapsed/expanded status to children\nexport class AccordionProvider extends Component {\n  static childContextTypes = {\n    accordionIsOpen: PropTypes.bool.isRequired,\n    accordionIsCollapsable: PropTypes.bool.isRequired,\n    toggleAccordion: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    const { isCollapsable = true, isClosed = true } = this.props;\n    this.state = {\n      accordionIsOpen: isClosed,\n      accordionIsCollapsable: isCollapsable\n    };\n  }\n\n  toggle = event => {\n    // Prevent default submit, incase the event happens inside a form\n    event.preventDefault();\n    this.setState({ accordionIsOpen: !this.state.accordionIsOpen });\n  };\n\n  getChildContext() {\n    const { accordionIsOpen, accordionIsCollapsable } = this.state;\n    return {\n      accordionIsOpen,\n      accordionIsCollapsable,\n      toggleAccordion: this.toggle\n    };\n  }\n\n  render() {\n    return Children.only(this.props.children);\n  }\n}\n\n// A helper HOC to access the accordion state\nexport const withAccordion = ComponentToWrap => {\n  return class WithAccordionComponent extends Component {\n    static contextTypes = {\n      accordionIsOpen: PropTypes.bool.isRequired,\n      toggleAccordion: PropTypes.func.isRequired,\n      accordionIsCollapsable: PropTypes.bool.isRequired\n    };\n\n    render() {\n      const {\n        accordionIsOpen,\n        accordionIsCollapsable,\n        toggleAccordion\n      } = this.context;\n      return (\n        <ComponentToWrap\n          {...this.props}\n          accordionIsOpen={accordionIsOpen}\n          accordionIsCollapsable={accordionIsCollapsable}\n          toggleAccordion={toggleAccordion}\n        />\n      );\n    }\n  };\n};\n\n// A helper component for wrapping content that is collapsable or expandable\nexport const AccordionCollapsableContent = withAccordion(\n  ({ accordionIsOpen, children }) => (accordionIsOpen ? children : null)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { FlyoutSection } from \"./flyoutSection\";\nimport { FlyoutSectionHeader } from \"./flyoutSectionHeader\";\nimport { FlyoutSectionContent } from \"./flyoutSectionContent\";\n\nexport * from \"./flyoutSection\";\nexport * from \"./flyoutSectionHeader\";\nexport * from \"./flyoutSectionContent\";\n\nexport default {\n  Container: FlyoutSection,\n  Header: FlyoutSectionHeader,\n  Content: FlyoutSectionContent\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { AccordionProvider } from \"./accordionProvider\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./flyoutSection.scss\";\n\nexport const FlyoutSection = ({ collapsable, className, children, closed }) => (\n  <AccordionProvider isCollapsable={collapsable} isClosed={closed}>\n    <div className={joinClasses(\"flyout-section\", className)}>{children}</div>\n  </AccordionProvider>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { withAccordion } from \"./accordionProvider\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs, joinClasses } from \"utilities\";\n\nexport const FlyoutSectionHeader = withAccordion(\n  ({\n    accordionIsCollapsable,\n    className,\n    children,\n    toggleAccordion,\n    accordionIsOpen\n  }) => {\n    const sectionProps = {\n      className: joinClasses(\"flyout-section-header\", className)\n    };\n    return accordionIsCollapsable ? (\n      <button {...sectionProps} onClick={toggleAccordion}>\n        {children}\n        {accordionIsCollapsable && (\n          <Svg\n            path={svgs.chevron}\n            className={joinClasses(\n              \"collapse-section-icon\",\n              accordionIsOpen ? \"expanded\" : \"collapsed\"\n            )}\n          />\n        )}\n      </button>\n    ) : (\n      <div {...sectionProps}>{children}</div>\n    );\n  }\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { AccordionCollapsableContent } from \"./accordionProvider\";\nimport { joinClasses } from \"utilities\";\n\nexport const FlyoutSectionContent = ({ className, children }) => (\n  <AccordionCollapsableContent>\n    <div className={joinClasses(\"flyout-section-content\", className)}>\n      {children}\n    </div>\n  </AccordionCollapsableContent>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\n// Exports the shared react components into as a library\n\nimport { Flyout } from \"./flyout\";\nimport { FlyoutHeader } from \"./flyoutHeader\";\nimport { FlyoutTitle } from \"./flyoutTitle\";\nimport { FlyoutCloseBtn } from \"./flyoutCloseBtn\";\nimport { FlyoutContent } from \"./flyoutContent\";\nimport Section from \"./flyoutSection\";\n\nexport * from \"./flyout\";\nexport * from \"./flyoutHeader\";\nexport * from \"./flyoutTitle\";\nexport * from \"./flyoutCloseBtn\";\nexport * from \"./flyoutContent\";\nexport * from \"./flyoutSection\";\n\nexport default {\n  Container: Flyout,\n  Header: FlyoutHeader,\n  Title: FlyoutTitle,\n  CloseBtn: FlyoutCloseBtn,\n  Content: FlyoutContent,\n  Section: Section\n};\n","import { ApplicationInsights } from \"@microsoft/applicationinsights-web\";\nimport { ReactPlugin } from \"@microsoft/applicationinsights-react-js\";\nimport uuidv4 from \"uuid\";\nexport let appInsights = null;\nexport const reactPlugin = new ReactPlugin();\nconst globallyUniqueSessionId = uuidv4();\n\nexport const initialize = (instrumentationKey, historyObject) => {\n  if (!historyObject) {\n    throw new Error(\"History object missing\");\n  }\n  if (!instrumentationKey) {\n    throw new Error(\"Instrumentation key missing\");\n  }\n\n  appInsights = new ApplicationInsights({\n    config: {\n      instrumentationKey: instrumentationKey,\n      maxBatchInterval: 0,\n      disableFetchTracking: false,\n      extensions: [reactPlugin],\n      extensionConfig: {\n        [reactPlugin.identifier]: {\n          history: historyObject\n        }\n      }\n    }\n  });\n\n  appInsights.loadAppInsights();\n\n  const globallyUniqueSessionIdTelemetryInitializer = telemetryItem => {\n    telemetryItem.ext.app.sesId = globallyUniqueSessionId;\n    return true;\n  };\n\n  appInsights.addTelemetryInitializer(\n    globallyUniqueSessionIdTelemetryInitializer\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\n// agadhika These following things dont exist. Remove all references as well as their dependencies and their dependents\n// edge\n// DeviceModule\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { createSelector } from \"reselect\";\nimport { redux as appRedux } from \"./appReducer\";\nimport { deviceService, FarmService } from \"services\";\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  resetPendingAndErrorReducer,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  toActionCreator,\n  getPending,\n  getError\n} from \"store/utilities\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Loads the devices */\n  fetchDevices: {\n    type: \"DEVICES_FETCH\",\n    epic: fromAction =>\n      Observable.forkJoin(\n        deviceService.getDevices(),\n        deviceService.getDeviceModels(),\n        FarmService.getFarms()\n      )\n        .map(([devices, devicetypes, farms]) => {\n          const devicetypemap = new Map();\n          const deviceTypeNamemap = new Map();\n          const farmMap = new Map();\n          farms.forEach(farm => {\n            farmMap.set(farm.id, farm.name);\n          });\n          devicetypes.forEach(type => {\n            devicetypemap.set(type.id, type.type);\n          });\n          devicetypes.forEach(type => {\n            deviceTypeNamemap.set(type.id, type.type);\n          });\n\n          devices.forEach(device => {\n            device.deviceModelType = devicetypemap.get(device.deviceModelId);\n            device.deviceModelName = deviceTypeNamemap.get(\n              device.deviceModelId\n            );\n            const deviceMapWithParent = devices.find(\n              devicePrarent => devicePrarent.id === device.parentDeviceId\n            );\n            device.parentDevice =\n              deviceMapWithParent === undefined\n                ? undefined\n                : deviceMapWithParent.name;\n            device.farmName =\n              device.farmId === null || undefined\n                ? undefined\n                : farmMap.get(device.farmId);\n          });\n          return { ...devices };\n        })\n        .map(toActionCreator(redux.actions.updateDevices, fromAction))\n        .catch(handleError(fromAction))\n  },\n\n  fetchDeviceModel: {\n    type: \"DEVICESMODEL_FETCH\",\n    epic: fromAction => {\n      return deviceService\n        .getDeviceModels()\n        .map(toActionCreator(redux.actions.updateDevicesModel, fromAction))\n        .catch(handleError(fromAction));\n    }\n  },\n\n  /* Update the devices if the selected device group changes */\n  refreshDevices: {\n    type: \"DEVICES_REFRESH\",\n    rawEpic: $actions =>\n      $actions\n        .ofType(appRedux.actionTypes.updateActiveDeviceGroup)\n        .map(({ payload }) => payload)\n        .distinctUntilChanged()\n        .map(_ => epics.actions.fetchDevices())\n  },\n\n  deleteDevicesById: {\n    type: \"DELETE_DEVICES_BY_ID\",\n    epic: fromAction => {\n      return Observable.from(fromAction.payload)\n        .flatMap(({ id }) => {\n          return deviceService.deleteDevice(id).map(() => id);\n        })\n        .map(toActionCreator(redux.actions.deleteDevices, fromAction));\n    }\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst deviceSchema = new schema.Entity(\"devices\");\nconst deviceListSchema = new schema.Array(deviceSchema);\n\nconst deviceModelSchema = new schema.Entity(\"deviceModels\");\nconst deviceModelListSchema = new schema.Array(deviceModelSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  entities: {},\n  items: [],\n  deviceModelEntities: {},\n  deviceModelItems: [],\n  lastUpdated: undefined,\n  deviceModelLastUpdated: undefined\n};\n\nconst updateDevicesReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { devices },\n    result\n  } = normalize(payload, deviceListSchema);\n  return update(state, {\n    entities: { $set: devices },\n    items: { $set: result },\n    lastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateDeviceModelReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { deviceModels },\n    result\n  } = normalize(payload, deviceModelListSchema);\n  return update(state, {\n    deviceModelEntities: { $set: deviceModels },\n    deviceModelItems: { $set: result },\n    deviceModelLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateDevicesByConditionReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { devices }\n  } = normalize(payload, deviceListSchema);\n  return update(state, {\n    devicesByCondition: { $set: devices },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst deleteDevicesReducer = (state, { payload, fromAction }) => {\n  const spliceArr = payload.reduce((idxAcc, payloadItem) => {\n    const idx = state.items.indexOf(payloadItem);\n    if (idx !== -1) {\n      idxAcc.push([idx, 1]);\n    }\n    return idxAcc;\n  }, []);\n  return update(state, {\n    entities: { $unset: payload },\n    items: { $splice: spliceArr }\n  });\n};\n\nconst insertDevicesReducer = (state, { payload }) => {\n  const inserted = payload.map(device => ({ ...device, isNew: true }));\n  const {\n    entities: { devices },\n    result\n  } = normalize(inserted, deviceListSchema);\n  if (state.entities) {\n    return update(state, {\n      entities: { $merge: devices },\n      items: { $splice: [[0, 0, ...result]] }\n    });\n  }\n  return update(state, {\n    entities: { $set: devices },\n    items: { $set: result }\n  });\n};\n\nconst updateTagsReducer = (state, { payload }) => {\n  const updatedTagData = {};\n  payload.updatedTags.forEach(\n    ({ name, value }) => (updatedTagData[name] = value)\n  );\n\n  const updatedDevices = payload.deviceIds.map(id =>\n    update(state.entities[id], {\n      tags: {\n        $merge: updatedTagData,\n        $unset: payload.deletedTags\n      }\n    })\n  );\n\n  const {\n    entities: { devices }\n  } = normalize(updatedDevices, deviceListSchema);\n  return update(state, {\n    entities: { $merge: devices }\n  });\n};\n\nconst updateModuleStatusReducer = (state, { payload, fromAction }) => {\n  const updateAction = payload\n    ? { deviceModuleStatus: { $set: payload } }\n    : { $unset: [\"deviceModuleStatus\"] };\n\n  return update(state, {\n    ...updateAction,\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updatePropertiesReducer = (state, { payload }) => {\n  const updatedPropertyData = {};\n  payload.updatedProperties.forEach(\n    ({ name, value }) => (updatedPropertyData[name] = value)\n  );\n\n  const updatedDevices = payload.deviceIds.map(id =>\n    update(state.entities[id], {\n      desiredProperties: {\n        $merge: updatedPropertyData,\n        $unset: payload.deletedProperties\n      }\n    })\n  );\n\n  const {\n    entities: { devices }\n  } = normalize(updatedDevices, deviceListSchema);\n  return update(state, {\n    entities: { $merge: devices }\n  });\n};\n\nconst modifyDeviceReducer = (state, { payload }) => {\n  const {\n    entities: { devices = {} }\n  } = normalize(payload, deviceListSchema);\n  return update(state, {\n    entities: { $merge: devices },\n    lastUpdated: { $set: moment() }\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchDevices,\n  epics.actionTypes.fetchDeviceModel,\n  epics.actionTypes.fetchDevicesByCondition,\n  epics.actionTypes.fetchEdgeAgent\n];\n\nexport const redux = createReducerScenario({\n  updateDevices: { type: \"DEVICES_UPDATE\", reducer: updateDevicesReducer },\n  updateDevicesModel: {\n    type: \"DEVICEMODEL_UPDATE\",\n    reducer: updateDeviceModelReducer\n  },\n  updateDevicesByCondition: {\n    type: \"DEVICES_UPDATE_BY_CONDITION\",\n    reducer: updateDevicesByConditionReducer\n  },\n  registerError: { type: \"DEVICES_REDUCER_ERROR\", reducer: errorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer },\n  deleteDevices: { type: \"DEVICE_DELETE\", reducer: deleteDevicesReducer },\n  insertDevices: { type: \"DEVICE_INSERT\", reducer: insertDevicesReducer },\n  modifyDevices: { type: \"DEVICE_MODIFY\", reducer: modifyDeviceReducer },\n  updateTags: { type: \"DEVICE_UPDATE_TAGS\", reducer: updateTagsReducer },\n  updateProperties: {\n    type: \"DEVICE_UPDATE_PROPERTIES\",\n    reducer: updatePropertiesReducer\n  },\n  updateModuleStatus: {\n    type: \"DEVICE_MODULE_STATUS\",\n    reducer: updateModuleStatusReducer\n  },\n  resetPendingAndError: {\n    type: \"DEVICE_REDUCER_RESET_ERROR_PENDING\",\n    reducer: resetPendingAndErrorReducer\n  }\n});\n\nexport const reducer = { devices: redux.getReducer(initialState) };\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getDevicesReducer = state => state.devices;\nexport const getEntities = state => getDevicesReducer(state).entities || {};\nexport const getItems = state => getDevicesReducer(state).items || [];\nexport const getDevicesLastUpdated = state =>\n  getDevicesReducer(state).lastUpdated;\nexport const getDevicesError = state =>\n  getError(getDevicesReducer(state), epics.actionTypes.fetchDevices);\nexport const getDevicesPendingStatus = state =>\n  getPending(getDevicesReducer(state), epics.actionTypes.fetchDevices);\nexport const getDevicesByCondition = state =>\n  getDevicesReducer(state).devicesByCondition || {};\nexport const getDevicesByConditionError = state =>\n  getError(getDevicesReducer(state), epics.actionTypes.fetchDevicesByCondition);\nexport const getDevicesByConditionPendingStatus = state =>\n  getPending(\n    getDevicesReducer(state),\n    epics.actionTypes.fetchDevicesByCondition\n  );\n\nexport const getDeviceModelEntities = state =>\n  getDevicesReducer(state).deviceModelEntities;\nexport const getDeviceModelItems = state =>\n  getDevicesReducer(state).deviceModelItems;\nexport const getDeviceModelError = state =>\n  getError(getDevicesReducer(state), epics.actionTypes.fetchDeviceModel);\nexport const getDeviceModelLastUpdated = state =>\n  getDevicesReducer(state).deviceModelLastUpdated;\nexport const getDeviceModelsPendingStatus = state =>\n  getPending(getDevicesReducer(state), epics.actionTypes.fetchDeviceModel);\n\nexport const getDevices = createSelector(\n  getEntities,\n  getItems,\n  (entities, items) => items.map(id => entities[id])\n);\n\nexport const getDeviceById = (state, id) => getEntities(state)[id];\nexport const getDeviceModuleStatus = state => {\n  // agadhika Possible cleanup\n  const deviceModuleStatus = getDevicesReducer(state).deviceModuleStatus;\n  return deviceModuleStatus\n    ? {\n        code: deviceModuleStatus.code,\n        description: deviceModuleStatus.description\n      }\n    : undefined;\n};\nexport const getDeviceModuleStatusPendingStatus = (\n  state // agadhika Possible cleanup\n) => getPending(getDevicesReducer(state), epics.actionTypes.fetchEdgeAgent);\nexport const getDeviceModuleStatusError = (\n  state // agadhika Possible cleanup\n) => getError(getDevicesReducer(state), epics.actionTypes.fetchEdgeAgent);\n\nexport const getDeviceModels = createSelector(\n  getDeviceModelEntities,\n  getDeviceModelItems,\n  (deviceModelEntities, deviceModelItems) =>\n    deviceModelItems.map(id => deviceModelEntities[id])\n);\n\nexport const getDevicesMap = createSelector(\n  getEntities,\n  getItems,\n  (deviceEntities, deviceItems) =>\n    deviceItems.reduce((devicesMap, id) => {\n      return devicesMap.set(id, deviceEntities[id].name);\n    }, new Map())\n);\nexport const getDeviceModelsMap = createSelector(\n  getDeviceModelEntities,\n  getDeviceModelItems,\n  (deviceModelEntities, deviceModelItems) =>\n    deviceModelItems.reduce((deviceModelsMap, id) => {\n      return deviceModelsMap.set(id, deviceModelEntities[id].type);\n    }, new Map())\n);\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"polyfills\";\nimport { camelCaseReshape } from \"utilities\";\n\nconst methods = [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\"];\nconst resources = [\n  \"Device\",\n  \"DeviceModel\",\n  \"Rule\",\n  \"Sensor\",\n  \"SensorModel\",\n  \"Job\",\n  \"JobType\",\n  \"Scene\",\n  \"SceneFile\",\n  \"Farm\",\n  \"RoleAssignment\",\n  \"RoleDefinition\",\n  \"Alert\",\n  \"ExtendedType\",\n  \"Telemetry\",\n  \"Partner\"\n];\n\nexport const permissions = {\n  readAll: resources.map(resource =>\n    resource === \"Telemetry\" ? resource + \"_POST\" : resource + \"_GET\"\n  ),\n  createFarms: [\"Farm_POST\"],\n  editFarms: [\"Farm_PUT\"],\n  deleteFarms: [\"Farm_DELETE\"],\n  addDevices: [\"Device_POST\"],\n  // createDevices: ['CreateDevices'],\n  deleteDevices: [\"Device_DELETE\"],\n  updateDevices: [\"Device_PUT\"],\n  deleteSensors: [\"Sensor_DELETE\"],\n  createMaps: [\"Job_POST\"],\n  createRules: [\"Rule_POST\"],\n  deleteRules: [\"Rule_DELETE\"],\n  updateRules: [\"Rule_PUT\"],\n  addUser: [\"RoleAssignment_POST\"],\n  deleteUser: [\"RoleAssignment_DELETE\"],\n  readRoleAssignments: [\"RoleAssignment_GET\"]\n};\n\nexport const toUserModel = (user = {}) =>\n  camelCaseReshape(user, {\n    id: \"id\",\n    email: \"email\",\n    name: \"name\",\n    roles: \"roles\",\n    permissions: Object.values(permissions) // / 'allowedActions': 'permissions'\n  });\n\n// When authentication is disabled, this user has all permissions.\nexport const authDisabledUser = {\n  id: \"AuthIsDisabled\",\n  email: \"authdisabled@iot.auth\",\n  name: \"Disabled Auth\",\n  roles: [\"Admin\"],\n  permissions: Object.values(permissions)\n};\n\nexport function getAtomicPermissions(permissions) {\n  const ALL = \"All\";\n  const atomicPermissions = [];\n  permissions.forEach(permission => {\n    const expandedActions = permission.actions.includes(ALL)\n      ? methods\n      : permission.actions;\n    const expandedNotActions = permission.notActions.includes(ALL)\n      ? methods\n      : permission.notActions;\n    const expandedResources = permission.resourceTypes.includes(ALL)\n      ? resources\n      : permission.resourceTypes;\n\n    const allowedActions = expandedActions.filter(\n      action => !expandedNotActions.includes(action)\n    );\n\n    expandedResources.forEach(resource => {\n      allowedActions.forEach(action => {\n        atomicPermissions.push(resource + \"_\" + action);\n      });\n    });\n  });\n  return atomicPermissions;\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { camelCaseReshape, getItems, reshape } from \"utilities\";\nimport update from \"immutability-helper\";\n\nexport const ruleCalculations = [\"Average\", \"Instant\"];\n\n// Represented in milliSeconds (label is minutes, value is milliseconds)\nexport const ruleTimePeriods = [\n  { label: \"1\", value: \"60000\" },\n  { label: \"5\", value: \"300000\" },\n  { label: \"10\", value: \"600000\" }\n];\n\nexport const getRuleTimePeriodLabel = value => {\n  const timePeriod = ruleTimePeriods.find(item => item.value === value);\n  return (timePeriod || {}).label || value;\n};\n\nexport const ruleOperators = [\n  \"Equals\",\n  \"GreaterThan\",\n  \"LessThan\",\n  \"GreaterThanOrEqual\",\n  \"LessThanOrEqual\"\n];\n\nexport const ruleAPIOperators = [\"EQ\", \"GT\", \"LT\", \"GE\", \"LE\"];\n\nexport const toRulesModel = (response = {}) =>\n  getItems(response).map(toRuleModel);\n\nexport const toRuleModel = (response = {}) => {\n  const model = camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    farmId: \"farmId\",\n    conditions: \"conditions\",\n    severityLevel: \"severityLevel\",\n    status: \"status\",\n    name: \"name\",\n    severity: \"severity\",\n    description: \"description\",\n    properties: \"properties\",\n    \"action.type\": \"type\",\n    deleted: \"deleted\",\n    actions: \"actions\"\n  });\n  let updatedConditions;\n  if (model.conditions !== undefined) {\n    updatedConditions = model.conditions.map(condition => ({\n      field: condition.field,\n      operator: ruleOperators[ruleAPIOperators.indexOf(condition.operator)],\n      value: condition.value\n    }));\n  }\n  return update(model, {\n    severityLevel: { $set: (model.severityLevel || \"\").toLowerCase() },\n    status: {\n      $set: model.deleted ? \"Deleted\" : model.status\n    },\n    conditions: { $set: updatedConditions }\n  });\n};\nexport const toAlertsModel = (response = {}) =>\n  getItems(response).map(toAlertModel);\n\n// TODO: Double check the response from alertsByRule and alerts, might only need one model\nexport const toAlertModel = (response = {}) => {\n  const model = camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    ruleDescription: \"ruleDescription\",\n    ruleSeverity: \"ruleSeverity\",\n    ruleId: \"ruleId\",\n    ruleActions: \"ruleActions\",\n    deviceId: \"deviceId\",\n    deviceMsgReceived: \"deviceMsgReceived\",\n    status: \"status\"\n  });\n  return update(model, {\n    ruleSeverity: { $set: (model.ruleSeverity || \"\").toLowerCase() },\n    status: { $set: (model.status || \"\").toLowerCase() }\n  });\n};\n\nexport const toActiveAlertsModel = (response = {}) =>\n  getItems(response).map((alert = {}) => {\n    const model = camelCaseReshape(alert, {\n      \"rule.id\": \"ruleId\",\n      count: \"count\",\n      created: \"created\",\n      status: \"status\",\n      \"rule.severity\": \"severity\",\n      \"rule.description\": \"description\"\n    });\n    return update(model, {\n      severity: { $set: (model.severity || \"\").toLowerCase() },\n      status: { $set: (model.status || \"\").toLowerCase() }\n    });\n  });\n\nexport const toAlertsForRuleModel = (response = {}) =>\n  getItems(response).map(toAlertForRuleModel);\n\nexport const toAlertForRuleModel = (alert = {}) => {\n  const model = camelCaseReshape(alert, {\n    id: \"id\",\n    dateCreated: \"dateCreated\",\n    dateModified: \"dateModified\",\n    description: \"description\",\n    deviceId: \"deviceId\",\n    eTag: \"eTag\",\n    enabled: \"enabled\",\n    groupId: \"groupId\",\n    status: \"status\",\n    \"rule.id\": \"ruleId\"\n  });\n  // model.dateCreated = moment(model.dateCreated)._d.toString().substring(4, 34);\n  return update(model, {\n    status: { $set: (model.status || \"\").toLowerCase() }\n  });\n};\n\nexport const toMessagesModel = (response = {}) => {\n  return getItems(response).map((message = {}) =>\n    camelCaseReshape(message, {\n      data: \"data\",\n      deviceId: \"deviceId\",\n      time: \"time\"\n    })\n  );\n};\nexport const toTelemetryModel = (response = {}) => {\n  return camelCaseReshape(response, {\n    timestamps: \"timestamps\",\n    properties: \"properties\",\n    continuationToken: \"continuationToken\"\n  });\n};\n\nexport const toStatusModel = (response = {}) =>\n  camelCaseReshape(response, {\n    properties: \"properties\"\n  });\n\nexport const toEditRuleRequestModel = ({\n  name,\n  farmId,\n  description,\n  conditions,\n  Calculations,\n  actions,\n  severityLevel,\n  status\n}) => {\n  let updatedConditions;\n  if (conditions !== undefined) {\n    updatedConditions = conditions.map(condition => ({\n      field: condition.field,\n      operator: ruleAPIOperators[ruleOperators.indexOf(condition.operator)],\n      value: condition.value\n    }));\n  }\n  const requiredDescriptionLength = 3;\n  let Actions;\n  if (actions !== undefined) {\n    Actions = (actions || []).map(act => ({\n      type: act.type,\n      parameters: {\n        notes: act.parameters.notes,\n        recipients: act.parameters.recipients,\n        subject: act.parameters.subject\n      }\n    }));\n  }\n\n  const isDescriptionRequired =\n    description && description.length >= requiredDescriptionLength;\n\n  return {\n    name: name,\n    farmId: farmId,\n    description: isDescriptionRequired ? description : undefined,\n    severityLevel: severityLevel,\n    status: status,\n    Conditions: updatedConditions,\n    Calculations: Calculations,\n    actions: Actions\n  };\n};\n\nexport const toTelemetryRequestModel = (alarmQueryModel = {}) =>\n  reshape(alarmQueryModel, {\n    from: \"From\",\n    to: \"To\",\n    order: \"Order\",\n    limit: \"Limit\",\n    devices: \"Devices\"\n  });\n\nexport const toTelemetryQueryModel = (alertQueryModel = {}) =>\n  reshape(alertQueryModel, {\n    sensorId: \"sensorId\",\n    searchSpan: \"searchSpan\"\n  });\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { camelCaseReshape, getItems } from \"utilities\";\n\nexport const toAzureMapSearchResultModel = (response = {}) =>\n  camelCaseReshape(response, {\n    summary: \"summary\",\n    results: \"results\"\n  });\n\nexport const toFarmsModel = (response = {}) =>\n  getItems(response).map(toFarmModel);\n\nexport const toFarmModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    geometry: \"geometry\",\n    name: \"name\",\n    properties: \"properties\",\n    description: \"description\"\n  });\n\nexport const toNewFarmRequestModel = ({\n  name,\n  geometry,\n  crops,\n  address,\n  description\n}) => {\n  const properties = {\n    crops: crops && crops.value ? crops.value : crops,\n    address: address\n  };\n  return {\n    geometry: geometry,\n    name: name,\n    properties: properties,\n    description: description\n  };\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { camelCaseReshape, getItems } from \"utilities\";\n\nexport const toMapsItemModel = (data = {}) =>\n  camelCaseReshape(data, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    type: \"type\",\n    source: \"source\",\n    farmId: \"farmId\",\n    jobId: \"jobId\",\n    date: \"date\",\n    sequence: \"sequence\",\n    name: \"name\",\n    description: \"description\",\n    properties: \"properties\"\n  });\n\nexport const toSceneFileItemModel = (data = {}) =>\n  camelCaseReshape(data, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    blobUrl: \"blobUrl\",\n    sceneId: \"sceneId\",\n    format: \"format\",\n    type: \"type\",\n    name: \"name\",\n    downloadSasUrl: \"downloadSASUrl\",\n    description: \"description\",\n    properties: \"properties\",\n    contentType: \"contentType\",\n    imageUrlMaps: \"imageUrlMaps\"\n  });\n\nexport const toSceneFileItemsModel = (response = {}) =>\n  getItems(response).map(toSceneFileItemModel);\n\nexport const toMapsItemsModel = (response = {}) =>\n  getItems(response).map(toMapsItemModel);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport {\n  camelCaseReshape,\n  getItems,\n  sensorPlacementMap,\n  jobsDateFormat,\n  satelliteIndicesMap,\n  soilMoistureMap\n} from \"utilities\";\nimport update from \"immutability-helper\";\nimport moment from \"moment\";\nexport const toJobsItemModel = (data = {}) => {\n  const model = camelCaseReshape(data, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    stopRequested: \"stopRequested\",\n    currentState: \"currentState\",\n    error: \"error\",\n    output: \"output\",\n    type: \"type\",\n    farmIds: \"farmIds\",\n    arguments: \"arguments\",\n    name: \"name\",\n    description: \"description\",\n    properties: \"properties\",\n    typeId: \"typeId\"\n  });\n  return update(model, {\n    currentState: {\n      $set: model.stopRequested ? \"StopRequested\" : model.currentState\n    }\n  });\n};\n\nexport const toJobTypesItemModel = (data = {}) =>\n  camelCaseReshape(data, {\n    id: \"id\",\n    name: \"name\"\n  });\n\nexport const toJobTypesItemsModel = (response = {}) =>\n  getItems(response).map(toJobTypesItemModel);\n\nexport const toJobsItemsModel = (response = {}) =>\n  getItems(response).map(toJobsItemModel);\n\nexport const toSensorPlacementRequestModel = ({\n  startDate,\n  endDate,\n  farmId,\n  mapType,\n  typeId\n}) => {\n  return {\n    typeId: typeId,\n    arguments: {\n      startDate: startDate,\n      endDate: endDate,\n      farm_id: farmId\n    },\n    name: mapType\n  };\n};\n\nexport const toNewJobsRequestModel = ({\n  startDate,\n  endDate,\n  farmId,\n  sensorMeasureName,\n  mapType,\n  jobTypeId\n}) => {\n  startDate = moment(new Date(startDate));\n  endDate = moment(new Date(endDate));\n  let argumentsObject;\n  mapType === sensorPlacementMap\n    ? (argumentsObject = {\n        date: endDate.format(jobsDateFormat),\n        history: moment.duration(endDate.diff(startDate)).asDays(),\n        farm_id: farmId\n      })\n    : mapType === satelliteIndicesMap\n    ? (argumentsObject = {\n        from: startDate.format(jobsDateFormat),\n        to: endDate.format(jobsDateFormat),\n        farm_ids: farmId,\n        force: false\n      })\n    : mapType === soilMoistureMap\n    ? (argumentsObject = {\n        from: startDate.format(jobsDateFormat),\n        to: endDate.format(jobsDateFormat),\n        farm_id: farmId,\n        measure_name: sensorMeasureName\n      })\n    : (argumentsObject = {\n        from: startDate.format(jobsDateFormat),\n        to: endDate.format(jobsDateFormat),\n        farm_id: farmId\n      });\n\n  return {\n    typeId: jobTypeId,\n    arguments: argumentsObject,\n    name: mapType\n  };\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { camelCaseReshape, getItems } from \"utilities\";\n\nexport const SensorModelsModel = (response = []) =>\n  getItems(response).map(SensorModelModel);\n\nexport const SensorModelModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    type: \"type\",\n    manufacturer: \"manufacturer\",\n    productCode: \"productCode\",\n    sensorMeasures: \"sensorMeasures\",\n    name: \"name\",\n    description: \"description\",\n    properties: \"properties\"\n  });\n\nexport const SensorsModel = (response = []) =>\n  getItems(response).map(SensorModel);\n\nexport const SensorModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    hardwareId: \"hardwareId\",\n    sensorModelId: \"sensorModelId\",\n    location: \"location\",\n    port: \"port\",\n    deviceId: \"deviceId\",\n    name: \"name\",\n    description: \"description\",\n    properties: \"properties\"\n  });\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { camelCaseReshape, getItems } from \"utilities\";\n\nexport const RoleDefinitionsModel = (response = []) =>\n  getItems(response).map(RoleDefinitionModel);\n\nexport const RoleDefinitionModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    permissions: \"permissions\",\n    name: \"name\",\n    description: \"description\"\n  });\n\nexport const RoleAssignmentsModel = (response = []) =>\n  getItems(response).map(RoleAssignmentModel);\n\nexport const RoleAssignmentModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    roleDefinitionId: \"roleDefinitionId\",\n    objectId: \"objectId\",\n    objectIdType: \"objectIdType\",\n    tenantId: \"tenantId\"\n  });\n\nexport const toNewRoleAssignmentRequestModel = roleAssignment => roleAssignment;\n// {\n// return {\n//   roleDefinitionId: roleAssignment.roleDefinitionId,\n//   objectId: roleAssignment.objectId,\n//   objectIdType: roleAssignment.objectIdType,\n//   tenantId: roleAssignment.tenantId\n// };\n// };\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\n\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\n\nimport { createSelector } from \"reselect\";\nimport { sensorService } from \"services\";\n\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  resetPendingAndErrorReducer,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  getPending,\n  setPending,\n  toActionCreator,\n  getError\n} from \"store/utilities\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Loads the Sensor */\n  fetchSensors: {\n    type: \"SENSORS_FETCH\",\n    epic: fromAction =>\n      sensorService\n        .getSensors()\n        .map(toActionCreator(redux.actions.updateSensors, fromAction))\n        .catch(handleError(fromAction))\n  },\n\n  /** Loads the SensorModels */\n  fetchSensorModels: {\n    type: \"SENSOR_MODELS_FETCH\",\n    epic: fromAction =>\n      sensorService\n        .getSensorModels()\n        .map(toActionCreator(redux.actions.updateSensorModels, fromAction))\n        .catch(handleError(fromAction))\n  },\n\n  deleteSensorsById: {\n    type: \"DELETE_SENSORS\",\n    epic: fromAction => {\n      Observable.from(fromAction.payload)\n        .flatMap(({ id }) => sensorService.deleteSensor(id).map(() => id))\n        .map(toActionCreator(redux.actions.deleteSensorsbyId, fromAction))\n        .catch(handleError(fromAction));\n    }\n  }\n});\nconst sensorSchema = new schema.Entity(\"sensors\");\nconst sensorListSchema = new schema.Array(sensorSchema);\n\nconst sensorModelSchema = new schema.Entity(\"sensorModel\");\nconst sensorModelsListSchema = new schema.Array(sensorModelSchema);\n\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  sensorEntities: {},\n  sensorItems: [],\n  sensorlastUpdated: undefined,\n  sensorModelEntities: [],\n  sensorModelItems: []\n};\n\nconst updateSensorReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { sensors },\n    result\n  } = normalize(payload, sensorListSchema);\n  return update(state, {\n    sensorEntities: { $set: sensors },\n    sensorItems: { $set: result },\n    sensorlastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst deleteSensorReducer = (state, { payload, fromAction }) => {\n  const spliceArr = payload.reduce((idxAcc, payloadItem) => {\n    const idx = state.sensorItems.indexOf(payloadItem);\n    if (idx !== -1) {\n      idxAcc.push([idx, 1]);\n    }\n    return idxAcc;\n  }, []);\n  return update(state, {\n    sensorEntities: { $unset: payload },\n    sensorItems: { $splice: spliceArr }\n  });\n};\n\nconst updateSensorModelReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { sensorModel },\n    result\n  } = normalize(payload, sensorModelsListSchema);\n  return update(state, {\n    sensorModelEntities: { $set: sensorModel },\n    sensorModelItems: { $set: result },\n    sensorModelsLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchSensors,\n  epics.actionTypes.fetchSensorModels\n];\n\nexport const redux = createReducerScenario({\n  updateSensors: { type: \"SENSOR_UPDATE\", reducer: updateSensorReducer },\n  updateSensorModels: {\n    type: \"SENSOR_MODEL_UPDATE\",\n    reducer: updateSensorModelReducer\n  },\n  deleteSensorsbyId: {\n    type: \"SENSOR_DELETE_BY_ID\",\n    reducer: deleteSensorReducer\n  },\n  registerError: { type: \"SENSOR_REDUCER_ERROR\", reducer: errorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer },\n  resetPendingAndError: {\n    type: \"SENSOR_REDUCER_RESET_ERROR_PENDING\",\n    reducer: resetPendingAndErrorReducer\n  }\n});\n\nexport const reducer = {\n  sensors: redux.getReducer(initialState)\n};\n\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getSensorsReducer = state => state.sensors;\n\nexport const getSensorEntities = state =>\n  getSensorsReducer(state).sensorEntities || {};\nexport const getSensorItems = state =>\n  getSensorsReducer(state).sensorItems || [];\nexport const getSensorLastUpdated = state =>\n  getSensorsReducer(state).sensorlastUpdated;\n\nexport const getSensorError = state =>\n  getError(getSensorsReducer(state), epics.actionTypes.fetchSensors);\nexport const getSensorModelEntities = state =>\n  getSensorsReducer(state).sensorModelEntities || {};\nexport const getSensorModelsError = state =>\n  getError(getSensorsReducer(state), epics.actionTypes.fetchSensorModels);\nexport const getSensorModelItems = state =>\n  getSensorsReducer(state).sensorModelItems || [];\n\nexport const getSensorPendingStatus = state =>\n  getPending(getSensorsReducer(state), epics.actionTypes.fetchSensors);\n\nexport const getSensorModelPendingStatus = state =>\n  getPending(getSensorsReducer(state), epics.actionTypes.fetchSensorModels);\n\nexport const getSensorModelLastUpdated = state =>\n  getSensorsReducer(state).sensorModelsLastUpdated;\n\nexport const getSensorModels = createSelector(\n  getSensorModelEntities,\n  getSensorModelItems,\n  (sensorModelEntities, sensorModelItems) =>\n    sensorModelItems.map(id => sensorModelEntities[id])\n);\n\nexport const getSensors = createSelector(\n  getSensorEntities,\n  getSensorItems,\n  (sensorEntities, sensorItems) => sensorItems.map(id => sensorEntities[id])\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { HttpClient } from \"utilities/httpClient\";\nimport {\n  toMessagesModel,\n  toRuleModel,\n  toRulesModel,\n  toStatusModel,\n  toTelemetryRequestModel,\n  toTelemetryQueryModel,\n  toTelemetryModel\n} from \"./models\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\n\nconst ENDPOINT = Config.serviceUrls.telemetry;\nconst RULES_ENDPOINT = Config.serviceUrls.rules;\n/** Contains methods for calling the telemetry service */\nexport class TelemetryService {\n  /** Returns the status properties for the telemetry service */\n  static getStatus() {\n    return HttpClient.get(`${ENDPOINT}status`).map(toStatusModel);\n  }\n\n  /** Returns a list of rules */\n  static getRules() {\n    return HttpClient.get(\n      `${RULES_ENDPOINT}?includes=Actions&includes=Conditions&includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toRulesModel);\n  }\n\n  /** creates a new rule */\n  static createRule(rule) {\n    return HttpClient.post(`${RULES_ENDPOINT}`, rule).map(toRuleModel);\n  }\n\n  /** updates an existing rule */\n  static updateRule(id, rule) {\n    return HttpClient.put(`${RULES_ENDPOINT}/${id}`, rule).map(toRuleModel);\n  }\n\n  /** Returns a telemetry events */\n\n  /**\n   *\n   * Url Hard coded for telemetry.\n   * SensorId hardcoded for data results and checks\n   */\n  static getTelemetry(params = {}) {\n    const queryFilter = toTelemetryQueryModel(params);\n    return HttpClient.post(`${ENDPOINT}`, queryFilter).map(toTelemetryModel);\n  }\n\n  static getTelemetryBySensorIdP1D(sensorId) {\n    return TelemetryService.getTelemetry({\n      searchSpan: {\n        from: moment()\n          .subtract(24, \"hours\")\n          .toISOString(),\n        to: moment().toISOString()\n      },\n      sensorId: sensorId\n    });\n  }\n\n  static getTelemetryBySensorIdForDateRange(sensorId, start, end) {\n    // TODO: Add Valid Date Checks\n    return TelemetryService.getTelemetry({\n      sensorId: sensorId,\n      searchSpan: {\n        from: start,\n        to: end\n      }\n    });\n  }\n\n  static getTelemetryByMessages(params = {}) {\n    if (params.devices.length === 0) return Observable.never();\n    const body = toTelemetryRequestModel(params);\n    return HttpClient.post(`${ENDPOINT}messages`, body).map(toMessagesModel);\n  }\n\n  static getTelemetryByDeviceIdP2M(devices = []) {\n    return TelemetryService.getTelemetryByMessages({\n      from: \"NOW-PT2M\",\n      to: \"NOW\",\n      order: \"desc\",\n      devices,\n      limit: \"10000\"\n    });\n  }\n\n  static getTelemetryByDeviceIdP15M(devices = []) {\n    return TelemetryService.getTelemetryByMessages({\n      from: \"NOW-P1D\", // Last One Day\n      to: \"NOW\",\n      order: \"desc\",\n      devices,\n      limit: \"10000\"\n    });\n  }\n\n  static getTelemetryByDeviceIdForDateRange(devices = [], startDate, endDate) {\n    // TODO: Add Valid Date Checks\n\n    return TelemetryService.getTelemetryByMessages({\n      from: startDate,\n      to: endDate,\n      order: \"desc\",\n      devices,\n      limit: \"10000\"\n    });\n  }\n\n  static deleteRule(id) {\n    return HttpClient.delete(`${RULES_ENDPOINT}/${id}`).map(() => ({\n      deletedRuleId: id\n    }));\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { HttpClient } from \"utilities/httpClient\";\nimport {\n  deviceModelsModel,\n  toDevicesModel,\n  toDeviceModel\n} from \"./models/deviceModels\";\n\nconst ENDPOINT = Config.serviceUrls;\nexport class deviceService {\n  /** Returns a list of Devices */\n  static getDevices() {\n    return HttpClient.get(\n      `${ENDPOINT.device}?includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toDevicesModel);\n  }\n\n  /** Returns a list of DeviceModel */\n  static getDeviceModels() {\n    return HttpClient.get(\n      `${ENDPOINT.deviceModel}?includes=Ports&includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(deviceModelsModel);\n  }\n\n  static updateDevice(id, device) {\n    return HttpClient.put(`${ENDPOINT.device}/${id}`, device).map(() => ({\n      id\n    }));\n  }\n  static getDeviceById(id) {\n    return HttpClient.get(`${ENDPOINT.device}/${id}`).map(toDeviceModel);\n  }\n\n  /** Deletes a device */\n  static deleteDevice(id) {\n    return HttpClient.delete(`${ENDPOINT.device}/${id}`).map(() => ({\n      deletedDeviceId: id\n    }));\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { HttpClient } from \"utilities/httpClient\";\nimport Config from \"app.config\";\n\nimport { toFarmsModel, toFarmModel } from \"./models\";\n\nconst ENDPOINT = Config.serviceUrls.farms;\nexport class FarmService {\n  static createFarm(farm) {\n    return HttpClient.post(`${ENDPOINT}`, farm).map(toFarmModel);\n  }\n\n  static getFarms() {\n    return HttpClient.get(\n      `${ENDPOINT}?includes=Geometry&includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toFarmsModel);\n  }\n\n  static getFarmById(id) {\n    return HttpClient.get(`${ENDPOINT}/${id}`).map(toFarmModel);\n  }\n\n  static deleteFarm(id) {\n    return HttpClient.delete(`${ENDPOINT}/${id}`);\n  }\n\n  static updateFarm(id, farm) {\n    return HttpClient.put(`${ENDPOINT}/${id}`, farm).map(() => ({ id }));\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport {\n  toJobsItemsModel,\n  toJobTypesItemsModel,\n  toJobsItemModel\n} from \"./models\";\n\nimport { HttpClient } from \"utilities/httpClient\";\nimport Config from \"app.config\";\n\nconst JOB_ENDPOINT = Config.serviceUrls.job;\nconst JOBTYPE_ENDPOINT = Config.serviceUrls.jobType;\nexport class JobsService {\n  static getJobsItem(id) {\n    return HttpClient.get(`${JOB_ENDPOINT}/${id}`).map(toJobsItemsModel);\n  }\n  static getJobTypesItems() {\n    return HttpClient.get(\n      `${JOBTYPE_ENDPOINT}?includes=PipelineDetails&includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toJobTypesItemsModel);\n  }\n  static getJobsItems() {\n    return HttpClient.get(\n      `${JOB_ENDPOINT}?includes=Arguments&includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toJobsItemsModel);\n  }\n\n  static submitJob(body) {\n    return HttpClient.post(`${JOB_ENDPOINT}`, body).map(toJobsItemModel);\n  }\n\n  static abortJobs(id) {\n    return HttpClient.patch(`${JOB_ENDPOINT}/${id}/stop`);\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { stringify } from \"query-string\";\nimport {\n  toMapsItemModel,\n  toMapsItemsModel,\n  toSceneFileItemsModel\n} from \"./models\";\nimport { HttpClient } from \"utilities/httpClient\";\nimport Config from \"app.config\";\n\nconst SCENE_ENDPOINT = Config.serviceUrls.scene;\nconst SCENE_FILE_ENDPOINT = Config.serviceUrls.sceneFile;\nconst mapTypes = [\n  \"sensor-placement\",\n  \"evi\",\n  \"ndvi\",\n  \"soil-moisture\",\n  \"ndwi\",\n  \"drone\"\n];\nexport class MapService {\n  static getMapsItems() {\n    const types = stringify({ types: mapTypes });\n    return HttpClient.get(\n      `${SCENE_ENDPOINT}?maxItems=${Config.apiGetAllMaxItems}&${types}`\n    ).map(toMapsItemsModel);\n  }\n\n  static getLatestSensorPlacementMapByFarmId(farmId) {\n    return HttpClient.get(\n      `${SCENE_ENDPOINT}?includes=Properties&maxItems=1&types=sensor-placement&farmId=${farmId}`\n    ).map(toMapsItemsModel);\n  }\n\n  static getLatestFarmMapFileById(type, farmId) {\n    return HttpClient.get(\n      `${SCENE_ENDPOINT}?maxItems=${Config.apiGetAllMaxItems}&types=${type}&farmId=${farmId}`\n    ).map(toMapsItemsModel);\n  }\n\n  static getSceneById(id) {\n    return HttpClient.get(`${SCENE_ENDPOINT}/${id}`).map(toMapsItemModel);\n  }\n\n  static getMapFileByIdAndType(\n    sceneId,\n    fileType = undefined,\n    sceneFileType = undefined\n  ) {\n    const mapFileParams = {\n      contentType: fileType,\n      sceneFileTypes: sceneFileType,\n      sceneId: sceneId,\n      generateDownloadSASUrl: true\n    };\n\n    const query = stringify(mapFileParams);\n    return HttpClient.get(\n      `${SCENE_FILE_ENDPOINT}?maxItems=${Config.apiGetAllMaxItems}&${query}`\n    ).map(toSceneFileItemsModel);\n  }\n\n  static updateMapsItems() {\n    return this.getMapsItems().delay(2000);\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { HttpClient } from \"utilities/httpClient\";\nimport { SensorsModel, SensorModelsModel } from \"./models\";\n\n/** Contains methods for calling the Device service */\nexport class sensorService {\n  static getSensors = (conditions = []) =>\n    HttpClient.get(\n      `${Config.serviceUrls.sensors}?includes=Properties&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(SensorsModel);\n\n  static getSensorModels = (conditions = []) =>\n    HttpClient.get(\n      `${Config.serviceUrls.sensorModel}?includes=Properties&includes=SensorMeasures&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(SensorModelsModel);\n\n  static deleteSensor(id) {\n    return HttpClient.delete(`${Config.serviceUrls.sensors}/${id}`).map(() => ({\n      id: id\n    }));\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { HttpClient } from \"utilities/httpClient\";\nimport Config from \"app.config\";\n\nimport { toAlertsModel } from \"./models\";\n\nconst ENDPOINT = Config.serviceUrls.alerts;\nexport class AlertService {\n  static getAlerts() {\n    return HttpClient.get(\n      `${ENDPOINT}?includes=RuleActions&maxItems=${Config.apiGetAllMaxItems}`\n    ).map(toAlertsModel);\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { HttpClient } from \"utilities/httpClient\";\nimport {\n  RoleAssignmentsModel,\n  RoleDefinitionsModel,\n  RoleDefinitionModel\n} from \"./models\";\n\n/** Contains methods for calling the RoleAssignment and RoleDefinition APIs */\nexport class roleService {\n  static getRoleAssignments() {\n    return HttpClient.get(\n      `${Config.serviceUrls.roleAssignment}?maxItems=${Config.apiGetAllMaxItems}`,\n      {},\n      true\n    ).map(RoleAssignmentsModel);\n    // return HttpClient.get(Config.serviceUrls.roleAssignment, {}, true);\n  }\n\n  static getRoleAssignmentsByUserObjId(userObjId) {\n    return HttpClient.get(\n      `${Config.serviceUrls.roleAssignment}?maxItems=${Config.apiGetAllMaxItems}&objectIds=${userObjId}`,\n      {},\n      true\n    ).map(RoleAssignmentsModel);\n  }\n\n  static getRoleDefinitions() {\n    return HttpClient.get(\n      `${Config.serviceUrls.roleDefinition}?maxItems=${Config.apiGetAllMaxItems}`,\n      {},\n      true\n    ).map(RoleDefinitionsModel);\n  }\n\n  static getRoleDefinitionById(roleDefinitionId) {\n    return HttpClient.get(\n      `${Config.serviceUrls.roleDefinition}/${roleDefinitionId}`,\n      {},\n      true\n    ).map(RoleDefinitionModel);\n  }\n\n  static deleteRoleAssignment(id) {\n    return HttpClient.delete(\n      `${Config.serviceUrls.roleAssignment}/${id}`,\n      {},\n      true\n    ).map(() => ({\n      id: id\n    }));\n  }\n\n  static updateRoleAssignment(id, payload) {\n    return HttpClient.put(\n      `${Config.serviceUrls.roleAssignment}/${id}`,\n      payload\n    ).map(() => id);\n  }\n\n  static addRoleAssignment(payload) {\n    return HttpClient.post(`${Config.serviceUrls.roleAssignment}`, payload);\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { createSelector } from \"reselect\";\nimport { FarmService } from \"services\";\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  toActionCreator,\n  getPending,\n  getError\n} from \"store/utilities\";\n\nimport { name } from \"utilities\";\nimport { getDevices } from \"./devicesReducer\";\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Loads the farm farmItems */\n  fetchFarms: {\n    type: \"FARMS_FETCH\",\n    epic: fromAction =>\n      FarmService.getFarms()\n        .map(toActionCreator(redux.actions.updateFarms, fromAction))\n        .catch(handleError(fromAction))\n  },\n  /** Delete Farm */\n  deleteFarm: {\n    type: \"FARMS_DELETE\",\n    epic: fromAction =>\n      FarmService.deleteFarm(fromAction.payload)\n        .map(toActionCreator(redux.actions.deleteFarm, fromAction))\n        .catch(handleError(fromAction))\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst farmSchema = new schema.Entity(\"farms\");\nconst farmListSchema = new schema.Array(farmSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  farmEntities: undefined,\n  farmItems: []\n};\n\nconst insertFarmReducer = (state, { payload }) => {\n  const {\n    entities: { farms },\n    result\n  } = normalize(payload, farmListSchema);\n  if (state.farmEntities) {\n    return update(state, {\n      farmEntities: { $merge: farms },\n      farmItems: { $splice: [[0, 0, ...result]] }\n    });\n  }\n  return update(state, {\n    farmEntities: { $set: farms },\n    farmItems: { $set: [result] }\n  });\n};\n\nconst updateFarmsReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { farms },\n    result\n  } = normalize(payload, farmListSchema);\n  return update(state, {\n    farmEntities: { $set: farms },\n    farmItems: { $set: result },\n    lastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst deleteFarmReducer = (state, { payload, fromAction }) => {\n  const spliceArr = payload.reduce((idxAcc, payloadItem) => {\n    const idx = state.farmItems.indexOf(payloadItem);\n    if (idx !== -1) {\n      idxAcc.push([idx, 1]);\n    }\n    return idxAcc;\n  }, []);\n  return update(state, {\n    farmEntities: { $unset: payload },\n    farmItems: { $splice: spliceArr }\n  });\n};\n\nconst modifyFarmReducer = (state, { payload }) => {\n  const {\n    entities: { farms }\n  } = normalize(payload, farmListSchema);\n  return update(state, {\n    farmEntities: { $merge: farms }\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchFarms,\n  epics.actionTypes.deleteFarm\n];\n\nexport const redux = createReducerScenario({\n  updateFarms: { type: \"FARMS_UPDATE\", reducer: updateFarmsReducer },\n  registerError: { type: \"RULES_REDUCER_ERROR\", reducer: errorReducer },\n  insertFarm: { type: \"FARMS_INSERT\", reducer: insertFarmReducer },\n  deleteFarm: { type: \"FARMS_DELETE\", reducer: deleteFarmReducer },\n  modifyFarm: { type: \"FARM_MODIFY\", reducer: modifyFarmReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer }\n});\n\nexport const reducer = { farms: redux.getReducer(initialState) };\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getFarmsReducer = state => state.farms;\nexport const getFarmEntities = state =>\n  getFarmsReducer(state).farmEntities || {};\nexport const getFarmItems = state => getFarmsReducer(state).farmItems || [];\nexport const getFarmsLastUpdated = state => getFarmsReducer(state).lastUpdated;\nexport const getFarmsError = state =>\n  getError(getFarmsReducer(state), epics.actionTypes.fetchFarms);\nexport const getFarmsPendingStatus = state =>\n  getPending(getFarmsReducer(state), epics.actionTypes.fetchFarms);\nexport const getDeleteFarmError = state =>\n  getError(getFarmsReducer(state), epics.actionTypes.deleteFarm);\nexport const getDeleteFarmPendingStatus = state =>\n  getPending(getFarmsReducer(state), epics.actionTypes.deleteFarm);\n\nexport const getFarms = createSelector(\n  getFarmEntities,\n  getFarmItems,\n  getDevices,\n  (farmEntities, farmItems, devices) => {\n    return farmItems.map(id => {\n      return {\n        ...farmEntities[id],\n        count: devices.filter(device => device.farmId === id).length\n      };\n    });\n  }\n);\nexport const getFarmById = (state, id) =>\n  id === undefined ? null : getFarmEntities(state)[id];\n\nexport const getFarmsMap = createSelector(\n  getFarmEntities,\n  getFarmItems,\n  (FarmEntities, FarmItems) =>\n    FarmItems.reduce((FarmMap, id) => {\n      return FarmMap.set(id, FarmEntities[id][name]);\n    }, new Map())\n);\n\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport dot from \"dot-object\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { AuthService, TelemetryService } from \"services\";\nimport {\n  createAction,\n  createReducerScenario,\n  createEpicScenario,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  toActionCreator,\n  getPending,\n  getError\n} from \"store/utilities\";\nimport { svgs } from \"utilities\";\nimport { getAtomicPermissions } from \"services/models\";\nimport { roleService } from \"services\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Initializes the redux state */\n  initializeApp: {\n    type: \"APP_INITIALIZE\",\n    epic: () => [\n      epics.actions.fetchUser(),\n      epics.actions.fetchCurrentUserPermissions()\n    ]\n  },\n\n  /** Get the user */\n  fetchUser: {\n    type: \"APP_USER_FETCH\",\n    epic: (fromAction, store) =>\n      Observable.of(AuthService.getCurrentUser()).map(\n        toActionCreator(redux.actions.updateUser, fromAction)\n      )\n  },\n\n  fetchCurrentUserPermissions: {\n    type: \"APP_USER_PERMISSIONS_FETCH\",\n    epic: (fromAction, store) => {\n      return Observable.of(AuthService.getCurrentUser())\n        .flatMap(currentUser =>\n          roleService.getRoleAssignmentsByUserObjId(\n            currentUser.accountIdentifier\n          )\n        )\n        .flatMap(roleAssignments => Observable.from(roleAssignments))\n        .map(roleAssignment => roleAssignment.roleDefinitionId)\n        .flatMap(roleDefinitionId =>\n          roleService.getRoleDefinitionById(roleDefinitionId)\n        )\n        .map(roleDefinition => getAtomicPermissions(roleDefinition.permissions))\n        .map(toActionCreator(redux.actions.updateUserPermissions, fromAction));\n    }\n  },\n\n  /** Get Telemetry Status */\n  fetchTelemetryStatus: {\n    type: \"APP_FETCH_TELEMETRY_STATUS\",\n    epic: fromAction =>\n      TelemetryService.getStatus()\n        .map(\n          toActionCreator(redux.actions.updateTelemetryProperties, fromAction)\n        )\n        .catch(handleError(fromAction))\n  },\n\n  /** Listen to route events and emit a route change event when the url changes */\n  detectRouteChange: {\n    type: \"APP_ROUTE_EVENT\",\n    rawEpic: (action$, store, actionType) =>\n      action$\n        .ofType(actionType)\n        .map(({ payload }) => payload) // payload === pathname\n        .distinctUntilChanged()\n        .map(createAction(\"EPIC_APP_ROUTE_CHANGE\"))\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst actionSettingsSchema = new schema.Entity(\"actionSettings\");\nconst actionSettingsListSchema = new schema.Array(actionSettingsSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  deviceGroups: {},\n  deviceGroupFilters: {},\n  activeDeviceGroupId: undefined,\n  theme: \"light\",\n  version: undefined,\n  releaseNotesUrl: undefined,\n  timeSeriesExplorerUrl: undefined,\n  logo: svgs.farmbeats,\n  name: \"companyName\",\n  isDefaultLogo: true,\n  timeInterval: \"PT1H\",\n  settings: {\n    azureMapsKey: global.DeploymentConfig.azureMapsKey,\n    description: \"\",\n    name: \"\"\n  },\n  user: {\n    email: \"\",\n    id: \"\",\n    name: \"\",\n    consentGranted: true,\n    roles: [],\n    permissions: []\n  },\n  actionSettings: undefined,\n  applicationPermissionsAssigned: undefined,\n  actionPollingTimeout: undefined\n};\n\nfunction updateUserPermissionsReducer(state, { payload }) {\n  return update(state, {\n    user: { permissions: { $push: payload } }\n  });\n}\n\nconst updateUserReducer = (state, { payload, fromAction }) => {\n  return update(state, {\n    user: {\n      email: { $set: payload.userName },\n      // roles: { $set: new Set(payload.roles) },\n      // permissions: { $set: new Set(payload.permissions) },\n      id: { $set: payload.id },\n      name: { $set: payload.name },\n      consentGranted: { $set: payload.consentGranted },\n      eTag: { $set: payload.eTag }\n    },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateTelemetryPropertiesReducer = (state, { payload, fromAction }) => {\n  return update(state, {\n    timeSeriesExplorerUrl: { $set: payload.properties.tsiExplorerUrl },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateSolutionSettingsReducer = (state, { payload, fromAction }) =>\n  update(state, {\n    settings: { $merge: payload },\n    ...setPending(fromAction.type, false)\n  });\n\nconst updateActionSettingsReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { actionSettings }\n  } = normalize(payload, actionSettingsListSchema);\n  const applicationPermissionsAssigned = dot.pick(\n    \"Email.applicationPermissionsAssigned\",\n    actionSettings\n  );\n  const temp = update(state, {\n    actionSettings: { $set: actionSettings },\n    applicationPermissionsAssigned: { $set: applicationPermissionsAssigned },\n    $unset: [\"actionPollingTimeout\"],\n    ...setPending(fromAction.type, false)\n  });\n  return update(temp, setPending(epics.actionTypes.pollActionSettings, false));\n};\n\nconst updateActionPollingTimeoutReducer = state => {\n  return update(state, {\n    actionPollingTimeout: { $set: true },\n    ...setPending(epics.actionTypes.pollActionSettings, false)\n  });\n};\n\nconst updateTimeInterval = (state, { payload }) =>\n  update(state, { timeInterval: { $set: payload } });\n\nconst logoReducer = (state, { payload, fromAction }) =>\n  update(state, {\n    logo: { $set: payload.logo ? payload.logo : svgs.farmbeats },\n    name: { $set: payload.name ? payload.name : \"companyName\" },\n    isDefaultLogo: { $set: payload.logo ? false : true },\n    ...setPending(fromAction.type, false)\n  });\n\nconst releaseReducer = (state, { payload }) =>\n  update(state, {\n    version: { $set: payload.version },\n    releaseNotesUrl: { $set: payload.releaseNotesUrl }\n  });\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchDeviceGroups,\n  epics.actionTypes.fetchDeviceGroupFilters,\n  epics.actionTypes.updateLogo,\n  epics.actionTypes.fetchLogo,\n  epics.actionTypes.fetchActionSettings,\n  epics.actionTypes.pollActionSettings,\n  epics.actionTypes.fetchSolutionSettings,\n  epics.actionTypes.fetchTelemetryStatus\n];\n\nexport const redux = createReducerScenario({\n  updateUser: { type: \"APP_USER_UPDATE\", reducer: updateUserReducer },\n  updateUserPermissions: {\n    type: \"APP_USER_PERMISSION_UPDATE\",\n    reducer: updateUserPermissionsReducer\n  },\n  updateTelemetryProperties: {\n    type: \"APP_UPDATE_TELEMETRY_STATUS\",\n    reducer: updateTelemetryPropertiesReducer\n  },\n  registerError: { type: \"APP_REDUCER_ERROR\", reducer: errorReducer },\n  updateLogo: { type: \"APP_UPDATE_LOGO\", reducer: logoReducer },\n  updateSolutionSettings: {\n    type: \"APP_UPDATE_SOLUTION_SETTINGS\",\n    reducer: updateSolutionSettingsReducer\n  },\n  updateActionSettings: {\n    type: \"APP_UPDATE_ACTION_SETTINGS\",\n    reducer: updateActionSettingsReducer\n  },\n  updateActionPollingTimeout: {\n    type: \"APP_UPDATE_ACTION_POLLING_TIMEOUT\",\n    reducer: updateActionPollingTimeoutReducer\n  },\n  getReleaseInformation: { type: \"APP_GET_VERSION\", reducer: releaseReducer },\n\n  updateTimeInterval: {\n    type: \"APP_UPDATE_TIME_INTERVAL\",\n    reducer: updateTimeInterval\n  },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer }\n});\n\nexport const reducer = { app: redux.getReducer(initialState) };\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getAppReducer = state => state.app;\nexport const getVersion = state => getAppReducer(state).version;\nexport const getTheme = state => getAppReducer(state).theme;\nexport const getTimeSeriesExplorerUrl = (\n  state // agadhika Needed?\n) => getAppReducer(state).timeSeriesExplorerUrl;\nexport const getSettings = state => getAppReducer(state).settings;\nexport const getAzureMapsKey = state => getSettings(state).azureMapsKey;\nexport const getLogo = state => getAppReducer(state).logo;\nexport const getCurrentUserEmail = state => getAppReducer(state).user.email;\nexport const getCurrentUser = state => getAppReducer(state).user;\nexport const getName = state => getAppReducer(state).name;\nexport const isDefaultLogo = state => getAppReducer(state).isDefaultLogo;\nexport const getReleaseNotes = state => getAppReducer(state).releaseNotesUrl;\nexport const setLogoError = state =>\n  getError(getAppReducer(state), epics.actionTypes.updateLogo);\nexport const setLogoPendingStatus = state =>\n  getPending(getAppReducer(state), epics.actionTypes.updateLogo);\nexport const getLogoError = state =>\n  getError(getAppReducer(state), epics.actionTypes.fetchLogo);\nexport const getDeviceGroupError = state =>\n  getError(getAppReducer(state), epics.actionTypes.fetchDeviceGroups);\nexport const getLogoPendingStatus = state =>\n  getPending(getAppReducer(state), epics.actionTypes.fetchLogo);\n\nexport const getTimeInterval = state => getAppReducer(state).timeInterval; // agadhika Needed?\n\nexport const getUser = state => getAppReducer(state).user;\n\nexport const getActionSettings = state => getAppReducer(state).actionSettings;\nexport const getActionSettingsPendingStatus = state =>\n  getPending(getAppReducer(state), epics.actionTypes.fetchActionSettings);\nexport const getActionSettingsError = state =>\n  getError(getAppReducer(state), epics.actionTypes.fetchActionSettings);\n\nexport const getActionPollingStatus = state =>\n  getPending(getAppReducer(state), epics.actionTypes.pollActionSettings);\nexport const getActionPollingError = state =>\n  getError(getAppReducer(state), epics.actionTypes.pollActionSettings);\n\nexport const getActionPollingTimeout = state =>\n  getAppReducer(state).actionPollingTimeout;\n\nexport const getApplicationPermissionsAssigned = state =>\n  getAppReducer(state).applicationPermissionsAssigned;\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { Observable } from \"rxjs\";\nimport { AuthService } from \"services/authService\";\nimport Config from \"app.config\";\nimport { AjaxError, RetryableAjaxError } from \"./ajaxModels\";\n\n/**\n * A class of static methods for creating ajax requests\n */\nexport class HttpClient {\n  /**\n   * Constructs a GET ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   */\n  static get(url, options = {}, withAuth = true, graphAuth = false) {\n    return HttpClient.ajax(\n      url,\n      { ...options, method: \"GET\" },\n      withAuth,\n      graphAuth\n    );\n  }\n\n  /**\n   * Constructs a POST ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   */\n  static post(\n    url,\n    body = {},\n    options = {},\n    withAuth = true,\n    graphAuth = false\n  ) {\n    return HttpClient.ajax(\n      url,\n      { ...options, body, method: \"POST\" },\n      withAuth,\n      graphAuth\n    );\n  }\n\n  /**\n   * Constructs a PUT ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   */\n  static put(url, body = {}, options = {}, withAuth = true, graphAuth = false) {\n    return HttpClient.ajax(\n      url,\n      { ...options, body, method: \"PUT\" },\n      withAuth,\n      graphAuth\n    );\n  }\n\n  /**\n   * Constructs a PATCH ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   */\n  static patch(\n    url,\n    body = {},\n    options = {},\n    withAuth = true,\n    graphAuth = false\n  ) {\n    return HttpClient.ajax(\n      url,\n      { ...options, body, method: \"PATCH\" },\n      withAuth,\n      graphAuth\n    );\n  }\n\n  /**\n   * Constructs a DELETE ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   */\n  static delete(\n    url,\n    body = {},\n    options = {},\n    withAuth = true,\n    graphAuth = false\n  ) {\n    return HttpClient.ajax(\n      url,\n      { ...options, body, method: \"DELETE\" },\n      withAuth,\n      graphAuth\n    );\n  }\n\n  /**\n   * Constructs an Ajax request\n   *\n   * @param {string} url The url path to the make the request to\n   * @param {AjaxRequest} [options={}] See https://github.com/ReactiveX/rxjs/blob/master/src/observable/dom/AjaxObservable.ts\n   * @param {boolean} withAuth Allows a backdoor to not avoid wrapping auth headers\n   * @return an Observable of the AjaxReponse\n   */\n  static ajax(url, options = {}, withAuth = true, graphAuth) {\n    const { retryWaitTime, maxRetryAttempts } = Config;\n    return (\n      HttpClient.createAjaxRequest({ ...options, url }, withAuth, graphAuth)\n        .flatMap(Observable.ajax)\n        // If success, extract the response object and enforce camelCase keys if json response\n        .map(ajaxResponse =>\n          ajaxResponse.responseType === \"json\"\n            ? ajaxResponse.response\n            : ajaxResponse\n        )\n        // Classify errors as retryable or not\n        .catch(ajaxError => Observable.throw(classifyError(ajaxError)))\n        // Retry any retryable errors\n        .retryWhen(retryHandler(maxRetryAttempts, retryWaitTime))\n    );\n  }\n\n  /**\n   * A helper method for constructing ajax request objects\n   */\n  static createAjaxRequest(options, withAuth, graphAuth) {\n    return (withAuth\n      ? graphAuth === true\n        ? AuthService.getAccessTokenGraph()\n        : AuthService.getAccessTokenApi()\n      : Observable.of(null)\n    )\n      .map(token => ({\n        // Create the final headers options\n        ...jsonHeaders,\n        ...(options.headers || {}),\n        ...(token ? authenticationHeaders(token) : {})\n      }))\n      .map(({ \"Content-Type\": contentType, ...headers }) => {\n        if (contentType) return { ...headers, \"Content-Type\": contentType };\n        return headers;\n      })\n      .map(headers => ({\n        ...options,\n        headers,\n        timeout: options.timeout || Config.defaultAjaxTimeout\n      }));\n  }\n}\n\n// HttpClient helper methods\n\n/** A helper function containing the logic for retrying ajax requests */\nexport const retryHandler = (retryAttempts, retryDelay) => error$ =>\n  error$\n    .zip(Observable.range(0, retryAttempts + 1)) // Plus 1 to not count initial call\n    .flatMap(([error, attempt]) =>\n      !isRetryable(error) || attempt === retryAttempts\n        ? Observable.throw(error)\n        : Observable.of(error)\n    )\n    .delay(retryDelay);\n\n/** A helper function for checking if a value is a retryable error */\nconst isRetryable = error => error instanceof RetryableAjaxError;\n\n/** A helper function for classifying errors as retryable or not */\nexport function classifyError(error) {\n  if (Config.retryableStatusCodes.has(error.status)) {\n    return RetryableAjaxError.from(error);\n  }\n  return AjaxError.from(error);\n}\n\n/** Headers for a json request */\nconst jsonHeaders = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  \"Request-Source\": \"Web UI\"\n};\n\n/** Headers for an authenticated request */\nconst authenticationHeaders = token => ({\n  \"Csrf-Token\": \"nocheck\",\n  Authorization: `Bearer ${token}`\n});\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport ReactSVG from \"react-svg\";\n\nimport \"./svg.scss\";\n\n/** Wraps an svg in a bounding box container for easier styling */\nexport const Svg = ({ className, onClick, ...props } = {}) => {\n  // ReactSVG will cause an error in the tests because Jest JSDOM doesn't\n  // support SVGs. This check will prevent the component from trying to\n  // render an SVG if it isn't supported\n  const svgsSupported = window && window.SVGSVGElement;\n  return (\n    <div className={`svg-container ${className || \"\"}`} onClick={onClick}>\n      {svgsSupported && <ReactSVG {...props} className={props.svgClassName} />}\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { EMPTY_FIELD_VAL } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { Indicator } from \"components/shared\";\n\nexport class CountRenderer extends Component {\n  render() {\n    const { value } = this.props;\n    return value ? (\n      value.error ? (\n        EMPTY_FIELD_VAL\n      ) : (\n        value.response\n      )\n    ) : (\n      <Indicator pattern=\"bar\" />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport moment from \"moment\";\nimport {\n  EMPTY_FIELD_VAL,\n  gridValueFormatters\n} from \"components/shared/pcsGrid/pcsGridConfig\";\n\nimport { dateFormat } from \"utilities\";\n\nconst { checkForEmpty } = gridValueFormatters;\n\nconst formatTime = value => {\n  if (value) {\n    const time = moment.utc(value).local();\n    return checkForEmpty(time.unix() > 0 ? time.format(dateFormat) : \"\");\n  }\n  return value;\n};\n\nexport const TimeRenderer = ({ value }) => {\n  const formattedTime = formatTime(value);\n  return (\n    <div className=\"pcs-renderer-cell\">\n      <div className=\"pcs-renderer-time-text\">\n        {formattedTime ? formattedTime : EMPTY_FIELD_VAL}\n      </div>\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { EMPTY_FIELD_VAL } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { TimeRenderer } from \"../timeRenderer/timeRenderer\";\nimport { Indicator } from \"components/shared\";\n\nexport class LastTriggerRenderer extends Component {\n  render() {\n    const { value } = this.props;\n    return value ? (\n      value.error ? (\n        EMPTY_FIELD_VAL\n      ) : (\n        <TimeRenderer value={value.response} />\n      )\n    ) : (\n      <Indicator pattern=\"bar\" />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\n\nexport const LinkRenderer = ({ to, svgPath, onLinkClick }) => {\n  return (\n    <div className=\"pcs-renderer-cell\">\n      <NavLink to={to} className=\"pcs-renderer-link\">\n        <Svg path={svgPath || svgs.ellipsis} onClick={onLinkClick} />\n      </NavLink>\n    </div>\n  );\n};\n\nexport default LinkRenderer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport Config from \"app.config\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\nimport \"./severityRenderer.scss\";\n\nconst getSvg = value => {\n  if (value === Config.ruleSeverity.warning) return svgs.warning;\n  if (value === Config.ruleSeverity.critical) return svgs.critical;\n  return svgs.info;\n};\n\nexport class SeverityRenderer extends Component {\n  render() {\n    const {\n      value,\n      iconOnly,\n      context: { t }\n    } = this.props;\n    const cleanValue = (value || \"\").toLowerCase();\n    const cellClasses = `pcs-renderer-cell severity ${cleanValue || \"\"} ${\n      cleanValue ? \"highlight\" : \"\"\n    }`;\n    return (\n      <div className={cellClasses}>\n        <Svg path={getSvg(cleanValue)} className=\"pcs-renderer-icon\" />\n        {!iconOnly && (\n          <div className=\"pcs-renderer-text\">\n            {t(`rules.severity.${cleanValue}`)}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { isFunc } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\n\nexport class SoftSelectLinkRenderer extends Component {\n  onClick = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const { context, data } = this.props;\n    // To ensure up to date information, ALWAYS use the provided ID to\n    // get the entity from the redux store. Note that the full data object\n    // is passed along, but that is with the understanding that it may be\n    // out of date. This is for convenience in analytics logging only.vf\n    context.onSoftSelectChange(context.getSoftSelectId(data), data);\n  };\n\n  render() {\n    const { value, context } = this.props;\n    return (\n      <div className=\"pcs-renderer-cell\">\n        {/* <GlimmerRenderer value={data.isNew} /> */}\n        {isFunc(context.onSoftSelectChange) ? (\n          <button\n            type=\"button\"\n            className=\"pcs-renderer-link soft-select-link\"\n            onClick={this.onClick}\n          >\n            {value}\n          </button>\n        ) : (\n          <div className=\"soft-select-text\">{value}</div>\n        )}\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport Config from \"app.config\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\nimport \"./deviceModelTypeRenderer.scss\";\n\nconst getSvg = value => {\n  if (value === Config.deviceModel.node) return svgs.node;\n  if (value === Config.deviceModel.gateway) return svgs.gateway;\n};\n\nexport const deviceModelTypeRenderer = ({\n  value,\n  context: { t },\n  iconOnly\n}) => {\n  const cleanValue = (value || \"\").toLowerCase();\n  const cellClasses = `pcs-renderer-cell deviceModelType ${cleanValue || \"\"} ${\n    cleanValue ? \"highlight\" : \"\"\n  }`;\n  return (\n    <div className={cellClasses}>\n      <Svg path={getSvg(cleanValue)} className=\"pcs-renderer-icon\" />\n      {<div className=\"pcs-renderer-text\">{t(value)}</div>}\n    </div>\n  );\n};\n\nexport default deviceModelTypeRenderer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport Config from \"app.config\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\nimport \"./deviceStatusRenderer.scss\";\n\nconst getSvg = value => {\n  if (value === Config.deviceModel.online) return svgs.online;\n  if (value === Config.deviceModel.offline) return svgs.offline;\n};\n\nexport const deviceStatusRenderer = ({ value, context: { t }, iconOnly }) => {\n  const cleanValue = (value || \"\").toLowerCase();\n  const cellClasses = `pcs-renderer-cell status ${cleanValue || \"\"} ${\n    cleanValue ? \"highlight\" : \"\"\n  }`;\n  return (\n    <div className={cellClasses}>\n      <Svg path={getSvg(cleanValue)} className=\"pcs-renderer-icon\" />\n      {<div className=\"pcs-renderer-text\">{t(value)}</div>}\n    </div>\n  );\n};\n\nexport default deviceStatusRenderer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport Config from \"app.config\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs } from \"utilities\";\n\nimport \"../cellRenderer.scss\";\nimport \"./jobStatusRenderer.scss\";\nimport { appInsights } from \"applicationInsights\";\n\nconst getSvg = value => {\n  switch (value) {\n    case Config.jobModel.submitted:\n      return svgs.waiting;\n    case Config.jobModel.accepted:\n      return svgs.waiting;\n    case Config.jobModel.running:\n      return svgs.waiting;\n    case Config.jobModel.pendingRetry:\n      return svgs.waiting;\n    case Config.jobModel.failed:\n      return svgs.rejected;\n    case Config.jobModel.succeeded:\n      return svgs.online;\n    case Config.jobModel.stopped:\n      return svgs.rejected;\n    case Config.jobModel.stopRequested:\n      return svgs.rejected;\n    default:\n  }\n};\n\nexport const JobStatusRenderer = ({\n  data: { error },\n  value,\n  context: { t }\n}) => {\n  const cleanValue = (value || \"\").toLowerCase();\n  const cellClasses = `pcs-renderer-cell status ${cleanValue || \"\"} ${\n    cleanValue ? \"highlight\" : \"\"\n  }`;\n  return (\n    <div className={cellClasses}>\n      <Svg path={getSvg(cleanValue)} className=\"pcs-renderer-icon\" />\n      {\n        <div className=\"pcs-renderer-text\">\n          {t(`jobs.status.${cleanValue}`)}\n        </div>\n      }\n      {t(cleanValue) === \"failed\" && (\n        <div>\n          <div\n            className=\"tooltip\"\n            onMouseEnter={() =>\n              appInsights.trackEvent({\n                name: \"UiEvent:Hover: Job Failure Tooltip\"\n              })\n            }\n          >\n            <Svg className=\"fail-info tooltip\" path={svgs.infoBubble} />\n            <div className=\"tooltip tooltiptext\">\n              <span className=\"error-text\">{error}</span>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default JobStatusRenderer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { LinkedComponent } from \"utilities\";\nimport { FormControl } from \"components/shared\";\nimport \"../cellRenderer.scss\";\nimport \"./farmSelectRenderer.scss\";\n\nexport class FarmSelectRenderer extends LinkedComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFarm: undefined\n    };\n  }\n\n  componentDidMount() {\n    const { value } = this.props;\n    if (value) {\n      this.setState({ selectedFarm: value });\n    }\n  }\n\n  refresh() {\n    return false;\n  }\n  onFarmSelect = event => {\n    const { context, data } = this.props;\n    const selectedFarm = event.target.value.value;\n    if (context.onFarmSelectChange) {\n      context.onFarmSelectChange(data, selectedFarm);\n    }\n  };\n\n  toSelectOptions = ({ id, name }) => {\n    return {\n      label: name,\n      value: id\n    };\n  };\n\n  render() {\n    const { context } = this.props;\n    const { farms, t } = context;\n    const farmOptions = farms.map(this.toSelectOptions);\n\n    this.selectFarmLink = this.linkTo(\"selectedFarm\").map(({ value }) => value);\n    return (\n      <FormControl\n        type=\"select\"\n        options={farmOptions}\n        className=\"farm-select-renderer\"\n        onChange={this.onFarmSelect}\n        clearable={false}\n        searchable={true}\n        placeholder={t(\"devices.flyouts.associateDevices.selectFarm\")}\n        link={this.selectFarmLink}\n      />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\n/*\n  This file exists to show the rule name in the alerts grid.\n  When a rule is deleted, the alerts grid is to show \"Rule Deleted\",\n  just showing '---' doesn't work.\n\n  Later, this component will have to change, so as to allow Rule Name as\n  a clickable link. Look at how that is being done in rulesGrid.\n\n  Hint:  see rulesGridConfig\n\n*/\n\nimport React from \"react\";\n\nimport \"../cellRenderer.scss\";\n\nexport const ruleNameRenderer = ({ value, context: { t } }) => (\n  <div\n    className={`pcs-renderer-cell ${value === \"Enabled\" ? \"highlight\" : \"\"}`}\n  >\n    {value ? (\n      <div className=\"pcs-renderer-text\">{value}</div>\n    ) : (\n      <div className=\"pcs-renderer-text\" style={{ color: \"red\" }}>\n        {t(\"alerts.grid.ruleDeleted\")}\n      </div>\n    )}\n  </div>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { createSelector } from \"reselect\";\nimport { TelemetryService, AlertService } from \"services\";\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  getPending,\n  getError,\n  toActionCreator\n} from \"store/utilities\";\nimport { formatConditions } from \"utilities\";\n\n// ========================= Epics - START\nconst alertsHandleError = fromAction => error =>\n  Observable.of(\n    alertsRedux.actions.alertsRegisterError(fromAction.type, {\n      error,\n      fromAction\n    })\n  );\n\nconst rulesHandleError = fromAction => error =>\n  Observable.of(\n    rulesRedux.actions.rulesRegisterError(fromAction.type, {\n      error,\n      fromAction\n    })\n  );\n\nexport const epics = createEpicScenario({\n  /** Loads the alerts alertsItems */\n  fetchAlerts: {\n    type: \"ALERTS_FETCH\",\n    epic: fromAction =>\n      AlertService.getAlerts()\n        .map(toActionCreator(alertsRedux.actions.updateAlerts, fromAction))\n        .catch(alertsHandleError(fromAction))\n  },\n  /** Loads the rules, including deleted rules */\n  fetchRules: {\n    type: \"RULES_FETCH\",\n    epic: fromAction =>\n      TelemetryService.getRules()\n        .map(toActionCreator(rulesRedux.actions.updateRules, fromAction))\n        .catch(rulesHandleError(fromAction))\n  },\n\n  deleteRule: {\n    type: \"RULES_DELETE\",\n    epic: fromAction =>\n      TelemetryService.deleteRule(fromAction.payload)\n        .map(toActionCreator(rulesRedux.actions.deleteRule, fromAction))\n        .catch(rulesHandleError(fromAction))\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst alertSchema = new schema.Entity(\"alerts\");\nconst alertListSchema = new schema.Array(alertSchema);\n\nconst ruleSchema = new schema.Entity(\"rules\");\nconst ruleListSchema = new schema.Array(ruleSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst alertsInitialState = {\n  ...errorPendingInitialState,\n  alertEntities: undefined,\n  alertItems: [],\n  alertLastUpdated: undefined\n};\n\nconst rulesInitialState = {\n  ...errorPendingInitialState,\n  ruleEntities: {},\n  ruleItems: [],\n  ruleLastUpdated: undefined\n};\n\nconst updateAlertsReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { alerts },\n    result\n  } = normalize(payload, alertListSchema);\n  return update(state, {\n    alertEntities: { $set: alerts },\n    alertItems: { $set: result },\n    lastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst insertRulesReducer = (state, { payload }) => {\n  const inserted = payload.map(rule => ({ ...rule, isNew: true }));\n  const {\n    entities: { rules },\n    result\n  } = normalize(inserted, ruleListSchema);\n  if (state.ruleEntities) {\n    return update(state, {\n      ruleEntities: { $merge: rules },\n      ruleItems: { $push: result }\n    });\n  }\n  return update(state, {\n    ruleEntities: { $set: rules },\n    ruleItems: { $set: [result] }\n  });\n};\n\nconst modifyRulesReducer = (state, { payload }) => {\n  const {\n    entities: { rules = {} }\n  } = normalize(payload, ruleListSchema);\n  return update(state, {\n    ruleEntities: { $merge: rules }\n  });\n};\n\nconst updateRulesReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { rules = {} },\n    result\n  } = normalize(payload, ruleListSchema);\n  return update(state, {\n    ruleEntities: { $set: rules },\n    ruleItems: { $set: result },\n    ruleLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateRulesWithFarmReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { rules = {} },\n    result\n  } = normalize(payload, ruleListSchema);\n  return update(state, {\n    ruleEntities: { $set: rules },\n    ruleItems: { $set: result },\n    ruleLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst deleteRuleReducer = (state, { payload, fromAction }) => {\n  const spliceArr = payload.reduce((idxAcc, payloadItem) => {\n    const idx = state.ruleItems.indexOf(payloadItem);\n    if (idx !== -1) {\n      idxAcc.push([idx, 1]);\n    }\n    return idxAcc;\n  }, []);\n  return update(state, {\n    ruleEntities: { $unset: payload },\n    ruleItems: { $splice: spliceArr }\n  });\n};\n\nconst updateCountReducer = (state, { payload: { id, count } }) =>\n  update(state, {\n    ruleEntities: { [id]: { count: { $set: count } } }\n  });\n\nconst updateLastTriggerReducer = (state, { payload: { id, lastTrigger } }) =>\n  update(state, {\n    ruleEntities: { [id]: { lastTrigger: { $set: lastTrigger } } }\n  });\n\nconst alertsFetchableTypes = [epics.actionTypes.fetchAlerts];\nconst rulesFetchableTypes = [epics.actionTypes.fetchRules];\n\nexport const alertsRedux = createReducerScenario({\n  // Reducers defined in this file\n  updateAlerts: { type: \"ALERTS_UPDATE\", reducer: updateAlertsReducer },\n\n  // Common Reducers (from store/utilities.js)\n  alertsRegisterError: { type: \"ALERTS_REDUCER_ERROR\", reducer: errorReducer },\n  alertsIsFetching: { multiType: alertsFetchableTypes, reducer: pendingReducer }\n});\n\nexport const rulesRedux = createReducerScenario({\n  // Reducers defined in this file\n  insertRules: { type: \"RULE_INSERT\", reducer: insertRulesReducer },\n  modifyRules: { type: \"RULES_MODIFY\", reducer: modifyRulesReducer },\n  deleteRule: { type: \"RULES_DELETE\", reducer: deleteRuleReducer },\n  updateRules: { type: \"RULES_UPDATE\", reducer: updateRulesReducer },\n  updateRuleCount: { type: \"RULES_COUNT_UPDATE\", reducer: updateCountReducer },\n  updateRuleLastTrigger: {\n    type: \"RULES_LAST_TRIGGER_UPDATE\",\n    reducer: updateLastTriggerReducer\n  },\n  updateRuleWithFarmId: {\n    type: \"RULES_UPDATE_FARM_ID\",\n    reducer: updateRulesWithFarmReducer\n  },\n\n  // Common Reducers (from store/utilities.js)\n  rulesRegisterError: { type: \"RULES_REDUCER_ERROR\", reducer: errorReducer },\n  rulesIsFetching: { multiType: rulesFetchableTypes, reducer: pendingReducer }\n});\n\nexport const reducer = {\n  alerts: alertsRedux.getReducer(alertsInitialState),\n  rules: rulesRedux.getReducer(rulesInitialState)\n};\n// ========================= Reducers - END\n\n// ========================= Selectors - START\n// Alerts Selectors\nexport const getAlertsReducer = state => state.alerts; // Conflict\nexport const getAlertEntities = state =>\n  getAlertsReducer(state).alertEntities || {};\nexport const getAlertItems = state => getAlertsReducer(state).alertItems || [];\nexport const getAlertsLastUpdated = state =>\n  getAlertsReducer(state).lastUpdated;\nexport const getAlertsError = state =>\n  getError(getAlertsReducer(state), epics.actionTypes.fetchAlerts);\nexport const getAlertsPendingStatus = state =>\n  getPending(getAlertsReducer(state), epics.actionTypes.fetchAlerts);\nexport const getDeleteAlertError = state =>\n  getError(getAlertsReducer(state), epics.actionTypes.deleteAlert);\nexport const getDeleteAlertPendingStatus = state =>\n  getPending(getAlertsReducer(state), epics.actionTypes.deleteAlert);\nexport const getAlerts = createSelector(\n  // Conflict\n  getAlertEntities,\n  getAlertItems,\n  (alertEntities, alertItems) => alertItems.map(id => alertEntities[id])\n);\n\nexport const getAlertsRuleBased = state => {\n  const alerts = getAlerts(state);\n  const rules = getRules(state);\n  const ruleAdded = [];\n  const alertsByRule = [];\n  alerts.forEach(alert => {\n    if (!ruleAdded[alert.ruleId]) {\n      ruleAdded[alert.ruleId] = true;\n      const rule = rules.find(rule => rule.id === alert.ruleId);\n      alertsByRule.push({\n        ...alert,\n        ruleName: rule ? rule.name : undefined,\n        counts: getAlertCountsByRuleId(state, alert.ruleId),\n        lastOccurrence: getAlertLatestOccurrenceByRuleId(state, alert.ruleId)\n      });\n    }\n  });\n  return alertsByRule;\n};\n\nexport const getAlertCountsByRuleId = (state, ruleId) => {\n  const alertEntities = getAlerts(state).filter(\n    alert => alert.ruleId === ruleId\n  );\n  return {\n    total: alertEntities.length,\n    open: alertEntities.filter(alert => alert.status === \"open\").length,\n    acknowledged: alertEntities.filter(alert => alert.status === \"acknowledged\")\n      .length,\n    closed: alertEntities.filter(alert => alert.status === \"closed\").length\n  };\n};\nexport const getAlertLatestOccurrenceByRuleId = (state, ruleId) => {\n  const alertEntities = getAlerts(state)\n    .filter(alert => alert.ruleId === ruleId)\n    .map(alert => alert.createdAt);\n\n  return alertEntities.reduce((latestOccurrence, currentOccurrence) => {\n    if (moment(currentOccurrence).isAfter(latestOccurrence))\n      latestOccurrence = currentOccurrence;\n    return latestOccurrence;\n  });\n};\nexport const getAlertById = (state, id) =>\n  id === undefined ? null : getAlertEntities(state)[id];\n\nexport const getAlertsByFarmId = (state, id) => {\n  // Add code to update the alerts reducer\n};\n\n// Rules Selectors\nexport const getRulesReducer = state => state.rules; // Conflict\nexport const getEntities = state => getRulesReducer(state).ruleEntities || {};\nexport const getRulesWithFarmId = state => getRulesReducer(state) || {};\nconst getItems = state => getRulesReducer(state).ruleItems || [];\nexport const getRulesLastUpdated = state =>\n  getRulesReducer(state).ruleLastUpdated;\nexport const getRulesError = state =>\n  getError(getRulesReducer(state), epics.actionTypes.fetchRules);\nexport const getRulesPendingStatus = state =>\n  getPending(getRulesReducer(state), epics.actionTypes.fetchRules);\nexport const getRules = createSelector(\n  // Conflict\n  getEntities,\n  getItems,\n  (entities, items, includeDeleted = false) =>\n    items.reduce((acc, id) => {\n      const rule = {\n        ...entities[id],\n        sortableConditions: formatConditions(entities[id])\n      };\n      return !rule.deleted || includeDeleted ? [...acc, rule] : acc;\n    }, [])\n);\n\nexport const getRuleById = (state, id) =>\n  id === undefined ? null : getEntities(state)[id];\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\n/* This file contains default values useful for creating PcsGrid */\nimport Config from \"app.config\";\n\nexport const ROW_HEIGHT = 48;\n\n/** The default value for PcsGrid cells that are empty */\nexport const EMPTY_FIELD_VAL = Config.emptyFieldValue;\n\n/** A collection of reusable value formatter methods */\nexport const gridValueFormatters = {\n  checkForEmpty: (value, emptyValue = EMPTY_FIELD_VAL) => value || emptyValue\n};\n\n/** A the class name for the first row in a grid (used for soft and hard selection ) */\nexport const FIRST_COLUMN_CLASS = \"first-child-column\";\nexport const CHECKBOX_COLUMN_CLASS = \"checkbox-column\";\n\nexport const checkboxColumn = {\n  lockPosition: true,\n  cellClass: FIRST_COLUMN_CLASS,\n  headerClass: CHECKBOX_COLUMN_CLASS,\n  suppressResize: true,\n  suppressSizeToFit: true,\n  resizable: false,\n  checkboxSelection: true,\n  headerCheckboxSelection: false,\n  headerCheckboxSelectionFilteredOnly: true,\n  suppressMovable: true,\n  width: 35\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { createSelector } from \"reselect\";\nimport { JobsService } from \"services\";\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  toActionCreator,\n  getPending,\n  getError\n} from \"store/utilities\";\nimport { name, jobsDateFormat, renderUndefined, isDef } from \"utilities\";\nimport Config from \"app.config\";\nimport { getFarmsMap } from \"store/reducers/farmsReducer\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Loads the jobs jobItems */\n  fetchJobs: {\n    type: \"JOBS_FETCH\",\n    epic: fromAction =>\n      JobsService.getJobsItems()\n        .map(toActionCreator(redux.actions.updateJobs, fromAction))\n        .catch(handleError(fromAction))\n  },\n  fetchJobTypes: {\n    type: \"JOBS_TYPES_FETCH\",\n    epic: fromAction =>\n      JobsService.getJobTypesItems()\n        .map(toActionCreator(redux.actions.updateJobTypes, fromAction))\n        .catch(handleError(fromAction))\n  },\n  abortJob: {\n    type: \"ABORT_JOB\",\n    epic: fromAction =>\n      JobsService.abortJobs(fromAction.payload)\n        .map(toActionCreator(redux.actions.abortJob, fromAction))\n        .catch(handleError(fromAction))\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst itemSchema = new schema.Entity(\"jobs\");\nconst itemListSchema = new schema.Array(itemSchema);\n\nconst jobTypesSchema = new schema.Entity(\"jobTypes\");\nconst jobTypesListSchema = new schema.Array(jobTypesSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  jobEntities: {},\n  jobTypesEntities: {},\n  jobItems: [],\n  jobTypesItems: [],\n  jobLastUpdated: \"\",\n  jobtypeLastUpdated: \"\"\n};\n\nconst insertJobReducer = (state, { payload }) => {\n  const {\n    entities: { jobs },\n    result\n  } = normalize(payload, itemListSchema);\n\n  if (state.jobEntities) {\n    return update(state, {\n      jobEntities: { $merge: jobs },\n      jobItems: { $splice: [[0, 0, ...result]] }\n    });\n  }\n  return update(state, {\n    jobEntities: { $set: jobs },\n    jobItems: { $set: [result] }\n  });\n};\n\nconst updateJobsReducer = (state, { payload, fromAction, store }) => {\n  const {\n    entities: { jobs },\n    result\n  } = normalize(payload, itemListSchema);\n\n  return update(state, {\n    jobEntities: { $set: jobs },\n    jobItems: { $set: result },\n    jobLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst abortJobReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { jobs = {} }\n  } = normalize(payload, itemListSchema);\n  return update(state, {\n    jobEntities: { $merge: jobs }\n  });\n};\n\nconst updateJobTypesReducer = (state, { payload, fromAction, store }) => {\n  const {\n    entities: { jobTypes },\n    result\n  } = normalize(payload, jobTypesListSchema);\n\n  return update(state, {\n    jobTypesEntities: { $set: jobTypes },\n    jobTypesItems: { $set: result },\n    jobTypeLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchJobs,\n  epics.actionTypes.fetchJobTypes\n];\n\nexport const redux = createReducerScenario({\n  updateJobs: { type: \"JOBS_UPDATE\", reducer: updateJobsReducer },\n  insertJob: { type: \"JOBS_INSERT\", reducer: insertJobReducer },\n  abortJob: { type: \"ABORT_JOB\", reducer: abortJobReducer },\n  updateJobTypes: { type: \"JOB_TYPES_UPDATE\", reducer: updateJobTypesReducer },\n  registerError: { type: \"JOBS_REDUCER_ERROR\", reducer: errorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer }\n});\n\nexport const reducer = { jobs: redux.getReducer(initialState) };\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getJobsReducer = state => state.jobs;\nexport const getJobEntities = state => getJobsReducer(state).jobEntities || {};\nexport const getJobItems = state => getJobsReducer(state).jobItems || [];\nexport const getJobsLastUpdated = state => getJobsReducer(state).jobLastUpdated;\nexport const getJobsError = state =>\n  getError(getJobsReducer(state), epics.actionTypes.fetchJobs);\nexport const getJobsPendingStatus = state =>\n  getPending(getJobsReducer(state), epics.actionTypes.fetchJobs);\n\nexport const getJobTypesEntities = state =>\n  getJobsReducer(state).jobTypesEntities || {};\nexport const getJobTypesItems = state =>\n  getJobsReducer(state).jobTypesItems || [];\nexport const getJobTypesLastUpdated = state =>\n  getJobsReducer(state).jobTypeLastUpdated;\nexport const getJobTypesError = state =>\n  getError(getJobsReducer(state), epics.actionTypes.fetchJobTypes);\nexport const getJobTypesPendingStatus = state =>\n  getPending(getJobsReducer(state), epics.actionTypes.fetchJobTypes);\n\nexport const getJobTypesMap = createSelector(\n  getJobTypesEntities,\n  getJobTypesItems,\n  (jobTypeEntities, jobTypeItems) =>\n    jobTypeItems.reduce((JobTypeMap, id) => {\n      return JobTypeMap.set(id, jobTypeEntities[id][name]);\n    }, new Map())\n);\nexport const getJobs = createSelector(\n  getJobEntities,\n  getJobItems,\n  getFarmsMap,\n  getJobTypesMap,\n  (jobEntities, jobItems, farmMap, jobTypesMap) => {\n    const days = \"days\";\n    return jobItems.map(id => {\n      const FarmIds = jobEntities[id].arguments.farm_ids\n        ? jobEntities[id].arguments.farm_ids\n        : jobEntities[id].arguments.farm_id\n          ? jobEntities[id].arguments.farm_id\n          : undefined;\n      const FarmNamesArray = [];\n      let FarmsNames = undefined;\n      if (FarmIds && FarmIds.indexOf(\",\") !== -1) {\n        FarmIds.split(\", \").forEach(id => {\n          FarmNamesArray.push(farmMap.get(id));\n        });\n        FarmsNames =\n          FarmNamesArray.length > 0 ? FarmNamesArray.join(\", \") : undefined;\n      } else {\n        FarmsNames = farmMap.get(FarmIds);\n      }\n\n      return {\n        ...jobEntities[id],\n        farmName: FarmsNames,\n        jobTypeName: jobTypesMap.get(jobEntities[id].typeId),\n        startDate: isDef(jobEntities[id].arguments.from)\n          ? jobEntities[id].arguments.from\n          : isDef(jobEntities[id].arguments.start_date) ? jobEntities[id].arguments.start_date : isDef(jobEntities[id].arguments.date)\n            ? moment(jobEntities[id].arguments.date, jobsDateFormat)\n              .subtract(days, jobEntities[id].arguments.history)\n              .format(jobsDateFormat)\n            : Config.emptyValue,\n        endDate: isDef(jobEntities[id].arguments.to)\n          ? jobEntities[id].arguments.to\n          : isDef(jobEntities[id].arguments.start_date) ? jobEntities[id].arguments.start_date : renderUndefined(jobEntities[id].arguments.date)\n      };\n    });\n  }\n);\n\nexport const getJobTypes = createSelector(\n  getJobTypesEntities,\n  getJobTypesItems,\n  (jobTypeEntities, jobTypeItems) => {\n    return jobTypeItems.map(id => jobTypeEntities[id]);\n  }\n);\n\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\n\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\n\nimport { createSelector } from \"reselect\";\nimport { roleService } from \"services\";\n\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  resetPendingAndErrorReducer,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  resetErrorReducer,\n  getPending,\n  setPending,\n  toActionCreator,\n  getError\n} from \"store/utilities\";\n\nimport { toNewRoleAssignmentRequestModel } from \"services/models\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  fetchRoleAssignments: {\n    type: \"ROLEASSIGNMENTS_FETCH\",\n    epic: fromAction =>\n      roleService\n        .getRoleAssignments()\n        .map(toActionCreator(redux.actions.updateRoleAssignments, fromAction))\n        .catch(handleError(fromAction))\n  },\n\n  fetchRoleDefinitions: {\n    type: \"ROLEDEFINITIONS_FETCH\",\n    epic: fromAction =>\n      roleService\n        .getRoleDefinitions()\n        .map(toActionCreator(redux.actions.updateRoleDefinitions, fromAction))\n        .catch(handleError(fromAction))\n  },\n\n  deleteRoleAssignmentById: {\n    type: \"ROLEASSIGNMENT_DELETE\",\n    epic: fromAction =>\n      Observable.of(fromAction.payload.id)\n        .flatMap(id => roleService.deleteRoleAssignment(id).map(() => id))\n        .map(\n          toActionCreator(redux.actions.deleteRoleAssignmentById, fromAction)\n        )\n        .do(() => fromAction.payload.callbacks.success())\n        .catch(error => {\n          fromAction.payload.callbacks.error();\n          return handleError(fromAction)(error);\n        })\n  },\n\n  addRoleAssignment: {\n    type: \"ROLEASSIGNMENT_ADD\",\n    epic: fromAction => {\n      return Observable.of(fromAction.payload)\n        .flatMap(payload =>\n          roleService.addRoleAssignment(\n            toNewRoleAssignmentRequestModel(payload)\n          )\n        )\n        .map(toActionCreator(redux.actions.mergeRoleAssignment, fromAction))\n        .catch(handleError(fromAction));\n    }\n  }\n});\nconst roleAssignmentSchema = new schema.Entity(\"roleAssignments\");\nconst roleAssignmentListSchema = new schema.Array(roleAssignmentSchema);\n\nconst roleDefinitionSchema = new schema.Entity(\"roleDefinitions\");\nconst roleDefinitionListSchema = new schema.Array(roleDefinitionSchema);\n\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n\n  roleAssignmentEntities: {},\n  roleAssignmentItems: [],\n  roleAssignmentLastUpdated: \"\",\n\n  roleDefinitionEntities: [],\n  roleDefinitionItems: [],\n  roleDefinitionLastUpdated: \"\"\n};\n\nconst updateRoleAssignmentReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { roleAssignments },\n    result\n  } = normalize(payload, roleAssignmentListSchema);\n  return update(state, {\n    roleAssignmentEntities: { $set: roleAssignments },\n    roleAssignmentItems: { $set: result },\n    roleAssignmentLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst mergeRoleAssignmentReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { roleAssignments },\n    result\n  } = normalize(payload, roleAssignmentSchema);\n  return update(state, {\n    roleAssignmentEntities: { $merge: roleAssignments },\n    roleAssignmentItems: { $push: [result] },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst deleteRoleAssignmentByIdReducer = (state, { payload, fromAction }) => {\n  return update(state, {\n    roleAssignmentEntities: { $unset: [payload] },\n    roleAssignmentItems: items => items.filter(item => item !== payload),\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateRoleDefinitionReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { roleDefinitions },\n    result\n  } = normalize(payload, roleDefinitionListSchema);\n  return update(state, {\n    roleDefinitionEntities: { $set: roleDefinitions },\n    roleDefinitionItems: { $set: result },\n    roleDefinitionLastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchRoleAssignments,\n  epics.actionTypes.fetchRoleDefinitions,\n  epics.actionTypes.addRoleAssignment,\n  epics.actionTypes.deleteRoleAssignmentById\n];\n\nexport const redux = createReducerScenario({\n  updateRoleAssignments: {\n    type: \"ROLEASSIGNMENT_UPDATE\",\n    reducer: updateRoleAssignmentReducer\n  },\n  updateRoleDefinitions: {\n    type: \"ROLEDEFINITION_UPDATE\",\n    reducer: updateRoleDefinitionReducer\n  },\n  deleteRoleAssignmentById: {\n    type: \"ROLEASSIGNMENT_DELETE_BY_ID\",\n    reducer: deleteRoleAssignmentByIdReducer\n  },\n  mergeRoleAssignment: {\n    type: \"ROLEASSIGNMENT_ADD\",\n    reducer: mergeRoleAssignmentReducer\n  },\n  registerError: { type: \"ROLES_REDUCER_ERROR\", reducer: errorReducer },\n  clearError: { type: \"ROLES_RESET_ALL_ERRORS\", reducer: resetErrorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer },\n  resetPendingAndError: {\n    type: \"ROLE_REDUCER_RESET_ERROR_PENDING\",\n    reducer: resetPendingAndErrorReducer\n  }\n});\n\nexport const reducer = {\n  role: redux.getReducer(initialState)\n};\n\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getRolesReducer = state => state.role;\n\nexport const getRoleAssignmentEntities = state =>\n  getRolesReducer(state).roleAssignmentEntities || {};\nexport const getRoleAssignmentItems = state =>\n  getRolesReducer(state).roleAssignmentItems || [];\nexport const getRoleAssignmentLastUpdated = state =>\n  getRolesReducer(state).roleAssignmentLastUpdated;\n\nexport function getFetchRoleAssignmentError(state) {\n  return getError(\n    getRolesReducer(state),\n    epics.actionTypes.fetchRoleAssignments\n  );\n}\n\nexport function getAddRoleAssignmentError(state) {\n  return getError(getRolesReducer(state), epics.actionTypes.addRoleAssignment);\n}\n\nexport function getDeleteRoleAssignmentError(state) {\n  return getError(\n    getRolesReducer(state),\n    epics.actionTypes.deleteRoleAssignmentById\n  );\n}\n\nexport function getFetchRoleAssignmentPendingStatus(state) {\n  return getPending(\n    getRolesReducer(state),\n    epics.actionTypes.fetchRoleAssignments\n  );\n}\n\nexport function getAddRoleAssignmentPendingStatus(state) {\n  return getPending(\n    getRolesReducer(state),\n    epics.actionTypes.addRoleAssignment\n  );\n}\n\nexport function getDeleteRoleAssignmentPendingStatus(state) {\n  return getPending(\n    getRolesReducer(state),\n    epics.actionTypes.deleteRoleAssignmentById\n  );\n}\n\nexport const getRoleDefinitionEntities = state =>\n  getRolesReducer(state).roleDefinitionEntities || {};\nexport const getRoleDefinitionItems = state =>\n  getRolesReducer(state).roleDefinitionItems || [];\nexport const getRoleDefinitionLastUpdated = state =>\n  getRolesReducer(state).roleDefinitionLastUpdated;\nexport const getRoleDefinitionError = state =>\n  getError(getRolesReducer(state), epics.actionTypes.fetchRoleDefinitions);\nexport const getRoleDefinitionPendingStatus = state =>\n  getPending(getRolesReducer(state), epics.actionTypes.fetchRoleDefinitions);\n\nexport const getRoleAssignments = createSelector(\n  getRoleAssignmentEntities,\n  getRoleAssignmentItems,\n  (roleAssignmentEntities, roleAssignmentItems) =>\n    roleAssignmentItems.map(id => roleAssignmentEntities[id])\n);\n\nexport const getRoleDefinitions = createSelector(\n  getRoleDefinitionEntities,\n  getRoleDefinitionItems,\n  (roleDefinitionEntities, roleDefinitionItems) =>\n    roleDefinitionItems.map(id => roleDefinitionEntities[id])\n);\n","import i18n from \"i18next\";\nimport Backend from \"i18next-xhr-backend\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport { reactI18nextModule } from \"react-i18next\";\n\n// Documentation for the i18n config can be found at the link below.\n// https://www.i18next.com/configuration-options.html\n\ni18n\n  .use(Backend)\n  .use(LanguageDetector)\n  .use(reactI18nextModule)\n  .init({\n    fallbackLng: \"en\",\n\n    // Have a common namespace used around the full app\n    ns: [\"translations\"],\n    defaultNS: \"translations\",\n\n    debug: false,\n\n    interpolation: {\n      escapeValue: false // Not needed for react!!\n    },\n\n    react: {\n      wait: true\n    }\n  });\n\nexport default i18n;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\nimport { createSelector } from \"reselect\";\nimport { MapService } from \"services\";\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  setPending,\n  getPending,\n  getError,\n  toActionCreator\n} from \"store/utilities\";\nimport { jobsDateFormat } from \"utilities\";\nimport { getFarmsMap } from \"store/reducers/farmsReducer\";\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nconst cellResponse = (response, error) => ({ response, error });\nexport const epics = createEpicScenario({\n  fetchMapFiles: {\n    type: \"MAPS_FILES_FETCH\",\n    epic: (fromAction, action$) =>\n      MapService.getMapFileByIdAndType(fromAction.payload.id)\n        .map(mapFiles =>\n          redux.actions.updateMapsFiles({\n            id: fromAction.payload.id,\n            mapFiles: cellResponse(mapFiles)\n          })\n        )\n        .catch(error =>\n          Observable.of(\n            redux.actions.updateMapsFiles({\n              id: fromAction.payload.id,\n              mapFiles: cellResponse(undefined, error)\n            })\n          )\n        )\n  },\n  fetchMaps: {\n    type: \"MAPS_FARMS_DETAILS_FETCH\",\n    epic: fromAction =>\n      MapService.getMapsItems()\n        .map(toActionCreator(redux.actions.updateMaps, fromAction))\n        .catch(handleError(fromAction))\n  }\n});\n// ========================= Epics - END\n\n// ========================= Schemas - START\nconst itemSchema = new schema.Entity(\"maps\");\nconst itemListSchema = new schema.Array(itemSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  mapEntities: {},\n  mapItems: [],\n  lastUpdated: \"\",\n  isTooltipVisible: true\n};\n\nconst updateMapsReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { maps },\n    result\n  } = normalize(payload, itemListSchema);\n  return update(state, {\n    mapEntities: { $set: maps },\n    mapItems: { $set: result },\n    lastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst updateTooltipReducer = state => {\n  console.log(\"update tool tip reducer\"); // eslint-disable-line no-console\n  return update(state, {\n    isTooltipVisible: { $set: false }\n  });\n};\n\nconst updateFileMapsReducer = (state, { payload: { id, mapFiles } }) => {\n  const imageUrlMaps = new Map();\n  let imageType;\n  let imageUrl;\n  let imageTypeStartIndex;\n  let imageTypeLastIndex;\n  const contentTypeInitials = \"image/\";\n  if (mapFiles.response !== undefined) {\n    for (let i = 0; i < mapFiles.response.length; i++) {\n      if (mapFiles.response[i].contentType !== undefined) {\n        imageTypeStartIndex =\n          mapFiles.response[i].contentType.indexOf(contentTypeInitials) +\n          contentTypeInitials.length;\n        imageTypeLastIndex = mapFiles.response[i].contentType.length;\n        imageType = mapFiles.response[i].contentType\n          .substring(imageTypeStartIndex, imageTypeLastIndex)\n          .toUpperCase();\n        imageUrl = mapFiles.response[i].downloadSASUrl;\n        imageUrlMaps.set(imageType, imageUrl);\n      }\n    }\n  }\n  return update(state, {\n    mapEntities: { [id]: { imageUrlMaps: { $set: imageUrlMaps } } }\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [\n  epics.actionTypes.fetchMaps,\n  epics.actionTypes.fetchMapFiles\n];\n\nexport const redux = createReducerScenario({\n  updateMaps: { type: \"MAPS_UPDATE\", reducer: updateMapsReducer },\n  updateTooltip: { type: \"TOOLTIP_UPDATE\", reducer: updateTooltipReducer },\n  updateMapsFiles: {\n    type: \"MAPS_FILES_UPDATE\",\n    reducer: updateFileMapsReducer\n  },\n  registerError: { type: \"MAPS_REDUCER_ERROR\", reducer: errorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer }\n});\n\nexport const reducer = { maps: redux.getReducer(initialState) };\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getMapsReducer = state => state.maps;\nexport const getMapEntities = state => getMapsReducer(state).mapEntities || {};\nexport const getTooltipPendingStatus = state =>\n  getMapsReducer(state).isTooltipVisible;\nexport const getMapItems = state => getMapsReducer(state).mapItems || [];\nexport const getMapsLastUpdated = state => getMapsReducer(state).lastUpdated;\nexport const getMapsError = state =>\n  getError(getMapsReducer(state), epics.actionTypes.fetchMaps);\nexport const getMapsPendingStatus = state =>\n  getPending(getMapsReducer(state), epics.actionTypes.fetchMaps);\nexport const getMaps = createSelector(\n  getMapEntities,\n  getMapItems,\n  getFarmsMap,\n  (mapEntities, mapItems, farmMap) => {\n    return mapItems.map(id => {\n      return {\n        ...mapEntities[id],\n        farmName: farmMap.get(mapEntities[id].farmId),\n        mapName:\n          String(mapEntities[id].type) +\n          \"_\" +\n          farmMap.get(mapEntities[id].farmId) +\n          \"_\" +\n          String(moment(mapEntities[id].date).format(jobsDateFormat))\n      };\n    });\n  }\n);\n\nexport const getMapTypes = createSelector(\n  getMapEntities,\n  getMapItems,\n  (mapTypeEntities, mapTypeItems) => {\n    return [\n      ...new Set(\n        Object.keys(mapTypeEntities).map(item => mapTypeEntities[item].type)\n      )\n    ];\n  }\n);\n\n// ========================= Selectors - END\n","// Copyright (c) Microsoft. All rights reserved.\nimport Config from \"app.config\";\nimport {\n  /* EMPTY_FIELD_VAL,*/ gridValueFormatters\n} from \"components/shared/pcsGrid/pcsGridConfig\";\nimport {\n  deviceModelTypeRenderer,\n  SoftSelectLinkRenderer,\n  deviceStatusRenderer,\n  TimeRenderer\n} from \"components/shared/cellRenderers\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const deviceColumnDefs = {\n  id: {\n    headerName: \"devices.grid.id\",\n    field: \"id\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  name: {\n    headerName: \"devices.grid.name\",\n    field: \"name\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer\n  },\n  deviceModelType: {\n    headerName: \"devices.grid.deviceModelType\",\n    field: \"deviceModelType\",\n    filter: \"text\",\n    cellRendererFramework: deviceModelTypeRenderer\n  },\n  status: {\n    headerName: \"devices.grid.status\",\n    field: \"status\",\n    filter: \"text\",\n    cellRendererFramework: deviceStatusRenderer\n  },\n  /** criticalAlert: {\n    headerName: \"devices.grid.criticalAlert\",\n    field: \"criticalAlert\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  }, */\n  warnings: {\n    headerName: \"devices.grid.warnings\",\n    field: \"warnings\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  hardwareId: {\n    headerName: \"devices.grid.hardwareid\",\n    field: \"hardwareId\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  farmId: {\n    headerName: \"devices.grid.farm\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  parentDevice: {\n    headerName: \"devices.grid.parentDevice\",\n    field: \"parentDevice\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  lastUpdated: {\n    headerName: \"devices.grid.lastUpdated\",\n    field: \"lastModifiedAt\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    cellRendererFramework: TimeRenderer\n  }\n};\n\nexport const childDeviceColumnDefs = {\n  name: {\n    headerName: \"devices.grid.name\",\n    field: \"name\",\n    sort: \"asc\"\n  },\n  deviceModelType: {\n    headerName: \"devices.grid.deviceModelType\",\n    field: \"deviceModelType\",\n    filter: \"text\",\n    cellRendererFramework: deviceModelTypeRenderer\n  },\n  status: {\n    headerName: \"devices.grid.status\",\n    field: \"status\",\n    filter: \"text\",\n    cellRendererFramework: deviceStatusRenderer\n  }\n  /** criticalAlert: {\n    headerName: \"devices.grid.criticalAlert\",\n    field: \"criticalAlert\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  } */\n};\n\n/** Given a device object, extract and return the device Id */\nexport const getSoftSelectId = ({ Id }) => Id;\n\n/** Shared device grid AgGrid properties */\nexport const defaultDeviceGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"multiple\"\n};\n\nexport const defaultChildDeviceGridProps = {\n  enableColResize: true,\n  multiSelect: false,\n  pagination: true,\n  paginationPageSize: 5,\n  rowSelection: \"single\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { withNamespaces } from \"react-i18next\";\nimport TelemetryPanel from \"./telemetryPanel\";\nimport { getTheme } from \"store/reducers/appReducer\";\nimport {\n  epics as deviceEpics,\n  getDevices,\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus\n} from \"store/reducers/devicesReducer\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorError,\n  getSensorPendingStatus,\n  getSensorLastUpdated,\n  getSensorModels,\n  getSensorModelsError,\n  getSensorModelLastUpdated,\n  getSensorModelPendingStatus\n} from \"store/reducers/sensorsReducer\";\n\nconst mapStateToProps = (state, props) => ({\n  theme: getTheme(state),\n\n  devices: getDevices(state),\n  devicesError: getDevicesError(state),\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n\n  sensors: getSensors(state),\n  sensorsError: getSensorError(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n\n  sensorModels: getSensorModels(state),\n  sensorModelsError: getSensorModelsError(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  isSensorModelsPending: getSensorModelPendingStatus(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices()),\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels())\n});\n\nexport const TelemetryPanelContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(TelemetryPanel)\n);\n\nTelemetryPanelContainer.propTypes = {\n  showHeader: PropTypes.bool.isRequired\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { PropertiesTable } from \"components/shared\";\nimport { isDef, dateFormat } from \"utilities\";\nimport moment from \"moment\";\n\nexport class DeviceProperties extends React.Component {\n  render() {\n    const { device, t } = this.props;\n    const leftTableData = {\n      [t(\"devices.grid.description\")]: device.description,\n      [t(\"devices.grid.deviceModelName\")]: device.deviceModelName,\n      [t(\"devices.grid.location\")]:\n        isDef(device.latitude) && isDef(device.longitude)\n          ? device.latitude + \", \" + device.longitude\n          : null,\n      [t(\"devices.flyouts.details.deviceProperties.reportingInterval\")]: [\n        device.reportingInterval,\n        \"(\",\n        t(\"devices.reportingIntervalType\"),\n        \")\"\n      ].join(\" \"),\n      [t(\"devices.grid.status\")]: device.status,\n      [t(\"devices.grid.parentDevice\")]: device.parentDevice\n    };\n    const rightTableData = {\n      [t(\"devices.grid.deviceId\")]: device.id,\n      [t(\"devices.grid.addedOn\")]: moment(new Date(device.createdAt)).format(\n        dateFormat\n      ),\n      [t(\"devices.grid.lastUpdated\")]: moment(\n        new Date(device.lastModifiedAt)\n      ).format(dateFormat),\n      [t(\"devices.grid.farm\")]: isDef(device.farmName) ? (\n        <Link\n          to={{\n            pathname: `/farms/${device.farmId}`,\n            state: {\n              id: device.farmId,\n              farmName: device.farmName\n            }\n          }}\n        >\n          {device.farmName}\n        </Link>\n      ) : null\n    };\n\n    return (\n      <PropertiesTable\n        leftTableData={leftTableData}\n        rightTableData={rightTableData}\n      />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Svg } from \"components/shared\";\nimport {\n  DevicesGrid,\n  childDeviceColumnDefs,\n  defaultChildDeviceGridProps\n} from \"components/pages/devices/devicesGrid\";\nimport { svgs, translateColumnDefs } from \"utilities\";\nimport Flyout from \"components/shared/flyout\";\nimport { TelemetryPanelContainer as TelemetryPanel } from \"components/shared/telemetryPanel\";\nimport { DeviceProperties } from \"components/pages/devices/deviceProperties/deviceProperties\";\nimport memoizeOne from \"memoize-one\";\nimport { appInsights, reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nconst Section = Flyout.Section;\n\nconst filterByParentId = memoizeOne((list, parentId) =>\n  list.filter(object => object.parentDeviceId === parentId)\n);\n\nconst columnDefs = [\n  childDeviceColumnDefs.name,\n  childDeviceColumnDefs.deviceModelType,\n  childDeviceColumnDefs.status\n];\n\nclass DeviceDetails extends React.Component {\n  componentDidMount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyOpen: Device Details\" });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.deviceId !== this.props.deviceId) {\n      appInsights.trackEvent({ name: \"UiEvent:FlyChange: Device Details\" });\n    }\n  }\n  componentWillUnmount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyClose: Device Details\" });\n  }\n  render() {\n    const {\n      fetchSensors,\n      sensorLastUpdated,\n      sensorsError,\n      sensors,\n      devices,\n      deviceId,\n      device,\n      t,\n      onClose,\n      theme\n    } = this.props;\n\n    if (!sensorLastUpdated && !sensorsError) fetchSensors();\n\n    const devicesGridProps = {\n      t,\n      rowData: filterByParentId(devices, deviceId),\n      domLayout: \"autoHeight\",\n      ...defaultChildDeviceGridProps,\n      columnDefs: translateColumnDefs(t, columnDefs),\n      suppressFlyouts: true\n    };\n\n    const filteredSensorIds = sensors\n      .filter(sensor => sensor.deviceId === deviceId)\n      .map(sensor => sensor.id);\n\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title />\n          <Flyout.CloseBtn onClick={onClose} />\n        </Flyout.Header>\n        <Flyout.Content className=\"device-details-container\">\n          {!!device && (\n            <div className=\"device-details-container\">\n              <div>\n                <table className=\"header-table\">\n                  <tbody>\n                    <tr>\n                      <td className=\"deviceType\">\n                        <Svg\n                          path={\n                            device.deviceModelType === \"Node\"\n                              ? svgs.nodeBig\n                              : svgs.gatewayBig\n                          }\n                        />\n                      </td>\n                      <td className=\"deviceName\">\n                        <div className=\"device-title\"> {device.name}</div>\n                      </td>\n                      <td className=\"deviceStatus\">\n                        <Svg\n                          path={\n                            device.status === \"Offline\"\n                              ? svgs.offline\n                              : svgs.onlineBig\n                          }\n                        />\n                      </td>\n                      <td className=\"callspan-td\" />\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <Section.Container className=\"device-property-container\">\n                <Section.Header>\n                  {t(\"devices.flyouts.details.deviceProperties.title\")}\n                </Section.Header>\n                <Section.Content>\n                  <div>\n                    <DeviceProperties device={device} t={t} />\n                  </div>\n                </Section.Content>\n              </Section.Container>\n              {/**\n              <Section.Container>\n                <Section.Header>\n                  {t(\"devices.flyouts.details.activeAlerts.title\")}\n                </Section.Header>\n                <Section.Content />\n              </Section.Container>\n              */}\n              <Section.Container\n                className=\"device-telemetry-panel\"\n                collapsable={false}\n              >\n                <Section.Header>\n                  {t(\"devices.flyouts.details.telemetry.title\")}\n                </Section.Header>\n                <Section.Content>\n                  <TelemetryPanel\n                    theme={theme}\n                    t={t}\n                    sensorIds={filteredSensorIds}\n                    showHeader={false}\n                  />\n                </Section.Content>\n              </Section.Container>\n              <Section.Container>\n                <Section.Header>\n                  {t(\"devices.flyouts.details.childDevices.title\").concat(\n                    \" (\",\n                    String(devicesGridProps.rowData.length),\n                    \")\"\n                  )}\n                </Section.Header>\n                <Section.Content>\n                  {devicesGridProps.rowData.length > 0 ? (\n                    <DevicesGrid {...devicesGridProps} />\n                  ) : (\n                    <p>\n                      {\" \"}\n                      {t(\"devices.flyouts.details.childDevices.noDevices\")}{\" \"}\n                    </p>\n                  )}\n                </Section.Content>\n              </Section.Container>\n            </div>\n          )}\n        </Flyout.Content>\n      </Flyout.Container>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, DeviceDetails, \"Device Details\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport DeviceDetails from \"./deviceDetails\";\nimport { getTheme } from \"store/reducers/appReducer\";\nimport { getDeviceById, getDevices } from \"store/reducers/devicesReducer\";\n\nimport {\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus\n} from \"store/reducers/devicesReducer\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorError,\n  getSensorPendingStatus,\n  getSensorLastUpdated\n} from \"store/reducers/sensorsReducer\";\n\n// Pass the device details\nconst mapStateToProps = (state, props) => ({\n  devices: getDevices(state),\n  devicesError: getDevicesError(state),\n  deviceLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n\n  sensors: getSensors(state),\n  sensorsError: getSensorError(state),\n  sensorLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n\n  device: getDeviceById(state, props.deviceId),\n\n  theme: getTheme(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors())\n});\n\nexport const DeviceDetailsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(DeviceDetails)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport { Btn, PcsGrid, Protected } from \"components/shared\";\nimport { DeleteModal } from \"components/shared/deleteModal/deleteModal\";\nimport { deviceColumnDefs, defaultDeviceGridProps } from \"./devicesGridConfig\";\nimport { DeviceDetailsContainer } from \"../flyouts/deviceDetails\";\nimport { isFunc, svgs, translateColumnDefs } from \"utilities\";\nimport { checkboxColumn } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { AssociateDevicesContainer } from \"../flyouts/associateDevices\";\nimport { appInsights } from \"applicationInsights\";\nconst closedFlyoutState = {\n  openFlyoutName: undefined,\n  softSelectedDeviceId: undefined\n};\n\nconst initialState = {\n  softSelectedId: undefined,\n  closedFlyoutState\n  // openPopup: undefined\n};\n\n/**\n * A grid for displaying devices\n *\n * Encapsulates the PcsGrid props\n */\nexport class DevicesGrid extends Component {\n  constructor(props) {\n    super(props);\n    // Set the initial state\n    // this.state = initialState;\n    // this.state = { selectedDeviceList: undefined, softSelectedId: undefined, closedFlyoutState };\n    this.state = initialState;\n    this.state = { selectedDeviceList: [] };\n    // Default device grid columns\n    this.columnDefs = [\n      { ...checkboxColumn, headerCheckboxSelection: true },\n      deviceColumnDefs.name,\n      deviceColumnDefs.deviceModelType,\n      deviceColumnDefs.status,\n      // deviceColumnDefs.criticalAlert,\n      // deviceColumnDefs.warnings,\n      deviceColumnDefs.farmId,\n      deviceColumnDefs.parentDevice,\n      deviceColumnDefs.lastUpdated\n    ];\n\n    this.contextBtns = {\n      /* to do later\n         <Protected permissions={permissions.createJobs}>\n          <Btn svg={svgs.reconfigure} onClick={this.openFlyout(\"jobs\")}>\n            {props.t(\"devices.flyouts.jobs.title\")}\n          </Btn>\n        </Protected> */\n      associateDevices: (\n        <Protected\n          key=\"associateDevices\"\n          permissions={permissions.updateDevices}\n        >\n          <Btn\n            svg={svgs.links}\n            onClick={event => {\n              this.openAssociateDevicesFlyout(event);\n              appInsights.trackEvent({\n                name: \"UiEvent:Click: Open Associate Devices Flyout Btn\"\n              });\n            }}\n          >\n            {props.t(\"devices.flyouts.associateDevices.title\")}\n          </Btn>\n        </Protected>\n      ),\n      delete: (\n        <Protected key=\"delete\" permissions={permissions.deleteDevices}>\n          <Btn svg={svgs.trash} onClick={this.openModel(\"delete\")}>\n            {props.t(\"devices.flyouts.delete.title\")}\n          </Btn>\n        </Protected>\n      )\n    };\n  }\n\n  /**\n   * Get the grid api options\n   *\n   * @param {Object} gridReadyEvent An object containing access to the grid APIs\n   */\n  onGridReady = gridReadyEvent => {\n    this.deviceGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  openAssociateDevicesFlyout = () => {\n    this.setState({ openFlyoutName: \"associateDevices\" });\n  };\n\n  openModel = ModelName => () =>\n    this.setState({\n      openModelName: ModelName\n    });\n\n  closeModel = () =>\n    this.setState({\n      openModelName: undefined\n    });\n\n  deleteDevices = () => {\n    this.props.deleteDevicesById(this.state.selectedDeviceList);\n  };\n\n  openFlyout = flyoutName => () =>\n    this.setState({\n      openFlyoutName: flyoutName,\n      softSelectedDeviceId: undefined\n    });\n\n  openDelePopup = () => {\n    this.setState({ openPopup: \"deleteDevicePopup\" });\n  };\n\n  getOpenFlyout = () => {\n    const {\n      selectedDeviceList,\n      softSelectedDeviceId,\n      openFlyoutName\n    } = this.state;\n\n    switch (openFlyoutName) {\n      case \"details\":\n        return (\n          <DeviceDetailsContainer\n            key=\"details-device-key\"\n            onClose={this.closeFlyout}\n            deviceId={softSelectedDeviceId}\n          />\n        );\n      case \"associateDevices\":\n        return (\n          <AssociateDevicesContainer\n            key=\"associate-device-key\"\n            onClose={this.closeFlyout}\n            rowData={selectedDeviceList}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  getDeleteModel = () => {\n    switch (this.state.openModelName) {\n      case \"delete\":\n        return (\n          <DeleteModal\n            type=\"deleteDevice\"\n            icon={svgs.trash}\n            deleteConfirmation={this.props.t(\n              \"devices.deleteModal.deleteConfirmation\",\n              { returnObjects: true }\n            )}\n            title={this.props.t(\"devices.deleteModal.title\")}\n            deleteItem={this.deleteDevices}\n            onClose={this.closeModel}\n            deleteBtn={this.props.t(\"modal.delete\")}\n            t={this.props.t}\n            isPending={this.props.deleteDevicePending}\n            deleteModalError={this.props.deleteModalError}\n            deleteModalSuccess={this.props.deleteModalSuccess}\n            successMsg={this.props.t(\"devices.deleteSuccess\")}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  closeFlyout = () => this.setState(closedFlyoutState);\n  /**\n   * Handles soft select props method.\n   * Soft selection happens when the user clicks on the row.\n   *\n   * @param deviceId The id of the currently soft selected item\n   * @param rowData The rowData from the underlying grid. MAY BE OUT OF DATE.\n   */\n  onSoftSelectChange = (deviceId, rowData) => {\n    const { onSoftSelectChange } = this.props;\n    if (deviceId) {\n      this.setState({\n        openFlyoutName: \"details\",\n        softSelectedDeviceId: deviceId\n      });\n    } else {\n      this.closeFlyout();\n    }\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(deviceId, rowData);\n    }\n  };\n\n  /**\n   * Handles context filter changes and calls any hard select props method\n   *\n   * @param {Array} selectedDevices A list of currently selected devices\n   */\n\n  setSelectedDevices = selectedDevices =>\n    this.setState({ selectedDeviceList: selectedDevices });\n\n  onHardSelectChange = selectedDevices => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n    if (isFunc(onContextMenuChange)) {\n      if (selectedDevices.length > 1) {\n        this.setSelectedDevices(selectedDevices);\n        onContextMenuChange(this.contextBtns.associateDevices);\n      } else if (selectedDevices.length === 1) {\n        this.setSelectedDevices(selectedDevices);\n        onContextMenuChange([\n          this.contextBtns.associateDevices,\n          this.contextBtns.delete\n        ]);\n      } else {\n        this.setSelectedDevices(selectedDevices);\n        onContextMenuChange(null);\n      }\n    }\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedDevices);\n    }\n  };\n\n  componentDidMount() {\n    if (this.props.devices) {\n      this.populateDevicesState(this.props.devices);\n    }\n  }\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  render() {\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultDeviceGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: this.state.softSelectedDeviceId || {},\n      ...this.props, // Allow default property overrides\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: this.props.t\n      },\n      onRowClicked: ({ node }) => node.setSelected(!node.isSelected()),\n      onGridReady: this.onGridReady,\n      onSoftSelectChange: this.onSoftSelectChange,\n      onHardSelectChange: this.onHardSelectChange\n    };\n    return [\n      <PcsGrid key=\"device-grid-key\" {...gridProps} />,\n      this.getOpenFlyout(),\n      this.getDeleteModel()\n    ];\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { DevicesGrid } from \"./devicesGrid\";\nimport { epics as devicesEpics } from \"store/reducers/devicesReducer\";\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchDevices: () => dispatch(devicesEpics.actions.fetchDevices())\n});\n\nexport const DevicesGridContainer = connect(\n  null,\n  mapDispatchToProps\n)(DevicesGrid);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { DevicesGrid } from \"./devicesGrid\";\nimport {\n  AjaxError,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput\n} from \"components/shared\";\nimport { deviceService } from \"services\";\nimport \"./devices.scss\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\nimport { reactPlugin } from \"applicationInsights\";\n\nconst closedFlyoutState = { openFlyoutName: undefined };\nconst closedDeletePopupState = { openDeleteDevicePopup: undefined };\n\nclass Devices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...closedFlyoutState,\n      deviceList: undefined,\n      contextBtns: null,\n      ...closedDeletePopupState,\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      deleteDevicePending: false\n    };\n\n    const {\n      deviceLastUpdated,\n      deviceError,\n      fetchDevices,\n      farmLastUpdated,\n      farmError,\n      fetchFarms\n    } = this.props;\n\n    if (!deviceLastUpdated && !deviceError) fetchDevices();\n    if (!farmLastUpdated && !farmError) fetchFarms();\n  }\n\n  closeFlyout = () => this.setState(closedFlyoutState);\n  closeDeletePopup = () => this.setState(closedDeletePopupState);\n\n  onContextMenuChange = contextBtns =>\n    this.setState({\n      contextBtns,\n      openFlyoutName: undefined\n    });\n\n  onGridReady = gridReadyEvent => (this.deviceGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.deviceGridApi) this.deviceGridApi.setQuickFilter(value);\n  };\n\n  // TODO Should be an epic\n  deleteDevicesById = devices => {\n    this.setState({\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      deleteDevicePending: true\n    });\n    this.subscription = deviceService.deleteDevice(devices[0].id).subscribe(\n      () => {\n        this.props.deleteDevicesById([devices[0].id]);\n        this.setState({\n          deleteModalError: undefined,\n          deleteModalSuccess: true,\n          deleteDevicePending: false\n        });\n      },\n      error => {\n        this.setState({\n          deleteModalError: error,\n          deleteModalSuccess: false,\n          isPending: false,\n          changesApplied: true,\n          deleteDevicePending: false\n        });\n      },\n      () =>\n        this.setState({\n          isPending: false,\n          changesApplied: true,\n          ruleDeleted: true\n        })\n    );\n  };\n  render() {\n    const {\n      t,\n      deviceError,\n      isDevicesPending,\n      devices,\n      isFarmsPending\n    } = this.props;\n    const {\n      deleteModalSuccess,\n      deleteModalError,\n      deleteDevicePending\n    } = this.state;\n    const gridProps = {\n      deleteDevicesById: this.deleteDevicesById,\n      onGridReady: this.onGridReady,\n      rowData: isDevicesPending || isFarmsPending ? undefined : devices || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: t,\n      deleteModalSuccess: deleteModalSuccess,\n      deleteModalError: deleteModalError,\n      deleteDevicePending: deleteDevicePending\n    };\n\n    const error = deviceError;\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"devices.searchPlaceholder\")}\n            />\n            {this.state.contextBtns}\n          </ContextMenuAlign>\n        </ContextMenu>\n        <PageContent className=\"devices-container\">\n          <PageTitle\n            titleValue={t(\"devices.title\").concat(\n              \"(\",\n              String(devices.length),\n              \")\"\n            )}\n          />\n          {!!error && <AjaxError t={t} error={error} />}\n          {!error && <DevicesGrid {...gridProps} />}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Devices, \"Device Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport Devices from \"./devices\";\nimport {\n  epics as devicesEpics,\n  redux as devicesRedux,\n  getDevices,\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus,\n  getDeviceModels\n} from \"store/reducers/devicesReducer\";\nimport {\n  epics as farmEpics,\n  getFarms,\n  getFarmsError,\n  getFarmsLastUpdated,\n  getFarmsPendingStatus\n} from \"store/reducers/farmsReducer\";\n\n// Pass the devices status\nconst mapStateToProps = state => ({\n  farms: getFarms(state),\n  farmError: getFarmsError(state),\n  farmLastUpdated: getFarmsLastUpdated(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  devices: getDevices(state),\n  deviceModels: getDeviceModels(state),\n  deviceError: getDevicesError(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n  deviceLastUpdated: getDevicesLastUpdated(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchDevices: () => dispatch(devicesEpics.actions.fetchDevices()),\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  fetchDeviceModel: () => dispatch(devicesEpics.actions.fetchDeviceModel()),\n  deleteDevicesById: ids => dispatch(devicesRedux.actions.deleteDevices(ids))\n});\n\nexport const DevicesContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Devices)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport Config from \"app.config\";\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport {\n  SeverityRenderer,\n  LinkRenderer,\n  SoftSelectLinkRenderer\n} from \"components/shared/cellRenderers\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\n/** A collection of column definitions for the farm grid */\nconst { checkForEmpty } = gridValueFormatters;\nexport const LAST_TRIGGER_DEFAULT_WIDTH = 310;\n\nexport const rulesColumnDefs = {\n  ruleName: {\n    headerName: \"rules.grid.ruleName\",\n    field: \"name\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  description: {\n    headerName: \"rules.grid.description\",\n    field: \"description\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  severity: {\n    headerName: \"rules.grid.severity\",\n    field: \"severityLevel\",\n    cellRendererFramework: SeverityRenderer\n  },\n  severityIconOnly: {\n    headerName: \"rules.grid.severity\",\n    field: \"severity\",\n\n    cellRendererFramework: props => () => (\n      // eslint-disable-line react/display-name\n      <SeverityRenderer {...props} iconOnly={true} />\n    )\n  },\n\n  filter: {\n    headerName: \"rules.grid.farm\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  trigger: {\n    headerName: \"rules.grid.trigger\",\n    field: \"sortableConditions\",\n    cellClass: \"capitalize-cell\"\n  },\n  status: {\n    headerName: \"rules.grid.status\",\n    field: \"status\",\n    comparator: caseInsensitiveStringComparator\n  },\n  alertStatus: {\n    headerName: \"rules.grid.status\",\n    field: \"status\",\n    cellClass: \"capitalize-cell\"\n  },\n  // count: {\n  //   headerName: \"rules.grid.count\",\n  //   field: \"count\",\n  //   cellRendererFramework: CountRenderer,\n  //   comparator: compareByProperty(\"response\", true)\n  // },\n  // lastTrigger: {\n  //   headerName: \"rules.grid.lastTrigger\",\n  //   field: \"lastTrigger\",\n  //   cellRendererFramework: LastTriggerRenderer,\n  //   comparator: compareByProperty(\"response\", true),\n  //   width: LAST_TRIGGER_DEFAULT_WIDTH\n  // },\n  explore: {\n    headerName: \"rules.grid.explore\",\n    field: \"ruleId\",\n    // eslint-disable-next-line react/display-name\n    cellRendererFramework: props => (\n      <LinkRenderer {...props} to={`/maintenance/rule/${props.value}`} />\n    )\n  }\n};\n\nexport const defaultRulesGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"single\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Trans } from \"react-i18next\";\nimport dot from \"dot-object\";\n\nimport { themedPaths } from \"utilities\";\nimport {\n  ErrorMsg,\n  Hyperlink,\n  Indicator,\n  ThemedSvgContainer\n} from \"components/shared\";\n\nimport \"./actionEmailSetup.scss\";\n\nexport class ActionEmailSetup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      clickedSetup: false\n    };\n  }\n\n  clickedSetup = () => {\n    this.setState({\n      clickedSetup: true\n    });\n  };\n\n  render() {\n    const {\n      t,\n      actionSettings = {},\n      actionSettingsIsPending,\n      actionSettingsError,\n      actionIsPolling,\n      actionPollingTimeout,\n      applicationPermissionsAssigned\n    } = this.props;\n\n    const { clickedSetup } = this.state;\n\n    const actionsEmailIsEnabled = dot.pick(\"Email.isEnabled\", actionSettings);\n    const actionsEmailSetupUrl = dot.pick(\n      \"Email.settings.office365ConnectorUrl\",\n      actionSettings\n    );\n\n    const showPending =\n      clickedSetup && (actionSettingsIsPending || actionIsPolling);\n    const showError = !showPending && !!actionSettingsError;\n\n    const showSetupLink =\n      !showPending &&\n      !showError &&\n      !actionsEmailIsEnabled &&\n      !actionPollingTimeout;\n    const showSetupIncomplete =\n      !showPending &&\n      !showError &&\n      !actionsEmailIsEnabled &&\n      actionPollingTimeout;\n    const showSetupComplete =\n      clickedSetup && !showPending && !showError && actionsEmailIsEnabled;\n\n    // Only show setup information if the application was deployed as owner,\n    // as if it was not cannot verify whether or not setup is complete.\n    // Also only show verification of setup if setup button was clicked.\n    return applicationPermissionsAssigned ? (\n      <div className=\"action-email-setup-container\">\n        {showPending && (\n          <div className=\"action-email-setup\">\n            <Indicator className=\"action-indicator\" size=\"small\" />\n            <div className=\"info-message\">\n              {t(\"rules.flyouts.ruleEditor.actions.checkingEmailSetup\")}\n            </div>\n          </div>\n        )}\n        {showError && (\n          <div className=\"action-email-setup\">\n            <ErrorMsg>\n              <Trans\n                i18nKey={`rules.flyouts.ruleEditor.actions.setupEmailError`}\n              >\n                An error occurred.\n                <Hyperlink\n                  href={actionsEmailSetupUrl}\n                  onClick={this.clickedSetup}\n                  target=\"_blank\"\n                >\n                  {t(\"rules.flyouts.ruleEditor.actions.tryAgain\")}\n                </Hyperlink>\n              </Trans>\n            </ErrorMsg>\n          </div>\n        )}\n        {showSetupLink && (\n          <div className=\"action-email-setup\">\n            <ThemedSvgContainer\n              className=\"icon\"\n              paths={themedPaths.infoBubble}\n            />\n            <div className=\"info-message\">\n              <Trans i18nKey={`rules.flyouts.ruleEditor.actions.setupEmail`}>\n                To send email alerts,\n                <Hyperlink\n                  href={actionsEmailSetupUrl}\n                  onClick={this.clickedSetup}\n                  target=\"_blank\"\n                >\n                  {t(\"rules.flyouts.ruleEditor.actions.outlookLogin\")}\n                </Hyperlink>\n                is required.\n              </Trans>\n            </div>\n          </div>\n        )}\n        {showSetupIncomplete && (\n          <div className=\"action-email-setup\">\n            <ThemedSvgContainer\n              className=\"icon\"\n              paths={themedPaths.infoBubble}\n            />\n            <div className=\"info-message\">\n              <Trans\n                i18nKey={`rules.flyouts.ruleEditor.actions.setupEmailTimeout`}\n              >\n                Polling timed out.\n                <Hyperlink\n                  href={actionsEmailSetupUrl}\n                  onClick={this.clickedSetup}\n                  target=\"_blank\"\n                >\n                  {t(\"rules.flyouts.ruleEditor.actions.tryAgain\")}\n                </Hyperlink>\n              </Trans>\n            </div>\n          </div>\n        )}\n        {showSetupComplete && (\n          <div className=\"action-email-setup\">\n            <ThemedSvgContainer\n              className=\"icon\"\n              paths={themedPaths.checkmarkBubble}\n            />\n            <div className=\"info-message\">\n              {t(\"rules.flyouts.ruleEditor.actions.emailSetupConfirmed\")}\n            </div>\n          </div>\n        )}\n      </div>\n    ) : null;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { ActionEmailSetup } from \"./actionEmailSetup\";\nimport {\n  getActionSettings,\n  getActionSettingsPendingStatus,\n  getActionSettingsError,\n  getActionPollingStatus,\n  getActionPollingError,\n  getActionPollingTimeout,\n  getApplicationPermissionsAssigned\n} from \"store/reducers/appReducer\";\n\n// Pass device groups\nconst mapStateToProps = state => ({\n  actionSettings: getActionSettings(state),\n  actionSettingsIsPending: getActionSettingsPendingStatus(state),\n  actionSettingsError: getActionSettingsError(state),\n  actionIsPolling: getActionPollingStatus(state),\n  actionPollingError: getActionPollingError(state),\n  actionPollingTimeout: getActionPollingTimeout(state),\n  applicationPermissionsAssigned: getApplicationPermissionsAssigned(state)\n});\n\nexport const ActionEmailSetupContainer = withNamespaces()(\n  connect(mapStateToProps)(ActionEmailSetup)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  SectionDesc,\n  SummaryBody,\n  SummaryCount,\n  SummarySection\n} from \"components/shared\";\nimport { displayable } from \"utilities\";\nimport \"./ruleSummary.scss\";\n\nexport class RuleSummary extends React.Component {\n  render() {\n    const { devicesAffected, t } = this.props;\n    return (\n      <SummarySection>\n        {/* <SectionHeader>{ruleName? ruleName : t(\"rules.flyouts.ruleEditor.summaryHeader\")}</SectionHeader> */}\n\n        <SummaryBody>\n          <SummaryCount>{displayable(devicesAffected)}</SummaryCount>\n          <SectionDesc>\n            {t(\"rules.flyouts.ruleEditor.devicesAffected\")}\n          </SectionDesc>\n        </SummaryBody>\n      </SummarySection>\n    );\n  }\n}\n\nRuleSummary.propTypes = {\n  ruleName: PropTypes.string,\n  ruleDescription: PropTypes.string,\n  devicesAffected: PropTypes.number,\n  t: PropTypes.func.isRequired\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { RuleSummary } from \"./ruleSummary\";\nimport { getAffectedDevicesCount } from \"utilities\";\n\n/** *\n * Component that renders a <tt>RuleSummary</tt> component\n * and passes it the <tt>devicesAffected</tt> prop\n * after automatically calculating it from either\n * a <tt>rule</tt> prop or a <tt>farmId</tt> prop\n * passed to it\n */\nexport class RuleSummaryAuto extends React.Component {\n  render() {\n    return (\n      <RuleSummary\n        devicesAffected={getAffectedDevicesCount.call(\n          this,\n          this.props.rule.farmId,\n          this.props.rule.conditions\n        )}\n        t={this.props.t}\n      />\n    );\n  }\n}\n\nRuleSummaryAuto.propTypes = {\n  // From mapStateToProps\n  devices: PropTypes.array.isRequired,\n\n  // Passed to HOC and passed down\n  rule: PropTypes.object,\n  farmId: PropTypes.string,\n  ruleName: PropTypes.string,\n  ruleDescription: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport PropTypes from \"prop-types\";\nimport { RuleSummaryAuto } from \"./ruleSummaryAuto\";\nimport { withNamespaces } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport { getDevices } from \"store/reducers/devicesReducer\";\nimport { getSensors, getSensorModels } from \"store/reducers/sensorsReducer\";\nconst mapStateToProps = state => ({\n  devices: getDevices(state),\n  sensors: getSensors(state),\n  sensorModels: getSensorModels(state)\n});\n\nexport const RuleSummaryAutoContainer = withNamespaces()(\n  connect(mapStateToProps)(RuleSummaryAuto)\n);\n\nRuleSummaryAutoContainer.propTypes = {\n  rule: PropTypes.object,\n  farmId: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport update from \"immutability-helper\";\nimport Config from \"app.config\";\nimport { getAffectedDevicesCount } from \"utilities\";\nimport memoizeOne from \"memoize-one\";\nimport {\n  AjaxError,\n  SuccessMessage,\n  Btn,\n  BtnToolbar,\n  FormControl,\n  FormGroup,\n  FormLabel,\n  PillGroup,\n  Radio,\n  ToggleBtn\n} from \"components/shared\";\nimport { ActionEmailSetupContainer } from \"./actionEmailSetup.container\";\nimport { SeverityRenderer } from \"components/shared/cellRenderers\";\nimport {\n  Validator,\n  svgs,\n  isValidEmail,\n  LinkedComponent,\n  enabled,\n  disabled,\n  ruleStatus\n} from \"utilities\";\nimport Flyout from \"components/shared/flyout\";\nimport { TelemetryService } from \"services\";\nimport {\n  toEditRuleRequestModel,\n  ruleCalculations,\n  ruleOperators\n} from \"services/models\";\nimport \"./ruleEditor.scss\";\nimport { RuleSummary } from \"../shared\";\nimport { appInsights } from \"applicationInsights\";\nconst Section = Flyout.Section;\n// A counter for creating unique keys per new condition\nlet conditionKey = 0;\n// A counter for creating unique keys per new action\nlet actionKey = 0;\n\n// Creates a state object for a condition\nconst newCondition = () => ({\n  field: undefined,\n  operator: undefined,\n  value: undefined,\n  key: conditionKey++ // Used by react to track the rendered elements\n});\n\nconst newAction = () => ({\n  type: \"Email\",\n  parameters: {\n    recipients: [],\n    notes: \"\",\n    subject: \"\"\n  },\n  key: actionKey++\n});\n\nconst healthMonitorRuleId = \"default_Health_Monitor\";\nlet isHealthRule = false;\nconst isAlphaNumericRegex = /^[a-zA-Z0-9_]*$/;\nconst nonAlphaNumeric = x => !x.match(isAlphaNumericRegex);\n\n// A state object for a new rule\nconst newRule = () => ({\n  name: \"\",\n  description: \"\",\n  groupId: \"\",\n  calculation: \"\",\n  timePeriod: \"\",\n  farmId: \"\",\n  conditions: [newCondition()], // Start with one condition\n  actions: [newAction()], // Start with one action\n  severityLevel: Config.ruleSeverity.critical,\n  status: ruleStatus.enabled,\n  actionEnabled: false\n});\n\nconst newInitialState = () => ({\n  error: undefined,\n  fieldOptions: [],\n  sensorMeasuresForCurrentFarm: [],\n  fieldQueryPending: true,\n  formData: newRule(),\n  newEmail: \"\",\n  isPending: false,\n  changesApplied: false,\n  isNewRuleSucceeded: undefined,\n  isEditedRuleSucceeded: undefined,\n  editableRule: undefined\n});\n\nexport class RuleEditor extends LinkedComponent {\n  constructor(props) {\n    super(props);\n\n    if (!this.props.sensorLastUpdated && !this.props.sensorError)\n      this.props.fetchSensorModels();\n\n    this.state = newInitialState();\n    const { fetchFarms, farmsLastUpdated, farmsError } = this.props;\n    if (!farmsLastUpdated && !farmsError) {\n      fetchFarms();\n    }\n\n    this.newEmailLink = this.linkTo(\"newEmail\") // Matches email address pattern\n      .check(\n        val => isValidEmail(val),\n        () => this.props.t(\"rules.flyouts.ruleEditor.actions.syntaxError\")\n      );\n    this.affectedDevicesCount = memoizeOne((farmId, conditions) =>\n      getAffectedDevicesCount.call(this, farmId, conditions)\n    );\n  }\n  fetchApiData = () => {\n    const {\n      fetchSensors,\n      fetchSensorModels,\n      fetchDevices,\n      isSensorsPending,\n      sensorLastUpdated,\n      sensorModelsLastUpdated,\n      sensorModelsIsPending,\n      devicesLastUpdated,\n      isDevicesPending\n    } = this.props;\n    if (!sensorLastUpdated && !isSensorsPending) fetchSensors();\n    if (!sensorModelsLastUpdated && !sensorModelsIsPending) fetchSensorModels();\n    if (!isDevicesPending && !devicesLastUpdated) fetchDevices();\n  };\n  componentWillMount() {\n    this.fetchApiData();\n  }\n  componentDidMount() {\n    const { rule } = this.props;\n\n    if (rule) {\n      this.getDeviceCountAndFields(rule.farmId);\n      this.setFormState(rule);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      changesApplied: false,\n      isNewRuleSucceeded: undefined,\n      isEditedRuleSucceeded: undefined,\n      editableRule: undefined\n    });\n    const { rule } = nextProps;\n    if (rule) {\n      this.getDeviceCountAndFields(rule.farmId);\n      this.setFormState(rule);\n    }\n  }\n  setFormState = rule =>\n    this.setState({\n      formData: {\n        ...rule,\n        conditions: (rule.conditions || []).map(condition => ({\n          ...condition,\n          key: conditionKey++\n        })),\n        actions:\n          !rule.actions || rule.actions.length === 0\n            ? [newAction()]\n            : rule.actions.map(action => ({\n                ...action,\n                key: actionKey++\n              })),\n        actionEnabled:\n          rule.actions === undefined\n            ? false\n            : (rule.actions || []).length > 0\n            ? true\n            : false,\n        enabled: rule.status === ruleStatus.enabled ? true : false\n      },\n      editableRule: rule\n    });\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n  }\n\n  toSelectOption = ({ id, name }) => {\n    return {\n      label: name,\n      value: id\n    };\n  };\n\n  addCondition = () => {\n    this.conditionsLink.set([...this.conditionsLink.value, newCondition()]);\n  };\n\n  filteredModelMeasures = ({ name }) => {\n    return {\n      label: name,\n      value: name\n    };\n  };\n  deleteCondition = index => () =>\n    this.conditionsLink.set(\n      this.conditionsLink.value.filter((_, idx) => index !== idx)\n    );\n\n  formIsValid() {\n    const check = [this.ruleNameLink, this.deviceGroupLink, this.actionsLink];\n\n    if (!isHealthRule) check.push(this.conditionsLink);\n\n    return check.every(link => !link.error);\n  }\n\n  apply = event => {\n    event.preventDefault();\n    const { insertRules, modifyRules, t } = this.props;\n    const requestProps = { ...this.state.formData };\n    const { newEmail } = this.state;\n\n    // Deafult instant\n    requestProps.calculation = ruleCalculations[1];\n    if (requestProps.calculation === ruleCalculations[1])\n      requestProps.timePeriod = \"\";\n\n    if (this.state.formData.actionEnabled === false) requestProps.actions = [];\n    if (this.formIsValid()) {\n      this.setState({ isPending: true, error: null });\n      if (this.subscription) this.subscription.unsubscribe();\n      if (this.state.formData.actionEnabled) {\n        const action = requestProps.actions[0];\n        if (newEmail !== \"\") {\n          action.parameters.recipients.push(newEmail);\n          this.setState({ newEmail: \"\" });\n        }\n\n        if (action.parameters.subject === \"\") {\n          const ruleName = requestProps.name;\n          action.parameters.subject = t(\n            \"rules.flyouts.ruleEditor.actions.defaultEmailSubject\",\n            { ruleName }\n          );\n        }\n      }\n\n      if (this.props.rule) {\n        // If rule object exist then update the existing rule\n        this.subscription = TelemetryService.updateRule(\n          this.props.rule.id,\n          toEditRuleRequestModel(requestProps)\n        ).subscribe(\n          updatedRule => {\n            const editableRule = {\n              ...this.state.editableRule,\n              ...requestProps\n            };\n            modifyRules([{ ...editableRule }]);\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              isEditedRuleSucceeded: true\n            });\n          },\n          error => {\n            this.setState({\n              error,\n              isPending: false,\n              changesApplied: true,\n              isEditedRuleSucceeded: false\n            });\n          }\n        );\n      } else {\n        // If rule object doesn't exist then create a new rule\n        this.subscription = TelemetryService.createRule(\n          toEditRuleRequestModel(requestProps)\n        ).subscribe(\n          createdRule => {\n            insertRules([createdRule]);\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              isNewRuleSucceeded: true\n            });\n          },\n          error =>\n            this.setState({\n              error,\n              isPending: false,\n              changesApplied: true,\n              isNewRuleSucceeded: false\n            })\n        );\n      }\n    }\n  };\n\n  onGroupIdChange = ({\n    target: {\n      value: { value = {} }\n    }\n  }) => {\n    this.setState(prevState => ({\n      sensorMeasuresForCurrentFarm: [],\n      fieldQueryPending: true,\n      isPending: true,\n      formData: { ...prevState.formData, conditions: [newCondition()] }\n    }));\n    this.getDeviceCountAndFields(value);\n    this.formControlChange();\n  };\n\n  onAddEmail = link => e => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      if (!this.newEmailLink.error && this.newEmailLink.value !== \"\") {\n        const newState = update(this.state, {\n          // Saves user entered email value into action object's list of emails\n          ...link.setter({\n            $set: [...link.value, this.newEmailLink.value]\n          }),\n          // Clears new email input textfield of user's entered email value\n          ...this.newEmailLink.setter({ $set: \"\" })\n        });\n        this.setState(newState);\n      }\n    }\n    this.formControlChange();\n  };\n\n  deleteEmail = index => link => () =>\n    link.set(link.value.filter((_, idx) => index !== idx));\n\n  getDeviceCountAndFields(farmId) {\n    // Filter devices by farmId\n    const devices = this.props.devices.filter(\n      device => device.farmId === farmId\n    );\n    // Filter sensors by devices on the farm\n    const deviceIds = devices.map(device => device.id);\n    const sensors = this.props.sensors.filter(sensor =>\n      deviceIds.includes(sensor.deviceId)\n    );\n    // Filter sensorModelIds on the farm\n    const sensorModelIds = sensors.map(sensor => sensor.sensorModelId);\n    // Get sensorModels by filtered SensorModelIds\n    const sensorModels = this.props.sensorModels.filter(sensorModel =>\n      sensorModelIds.includes(sensorModel.id)\n    );\n    // Get list of unique sensor measures from the sensorModels\n    const measureNamesAlreadyAdded = new Set();\n    const uniqueSensorMeasures = sensorModels\n      .flatMap(sensorModel => sensorModel.sensorMeasures)\n      .map(measure => {\n        if (!measureNamesAlreadyAdded.has(measure.name)) {\n          measureNamesAlreadyAdded.add(measure.name);\n          return measure;\n        }\n        return undefined;\n      })\n      .filter(measure => measure !== undefined);\n\n    // Set the state\n    this.setState({\n      sensorMeasuresForCurrentFarm: uniqueSensorMeasures,\n      fieldQueryPending: false,\n      isPending: false\n    });\n    this.formControlChange();\n  }\n\n  getConditionFields(devices, modules) {\n    const layoutList = [];\n\n    devices\n      .filter(device => device.farmId !== undefined && device.farmId !== null)\n      .forEach(device => {\n        const Matches = this.props.sensor.filter(\n          sensor => sensor.hardwareId === device.id\n        );\n\n        const sensorMeasure = this.props.sensortype;\n        if (sensorMeasure !== \"undefined\") {\n          Matches.forEach(function(match) {\n            sensorMeasure.forEach(function(measure) {\n              if (match.sensorTypeId === measure.id) {\n                if (\n                  measure.sensorMeasures !== undefined ||\n                  measure.sensorMeasures !== null\n                )\n                  for (\n                    let index = 0;\n                    index < measure.sensorMeasures.length;\n                    index++\n                  ) {\n                    layoutList.push(measure.sensorMeasures[index].name);\n                  }\n              }\n            });\n          });\n        }\n      });\n    const conditions = new Set(); // Using a set to avoid searching the array multiple times in the every\n    layoutList.forEach(layoutId => {\n      conditions.add(layoutId);\n    });\n    modules.forEach(({ moduleFields = {} }) => {\n      Object.keys(moduleFields).forEach(field => {\n        conditions.add(field);\n      });\n    });\n    return [...conditions.values()].map(field => ({\n      label: field,\n      value: field\n    }));\n  }\n\n  // todo toggle button didn't support link\n  onStatusToggle = ({ target: { value } }) => {\n    this.setState({\n      formData: { ...this.state.formData, status: value ? enabled : disabled }\n    });\n    this.formControlChange();\n  };\n\n  onCalculationChange = ({\n    target: {\n      value: { value = {} }\n    }\n  }) => {\n    this.formControlChange();\n  };\n\n  onFieldChange = (\n    index,\n    {\n      target: {\n        value: { value = {} }\n      }\n    }\n  ) => {\n    // var eventProperties = { 'FieldChosen': value, 'ConditionNumber': index };\n    this.formControlChange();\n  };\n  onOperatorChange = (\n    index,\n    {\n      target: {\n        value: { value = {} }\n      }\n    }\n  ) => {\n    // var eventProperties = { 'OperatorChosen': value, 'ConditionNumber': index };\n    this.formControlChange();\n  };\n\n  onSeverityChange = ({ target: { value } }) => {\n    this.formControlChange();\n  };\n  onCloseClick = () => {\n    const { onClose } = this.props;\n    // const rule = { ...this.state.formData };\n    onClose();\n  };\n\n  formControlChange = () => {\n    if (this.state.changesApplied) {\n      this.setState({ changesApplied: false });\n    }\n  };\n\n  deletePill = link => index => () => {\n    link.set(link.value.filter((_, idx) => index !== idx));\n    this.formControlChange();\n  };\n\n  onActionToggle = ({ target: { value } }) => {\n    this.setState({\n      formData: { ...this.state.formData, actionEnabled: value }\n    });\n    this.formControlChange();\n  };\n\n  render() {\n    const { t, rule } = this.props;\n    const {\n      changesApplied,\n      error,\n      fieldQueryPending,\n      formData,\n      isPending,\n      isNewRuleSucceeded,\n      isEditedRuleSucceeded\n    } = this.state;\n    const healthMonitorId = (rule || {}).id;\n    isHealthRule = healthMonitorId === healthMonitorRuleId;\n    /* const calculationOptions = ruleCalculations.map(value => ({\n      label: t(`rules.flyouts.ruleEditor.calculationOptions.${value.toLowerCase()}`),\n      value\n    }));\n    */\n    const affectedDevicesCount = this.affectedDevicesCount(\n      formData.farmId,\n      formData.conditions\n    );\n    //       )\n    const listSKU = this.props.farms.map(this.toSelectOption);\n\n    const filteredSensors = this.state.sensorMeasuresForCurrentFarm.map(\n      this.filteredModelMeasures\n    );\n\n    const requiredValidator = new Validator().check(\n      Validator.notEmpty,\n      t(\"rules.flyouts.ruleEditor.validation.required\")\n    );\n    // State links\n    this.formDataLink = this.linkTo(\"formData\");\n\n    this.ruleNameLink = this.formDataLink\n      .forkTo(\"name\")\n      .withValidator(requiredValidator)\n      .reject(nonAlphaNumeric)\n      .check(Validator.notEmpty, () =>\n        this.props.t(\"rules.flyouts.ruleEditor.errorMsg.fieldCantBeEmpty\")\n      )\n      .check(Validator.noSpaces, () =>\n        this.props.t(\"rules.flyouts.ruleEditor.errorMsg.spaceNotAllowed\")\n      )\n      .check(Validator.charlength, () =>\n        this.props.t(\"rules.flyouts.ruleEditor.errorMsg.maxlength\")\n      )\n      .check(Validator.notEmpty, () => t(\"farms.errorMsg.required\"))\n      .check(\n        value => (this.props ? Validator.maxlength(value, 1000) : true),\n        () => t(\"farms.errorMsg.maxLengthAddress\")\n      )\n      .check(Validator.minlength, () => t(\"farms.errorMsg.minLength\"));\n\n    this.descriptionLink = this.formDataLink.forkTo(\"description\");\n    this.deviceGroupLink = this.formDataLink\n      .forkTo(\"farmId\")\n      .map(({ value }) => value)\n      .withValidator(requiredValidator);\n    /* this.calculationLink = this.formDataLink.forkTo('calculation').map(({ value }) => value).withValidator(requiredValidator);\n\n    this.timePeriodLink = this.formDataLink.forkTo('timePeriod')\n      .map(({ value }) => value)\n      .check(\n        timePeriod => this.calculationLink.value === ruleCalculations[0] ? Validator.notEmpty(timePeriod) : true,\n        this.props.t('rules.flyouts.ruleEditor.validation.required')\n      );\n    */\n    this.conditionsLink = this.formDataLink\n      .forkTo(\"conditions\")\n      .withValidator(requiredValidator);\n    this.actionsLink = this.formDataLink\n      .forkTo(\"actions\")\n      .withValidator(requiredValidator);\n    this.severityLink = this.formDataLink.forkTo(\"severityLevel\");\n    // todo toggle button didn't support link\n    this.enabledLink = this.formDataLink.forkTo(\"enabled\");\n    // Create the state link for the dynamic form elements\n    const conditionLinks = this.conditionsLink.getLinkedChildren(\n      conditionLink => {\n        const fieldLink = conditionLink\n          .forkTo(\"field\")\n          .map(({ value }) => value)\n          .withValidator(requiredValidator);\n        const operatorLink = conditionLink\n          .forkTo(\"operator\")\n          .map(({ value }) => value)\n          .withValidator(requiredValidator);\n        const valueLink = conditionLink\n          .forkTo(\"value\")\n          .check(Validator.notEmpty, () =>\n            this.props.t(\"rules.flyouts.ruleEditor.validation.required\")\n          )\n          .check(\n            val => !isNaN(val),\n            t(\"rules.flyouts.ruleEditor.validation.nan\")\n          );\n        const error = fieldLink.error || operatorLink.error || valueLink.error;\n\n        return { fieldLink, operatorLink, valueLink, error };\n      }\n    );\n\n    const actionLinks = this.actionsLink.getLinkedChildren(actionLink => {\n      const parametersLink = actionLink.forkTo(\"parameters\");\n      // recipients is valid if email input box is empty and at least one email has been\n      // entered, or if email input box has a valid email\n      const recipientsLink = parametersLink\n        .forkTo(\"recipients\")\n        .check(\n          val =>\n            (this.state.newEmail !== \"\" && isValidEmail(this.state.newEmail)) ||\n            (val.length > 0 && isValidEmail(this.state.newEmail)),\n          this.props.t(\"rules.flyouts.ruleEditor.validation.required\")\n        );\n      const notesLink = parametersLink.forkTo(\"notes\");\n      const subjectLink = parametersLink.forkTo(\"subject\");\n      const error = formData.actionEnabled ? recipientsLink.error : false;\n      return { recipientsLink, notesLink, subjectLink, error };\n    });\n\n    const conditionsHaveErrors = conditionLinks.some(({ error }) => error);\n    const actionsHaveErrors = actionLinks.some(({ error }) => error);\n\n    const operatorOptions = ruleOperators.map(value => ({\n      label: t(`rules.flyouts.ruleEditor.condition.operatorOptions.${value}`),\n      value\n    }));\n    return (\n      <form onSubmit={this.apply} className=\"new-rule-flyout-container\">\n        <Section.Container className=\"rule-property-container\">\n          <Section.Content>\n            <FormGroup>\n              <FormLabel isRequired=\"true\">\n                {t(\"rules.flyouts.ruleEditor.ruleName\")}\n              </FormLabel>\n              <FormControl\n                type=\"text\"\n                className=\"long\"\n                maxLength={26}\n                placeholder={t(\"rules.flyouts.ruleEditor.namePlaceholder\")}\n                onChange={this.formControlChange}\n                link={this.ruleNameLink}\n                disabled={isHealthRule}\n              />\n            </FormGroup>\n            <FormGroup>\n              <FormLabel>{t(\"rules.flyouts.ruleEditor.description\")}</FormLabel>\n              <FormControl\n                type=\"textarea\"\n                placeholder={t(\n                  \"rules.flyouts.ruleEditor.descriptionPlaceholder\"\n                )}\n                onChange={this.formControlChange}\n                link={this.descriptionLink}\n                disabled={isHealthRule}\n              />\n            </FormGroup>\n            <FormGroup className=\"farm-dropdown\">\n              <FormLabel isRequired=\"true\">\n                {t(\"rules.flyouts.ruleEditor.deviceGroup\")}\n              </FormLabel>\n              <FormControl\n                type=\"select\"\n                className=\"long\"\n                options={listSKU}\n                onChange={this.onGroupIdChange}\n                clearable={false}\n                searchable={true}\n                matchProp={\"label\"}\n                placeholder={t(\n                  \"rules.flyouts.ruleEditor.deviceGroupPlaceholder\"\n                )}\n                link={this.deviceGroupLink}\n                disabled={isHealthRule}\n              />\n            </FormGroup>\n          </Section.Content>\n        </Section.Container>\n        {!fieldQueryPending && (\n          <div>\n            {!isHealthRule &&\n              conditionLinks.map((condition, idx) => (\n                <Section.Container key={formData.conditions[idx].key}>\n                  <Section.Header>\n                    {t(\"rules.flyouts.ruleEditor.condition.condition\")}{\" \"}\n                    {idx + 1}\n                  </Section.Header>\n                  <Section.Content>\n                    <FormGroup className=\"farm-dropdown\">\n                      <FormLabel isRequired=\"true\">\n                        {t(\"rules.flyouts.ruleEditor.condition.field\")}\n                      </FormLabel>\n                      <FormControl\n                        type=\"select\"\n                        className=\"long\"\n                        placeholder={t(\n                          \"rules.flyouts.ruleEditor.condition.fieldPlaceholder\"\n                        )}\n                        onChange={target => this.onFieldChange(idx + 1, target)}\n                        link={condition.fieldLink}\n                        options={filteredSensors}\n                        clearable={false}\n                        searchable={true}\n                        matchProp={\"label\"}\n                      />\n                    </FormGroup>\n\n                    <FormGroup className=\"farm-dropdown\">\n                      <FormLabel isRequired=\"true\">\n                        {t(\"rules.flyouts.ruleEditor.condition.operator\")}\n                      </FormLabel>\n                      <FormControl\n                        type=\"select\"\n                        className=\"long\"\n                        placeholder={t(\n                          \"rules.flyouts.ruleEditor.condition.operatorPlaceholder\"\n                        )}\n                        onChange={target =>\n                          this.onOperatorChange(idx + 1, target)\n                        }\n                        link={condition.operatorLink}\n                        options={operatorOptions}\n                        clearable={false}\n                        searchable={true}\n                        matchProp={\"label\"}\n                      />\n                    </FormGroup>\n                    <FormGroup>\n                      <FormLabel isRequired=\"true\">\n                        {t(\"rules.flyouts.ruleEditor.condition.value\")}\n                      </FormLabel>\n                      <FormControl\n                        type=\"text\"\n                        placeholder={t(\n                          \"rules.flyouts.ruleEditor.condition.valuePlaceholder\"\n                        )}\n                        onChange={this.formControlChange}\n                        link={condition.valueLink}\n                      />\n                    </FormGroup>\n                    {conditionLinks.length > 1 && (\n                      <Btn\n                        className=\"padded-top\"\n                        svg={svgs.trash}\n                        onClick={this.deleteCondition(idx)}\n                      >\n                        {t(\"rules.flyouts.ruleEditor.delete\")}\n                      </Btn>\n                    )}\n                  </Section.Content>\n                </Section.Container>\n              ))}\n            {!isHealthRule && (\n              <Section.Container collapsable={false}>\n                <Section.Header>\n                  <Btn\n                    svg={svgs.plus}\n                    className=\"add-condition\"\n                    onClick={this.addCondition}\n                  >\n                    {t(\"rules.flyouts.ruleEditor.addCondition\")}\n                  </Btn>\n                </Section.Header>\n              </Section.Container>\n            )}\n            <Section.Container collapsable={false}>\n              <Section.Header>\n                {t(\"rules.flyouts.ruleEditor.severityLevel\")}\n              </Section.Header>\n              <Section.Content>\n                <FormGroup>\n                  <Radio\n                    onChange={this.onSeverityChange}\n                    link={this.severityLink}\n                    value={Config.ruleSeverity.critical}\n                  >\n                    <FormLabel>\n                      <SeverityRenderer\n                        value={Config.ruleSeverity.critical}\n                        context={{ t }}\n                      />\n                    </FormLabel>\n                  </Radio>\n                  <Radio\n                    onChange={this.onSeverityChange}\n                    link={this.severityLink}\n                    value={Config.ruleSeverity.warning}\n                  >\n                    <FormLabel>\n                      <SeverityRenderer\n                        value={Config.ruleSeverity.warning}\n                        context={{ t }}\n                      />\n                    </FormLabel>\n                  </Radio>\n                  <Radio\n                    onChange={this.onSeverityChange}\n                    link={this.severityLink}\n                    value={Config.ruleSeverity.info}\n                  >\n                    <FormLabel>\n                      <SeverityRenderer\n                        value={Config.ruleSeverity.info}\n                        context={{ t }}\n                      />\n                    </FormLabel>\n                  </Radio>\n                </FormGroup>\n              </Section.Content>\n              <Section.Container collapsable={false}>\n                <Section.Header>\n                  {t(\"rules.flyouts.ruleEditor.actions.action\")}\n                </Section.Header>\n                <div className=\"email-toggle-container\">\n                  <ToggleBtn\n                    value={formData.actionEnabled}\n                    onChange={this.onActionToggle}\n                  >\n                    {formData.actionEnabled\n                      ? t(\"rules.flyouts.ruleEditor.actions.on\")\n                      : t(\"rules.flyouts.ruleEditor.actions.off\")}\n                  </ToggleBtn>\n                </div>\n                {formData.actionEnabled && <ActionEmailSetupContainer />}\n                <Section.Content>\n                  {formData.actionEnabled &&\n                    actionLinks.map((action, idx) => (\n                      <Section.Content key={formData.actions[idx].key}>\n                        <p className=\"padded-top\">\n                          {t(\"rules.flyouts.ruleEditor.actions.emailAddresses\")}\n                        </p>\n                        <FormGroup>\n                          <FormControl\n                            type=\"text\"\n                            className=\"long\"\n                            onKeyPress={this.onAddEmail(action.recipientsLink)}\n                            link={this.newEmailLink}\n                            placeholder={t(\n                              \"rules.flyouts.ruleEditor.actions.enterEmail\"\n                            )}\n                          />\n                        </FormGroup>\n                        <PillGroup\n                          pills={action.recipientsLink.value}\n                          svg={svgs.cancelX}\n                          onSvgClick={this.deletePill(action.recipientsLink)}\n                          altSvgText={t(\n                            \"rules.flyouts.ruleEditor.actions.deleteEmail\"\n                          )}\n                        />\n                        <p className=\"padded-top\">\n                          {t(\"rules.flyouts.ruleEditor.actions.emailSubject\")}\n                        </p>\n                        <FormGroup>\n                          <FormControl\n                            type=\"textarea\"\n                            link={action.subjectLink}\n                            placeholder={t(\n                              \"rules.flyouts.ruleEditor.actions.enterEmailSubject\"\n                            )}\n                            onChange={this.formControlChange}\n                          />\n                        </FormGroup>\n                        <p className=\"padded-top\">\n                          {t(\"rules.flyouts.ruleEditor.actions.emailComments\")}\n                        </p>\n                        <FormGroup>\n                          <FormControl\n                            type=\"textarea\"\n                            link={action.notesLink}\n                            placeholder={t(\n                              \"rules.flyouts.ruleEditor.actions.enterEmailComments\"\n                            )}\n                            onChange={this.formControlChange}\n                          />\n                        </FormGroup>\n                      </Section.Content>\n                    ))}\n                </Section.Content>\n              </Section.Container>\n              <Section.Container>\n                <Section.Header>\n                  {t(\"rules.flyouts.ruleEditor.ruleStatus\")}\n                </Section.Header>\n                <Section.Content>\n                  <FormGroup>\n                    <ToggleBtn\n                      value={formData.status === enabled}\n                      onChange={this.onStatusToggle}\n                    >\n                      {formData.status === enabled\n                        ? t(\"rules.flyouts.ruleEditor.ruleEnabled\")\n                        : t(\"rules.flyouts.ruleEditor.ruleDisabled\")}\n                    </ToggleBtn>\n                  </FormGroup>\n                </Section.Content>\n              </Section.Container>\n            </Section.Container>\n          </div>\n        )}\n\n        <RuleSummary devicesAffected={affectedDevicesCount} t={t} />\n        {isNewRuleSucceeded === true && (\n          <SuccessMessage\n            className=\"rule-editor-success\"\n            t={t}\n            successMsg={t(\"rules.flyouts.ruleEditor.newRuleSuccess\")}\n          />\n        )}\n        {isEditedRuleSucceeded === true && (\n          <SuccessMessage\n            className=\"rule-editor-success\"\n            t={t}\n            successMsg={t(\"rules.flyouts.ruleEditor.editRuleSucceess\")}\n          />\n        )}\n\n        {error && (\n          <AjaxError className=\"rule-editor-error\" t={t} error={error} />\n        )}\n        {\n          <BtnToolbar>\n            {!changesApplied && (\n              <Btn\n                primary={true}\n                disabled={\n                  isPending ||\n                  !this.formIsValid() ||\n                  conditionsHaveErrors ||\n                  actionsHaveErrors\n                }\n                type=\"submit\"\n                onClick={() => {\n                  appInsights.trackEvent(\n                    {\n                      name:\n                        \"UiEvent:Click: \" +\n                        (this.props.rule ? \"Edit\" : \"New\") +\n                        \" Rule Btn\"\n                    },\n                    {\n                      context: {\n                        conditions: this.state.formData.conditions,\n                        actionsLength: this.state.formData.actions.length\n                      }\n                    }\n                  );\n                }}\n                id={\n                  isPending ||\n                  !this.formIsValid() ||\n                  conditionsHaveErrors ||\n                  actionsHaveErrors\n                    ? \"applyRuleBtnDisabled\"\n                    : \"applyRuleBtn\"\n                }\n              >\n                {t(\"rules.flyouts.ruleEditor.apply\")}\n              </Btn>\n            )}\n            {/* <Btn svg={svgs.cancelX} onClick={this.onCloseClick}>\n                     {t(\"rules.flyouts.ruleEditor.cancel\")}\n                   </Btn> */}\n          </BtnToolbar>\n        }\n      </form>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { RuleEditor } from \"./ruleEditor\";\nimport {\n  rulesRedux,\n  getRuleById,\n  getRules\n} from \"store/reducers/rulesAlertsReducer\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorModels,\n  getSensorLastUpdated,\n  getSensorPendingStatus,\n  getSensorModelPendingStatus,\n  getSensorModelLastUpdated,\n  getSensorModelsError\n} from \"store/reducers/sensorsReducer\";\nimport {\n  epics as deviceEpics,\n  getDevices,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus\n} from \"store/reducers/devicesReducer\";\nimport {\n  epics as farmEpics,\n  getFarms,\n  getFarmsError,\n  getFarmsLastUpdated,\n  getFarmsPendingStatus\n} from \"store/reducers/farmsReducer\";\n\n// Pass device groups\nconst mapStateToProps = (state, props) => ({\n  rules: getRules(state),\n  rule: getRuleById(state, props.ruleId),\n  sensorError: getSensorModelsError(state),\n  farms: getFarms(state),\n  farmsError: getFarmsError(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  farmsLastUpdated: getFarmsLastUpdated(state),\n  devices: getDevices(state),\n  sensors: getSensors(state),\n  sensorModels: getSensorModels(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  sensorModelsIsPending: getSensorModelPendingStatus(state),\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  insertRules: rules => dispatch(rulesRedux.actions.insertRules(rules)),\n  modifyRules: rules => dispatch(rulesRedux.actions.modifyRules(rules)),\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels()),\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices())\n});\n\nexport const RuleEditorContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(RuleEditor)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport { Protected, ProtectedError } from \"components/shared\";\nimport { RuleEditorContainer } from \"./ruleEditor\";\nimport Flyout from \"components/shared/flyout\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\nimport { reactPlugin, appInsights } from \"applicationInsights\";\n\nclass EditRuleFlyout extends Component {\n  onTopXClose = () => {\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  componentDidMount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyOpen: Rule Edit\" });\n  }\n  componentWillUnmount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyClose: Rule Edit\" });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.ruleId !== this.props.ruleId) {\n      appInsights.trackEvent({ name: \"UiEvent:FlyChange: Rule Edit\" });\n    }\n  }\n\n  render() {\n    const { onClose, t, ruleId } = this.props;\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title>{t(\"rules.flyouts.editRule\")}</Flyout.Title>\n          <Flyout.CloseBtn onClick={this.onTopXClose} />\n        </Flyout.Header>\n        <Flyout.Content>\n          <Protected permissions={permissions.updateRules}>\n            {(hasPermission, permission) =>\n              hasPermission ? (\n                <RuleEditorContainer onClose={onClose} ruleId={ruleId} />\n              ) : (\n                <div>\n                  <ProtectedError t={t} permissions={permission} />\n                  <p>\n                    A read-only view will be added soon as part of another PBI.\n                  </p>\n                </div>\n              )\n            }\n          </Protected>\n        </Flyout.Content>\n      </Flyout.Container>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, EditRuleFlyout, \"Edit Rule Flyout\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport { Protected } from \"components/shared\";\nimport { RuleEditorContainer } from \"./ruleEditor\";\nimport Flyout from \"components/shared/flyout\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\nimport { reactPlugin } from \"applicationInsights\";\n\nclass NewRuleFlyout extends Component {\n  onTopXClose = () => {\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  render() {\n    const { onClose, t } = this.props;\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title>{t(\"rules.flyouts.newRule\")}</Flyout.Title>\n          <Flyout.CloseBtn onClick={this.onTopXClose} />\n        </Flyout.Header>\n        <Flyout.Content>\n          <Protected permissions={permissions.createRules}>\n            <RuleEditorContainer onClose={onClose} />\n          </Protected>\n        </Flyout.Content>\n      </Flyout.Container>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, NewRuleFlyout, \"New Rule Flyout\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { getEnumTranslation, isDef, dateFormat } from \"utilities\";\nimport { Link } from \"react-router-dom\";\nimport Config from \"app.config\";\nimport {\n  PropertyGrid as Grid,\n  PropertyGridHeader as GridHeader,\n  PropertyRow as Row,\n  PropertyCell as Cell\n} from \"components/shared\";\nimport { RuleSummaryAutoContainer as RuleSummaryAuto } from \"../shared/ruleSummaryAuto.container\";\nimport Flyout from \"components/shared/flyout\";\nimport \"./ruleViewer.scss\";\nimport moment from \"moment\";\n\nconst Section = Flyout.Section;\n\nexport class RuleViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      devicesAffected: null\n    };\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n  }\n  fetchApiData = () => {\n    const {\n      fetchSensors,\n      fetchSensorModels,\n      isSensorsPending,\n      sensorLastUpdated,\n      sensorModelsLastUpdated,\n      sensorModelsIsPending\n    } = this.props;\n    if (!sensorLastUpdated && !isSensorsPending) fetchSensors();\n    if (!sensorModelsLastUpdated && !sensorModelsIsPending) fetchSensorModels();\n  };\n\n  componentDidMount() {\n    this.fetchApiData();\n  }\n\n  render() {\n    const { rule, t } = this.props;\n    const WITH_COLON_AND_SPACE = \": \";\n    const fillData = checkData => {\n      return checkData === undefined\n        ? WITH_COLON_AND_SPACE + Config.emptyValue\n        : WITH_COLON_AND_SPACE + checkData;\n    };\n\n    return (\n      <div className=\"view-rule-flyout-container\">\n        <Section.Container>\n          <Section.Content className=\"ruleviewer-table\">\n            <table className=\"rule-description\">\n              <tbody>\n                <tr>\n                  <th>{t(\"rules.flyouts.ruleViewer.Description\")}</th>\n                  <td>{fillData(rule.description)}</td>\n                </tr>\n              </tbody>\n            </table>\n            <Grid>\n              <Row className=\"ruledetails-table\">\n                <Cell className=\"col-5\">\n                  <table>\n                    <tbody>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.RuleName\")}</th>\n                        <td>{fillData(rule.name)}</td>\n                      </tr>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.CreatedAt\")}</th>\n                        <td>\n                          {fillData(moment(rule.createdAt).format(dateFormat))}\n                        </td>\n                      </tr>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.SeverityLevel\")}</th>\n                        <td>{fillData(rule.severityLevel)}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </Cell>\n                <Cell className=\"col-5\">\n                  <table>\n                    <tbody>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.Farm\")}</th>\n                        <td>\n                          {isDef(rule.farmId) ? (\n                            <Link\n                              className=\"farmLink\"\n                              to={{\n                                pathname: `/farms/${rule.farmId}`,\n                                state: {\n                                  id: rule.farmId,\n                                  farmName: this.props.farm.name\n                                }\n                              }}\n                            >\n                              {fillData(this.props.farm.name)}\n                            </Link>\n                          ) : (\n                            <div>\n                              {fillData(\n                                t(\"rules.flyouts.ruleViewer.farmDoesNotExist\")\n                              )}\n                            </div>\n                          )}\n                        </td>\n                      </tr>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.LastModifiedAt\")}</th>\n                        <td>\n                          {fillData(\n                            moment(rule.lastModifiedAt).format(dateFormat)\n                          )}\n                        </td>\n                      </tr>\n                      <tr>\n                        <th>{t(\"rules.flyouts.ruleViewer.Status\")}</th>\n                        <td>{fillData(rule.status)}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </Cell>\n              </Row>\n            </Grid>\n          </Section.Content>\n        </Section.Container>\n        {rule.conditions.length > 0 && (\n          <Section.Container collapsable={false}>\n            <Section.Header className=\"ruleflyout-section-header\">\n              {t(\"rules.flyouts.ruleEditor.conditions\")}\n            </Section.Header>\n            <Section.Content>\n              <Grid className=\"row-grid\">\n                <GridHeader>\n                  <Row>\n                    <Cell className=\"col-4\">\n                      {t(\"rules.flyouts.ruleEditor.condition.field\")}\n                    </Cell>\n                    <Cell className=\"col-3\">\n                      {t(\"rules.flyouts.ruleEditor.condition.operator\")}\n                    </Cell>\n                    <Cell className=\"col-3\">\n                      {t(\"rules.flyouts.ruleEditor.condition.value\")}\n                    </Cell>\n                  </Row>\n                </GridHeader>\n                {rule.conditions.map((condition, idx) => (\n                  <Row key={idx}>\n                    <Cell className=\"col-4\">{condition.field}</Cell>\n                    <Cell className=\"col-3\">\n                      {getEnumTranslation(\n                        t,\n                        \"rules.flyouts.ruleEditor.condition.operatorOptions\",\n                        condition.operator\n                      )}\n                    </Cell>\n                    <Cell className=\"col-3\">{condition.value}</Cell>\n                  </Row>\n                ))}\n              </Grid>\n            </Section.Content>\n          </Section.Container>\n        )}\n        {rule.actions && rule.actions.length > 0 && (\n          <Section.Container collapsable={false}>\n            <Section.Header className=\"ruleflyout-section-header\">\n              {t(\"rules.flyouts.ruleEditor.actions.action\")}\n            </Section.Header>\n            <Section.Content className=\"rule-action\">\n              <div className=\"rule-prop-label\">\n                {t(\"rules.flyouts.ruleEditor.actions.emailAddresses\")}\n              </div>\n              <div className=\"rule-prop-value\">\n                {rule.actions[0].parameters.recipients.join(\", \")}\n              </div>\n              <div className=\"rule-prop-label\">\n                {t(\"rules.flyouts.ruleEditor.actions.emailSubject\")}\n              </div>\n              <div className=\"rule-prop-value\">\n                {rule.actions[0].parameters.subject}\n              </div>\n              <div className=\"rule-prop-label\">\n                {t(\"rules.flyouts.ruleEditor.actions.emailComments\")}\n              </div>\n              <div className=\"rule-prop-value\">\n                {rule.actions[0].parameters.notes}\n              </div>\n            </Section.Content>\n          </Section.Container>\n        )}\n\n        <RuleSummaryAuto rule={rule} t={t} />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { RuleViewer } from \"./ruleViewer\";\nimport { getRuleById } from \"store/reducers/rulesAlertsReducer\";\nimport { getDevices } from \"store/reducers/devicesReducer\";\nimport { getFarmById } from \"store/reducers/farmsReducer\";\n\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorModels,\n  getSensorLastUpdated,\n  getSensorPendingStatus,\n  getSensorModelPendingStatus,\n  getSensorModelLastUpdated\n} from \"store/reducers/sensorsReducer\";\n// Pass the devices status\nconst mapStateToProps = (state, props) => ({\n  rule: getRuleById(state, props.ruleId),\n  devices: getDevices(state),\n  sensors: getSensors(state),\n  sensorModels: getSensorModels(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  sensorModelsIsPending: getSensorModelPendingStatus(state),\n  farm: getFarmById(state, getRuleById(state, props.ruleId).farmId)\n});\nconst mapDispatchToProps = dispatch => ({\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels())\n});\n\nexport const RuleViewerContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps,\n    null\n  )(RuleViewer)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { svgs } from \"utilities\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport {\n  Btn,\n  ComponentArray,\n  Protected,\n  ProtectedError\n} from \"components/shared\";\nimport { RuleEditorContainer } from \"./ruleEditor\";\nimport { RuleViewerContainer } from \"./ruleViewer\";\nimport Flyout from \"components/shared/flyout\";\n\nimport \"./ruleDetailsFlyout.scss\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\nimport { reactPlugin, appInsights } from \"applicationInsights\";\n\nclass RuleDetailsFlyout extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = {\n      isEditable: false\n    };\n  }\n\n  componentDidMount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyOpen: Rule Details\" });\n  }\n\n  componentWillUnmount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyClose: Rule Details\" });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.ruleId !== this.props.ruleId) {\n      appInsights.trackEvent({ name: \"UiEvent:FlyChange: Rule Details\" });\n      this.setState({ isEditable: false });\n    }\n  }\n\n  goToEditMode = () => {\n    this.setState({ isEditable: true });\n  };\n\n  render() {\n    const { t, onClose, ruleId } = this.props;\n    const { isEditable } = this.state;\n\n    return (\n      <div className={this.props.className ? this.props.className : \"\"}>\n        <Flyout.Container>\n          <Flyout.Header>\n            <Flyout.Title>\n              {isEditable\n                ? t(\"rules.flyouts.editRule\")\n                : t(\"rules.flyouts.viewRule\")}\n            </Flyout.Title>\n            <Flyout.CloseBtn onClick={() => this.props.onClose()} />\n          </Flyout.Header>\n          <Flyout.Content className=\"rule-details\">\n            {!isEditable ? (\n              <ComponentArray>\n                <RuleViewerContainer onClose={onClose} ruleId={ruleId} />\n\n                <Protected permissions={permissions.updateRules}>\n                  <Btn\n                    className=\"edit-mode-btn\"\n                    svg={svgs.edit}\n                    onClick={this.goToEditMode}\n                  >\n                    {t(\"rules.flyouts.edit\")}\n                  </Btn>\n                </Protected>\n              </ComponentArray>\n            ) : (\n              <Protected\n                id=\"rule-details-edit\"\n                permission={permissions.updateRules}\n              >\n                {(hasPermission, permission) =>\n                  hasPermission ? (\n                    <RuleEditorContainer onClose={onClose} ruleId={ruleId} />\n                  ) : (\n                    <ProtectedError t={t} permissions={permission} />\n                  )\n                }\n              </Protected>\n            )}\n          </Flyout.Content>\n        </Flyout.Container>\n      </div>\n    );\n  }\n}\n\nexport default withAITracking(\n  reactPlugin,\n  RuleDetailsFlyout,\n  \"Rule Details Flyout\"\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Observable } from \"rxjs\";\nimport {\n  AjaxError,\n  SuccessMessage,\n  Btn,\n  BtnToolbar,\n  Protected,\n  ToggleBtn,\n  Indicator\n} from \"components/shared\";\nimport { enabled, disabled } from \"utilities\";\nimport { TelemetryService } from \"services\";\nimport { permissions, toEditRuleRequestModel } from \"services/models\";\nimport Flyout from \"components/shared/flyout\";\n\nimport \"./ruleStatus.scss\";\nimport { RuleSummaryAutoContainer as RuleSummaryAuto } from \"../shared\";\n\nexport class RuleStatus extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPending: false,\n      error: undefined,\n      changesApplied: undefined,\n      isRuleStatusChanged: undefined,\n      ruleStatusError: undefined\n    };\n  }\n\n  componentDidMount() {\n    const { rules } = this.props;\n    this.setState({\n      rules,\n      status: rules.length === 1 ? rules[0].status !== enabled : false\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n  }\n\n  onToggle = ({ target: { value } }) => {\n    this.setState({ status: value, changesApplied: false });\n  };\n\n  changeRuleStatus = event => {\n    event.preventDefault();\n    const { rules, status } = this.state;\n    this.setState({ isPending: true, error: null });\n    if (rules !== undefined) {\n      const requestPropList = rules.map(rule => ({\n        ...rule,\n        status: status ? enabled : disabled\n      }));\n\n      this.subscription = Observable.from(requestPropList)\n        .flatMap(rule => {\n          return TelemetryService.updateRule(\n            rule.id,\n            toEditRuleRequestModel(rule)\n          ).map(updatedRule => ({ ...rule, eTag: updatedRule.eTag }));\n        })\n        .subscribe(\n          // Next\n          updatedRule => {\n            this.props.modifyRules([updatedRule]);\n          },\n          // Error\n          error =>\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              isRuleStatusChanged: false,\n              ruleStatusError: error\n            }),\n          // Complete\n          () =>\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              isRuleStatusChanged: true\n            })\n        );\n    }\n  };\n\n  render() {\n    const { onClose, t, rules } = this.props;\n    const {\n      isPending,\n      status,\n      changesApplied,\n      isRuleStatusChanged,\n      ruleStatusError\n    } = this.state;\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title>{t(\"rules.flyouts.statusTitle\")}</Flyout.Title>\n          <Flyout.CloseBtn onClick={onClose} />\n        </Flyout.Header>\n        <Flyout.Content>\n          <Protected permissions={permissions.updateRules}>\n            <form\n              onSubmit={this.changeRuleStatus}\n              className=\"disable-rule-flyout-container\"\n            >\n              <div className=\"padded-top-bottom\">\n                <ToggleBtn value={status} onChange={this.onToggle}>\n                  {!status\n                    ? t(\"rules.flyouts.disable\")\n                    : t(\"rules.flyouts.enable\")}\n                </ToggleBtn>\n              </div>\n              {rules &&\n                rules.map((rule, idx) => (\n                  <RuleSummaryAuto key={rule.id} rule={rule} />\n                ))}\n              {isPending && <Indicator />}\n              {isRuleStatusChanged === true && (\n                <SuccessMessage\n                  className=\"rule-status-success\"\n                  t={t}\n                  successMsg={\n                    rules.length > 1\n                      ? t(\"rules.flyouts.ruleStatusSuccess.plural\")\n                      : t(\"rules.flyouts.ruleStatusSuccess.singular\")\n                  }\n                />\n              )}\n\n              {ruleStatusError && (\n                <AjaxError\n                  className=\"rule-status-error\"\n                  t={t}\n                  error={ruleStatusError}\n                />\n              )}\n              {\n                <BtnToolbar>\n                  {!changesApplied && !isPending && (\n                    <Btn primary={true} type=\"submit\" id={\"applyRuleBtn\"}>\n                      {t(\"rules.flyouts.ruleEditor.apply\")}\n                    </Btn>\n                  )}\n                  {/* <Btn svg={svgs.cancelX} onClick={onClose}>\n                    {t(\"rules.flyouts.ruleEditor.cancel\")}\n                  </Btn> */}\n                </BtnToolbar>\n              }\n            </form>\n          </Protected>\n        </Flyout.Content>\n      </Flyout.Container>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { RuleStatus } from \"./ruleStatus\";\nimport { rulesRedux } from \"store/reducers/rulesAlertsReducer\";\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  modifyRules: rules => dispatch(rulesRedux.actions.modifyRules(rules))\n});\n\nexport const RuleStatusContainer = withNamespaces()(\n  connect(\n    null,\n    mapDispatchToProps\n  )(RuleStatus)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { svgs } from \"utilities\";\nimport { TelemetryService } from \"services\";\nimport { DeleteModal } from \"components/shared/deleteModal/deleteModal\";\n\nimport \"./deleteRule.scss\";\n\nexport class DeleteRule extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPending: false,\n      isRuleDeleted: undefined,\n      ruleDeletionError: undefined\n    };\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n  }\n\n  // TODO make this epic\n  deleteRule = () => {\n    const { rule } = this.props;\n    this.setState({ isPending: true, error: null });\n    this.subscription = TelemetryService.deleteRule(rule.id).subscribe(\n      () => {\n        this.props.deleteRule([rule.id]);\n        this.setState({\n          isPending: false,\n          isRuleDeleted: true\n        });\n      },\n      error =>\n        this.setState({\n          ruleDeletionError: error,\n          isPending: false\n        }),\n      () =>\n        this.setState({\n          isPending: false,\n          isRuleDeleted: true\n        })\n    );\n  };\n\n  render() {\n    const { onClose, t } = this.props;\n\n    return (\n      <DeleteModal\n        onClose={onClose}\n        deleteItem={this.deleteRule}\n        title={t(\"rules.flyouts.deleteRule.title\")}\n        deleteConfirmation={t(\"rules.flyouts.deleteRule.preDeleteText\")}\n        deleteBtn={t(\"modal.delete\")}\n        icon={svgs.trash}\n        t={t}\n        isPending={this.state.isPending}\n        deleteModalError={this.state.ruleDeletionError}\n        deleteModalSuccess={this.state.isRuleDeleted}\n        successMsg={t(\"rules.flyouts.deleteRule.deleteConfirmation\")}\n      />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { DeleteRule } from \"./deleteRule\";\nimport {\n  rulesRedux,\n  epics as rulesAlertsEpics\n} from \"store/reducers/rulesAlertsReducer\";\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  modifyRules: rule => dispatch(rulesRedux.actions.modifyRules(rule)),\n  deleteRule: rule => dispatch(rulesRedux.actions.deleteRule(rule)),\n  fetchRules: () => dispatch(rulesAlertsEpics.actions.fetchRules())\n});\n\nexport const DeleteRuleContainer = withNamespaces()(\n  connect(\n    null,\n    mapDispatchToProps\n  )(DeleteRule)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Trans } from \"react-i18next\";\n\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport { Btn, ComponentArray, PcsGrid, Protected } from \"components/shared\";\nimport { rulesColumnDefs, defaultRulesGridProps } from \"./rulesGridConfig\";\nimport { checkboxColumn } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { translateColumnDefs, svgs } from \"utilities\";\nimport {\n  EditRuleFlyout,\n  RuleDetailsFlyout,\n  RuleStatusContainer,\n  DeleteRuleContainer,\n  NewRuleFlyout\n} from \"../flyouts\";\n\nimport \"./rulesGrid.scss\";\nimport PropTypes from \"prop-types\";\nimport { appInsights } from \"applicationInsights\";\n\nconst closedFlyoutState = {\n  openFlyoutName: undefined,\n  softSelectedRuleId: undefined\n};\n\nexport class RulesGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = {\n      ...closedFlyoutState,\n      selectedRules: undefined\n    };\n    this.columnDefs = [\n      checkboxColumn,\n      rulesColumnDefs.ruleName,\n      rulesColumnDefs.description,\n      rulesColumnDefs.severity,\n      rulesColumnDefs.filter,\n      rulesColumnDefs.trigger,\n      rulesColumnDefs.status\n      // rulesColumnDefs.count,\n      // rulesColumnDefs.lastTrigger\n    ];\n\n    this.contextBtns = {\n      // disable: (\n      //   <Protected key=\"disable\" permissions={permissions.updateRules}>\n      //     <Btn\n      //       className=\"rule-status-btn\"\n      //       svg={svgs.disableToggle}\n      //       onClick={this.openStatusFlyout}\n      //     >\n      //       <Trans i18nKey=\"rules.flyouts.disable\">Disable</Trans>\n      //     </Btn>\n      //   </Protected>\n      // ),\n      // enable: (\n      //   <Protected key=\"enable\" permissions={permissions.updateRules}>\n      //     <Btn\n      //       className=\"rule-status-btn enabled\"\n      //       svg={svgs.enableToggle}\n      //       onClick={this.openStatusFlyout}\n      //     >\n      //       <Trans i18nKey=\"rules.flyouts.enable\">Enable</Trans>\n      //     </Btn>\n      //   </Protected>\n      // ),\n      changeStatus: (\n        <Protected key=\"changeStatus\" permissions={permissions.updateRules}>\n          <Btn\n            className=\"rule-status-btn\"\n            svg={svgs.changeStatus}\n            onClick={() => {\n              this.openStatusFlyout();\n              appInsights.trackEvent({\n                name: \"UiEvent:Click: Chg Rule Status Fly Open Btn\"\n              });\n            }}\n          >\n            <Trans i18nKey=\"rules.flyouts.changeStatus\">Change status</Trans>\n          </Btn>\n        </Protected>\n      ),\n      edit: (\n        <Protected key=\"edit\" permissions={permissions.updateRules}>\n          <Btn\n            svg={svgs.edit}\n            onClick={() => {\n              this.openEditRuleFlyout();\n              appInsights.trackEvent({\n                name: \"UiEvent:Click: Edit Rule Fly Open Btn\"\n              });\n            }}\n            className=\"edit-rule\"\n          >\n            {props.t(\"rules.flyouts.edit\")}\n          </Btn>\n        </Protected>\n      ),\n      delete: (\n        <Protected key=\"delete\" permissions={permissions.deleteRules}>\n          <Btn\n            svg={svgs.trash}\n            onClick={() => {\n              this.openDeleteFlyout();\n              appInsights.trackEvent({ name: \"UiEvent:Click: Del Rule Btn\" });\n            }}\n          >\n            <Trans i18nKey=\"rules.flyouts.delete\">Delete</Trans>\n          </Btn>\n        </Protected>\n      ),\n      addNewRule: (\n        <Protected key=\"newRule\" permissions={permissions.createRules}>\n          <Btn\n            svg={svgs.plus}\n            onClick={() => {\n              this.openNewRuleFlyout();\n              appInsights.trackEvent({\n                name: \"UiEvent:Click: New Rule Fly Open Btn\"\n              });\n            }}\n          >\n            {props.t(\"rules.flyouts.newRule\")}\n          </Btn>\n        </Protected>\n      )\n    };\n    this.props.onContextMenuChange([this.contextBtns.addNewRule]);\n  }\n\n  // componentWillReceiveProps({ rowData }) {\n  //   const { selectedRules = [], softSelectedRuleId } = this.state;\n  //   if (rowData && (selectedRules.length || softSelectedRuleId)) {\n  //     let updatedSoftSelectedRule = undefined;\n  //     const selectedIds = new Set(selectedRules.map(({ id }) => id));\n  //     const updatedSelectedRules = rowData.reduce((acc, rule) => {\n  //       if (selectedIds.has(rule.id)) acc.push(rule);\n  //       if (softSelectedRuleId && rule.id === softSelectedRuleId) {\n  //         updatedSoftSelectedRule = rule;\n  //       }\n  //       return acc;\n  //     }, []);\n  //     this.setState({\n  //       selectedRules: updatedSelectedRules,\n  //       softSelectedRuleId: (updatedSoftSelectedRule || {}).id\n  //     });\n  //   }\n  // }\n\n  openEditRuleFlyout = () => {\n    this.setState({ openFlyoutName: \"edit\" });\n  };\n\n  openStatusFlyout = () => this.setState({ openFlyoutName: \"status\" });\n\n  openDeleteFlyout = () => this.setState({ openFlyoutName: \"delete\" });\n\n  openNewRuleFlyout = () => this.setState({ openFlyoutName: \"newRule\" });\n\n  setSelectedRules = selectedRules => this.setState({ selectedRules });\n\n  getOpenFlyout = () => {\n    switch (this.state.openFlyoutName) {\n      case \"view\":\n        return (\n          <RuleDetailsFlyout\n            onClose={this.closeFlyout}\n            className=\"rulesview-flyout\"\n            t={this.props.t}\n            ruleId={\n              this.state.softSelectedRuleId || this.state.selectedRules[0].id\n            }\n            key=\"view-rule-flyout\"\n          />\n        );\n      case \"edit\":\n        return (\n          <EditRuleFlyout\n            onClose={this.closeFlyout}\n            t={this.props.t}\n            ruleId={\n              this.state.softSelectedRuleId ||\n              (this.state.selectedRules[0] && this.state.selectedRules[0].id)\n            }\n            key=\"edit-rule-flyout\"\n          />\n        );\n      case \"status\":\n        return (\n          <RuleStatusContainer\n            onClose={this.closeFlyout}\n            t={this.props.t}\n            rules={this.state.selectedRules}\n            key=\"edit-rule-flyout\"\n          />\n        );\n      case \"delete\":\n        return (\n          <DeleteRuleContainer\n            onClose={this.closeFlyout}\n            t={this.props.t}\n            rule={this.state.selectedRules[0]}\n            key=\"delete-rule-flyout\"\n            refresh={this.props.refresh}\n          />\n        );\n      case \"newRule\":\n        return <NewRuleFlyout t={this.props.t} onClose={this.closeFlyout} />;\n      default:\n        return null;\n    }\n  };\n\n  /**\n   * Handles context filter changes and calls any hard select props method\n   *\n   * @param {Array} selectedRules A list of currently selected rules\n   */\n  onHardSelectChange = selectedRules => {\n    this.setState({ selectedRules });\n    const { onContextMenuChange } = this.props;\n\n    if (selectedRules.length === 1) {\n      onContextMenuChange([\n        this.contextBtns.delete,\n        this.contextBtns.changeStatus,\n        this.contextBtns.edit\n      ]);\n    } else {\n      // No rule selected\n      onContextMenuChange([this.contextBtns.addNewRule]);\n    }\n  };\n\n  onSoftSelectChange = ruleId => {\n    if (ruleId) {\n      this.setState({\n        openFlyoutName: \"view\",\n        softSelectedRuleId: ruleId\n      });\n    }\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  closeFlyout = () => this.setState(closedFlyoutState);\n\n  render() {\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultRulesGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: this.state.softSelectedRuleId || {},\n      deltaRowDataMode: true,\n      ...this.props, // Allow default property overrides\n      getRowNodeId: ({ id }) => id,\n      enableSorting: true,\n      unSortIcon: true,\n      context: {\n        t: this.props.t\n      },\n\n      /* Grid Events */\n      onRowClicked: ({ node }) => node.setSelected(!node.isSelected()),\n      onHardSelectChange: this.onHardSelectChange,\n      onSoftSelectChange: this.onSoftSelectChange\n    };\n\n    return (\n      <ComponentArray>\n        <PcsGrid {...gridProps} />\n        {this.getOpenFlyout()}\n      </ComponentArray>\n    );\n  }\n}\n\nRulesGrid.propTypes = {\n  onContextMenuChange: PropTypes.func.isRequired,\n  t: PropTypes.func\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { RulesGrid } from \"./rulesGrid\";\nimport {\n  AjaxError,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  SearchInput\n} from \"components/shared\";\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nimport \"./rules.scss\";\n\nclass Rules extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contextBtns: null\n    };\n\n    if (!this.props.lastUpdated && !this.props.error) {\n      this.props.fetchRules();\n    }\n    if (!this.props.farmsLastUpdated && !this.props.farmsError) {\n      this.props.fetchFarms();\n    }\n    if (!this.props.devicesLastUpdated && !this.props.devicesError) {\n      this.props.fetchDevices();\n    }\n    if (!this.props.sensorsLastUpdated && !this.props.sensorsError) {\n      this.props.fetchSensors();\n    }\n\n    if (\n      !this.props.sensorModelsLastUpdated &&\n      !this.props.isSensorModelsPending\n    ) {\n      this.props.fetchSensorModels();\n    }\n  }\n\n  getRulesList(farms, rules) {\n    let farmList;\n    const ruleslist = rules.map(item => {\n      return {\n        ...item\n      };\n    });\n    ruleslist.forEach(rules => {\n      farmList = farms.find(farm => farm.id === rules.farmId);\n      rules.farmName = farmList === undefined ? undefined : farmList.name;\n    });\n\n    return ruleslist;\n  }\n\n  onGridReady = gridReadyEvent => (this.rulesGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.rulesGridApi) this.rulesGridApi.setQuickFilter(value);\n  };\n\n  onContextMenuChange = contextBtns => this.setState({ contextBtns });\n\n  render() {\n    const rulesList = this.getRulesList(this.props.farms, this.props.rules);\n    const { t, error, isRulesPending, isFarmsPending } = this.props;\n    const isPending = isRulesPending || isFarmsPending;\n    const gridProps = {\n      onGridReady: this.onGridReady,\n      rowData: isPending ? undefined : rulesList || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: this.props.t,\n      refresh: this.refreshRulesData\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true} className=\"rule-menus\">\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"rules.searchPlaceholder\")}\n            />\n            {this.state.contextBtns}\n          </ContextMenuAlign>\n        </ContextMenu>\n        <PageContent className=\"rules-container\">\n          <PageTitle\n            titleValue={t(\"rules.title\").concat(\n              \"(\",\n              String(rulesList.length),\n              \")\"\n            )}\n          />\n          {!!error && <AjaxError t={t} error={error} />}\n          {!error && <RulesGrid {...gridProps} />}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Rules, \"Rules Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport Rules from \"./rules\";\nimport {\n  epics as farmEpics,\n  getFarmsLastUpdated,\n  getFarms,\n  getFarmsPendingStatus,\n  getFarmsError\n} from \"store/reducers/farmsReducer\";\nimport {\n  epics as rulesAlertsEpics,\n  getRules,\n  getRulesError,\n  getRulesLastUpdated,\n  getRulesPendingStatus\n} from \"store/reducers/rulesAlertsReducer\";\nimport {\n  getDevicesLastUpdated,\n  getDevicesError,\n  epics as deviceEpics\n} from \"store/reducers/devicesReducer\";\nimport {\n  epics as sensorEpics,\n  getSensorModels,\n  getSensorLastUpdated,\n  getSensorModelPendingStatus,\n  getSensorModelLastUpdated,\n  getSensorError\n} from \"store/reducers/sensorsReducer\";\n\n// Pass the devices status\nconst mapStateToProps = state => ({\n  farms: getFarms(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  farmsError: getFarmsError(state),\n  farmsLastUpdated: getFarmsLastUpdated(state),\n\n  rules: getRules(state),\n  error: getRulesError(state),\n  isRulesPending: getRulesPendingStatus(state),\n  lastUpdated: getRulesLastUpdated(state),\n\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  devicesError: getDevicesError(state),\n\n  sensorModels: getSensorModels(state),\n  sensorsError: getSensorError(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  isSensorModelsPending: getSensorModelPendingStatus(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  fetchRules: () => dispatch(rulesAlertsEpics.actions.fetchRules()),\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices()),\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels())\n});\n\nexport const RulesContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Rules)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { SoftSelectLinkRenderer } from \"components/shared/cellRenderers\";\nimport { TimeRenderer } from \"components/shared/cellRenderers\";\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\n/** A collection of column definitions for the farm grid */\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const farmColumnDefs = {\n  name: {\n    headerName: \"farms.grid.farmName\",\n    field: \"name\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  address: {\n    headerName: \"farms.grid.address\",\n    field: \"properties.address\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  crop: {\n    headerName: \"farms.grid.crop\",\n    field: \"properties.crops\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  devices: {\n    headerName: \"farms.grid.device\",\n    field: \"count\"\n  },\n  createdOn: {\n    headerName: \"farms.grid.createdOn\",\n    field: \"createdAt\",\n    cellRendererFramework: TimeRenderer\n  },\n  lastUpdated: {\n    headerName: \"farms.grid.lastUpdated\",\n    field: \"lastModifiedAt\",\n    cellRendererFramework: TimeRenderer\n  }\n};\n\n/** Given an farm object, extract and return the device Id */\nexport const getSoftSelectId = ({ id }) => id;\n\n/** Shared farm grid AgGrid properties */\nexport const defaultFarmGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"multiple\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { PcsGrid } from \"components/shared\";\nimport { farmColumnDefs, defaultFarmGridProps } from \"./farmsGridConfig\";\nimport { isFunc, translateColumnDefs } from \"utilities\";\n\nconst initialState = {\n  softSelectedId: undefined,\n  eviBlobUrl: undefined,\n  eviBlobUrlError: undefined\n};\n\nexport class FarmGrid extends Component {\n  constructor(props) {\n    super(props);\n    // Set the initial state\n    this.state = initialState;\n    // Default device grid columns\n    this.columnDefs = [\n      farmColumnDefs.name,\n      farmColumnDefs.address,\n      farmColumnDefs.crop,\n      farmColumnDefs.devices,\n      farmColumnDefs.createdOn,\n      farmColumnDefs.lastUpdated\n    ];\n\n    this.onRowClicked = this.onRowClicked.bind(this);\n  }\n\n  onGridReady = gridReadyEvent => {\n    this.farmGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  onSoftSelectChange = (rowId, rowData) => {\n    // Note: only the Id is reliable, rowData may be out of date\n    const { onSoftSelectChange, history } = this.props;\n    const name = rowData.name;\n    history.push(`/farms/${rowId}`, { id: rowId, farmName: name });\n    if (rowId) {\n      this.setState({ softSelectedId: rowId });\n    }\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(rowId, rowData);\n    }\n  };\n\n  onHardSelectChange = selectedObjs => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n    if (isFunc(onContextMenuChange)) {\n      onContextMenuChange(selectedObjs.length > 0 ? this.contextBtns : null);\n    }\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedObjs);\n    }\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  onRowClicked = () => {\n    //\n  };\n  render() {\n    const gridProps = {\n      ...defaultFarmGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n      deviceCount: this.props.deviceCount,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: (this.state.softSelectedDevice || {}).id,\n      ...this.props,\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: this.props.t\n      },\n      /* Grid Events */\n      onRowClicked: this.onRowClicked,\n      onGridReady: this.onGridReady,\n      onSoftSelectChange: this.onSoftSelectChange,\n      onHardSelectChange: this.onHardSelectChange\n    };\n\n    return <PcsGrid key=\"farm-grid-key\" {...gridProps} />;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport \"./emptyFarm.scss\";\nimport { Btn, Protected } from \"components/shared\";\nimport { permissions } from \"services/models\";\nexport class EmptyFarm extends Component {\n  render() {\n    const imageUrl = \"./image.png\";\n    const { t, openFlyout } = this.props;\n    return (\n      <div>\n        <center>\n          <img\n            className=\" image-empty\"\n            src={imageUrl}\n            alt={t(\"farms.emptyFarm\")}\n          />\n        </center>\n        <div className=\"center-align\">{t(\"farms.emptyFarm\")}</div>\n        <center>\n          <Protected permissions={permissions.createFarms}>\n            <Btn\n              className=\" button-empty\"\n              primary={true}\n              type=\"submit\"\n              onClick={openFlyout}\n              style={{ backgroundColor: \"lightblue\" }}\n            >\n              {t(\"farms.createFarm\")}\n            </Btn>\n          </Protected>\n        </center>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Btn,\n  ComponentArray,\n  ContextMenu,\n  PageContent,\n  AjaxError,\n  ContextMenuAlign,\n  PageTitle,\n  Protected,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput\n} from \"components/shared\";\nimport { permissions } from \"services/models\";\nimport { svgs } from \"utilities\";\nimport { FarmGrid } from \"./farmsGrid\";\nimport { EmptyFarm } from \"./emptyFarm/emptyFarm\";\nimport \"./farms.scss\";\nimport { NewFarmFlyout } from \"./flyouts\";\n\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nclass FarmsSummary extends Component {\n  render() {\n    const {\n      t,\n      farms,\n      farmsError,\n      isFarmsPending,\n      // farmsLastUpdated,\n      // fetchFarms,\n      history,\n      openFlyoutName,\n      onCloseFlyout,\n      openFlyout,\n      onGridReady,\n      rowData,\n      onContextMenuChange,\n      searchOnChange\n    } = this.props;\n    const gridProps = {\n      onGridReady,\n      rowData,\n      onContextMenuChange,\n      t,\n      history\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            <SearchInput\n              onChange={searchOnChange}\n              placeholder={t(\"farms.searchPlaceholder\")}\n            />\n            <Protected permissions={permissions.createFarms}>\n              <Btn\n                svg={svgs.plus}\n                className=\"create-farm\"\n                onClick={openFlyout(\"create\")}\n              >\n                {t(\"farms.flyouts.create.open\")}\n              </Btn>\n            </Protected>\n          </ContextMenuAlign>\n        </ContextMenu>\n        <PageContent className=\"farms-container\">\n          {/* <RefreshBar\n            refresh={fetchFarms}\n            time={farmsLastUpdated}\n            isPending={isFarmsPending}\n            t={t}\n          /> */}\n          <PageTitle\n            titleValue={t(\"farms.title\").concat(\"(\", String(farms.length), \")\")}\n          />\n\n          {!isFarmsPending && farms.length === 0 && !farmsError && (\n            <EmptyFarm openFlyout={openFlyout(\"create\")} t={t} />\n          )}\n          {!!farmsError && <AjaxError t={t} error={farmsError} />}\n          {(isFarmsPending || farms.length !== 0) && !farmsError && (\n            <FarmGrid {...gridProps} />\n          )}\n          {openFlyoutName === \"create\" && (\n            <NewFarmFlyout onClose={onCloseFlyout} t={t} />\n          )}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, FarmsSummary, \"Farms Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\n\nimport { FarmDetailsContainer as FarmDetails } from \"components/pages\";\nimport \"./farms.scss\";\nimport FarmsSummary from \"./farmsSummary\";\n\nconst closedFlyoutState = { openFlyoutName: undefined };\n\nexport class Farms extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openFlyoutName: undefined,\n      farmsLength: undefined\n    };\n    const {\n      fetchFarms,\n      farmsLastUpdated,\n      farmsError,\n      devicesLastUpdated,\n      devicesError,\n      fetchDevices\n    } = this.props;\n\n    if (!farmsLastUpdated && !farmsError) {\n      fetchFarms();\n    }\n    if (!devicesLastUpdated && !devicesError) {\n      fetchDevices();\n    }\n  }\n\n  onGridReady = gridReadyEvent => (this.farmGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.farmGridApi) this.farmGridApi.setQuickFilter(value);\n  };\n\n  closeFlyout = () => this.setState(closedFlyoutState);\n  openFlyout = name => () => this.setState({ openFlyoutName: name });\n\n  render() {\n    const {\n      t,\n      farms,\n      farmsError,\n      isFarmsPending,\n      farmsLastUpdated,\n      fetchFarms,\n      devices,\n      history\n    } = this.props;\n\n    const generalProps = {\n      t,\n      farms,\n      farmsError,\n      isFarmsPending,\n      farmsLastUpdated,\n      fetchFarms,\n      devices,\n      history,\n      openFlyoutName: this.state.openFlyoutName,\n      onCloseFlyout: this.closeFlyout,\n      openFlyout: this.openFlyout,\n      onGridReady: this.onGridReady,\n      rowData: isFarmsPending ? undefined : farms || [],\n      onContextMenuChange: this.onContextMenuChange,\n      searchOnChange: this.searchOnChange,\n      refresh: fetchFarms\n    };\n    return (\n      <Switch>\n        <Route\n          exact\n          path={\"/farms\"}\n          render={() => <FarmsSummary {...generalProps} />}\n        />\n        <Route\n          exact\n          path={\"/farms/:name\"}\n          render={() => <FarmDetails {...generalProps} />}\n        />\n        <Redirect to=\"/farms\" />\n      </Switch>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport {\n  epics as farmEpics,\n  getFarms,\n  getFarmsError,\n  getFarmsLastUpdated,\n  getFarmsPendingStatus\n} from \"store/reducers/farmsReducer\";\nimport { Farms } from \"./farms\";\nimport {\n  epics as devicesEpics,\n  getDevices,\n  getDevicesError,\n  getDevicesPendingStatus,\n  getDevicesLastUpdated\n} from \"store/reducers/devicesReducer\";\n\n// Pass the data\nconst mapStateToProps = state => ({\n  farms: getFarms(state),\n  devices: getDevices(state),\n  farmsError: getFarmsError(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  farmsLastUpdated: getFarmsLastUpdated(state),\n  devicesError: getDevicesError(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n  devicesLastUpdated: getDevicesLastUpdated(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  fetchDevices: () => dispatch(devicesEpics.actions.fetchDevices())\n});\n\nexport const FarmsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Farms)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { AjaxError, Indicator } from \"components/shared\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { svgs, renderUndefined, isDef } from \"utilities\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelOverlay,\n  PanelError\n} from \"components/shared\";\n\nimport \"./overviewPanel.scss\";\n\nexport class OverviewPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isPending: true };\n  }\n\n  render() {\n    const {\n      t,\n      error,\n      isPending,\n      onlineDeviceCount,\n      offlineDeviceCount,\n      nodesCount,\n      gatewaysCount\n    } = this.props;\n\n    const deviceDataloaded =\n      isDef(onlineDeviceCount) && isDef(offlineDeviceCount);\n    const showOverlay =\n      isPending && (!nodesCount || !gatewaysCount || !deviceDataloaded);\n    const totalDevices = deviceDataloaded\n      ? nodesCount + gatewaysCount\n      : undefined;\n    // const deviceGroupName =\n    //   activeDeviceGroup\n    //     ? activeDeviceGroup.displayName\n    //     : t('dashboard.panels.overview.allDevices');\n\n    return (\n      <Panel>\n        <PanelHeader>\n          <PanelHeaderLabel>\n            {t(\"dashboard.panels.overview.headerDeviceCount\")}\n          </PanelHeaderLabel>\n          {!showOverlay && isPending && <Indicator size=\"small\" />}\n        </PanelHeader>\n        <PanelContent className=\"device-stats-container\">\n          <div className=\"stat-container\">\n            <div className=\"stat-cell col-third\">\n              <div className=\"stat-value\">{renderUndefined(gatewaysCount)}</div>\n              <span className=\"icon-margin-left spacing-text\">\n                <Svg path={svgs.gateway} />\n              </span>\n              <div className=\"stat-label spacing-text\">\n                {t(\"dashboard.panels.overview.gateway\")}\n              </div>\n            </div>\n\n            <div className=\"stat-cell col-third\">\n              <div className=\"stat-value\">{renderUndefined(nodesCount)}</div>\n              <span className=\"icon-margin-left spacing-text\">\n                <Svg path={svgs.node} />\n              </span>\n              <div className=\"stat-label spacing-text\">\n                {t(\"dashboard.panels.overview.nodes\")}\n              </div>\n            </div>\n\n            <div className=\"stat-cell col-third\">\n              <div className=\"stat-value\">{renderUndefined(totalDevices)}</div>\n              <div className=\"stat-label spacing-text\">\n                {t(\"dashboard.panels.overview.total\")}\n              </div>\n            </div>\n          </div>\n        </PanelContent>\n\n        <PanelHeader>\n          <PanelHeaderLabel>\n            {t(\"dashboard.panels.overview.headerDeviceStatus\")}\n          </PanelHeaderLabel>\n        </PanelHeader>\n        <PanelContent className=\"device-stats-container\">\n          <div className=\"stat-container\">\n            {/* <div className=\"stat-container-left\"> */}\n            <div className=\"stat-cell col-third\">\n              <div className=\"stat-value online-color\">\n                {renderUndefined(onlineDeviceCount)}\n              </div>\n\n              <span className=\"icon-margin-left spacing-text\">\n                <Svg path={svgs.onlineBig} />\n              </span>\n              <div className=\"stat-label spacing-text\">\n                {t(\"dashboard.panels.overview.online\")}\n              </div>\n            </div>\n\n            <div className=\"stat-cell col-third\">\n              <div className=\"stat-value\">\n                {renderUndefined(offlineDeviceCount)}\n              </div>\n              <span className=\"icon-margin-left spacing-text\">\n                <Svg path={svgs.offline} />\n              </span>\n              <div className=\"stat-label spacing-text\">\n                {t(\"dashboard.panels.overview.notConnected\")}\n              </div>\n            </div>\n          </div>\n        </PanelContent>\n        {showOverlay && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Svg } from \"components/shared\";\nimport { svgs, joinClasses } from \"utilities\";\nimport \"./modalHeader.scss\";\nimport PropTypes from \"prop-types\";\n\nexport const ModalHeader = ({\n  children,\n  className,\n  modalClose,\n  mapDownload\n}) => (\n  <div className={joinClasses(\"map-modal-header\", className)}>\n    <b className=\"header-modal\">{children.toUpperCase()}</b>\n    <div className=\"empty-container\" />\n    <Svg path={svgs.cancelX} className=\"cancel-btn\" onClick={modalClose} />\n  </div>\n);\nModalHeader.propTypes = { className: PropTypes.string };\n","/*\n * Copyright(c) 2019 Microsoft Corporation. All rights reserved.\n *\n * This code is licensed under the MIT License (MIT).\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n * of the Software, and to permit persons to whom the Software is furnished to do\n * so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * A control that toggles the map from its defined size to a fullscreen size.\n */\nexport class FullscreenControl {\n  /** **************************\n   * Constructor\n   ***************************/\n  /**\n   * A control that toggles the map from its defined size to a fullscreen size.\n   * @param options Options for defining how the control is rendered and functions.\n   */\n  constructor(options) {\n    this._options = {\n      style: \"light\",\n      hideIfUnsupported: true\n    };\n    this._darkColor = \"#011c2c\";\n    this._fullscreenCss =\n      \"{elm}:-webkit-full-screen{width:100%;height:100%;}{elm}:-moz-full-screen{width:100%;height:100%;}{elm}:-ms-fullscreen{width:100%;height:100%;}{elm}:-o-full-screen{width:100%;height:100%;}{elm}:-full-screen{width:100%;height:100%;}\" +\n      \".fullscreenMapBtn{margin:0;padding:0;border:none;border-collapse:collapse;width:32px;height:32px;text-align:center;cursor:pointer;line-height:32px;background-repeat:no-repeat;background-size:20px;background-position:center center;z-index:200;box-shadow:0px 0px 4px rgba(0,0,0,0.16);}\" +\n      \".fullscreenMapExpand{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAF6ePCOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURQAAAJacn5ean5idopicopicoZicoZbVOdIAAAAGdFJOUwBQYI+fucOe/hkAAAAJcEhZcwAAFxEAABcRAcom8z8AAADMSURBVDhPzZSNDoIwDITn397/kV27il9Rzmwq4Qux194VRmIombqqDzCvtV236LvRJos28rD6RlPGs5jpvHaZVTLWe0nEbCkxbnKkU4zcMw7xpvTqeHrho2WzzDfWHHPPmraCmAXWzRDrtZ7ZpCeNOe03c3xnL2bOdginc2Iz6/yYuDGxP+WG1Q8Qmvxxx6UGQUgNgpAaBCE1CEJqEITUIHhxXGquTjTHBa+mQRBSgyCkBkFIDYKQGgQhNQhCahDsMmGfoA1r351BSrkDTQQSzEhW2qYAAAAASUVORK5CYII=);}\" +\n      \".fullscreenMapExpand:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAF6ePCOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURQAAADCszDCqzTKtzzKszzCszzGszvdFYikAAAAGdFJOUwBQYI+fucOe/hkAAAAJcEhZcwAAFxEAABcRAcom8z8AAADMSURBVDhPzZSNDoIwDITn397/kV27il9Rzmwq4Qux194VRmIombqqDzCvtV236LvRJos28rD6RlPGs5jpvHaZVTLWe0nEbCkxbnKkU4zcMw7xpvTqeHrho2WzzDfWHHPPmraCmAXWzRDrtZ7ZpCeNOe03c3xnL2bOdginc2Iz6/yYuDGxP+WG1Q8Qmvxxx6UGQUgNgpAaBCE1CEJqEITUIHhxXGquTjTHBa+mQRBSgyCkBkFIDYKQGgQhNQhCahDsMmGfoA1r351BSrkDTQQSzEhW2qYAAAAASUVORK5CYII=);}\" +\n      \".fullscreenMapCollapse{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEWWnJ+Xmp+YnKKYnKKYnKHcteq5AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAHdElNRQfiCw8VGzLD58rvAAAANUlEQVQ4y2NgIB+wuLg4IKhRGUpkXGAAKgMFg0JmuIHBH9ajuYTaMszGxgZAiklJSYFg+gAAKrRnAIqOPxgAAAAASUVORK5CYII=);}\" +\n      \".fullscreenMapCollapse:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEUwrMwwqs0yrM8yrM8xrM6kUFC0AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAHdElNRQfiCw8VGSuVugCtAAAANUlEQVQ4y2NgIB+wuLg4IKhRGUpkXGAAKgMFg0JmuIHBH9ajuYTaMszGxgZAiklJSYFg+gAAKrRnAIqOPxgAAAAASUVORK5CYII=);}\";\n    this._options = Object.assign({}, this._options, options);\n  }\n  /** **************************\n   * Public Methods\n   ***************************/\n  /**\n   * Action to perform when the control is added to the map.\n   * @param map The map the control was added to.\n   * @param options The control options used when adding the control to the map.\n   * @return The HTML Element that represents the control.\n   */\n  onAdd(map, options) {\n    this._map = map;\n    const isSupported = FullscreenControl.isSupported();\n    if (isSupported || (!isSupported && !this._options.hideIfUnsupported)) {\n      this._resource = FullscreenControl._getTranslations(\n        this._map.getStyle().language\n      );\n      let color = this._options.style || \"light\";\n      if (color === \"light\") {\n        color = \"white\";\n      } else if (color === \"dark\") {\n        color = this._darkColor;\n      } else if (color === \"auto\") {\n        // Color will change between light and dark depending on map style.\n        this._map.events.add(\"styledata\", () => {\n          this._mapStyleChanged();\n        });\n        color = this._getColorFromMapStyle();\n      }\n      const mapContainer = this._map.getMapContainer();\n      // Add css for fullscreen.\n      const css = this._fullscreenCss.replace(/{elm}/g, \"#\" + mapContainer.id);\n      // Add the CSS style for the control to the DOM.\n      const style = document.createElement(\"style\");\n      style.innerHTML = css;\n      document.body.appendChild(style);\n      // Create the fullscreen button.\n      this._container = document.createElement(\"div\");\n      this._container.classList.add(\"azure-maps-control-container\");\n      this._container.setAttribute(\"aria-label\", this._resource.title);\n      this._container.style.flexDirection = \"column\";\n      this._button = document.createElement(\"button\");\n      this._button.classList.add(\"fullscreenMapBtn\");\n      this._button.classList.add(\"fullscreenMapExpand\");\n      this._button.style.backgroundColor = color;\n      this._button.setAttribute(\"title\", this._resource.view);\n      this._button.setAttribute(\"alt\", this._resource.view);\n      this._button.setAttribute(\"type\", \"button\");\n      this._button.addEventListener(\"click\", () => {\n        if (this.isFullscreen()) {\n          const closeFullScreenFn =\n            document[\"webkitCancelFullScreen\"] ||\n            document[\"cancelFullScreen\"] ||\n            document[\"mozCancelFullScreen\"] ||\n            document[\"msExitFullscreen\"] ||\n            document.exitFullscreen;\n          closeFullScreenFn.call(document);\n        } else {\n          const openFullScreenFn =\n            mapContainer[\"webkitRequestFullScreen\"] ||\n            mapContainer[\"requestFullScreen\"] ||\n            mapContainer[\"mozRequestFullScreen\"] ||\n            mapContainer[\"msRequestFullscreen\"] ||\n            mapContainer.requestFullscreen;\n          openFullScreenFn.call(mapContainer);\n        }\n      });\n      this._updateBtn();\n      this._container.appendChild(this._button);\n      let changeEventName;\n      if (document[\"fullscreenchange\"]) {\n        changeEventName = \"fullscreenchange\";\n      } else if (document[\"webkitCancelFullScreen\"]) {\n        changeEventName = \"webkitfullscreenchange\";\n      } else if (document[\"mozCancelFullScreen\"]) {\n        changeEventName = \"mozfullscreenchange\";\n      } else if (document[\"msExitFullscreen\"]) {\n        changeEventName = \"MSFullscreenChange\";\n      }\n      if (changeEventName) {\n        document.addEventListener(changeEventName, () => {\n          this._updateBtn();\n        });\n      }\n      return this._container;\n    }\n    return null;\n  }\n  /**\n   * Action to perform when control is removed from the map.\n   */\n  onRemove() {\n    if (this._container) {\n      this._container.remove();\n    }\n    if (this._options.style === \"auto\") {\n      this._map.events.remove(\"styledata\", () => {\n        this._mapStyleChanged();\n      });\n    }\n  }\n  /**\n   * Determines if the map is in full screen mode or not.\n   */\n  isFullscreen() {\n    return !(\n      !document[\"fullscreenElement\"] &&\n      !document[\"msFullscreenElement\"] &&\n      !document[\"mozFullScreenElement\"] &&\n      !document[\"webkitFullscreenElement\"]\n    );\n  }\n  /**\n   * Determines if fullscreen can be requested of not.\n   */\n  static isSupported() {\n    return (\n      document[\"fullscreenEnabled\"] ||\n      document[\"msFullscreenEnabled\"] ||\n      document[\"mozFullScreenEnabled\"] ||\n      document[\"webkitFullscreenEnabled\"]\n    );\n  }\n  /** **************************\n   * Private Methods\n   ***************************/\n  /**\n   * An event handler for when the map style changes. Used when control style is set to auto.\n   */\n  _mapStyleChanged() {\n    if (this._button) {\n      this._button.style.backgroundColor = this._getColorFromMapStyle();\n    }\n  }\n  /**\n   * Retrieves the background color for the button based on the map style. This is used when style is set to auto.\n   */\n  _getColorFromMapStyle() {\n    const style = this._map.getStyle().style;\n    let color = \"white\";\n    switch (style) {\n      // When the style is dark (i.e. satellite, night), show the dark colored theme.\n      case \"satellite\":\n      case \"satellite_road_labels\":\n      case \"grayscale_dark\":\n      case \"night\":\n        color = this._darkColor;\n        break;\n      // When the style is bright (i.e. road), show the light colored theme.\n      case \"road\":\n      case \"grayscale_light\":\n      default:\n        break;\n    }\n    return color;\n  }\n  /**\n   * Toggles the fullscreen state of the button.\n   */\n  _updateBtn() {\n    let ariaLabel = this._resource.view;\n    let removeClass;\n    let addClass;\n    if (this.isFullscreen()) {\n      // Is fullscreen, exit.\n      ariaLabel = this._resource.exit;\n      removeClass = \"fullscreenMapExpand\";\n      addClass = \"fullscreenMapCollapse\";\n    } else {\n      // Make map full screen.\n      ariaLabel = this._resource.view;\n      removeClass = \"fullscreenMapCollapse\";\n      addClass = \"fullscreenMapExpand\";\n    }\n    this._button.setAttribute(\"title\", ariaLabel);\n    this._button.setAttribute(\"alt\", ariaLabel);\n    this._button.classList.remove(removeClass);\n    this._button.classList.add(addClass);\n  }\n  /**\n   * Returns the set of translation text resources needed for the fullscreen control for a given language.\n   * @param lang The language code to retrieve the text resources for.\n   * @return An object containing text resources in the specified language.\n   */\n  static _getTranslations(lang) {\n    if (lang && lang.indexOf(\"-\") > 0) {\n      lang = lang.substring(0, lang.indexOf(\"-\"));\n    }\n    switch (lang) {\n      // Afrikaans\n      case \"af\":\n        return {\n          exit: \"Verlaat volskerm\",\n          view: \"Vertoon volskerm\",\n          title: \"Volskerm beheer\"\n        };\n      // Arabic\n      case \"ar\":\n        return {\n          exit: \"الخروج من وضع ملئ للشاشة\",\n          view: \"المشاهدة بحجم الشاشة\",\n          title: \"تحكم ملء الشاشة\"\n        };\n      // Basque\n      case \"eu\":\n        return {\n          exit: \"Irten pantaila osoko\",\n          view: \"ikusi pantaila osoan\",\n          title: \"Pantaila osoa kontrol\"\n        };\n      // Bulgarian\n      case \"bg\":\n        return {\n          exit: \"Изход на цял екран\",\n          view: \"Преглед на цял екран\",\n          title: \"Контрол на цял екран\"\n        };\n      // Chinese\n      case \"zh\":\n        return { exit: \"退出全屏\", view: \"全屏查看\", title: \"全屏控制\" };\n      // Croatian\n      case \"hr\":\n        return {\n          exit: \"Izlaz na cijelom zaslonu\",\n          view: \"Prikaz na cijelom zaslonu\",\n          title: \"Puni zaslon kontrola\"\n        };\n      // Czech\n      case \"cs\":\n        return {\n          exit: \"Ukončit celou obrazovku\",\n          view: \"pohled na celou obrazovku\",\n          title: \"fullscreen kontrola\"\n        };\n      // Danish\n      case \"da\":\n        return {\n          exit: \"Afslut fuld skærm\",\n          view: \"Se fuld skærm\",\n          title: \"fullscreen kontrol\"\n        };\n      // Dutch\n      case \"nl\":\n        return {\n          exit: \"Verlaat volledig scherm\",\n          view: \"Bekijk fullscreen\",\n          title: \"fullscreen controle\"\n        };\n      // Estonian\n      case \"et\":\n        return {\n          exit: \"Välja täisekraani\",\n          view: \"Vaata täisekraani\",\n          title: \"Täisekraan kontrolli\"\n        };\n      // Finnish\n      case \"fi\":\n        return {\n          exit: \"Poistu koko näytöstä\",\n          view: \"Koko näyttö\",\n          title: \"fullscreen ohjaus\"\n        };\n      // French\n      case \"fr\":\n        return {\n          exit: \"Quitter le mode plein écran\",\n          view: \"Voir en plein écran\",\n          title: \"Contrôle plein écran\"\n        };\n      // Galician\n      case \"gl\":\n        return {\n          exit: \"Saia da pantalla completa\",\n          view: \"Ver a pantalla completa\",\n          title: \"Control de pantalla completa\"\n        };\n      // German\n      case \"de\":\n        return {\n          exit: \"Beenden Vollbild\",\n          view: \"Ansicht Vollbild\",\n          title: \"Vollbild-Steuerung\"\n        };\n      // Greek\n      case \"el\":\n        return {\n          exit: \"Έξοδος από πλήρη οθόνη\",\n          view: \"Προβολή σε πλήρη οθόνη\",\n          title: \"Πλήρης οθόνη ελέγχου\"\n        };\n      // Hindi\n      case \"hi\":\n        return {\n          exit: \"पूर्ण स्क्रीन से बाहर निकलें\",\n          view: \"पूर्णस्क्रीन देखें\",\n          title: \"पूर्ण स्क्रीन नियंत्रण\"\n        };\n      // Hungarian\n      case \"hu\":\n        return {\n          exit: \"Kilépés a teljes képernyős\",\n          view: \"Megtekintés teljes képernyőn\",\n          title: \"Nagyítás ellenőrzés\"\n        };\n      // Indonesian\n      case \"id\":\n        return {\n          exit: \"Keluar layar penuh\",\n          view: \"Lihat fullscreen\",\n          title: \"Kontrol layar penuh\"\n        };\n      // Italian\n      case \"it\":\n        return {\n          exit: \"Esci da schermo intero\",\n          view: \"Visualizza schermo intero\",\n          title: \"controllo a tutto schermo\"\n        };\n      // Japanese\n      case \"ja\":\n        return {\n          exit: \"出口フルスクリーン\",\n          view: \"表示フルスクリーン\",\n          title: \"フルスクリーンコントロール\"\n        };\n      // Kazakh\n      case \"kk\":\n        return {\n          exit: \"Толық экраннан шығу\",\n          view: \"View толық экран\",\n          title: \"Fullscreen бақылау\"\n        };\n      // Korean\n      case \"ko\":\n        return {\n          exit: \"전체 화면 종료\",\n          view: \"전체 화면보기\",\n          title: \"전체 화면 제어\"\n        };\n      // Spanish\n      case \"es\":\n        return {\n          exit: \"Salir de pantalla completa\",\n          view: \"Ver en pantalla completa\",\n          title: \"control de pantalla completa\"\n        };\n      // Latvian\n      case \"lv\":\n        return {\n          exit: \"Iziet no pilnekrāna\",\n          view: \"Skatīt pilnekrāna režīmā\",\n          title: \"Pilnekrāna kontrole\"\n        };\n      // Lithuanian\n      case \"lt\":\n        return {\n          exit: \"Išjungti viso ekrano režimą\",\n          view: \"Peržiūrėti per visą ekraną\",\n          title: \"Fullscreen kontrolė\"\n        };\n      // Malay\n      case \"ms\":\n        return {\n          exit: \"keluar skrin penuh\",\n          view: \"paparan skrin penuh\",\n          title: \"kawalan skrin penuh\"\n        };\n      // Norwegian\n      case \"nb\":\n        return {\n          exit: \"Avslutt full skjerm\",\n          view: \"Vis fullskjerm\",\n          title: \"Full skjermkontroll\"\n        };\n      // Polish\n      case \"pl\":\n        return {\n          exit: \"Wyłączyć tryb pełnoekranowy\",\n          view: \"Zobacz na pełnym ekranie\",\n          title: \"kontrola na pełnym ekranie\"\n        };\n      // Portuguese\n      case \"pt\":\n        return {\n          exit: \"Sair em tela cheia\",\n          view: \"Ver tela cheia\",\n          title: \"controle de tela cheia\"\n        };\n      // Romanian\n      case \"ro\":\n        return {\n          exit: \"Ieșire ecran complet\",\n          view: \"Vezi tot ecranul\",\n          title: \"controlul pe tot ecranul\"\n        };\n      // Russian\n      case \"ru\":\n        return {\n          exit: \"Выход из полноэкранного режима\",\n          view: \"Просмотреть весь экран\",\n          title: \"Полноэкранный контроль\"\n        };\n      // Serbian\n      case \"sr\":\n        return {\n          exit: \"Излаз из целог екрана\",\n          view: \"Погледај преко целог екрана\",\n          title: \"фуллсцреен контрола\"\n        };\n      // Slovak\n      case \"sk\":\n        return {\n          exit: \"Skončiť celú obrazovku\",\n          view: \"pohľad na celú obrazovku\",\n          title: \"fullscreen kontrola\"\n        };\n      // Slovenian\n      case \"sl\":\n        return {\n          exit: \"Izhod celozaslonski\",\n          view: \"Poglej celozaslonski\",\n          title: \"celozaslonski nadzor\"\n        };\n      // Swedish\n      case \"sv\":\n        return {\n          exit: \"Avsluta helskärm\",\n          view: \"Visa helskärm\",\n          title: \"Full skärms kontroll\"\n        };\n      // Thai\n      case \"th\":\n        return {\n          exit: \"แบบเต็มหน้าจอออกจาก\",\n          view: \"ดูแบบเต็มจอ\",\n          title: \"การควบคุมแบบเต็มหน้าจอ\"\n        };\n      // Turkish\n      case \"tr\":\n        return {\n          exit: \"Tam ekrandan çık\",\n          view: \"Tam ekran görüntüle\",\n          title: \"Tam Ekran kontrolü\"\n        };\n      // Ukrainian\n      case \"uk\":\n        return {\n          exit: \"Вихід з повноекранного режиму\",\n          view: \"Переглянути весь екран\",\n          title: \"Редакція контроль\"\n        };\n      // Vietnamese\n      case \"vi\":\n        return {\n          exit: \"Thoát toàn màn hình\",\n          view: \"Xem toàn màn hình\",\n          title: \"kiểm soát toàn màn hình\"\n        };\n      // English\n      case \"en\":\n      default:\n        return {\n          exit: \"Exit Fullscreen\",\n          view: \"View Fullscreen\",\n          title: \"Fullscreen Control\"\n        };\n    }\n  }\n}\n// # sourceMappingURL=FullScreenControl.js.map\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport Config from \"app.config\";\nimport { isFunc } from \"utilities\";\nimport { FullscreenControl } from \"./FullscreenControl\";\n\nconst AzureMaps = window.atlas;\n\nexport class AzureMap extends Component {\n  componentDidMount() {\n    if (!this.map && this.props.azureMapsKey) {\n      this.initializeMap(this.props.azureMapsKey);\n    }\n  }\n\n  componentDidUpdate() {\n    if (!this.map && this.props.azureMapsKey) {\n      this.initializeMap(this.props.azureMapsKey);\n    }\n  }\n\n  componentWillUnmount() {\n    // Clean up the azure map resources on unmount\n    if (this.map) this.map.remove();\n  }\n\n  shouldComponentUpdate(nextProps) {\n    // Component props never result in a dom updates from React\n    return false;\n  }\n\n  initializeMap(azureMapsKey) {\n    this.map = new AzureMaps.Map(this.props.mapDivId, {\n      \"subscription-key\": azureMapsKey,\n      center: Config.mapCenterPosition,\n      zoom: 10,\n      style: \"satellite_road_labels\"\n    });\n\n    this.map.addEventListener(\"load\", () => {\n      if (isFunc(this.props.onMapReady)) {\n        this.props.onMapReady(this.map);\n      }\n    });\n\n    // Wait until the map resources are ready.\n    this.map.events.add(\"ready\", () => {\n      // Optional. Add the map style control so we can see how the custom control reacts.\n      this.map.controls.add(\n        [\n          new AzureMaps.control.StyleControl(),\n          // Add the custom control to the map.\n          new FullscreenControl({\n            style: \"auto\"\n          })\n        ],\n        {\n          position: \"top-left\"\n        }\n      );\n      this.map.controls.add(\n        [\n          // Add zoom control to the map\n          new AzureMaps.control.ZoomControl({\n            style: \"light\"\n          })\n        ],\n        {\n          position: \"top-right\"\n        }\n      );\n    });\n  }\n\n  render() {\n    return <div id={this.props.mapDivId}></div>;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport update from \"immutability-helper\";\n\nimport { AjaxError, Indicator } from \"components/shared\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelOverlay,\n  PanelError,\n  ContextMenuAlign,\n  NoMapImage\n} from \"components/shared\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { AzureMap } from \"components/shared/azureMapPanel/azureMap\";\nimport { zoomToGeometry } from \"utilities\";\nimport \"./mapPanel.scss\";\n\nconst AzureMaps = window.atlas;\n\nconst deviceToMapPin = latLong =>\n  new AzureMaps.data.Feature(new AzureMaps.data.Point(latLong));\n\nexport class MapPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { selectedDeviceId: undefined };\n  }\n\n  componentDidUpdate() {\n    this.calculatePins(this.props);\n  }\n\n  onMapReady = map => {\n    // Create the map popup\n    this.popup = new AzureMaps.Popup();\n    this.map = map;\n    this.calculatePins(this.props, true);\n  };\n\n  calculatePins(props, mounting = false) {\n    if (this.map) {\n      if (this.props.farm && this.props.farm.geometry) {\n        const geoJson = this.props.farm.geometry;\n\n        zoomToGeometry(this.map, geoJson);\n\n        let polygon;\n        if (geoJson.type === \"Polygon\") {\n          polygon = new AzureMaps.data.Polygon(geoJson.coordinates);\n        } else if (geoJson.type === \"MultiPolygon\") {\n          polygon = new AzureMaps.data.MultiPolygon(geoJson.coordinates);\n        }\n\n        this.map.addPolygons([polygon], {\n          name: \"farm-boundary\",\n          color: \"#1e90ff\",\n          opacity: 0.5,\n          overwrite: true\n        });\n      }\n      if (props.sensorPlacementLatLong) {\n        const { normal } = this.devicesToPins(props.sensorPlacementLatLong);\n        this.map.addPins(normal, {\n          name: \"sensor-placement\",\n          fillColor: \"blue\",\n          overwrite: true\n        });\n      }\n    }\n  }\n\n  extractGeoLocatedDevices(devices, farmId) {\n    return Object.keys(devices)\n      .map(key => devices[key])\n      .filter(\n        device =>\n          device.latitude && device.longitude && device.farmId === farmId\n      );\n  }\n\n  devicesToPins(devices) {\n    return devices.reduce(\n      (acc, device) => {\n        const devicePin = deviceToMapPin(device);\n        const category = \"normal\";\n        if (category === \"normal\") {\n          return update(acc, {\n            [category]: { $push: [devicePin] }\n          });\n        }\n        return acc;\n      },\n      { normal: [] }\n    );\n  }\n\n  zoomToPins(pins) {\n    const lons = [];\n    const lats = [];\n    pins.forEach(({ geometry: { coordinates: [longitude, latitude] } }) => {\n      lons.push(longitude);\n      lats.push(latitude);\n    });\n\n    const swLon = Math.min.apply(null, lons);\n    const swLat = Math.min.apply(null, lats);\n    const neLon = Math.max.apply(null, lons);\n    const neLat = Math.max.apply(null, lats);\n\n    // Zoom the map to the bounding box of the devices\n    this.map.setCameraBounds({\n      bounds: [swLon, swLat, neLon, neLat],\n      padding: 50\n    });\n  }\n\n  openDeviceDetails = selectedDeviceId => this.setState({ selectedDeviceId });\n\n  closeDeviceDetails = () => this.setState({ selectedDeviceId: undefined });\n\n  render() {\n    const {\n      t,\n      isPending,\n      mapKeyIsPending,\n      azureMapsKey,\n      error,\n      latestMapDate,\n      sensorPlacementLatLong,\n      page\n    } = this.props;\n    const showOverlay = !error && isPending && mapKeyIsPending;\n    return page === \"Maps\" ? (\n      <div className={\"modal-sensor-placement\"}>\n        <div>\n          {sensorPlacementLatLong ? (\n            <React.Fragment>\n              <AzureMap\n                azureMapsKey={azureMapsKey}\n                onMapReady={this.onMapReady}\n                mapDivId={\"sensor-placement-map\"}\n              />\n            </React.Fragment>\n          ) : null}\n        </div>\n      </div>\n    ) : (\n      <Panel className=\"sensor-map-panel-container\">\n        <PanelHeader>\n          <PanelHeaderLabel>\n            {t(\"farms.panel.sensorPlacement\")}{\" \"}\n          </PanelHeaderLabel>\n          <ContextMenuAlign right={true}>{latestMapDate}</ContextMenuAlign>\n          {!showOverlay && isPending && <Indicator size=\"small\" />}\n        </PanelHeader>\n        <PanelContent>\n          <div className=\"map-panel-container\">\n            {sensorPlacementLatLong ? (\n              <React.Fragment>\n                <AzureMap\n                  azureMapsKey={azureMapsKey}\n                  onMapReady={this.onMapReady}\n                  mapDivId={\"sensor-placement-map\"}\n                />\n              </React.Fragment>\n            ) : (\n              <NoMapImage\n                msg={t(\"maps.modal.noMapYet\")}\n                className={\"no-map\"}\n                t={t}\n              />\n            )}\n          </div>\n        </PanelContent>\n        {showOverlay && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {!mapKeyIsPending && !this.props.azureMapsKey && (\n          <PanelError>{t(\"dashboard.panels.map.notSupportedError\")}</PanelError>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { MapPanel } from \"./mapPanel\";\nimport { getAzureMapsKey } from \"store/reducers/appReducer\";\n\nconst mapStateToProps = state => ({\n  azureMapsKey: getAzureMapsKey(state)\n});\n\nexport const MapPanelContainer = connect(mapStateToProps)(MapPanel);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { MapService } from \"services\";\nimport { Panel, PanelError, AjaxError } from \"components/shared\";\nimport \"./sensorPlacementMap.scss\";\nimport { MapPanelContainer as MapPanel } from \"./mapPanel.container\";\nimport { latestMapIndex, dateFormat } from \"utilities\";\nimport moment from \"moment\";\nimport { svgs } from \"utilities\";\n\nconst noMapImage = svgs.NoMapImage;\nexport class SensorPlacementMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isPending: true,\n      sensorPlacementLatLong: undefined,\n      isModalOpen: false,\n      mapName: undefined,\n      sensorPlacementUrl: undefined,\n      mapFound: undefined\n    };\n    this.onSensorPlacementClick = this.onSensorPlacementClick.bind(this);\n    this.onModalclose = this.onModalclose.bind(this);\n    this.generateSensorPlacementUrl = this.generateSensorPlacementUrl.bind(\n      this\n    );\n    this.generateSensorPlacementUrl();\n  }\n\n  onSensorPlacementClick() {\n    const { t } = this.props;\n    this.setState({\n      isModalOpen: true,\n      mapName: t(\"farms.panel.sensorPlacement\")\n    });\n  }\n\n  onModalclose() {\n    this.setState({ isModalOpen: false, modalName: undefined });\n  }\n\n  generateSensorPlacementUrl() {\n    let LatestMapScene;\n    MapService.getLatestSensorPlacementMapByFarmId(this.props.farmId).subscribe(\n      maps => {\n        if (maps.length !== 0) {\n          LatestMapScene = maps[latestMapIndex];\n          this.setState({\n            sensorPlacementLatLong: LatestMapScene.properties.sensor_placements,\n            latestMapDate: moment(LatestMapScene.date).format(dateFormat)\n          });\n        } else {\n          this.setState({ noMapUrl: noMapImage });\n        }\n      },\n      sceneError => this.setState({ sceneError })\n    );\n  }\n\n  render() {\n    const {\n      t,\n      azureMapsKey,\n      farmId,\n      farm,\n      mapKeyIsPending,\n      isPending,\n      farmsError\n    } = this.props;\n    const {\n      sensorPlacementLatLong,\n      latestMapDate,\n      sceneError,\n      noMapUrl\n    } = this.state;\n    const error = sceneError || farmsError;\n\n    return (\n      <Panel className=\"map-panel-container\">\n        {!error && (\n          <MapPanel\n            azureMapsKey={azureMapsKey}\n            farmId={farmId}\n            farm={farm}\n            sensorPlacementLatLong={sensorPlacementLatLong}\n            mapKeyIsPending={mapKeyIsPending}\n            isPending={isPending}\n            t={t}\n            noMapUrl={noMapUrl}\n            latestMapDate={latestMapDate}\n          />\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Svg } from \"components/shared\";\nimport { svgs, renderUndefined, isDef } from \"utilities\";\nimport { ModalHeader } from \"..\";\nimport {\n  Select,\n  Indicator,\n  PropertyGrid as Grid,\n  PropertyRow as Row,\n  PropertyCell as Cell\n} from \"components/shared\";\nimport { MapPanelContainer as MapPanel } from \"components/pages/farmDetails/panels/sensorPlacementMap\";\n\nimport {\n  joinClasses,\n  mapModalType,\n  getDownloadRequest,\n  contentTypeExtensionsMap\n} from \"utilities\";\nimport \"./modal.scss\";\n\nconst downloadOptionRenderer = option => {\n  return (\n    <div className=\"inline\">\n      <div className=\"fileName\">{option.label}</div>\n      <Svg className=\"right-icon\" path={svgs.downloadButton} />\n    </div>\n  );\n};\n\nexport class Modal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      disagree: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.onClose) {\n      window.addEventListener(\"keydown\", this.listenKeyboard, true);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.onClose) {\n      window.removeEventListener(\"keydown\", this.listenKeyboard, true);\n    }\n  }\n\n  listenKeyboard = event => {\n    if (event.key === \"Escape\" || event.keyCode === 27) {\n      this.props.onClose();\n    }\n  };\n\n  onOverlayClick = () => {\n    this.props.modalClose();\n  };\n\n  onClickDisagree = () => {\n    this.setState({\n      disagree: true\n    });\n  };\n\n  downloadMapFile = event => {\n    const mapName = this.props.mapName;\n    const responseType = \"blob\";\n    const aTag = \"a\";\n    const extension = event.target.value.contentType;\n    const xhr = new XMLHttpRequest();\n    xhr.open(getDownloadRequest, event.target.value.value, true);\n    xhr.responseType = responseType;\n    xhr.onload = function() {\n      const urlCreator = window.URL || window.webkitURL;\n      const imageUrl = urlCreator.createObjectURL(this.response);\n      const tag = document.createElement(aTag);\n      tag.href = imageUrl;\n      tag.download = mapName + (contentTypeExtensionsMap.get(extension) || \"\");\n      document.body.appendChild(tag);\n      tag.click();\n      document.body.removeChild(tag);\n    };\n    xhr.send();\n  };\n\n  render() {\n    const {\n      farmName,\n      name,\n      type,\n      blobUrl,\n      t,\n      mapDate,\n      className,\n      latestCreatedAt,\n      mapFileDownloadSelectObject,\n      isPending,\n      noMapImage,\n      noMaps,\n      isMapFound,\n      noPngMaps,\n      sensorPlacementLatLong,\n      farm\n    } = this.props;\n\n    if (type === mapModalType) {\n      return (\n        <div className={joinClasses(\"modal-map\", \"open-map\", className)}>\n          <article className=\"content-wrapper-map\">\n            <ModalHeader modalClose={this.props.modalClose}>{name}</ModalHeader>\n            <Grid>\n              <Row className=\"properties\">\n                <Cell className=\"col-3\">\n                  <Row className=\"name-section\">\n                    <Cell className=\"col-2 text\">\n                      <span>{t(\"maps.modal.farm\")}</span>\n                    </Cell>\n                    <Cell className=\"col-7 modalfarm-name\">\n                      {renderUndefined(farmName)}\n                    </Cell>\n                  </Row>\n                </Cell>\n                <Cell className=\"col-3\">\n                  <span>\n                    {t(\"maps.modal.mapDate\") + renderUndefined(mapDate)}{\" \"}\n                  </span>\n                </Cell>\n                <Cell className=\"col-3\">\n                  <span>\n                    {t(\"maps.modal.generatedDate\") +\n                      renderUndefined(latestCreatedAt)}\n                  </span>\n                </Cell>\n                <Cell className=\"col-2 download-map\">\n                  <Select\n                    className=\"download-dropdown\"\n                    closeMenuOnSelect={false}\n                    options={mapFileDownloadSelectObject}\n                    clearable={false}\n                    searchable={false}\n                    onChange={this.downloadMapFile}\n                    placeholder={\n                      <div className=\"Select-placeholder\">\n                        <Svg path={svgs.downloadButton} />\n                        {t(\"maps.modal.downloadMap\")}\n                      </div>\n                    }\n                    defaultValue={mapFileDownloadSelectObject[0]}\n                    optionRenderer={downloadOptionRenderer}\n                  />\n                </Cell>\n              </Row>\n            </Grid>\n            <div className=\"line\" />\n            {isPending && <Indicator className=\"no-map-loader\" />}\n            {!isPending &&\n              ((noMaps || !blobUrl) &&\n                !(\n                  name === \"sensor-placement\" && isDef(sensorPlacementLatLong)\n                ) && (\n                  <div>\n                    <center>\n                      <div className=\"no-preview\" id=\"no-preview\">\n                        <img src={svgs.NoMapImage} alt=\"\" />\n\n                        <div className=\"no-maps\">\n                          {/* <p>\n                              <b>{t(\"maps.modal.badUrl\")}</b>\n                            </p> */}\n                          <p className=\"nomap-text\" id=\"nomap-text\">\n                            {t(\"maps.modal.noMapYet\")}\n                          </p>\n                          {/* <center>\n                              <Link className=\"nomap-Url\" to={\"#\"}>\n                                <span>{t(\"maps.modal.reportIt\")}</span>\n                              </Link>\n                            </center> */}\n                        </div>\n                      </div>\n                    </center>\n                  </div>\n                ))}\n            {name === \"sensor-placement\" && sensorPlacementLatLong ? (\n              <MapPanel\n                farm={farm}\n                sensorPlacementLatLong={sensorPlacementLatLong}\n                page={\"Maps\"}\n                t={t}\n              />\n            ) : (\n              !isPending &&\n              !noMaps &&\n              !noPngMaps && (\n                <div>\n                  <center>\n                    {isMapFound ? (\n                      <div className=\"modal-image\">\n                        <img src={blobUrl} alt=\"Map\" />\n                        <p>{t(\"maps.modal.Disclaimer\")}</p>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    <div\n                      className={\n                        noMapImage ? \"no-preview modal-image\" : \"mapModal-image\"\n                      }\n                    >\n                      {blobUrl && !isMapFound && (\n                        <img src={blobUrl} alt={t(\"maps.modal.noMap\")} />\n                      )}\n                      {!noMapImage && <p>{t(\"maps.modal.Disclaimer\")}</p>}\n                      {blobUrl === noMapImage && (\n                        <div className=\"no-maps\">\n                          <p>\n                            <b>{t(\"maps.modal.noMapYet\")}</b>\n                          </p>\n                          <p className=\"nomap-text\">\n                            {t(\"maps.modal.noGeneratedYet\")}\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  </center>\n                </div>\n              )\n            )}\n          </article>\n        </div>\n      );\n    }\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelError,\n  ContextMenuAlign,\n  AjaxError\n} from \"components/shared\";\nimport moment from \"moment\";\nimport { Modal } from \"components/shared/mapsModal/modal/modal\";\nimport {\n  jobsDateFormat,\n  farmNameLoading,\n  svgs,\n  getSceneData,\n  getPNGFilefromSceneFiles\n} from \"utilities\";\nimport \"./satelliteIndicesMap.scss\";\nimport { appInsights } from \"applicationInsights\";\n\nconst eviMapType = \"evi\";\nconst ndwiMapType = \"ndwi\";\nconst noMapImage = svgs.NoMapImage;\nexport class SatelliteIndicesMap extends Component {\n  constructor(props) {\n    super(props);\n    const farmId = this.props.farmId;\n    const mapsData = this.props.maps;\n    this.state = {\n      isPending: true,\n      isModalopen: false,\n      modalName: undefined,\n      mapName: undefined,\n      eviUrl: undefined,\n      ndwiUrl: undefined,\n      isEviMapFound: undefined,\n      isNdwiMapFound: undefined,\n      eviMapFileDownloadSelectObject: [],\n      ndwiMapFileDownloadSelectObject: [],\n      isEviMapBroken: undefined,\n      isNdwiMapBroken: undefined,\n      farmName: props.farmName ? props.farmName : farmNameLoading\n    };\n    this.onMapImageClick = this.onMapImageClick.bind(this);\n    this.onModalclose = this.onModalclose.bind(this);\n    this.getEviSceneData = this.getEviSceneData.bind(this);\n    this.getNdwiSceneData = this.getNdwiSceneData.bind(this);\n    this.getEviSceneData(eviMapType, farmId, mapsData);\n    this.getNdwiSceneData(ndwiMapType, farmId, mapsData);\n  }\n\n  onMapImageClick(mapName, modalMapName) {\n    this.setState({\n      isModalopen: true,\n      mapName: mapName,\n      modalName: modalMapName\n    });\n    appInsights.trackEvent({\n      name: \"UiEvent:ModalOpen: Satellite Indices \" + modalMapName\n    });\n  }\n\n  onModalclose() {\n    appInsights.trackEvent({\n      name: \"UiEvent:ModalClose: Satellite Indices \" + this.state.modalMapName\n    });\n    this.setState({ ...this.state, isModalopen: false, modalName: undefined });\n  }\n\n  getEviSceneData(eviMapType, farmId, mapsData) {\n    getSceneData(eviMapType, farmId, mapsData, this.eviSceneDataCallback);\n  }\n\n  eviSceneDataCallback = (eviSelectedObject, eviMapData, sceneError) => {\n    if (sceneError) {\n      this.setState({ sceneError });\n    } else if (eviMapData.mapFound) {\n      const pngUrl = getPNGFilefromSceneFiles(eviSelectedObject);\n      this.setState({\n        eviUrl: pngUrl,\n        mapFound: eviMapData.mapFound,\n        latestMapDate: eviMapData.latestMapDate,\n        latestCreatedAt: eviMapData.latestCreatedAt,\n        isEviMapFound: eviMapData.mapFound,\n        eviMapFileDownloadSelectObject:\n          eviSelectedObject.mapFileDownloadSelectObject\n      });\n    } else {\n      this.setState({\n        eviUrl: eviMapData.url,\n        mapFound: eviMapData.mapFound,\n        isEviMapFound: eviMapData.mapFound\n      });\n    }\n  };\n  getNdwiSceneData(ndwiMapType, farmId, mapsData) {\n    getSceneData(ndwiMapType, farmId, mapsData, this.ndwiSceneDataCallback);\n  }\n\n  ndwiSceneDataCallback = (ndwiSelectedObject, ndwiMapData, sceneError) => {\n    if (sceneError) {\n      this.setState({ sceneError });\n    } else if (ndwiMapData.mapFound) {\n      const pngUrl = getPNGFilefromSceneFiles(ndwiSelectedObject);\n      this.setState({\n        ndwiUrl: pngUrl,\n        mapFound: ndwiMapData.mapFound,\n        latestMapDate: ndwiMapData.latestMapDate,\n        latestCreatedAt: ndwiMapData.latestCreatedAt,\n        isNdwiMapFound: ndwiMapData.mapFound,\n        ndwiMapFileDownloadSelectObject:\n          ndwiSelectedObject.mapFileDownloadSelectObject\n      });\n    } else {\n      this.setState({\n        ndwiUrl: ndwiMapData.url,\n        mapFound: ndwiMapData.mapFound,\n        isNdwiMapFound: ndwiMapData.mapFound\n      });\n    }\n  };\n\n  onError = (name, value) => {\n    this.setState({ [name]: value });\n  };\n  render() {\n    const { t, farmsError } = this.props;\n    const {\n      sceneError,\n      mapName,\n      eviUrl,\n      ndwiUrl,\n      latestMapDate,\n      isEviMapFound,\n      isNdwiMapFound,\n      eviMapFileDownloadSelectObject,\n      ndwiMapFileDownloadSelectObject,\n      modalName,\n      latestCreatedAt,\n      farmName,\n      isEviMapBroken,\n      isNdwiMapBroken\n    } = this.state;\n    const error = sceneError || farmsError;\n\n    return (\n      <Panel className>\n        <PanelHeader className=\"ph\">\n          <PanelHeaderLabel>\n            {t(\"farms.panel.satelliteindices\")}\n          </PanelHeaderLabel>\n          <ContextMenuAlign right={true}>{latestMapDate}</ContextMenuAlign>\n        </PanelHeader>\n\n        <PanelContent>\n          {isEviMapFound === undefined ? (\n            <div className=\"shimmer-panel\"> </div>\n          ) : (\n            <img\n              className={\n                isEviMapFound && !isEviMapBroken ? \"image-map\" : \"image\"\n              }\n              src={eviUrl}\n              onClick={\n                isEviMapFound &&\n                (() =>\n                  this.onMapImageClick(t(\"farms.panel.eviMaps\"), eviMapType))\n              }\n              alt={\n                isEviMapBroken\n                  ? t(\"dashboard.panels.map.corruptImageError\")\n                  : t(\"farms.panel.noEvi\")\n              }\n              onError={() => {\n                this.onError(\"isEviMapBroken\", true);\n              }}\n            />\n          )}\n          {isNdwiMapFound === undefined ? (\n            <div className=\"shimmer-panel\"> </div>\n          ) : (\n            <img\n              className={\n                isNdwiMapFound && !isNdwiMapBroken ? \"image-map\" : \"image\"\n              }\n              src={ndwiUrl}\n              onClick={\n                isNdwiMapFound &&\n                (() =>\n                  this.onMapImageClick(t(\"farms.panel.ndwiMaps\"), ndwiMapType))\n              }\n              alt={\n                isNdwiMapBroken\n                  ? t(\"dashboard.panels.map.corruptImageError\")\n                  : t(\"farms.panel.noNdwi\")\n              }\n              onError={() => {\n                this.onError(\"isNdwiMapBroken\", true);\n              }}\n            />\n          )}\n          {isEviMapFound === false ? (\n            <div className=\"col-one\">{t(\"maps.modal.noMapYet\")}</div>\n          ) : (\n            \"\"\n          )}\n          {isNdwiMapFound === false ? (\n            <div className=\"col-one\">{t(\"maps.modal.noMapYet\")}</div>\n          ) : (\n            \"\"\n          )}\n          <div className=\"col-one\">{t(\"farms.panel.evi\")}</div>\n          <div className=\"col-one\">{t(\"farms.panel.ndwi\")}</div>\n          {modalName === eviMapType && (\n            <Modal\n              type=\"MAP-MODAL\"\n              name={mapName}\n              farmName={farmName}\n              mapName={\n                eviMapType +\n                \"_\" +\n                farmName +\n                \"_\" +\n                moment(latestMapDate).format(jobsDateFormat)\n              }\n              modalClose={this.onModalclose}\n              mapFileDownloadSelectObject={eviMapFileDownloadSelectObject}\n              mapDate={latestMapDate}\n              latestCreatedAt={latestCreatedAt}\n              blobUrl={eviUrl}\n              noMapImage={noMapImage}\n              isMapFound={isEviMapFound}\n              t={t}\n            />\n          )}\n          {modalName === ndwiMapType && (\n            <Modal\n              type=\"MAP-MODAL\"\n              name={mapName}\n              farmName={farmName}\n              mapName={\n                ndwiMapType +\n                \"_\" +\n                farmName +\n                \"_\" +\n                moment(latestMapDate).format(jobsDateFormat)\n              }\n              modalClose={this.onModalclose}\n              mapFileDownloadSelectObject={ndwiMapFileDownloadSelectObject}\n              mapDate={latestMapDate}\n              latestCreatedAt={latestCreatedAt}\n              blobUrl={ndwiUrl}\n              noMapImage={noMapImage}\n              isMapFound={isNdwiMapFound}\n              t={t}\n            />\n          )}\n        </PanelContent>\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelError,\n  AjaxError,\n  ContextMenuAlign\n} from \"components/shared\";\nimport \"./soilMoistureMap.scss\";\nimport { svgs, getSceneData, getPNGFilefromSceneFiles } from \"utilities\";\nimport { Modal } from \"components/shared/mapsModal/modal/modal\";\nimport { mapModalType, farmNameLoading } from \"utilities\";\nimport { appInsights } from \"applicationInsights\";\n\nconst sceneMapType = \"soil-moisture\";\nlet mapFileDownloadSelectObject = [];\nconst noMapImage = svgs.NoMapImage;\nexport class SoilMoistureMap extends Component {\n  constructor(props) {\n    super(props);\n    const farmId = this.props.farmId;\n    const mapsData = this.props.maps;\n    this.state = {\n      isPending: true,\n      isModalOpen: false,\n      mapName: undefined,\n      url: undefined,\n      mapFound: undefined,\n      farmName: farmNameLoading\n    };\n    this.onSoilMoistureClick = this.onSoilMoistureClick.bind(this);\n    this.onModalclose = this.onModalclose.bind(this);\n    this.getSoilMoistureSceneData = this.getSoilMoistureSceneData.bind(this);\n    this.getSoilMoistureSceneData(sceneMapType, farmId, mapsData);\n  }\n  onSoilMoistureClick() {\n    const { t } = this.props;\n    this.setState({\n      isModalOpen: true,\n      mapName: t(\"farms.panel.soilMoisture\")\n    });\n    appInsights.trackEvent({ name: \"UiEvent:ModalOpen: Soil Moisture\" });\n  }\n\n  onModalclose() {\n    appInsights.trackEvent({ name: \"UiEvent:ModalClose: Soil Moisture\" });\n    this.setState({ isModalOpen: false, modalName: undefined });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      !this.props.farmNameLoading &&\n      prevProps.farmName !== this.props.farmName\n    )\n      this.setState({ farmName: this.props.farmName });\n  }\n  getSoilMoistureSceneData(sceneMapType, farmId, mapsData) {\n    getSceneData(sceneMapType, farmId, mapsData, this.sceneDataCallback);\n  }\n  sceneDataCallback = (selectedObject, mapData, sceneError) => {\n    if (sceneError) {\n      this.setState({ sceneError });\n    } else if (mapData.mapFound) {\n      const pngUrl = getPNGFilefromSceneFiles(selectedObject);\n      this.setState({\n        url: pngUrl,\n        mapFound: mapData.mapFound,\n        latestMapDate: mapData.latestMapDate,\n        latestCreatedAt: mapData.latestCreatedAt\n      });\n      mapFileDownloadSelectObject = selectedObject.mapFileDownloadSelectObject;\n    } else {\n      this.setState({\n        url: mapData.url,\n        mapFound: mapData.mapFound\n      });\n    }\n  };\n\n  onImgError = (name, value) => {\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const { t, farmsError } = this.props;\n    const {\n      sceneError,\n      isModalOpen,\n      mapName,\n      url,\n      mapFound,\n      latestMapDate,\n      latestCreatedAt,\n      farmName,\n      isSoilMoistureImageBroken\n    } = this.state;\n    const error = sceneError || farmsError;\n\n    return (\n      <Panel>\n        <PanelHeader>\n          <PanelHeaderLabel>{t(\"farms.panel.soilMoisture\")}</PanelHeaderLabel>\n          <ContextMenuAlign right={true}>\n            <div id=\"date\">{latestMapDate}</div>\n          </ContextMenuAlign>\n        </PanelHeader>\n\n        <PanelContent>\n          {mapFound === undefined ? (\n            <div className=\"shimmer-soil-panel\"> </div>\n          ) : (\n            <div className=\"no-maping\">\n              <img\n                className={mapFound ? \"map-img\" : \"no-map-img\"}\n                src={url}\n                onClick={mapFound && this.onSoilMoistureClick}\n                alt={\n                  isSoilMoistureImageBroken\n                    ? t(\"dashboard.panels.map.corruptImageError\")\n                    : t(\"farms.panel.noSoilMoisture\")\n                }\n                onError={() =>\n                  this.onImgError(\"isSoilMoistureImageBroken\", true)\n                }\n              />\n              {mapFound === false && (\n                <div className=\"soil-col-one\">{t(\"maps.modal.noMapYet\")}</div>\n              )}\n            </div>\n          )}\n          {isModalOpen && (\n            <Modal\n              type={mapModalType}\n              name={mapName}\n              farmName={farmName}\n              modalClose={this.onModalclose}\n              mapDate={latestMapDate}\n              latestCreatedAt={latestCreatedAt}\n              blobUrl={url}\n              noMapImage={noMapImage}\n              isMapFound={mapFound}\n              mapFileDownloadSelectObject={mapFileDownloadSelectObject}\n              t={t}\n            />\n          )}\n        </PanelContent>\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { AjaxError, Indicator } from \"components/shared\";\nimport {\n  Panel,\n  PanelContent,\n  PanelError,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelMsg,\n  PanelOverlay\n} from \"components/shared\";\nimport { RulesGrid, rulesColumnDefs } from \"components/pages/rules/rulesGrid\";\nimport { LinkRenderer } from \"components/shared/cellRenderers\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { translateColumnDefs } from \"utilities\";\n\nexport class AlertsPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.columnDefs = [\n      {\n        ...rulesColumnDefs.ruleName,\n        cellRendererFramework: undefined, // Hide soft select link\n        minWidth: 200\n      },\n      rulesColumnDefs.severity,\n      {\n        headerName: \"rules.grid.count\",\n        field: \"count\"\n      },\n      {\n        ...rulesColumnDefs.explore,\n        cellRendererFramework: props => (\n          <LinkRenderer {...props} to={`/maintenance/rule/${props.value}`} />\n        )\n      }\n    ];\n  }\n\n  render() {\n    const { t, alerts, isPending, error } = this.props;\n    const gridProps = {\n      columnDefs: translateColumnDefs(t, this.columnDefs),\n      rowData: alerts,\n      suppressFlyouts: true,\n      domLayout: \"autoHeight\",\n      deltaRowDataMode: false,\n      t\n    };\n    const showOverlay = isPending && !alerts.length;\n    return (\n      <Panel className=\"alerts-panel-container\">\n        <PanelHeader>\n          <PanelHeaderLabel>\n            {t(\"dashboard.panels.alerts.header\")}\n          </PanelHeaderLabel>\n          {!showOverlay && isPending && <Indicator size=\"small\" />}\n        </PanelHeader>\n        <PanelContent>\n          <RulesGrid {...gridProps} />\n          {!showOverlay && alerts.length === 0 && (\n            <PanelMsg>{t(\"dashboard.noData\")}</PanelMsg>\n          )}\n        </PanelContent>\n        {showOverlay && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { AlertsPanel } from \"./alertsPanel\";\n\nexport const AlertsPanelContainer = connect(null)(AlertsPanel);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport update from \"immutability-helper\";\n\nimport Config from \"app.config\";\nimport { AjaxError, Indicator } from \"components/shared\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelOverlay,\n  PanelError\n} from \"components/shared\";\nimport { DeviceDetailsContainer } from \"components/pages/devices/flyouts/deviceDetails\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { AzureMap } from \"components/shared/azureMapPanel/azureMap\";\nimport { zoomToGeometry } from \"utilities\";\n\nimport \"./mapPanel.scss\";\n\nconst AzureMaps = window.atlas;\nconst nominalDeviceLayer = \"devices-nominal-layer\";\nconst warningDevicesLayer = \"devices-warning-layer\";\nconst criticalDevicesLayer = \"devices-critical-layer\";\n\nconst deviceToMapPin = ({ farmName, latitude, longitude, name }) =>\n  new AzureMaps.data.Feature(new AzureMaps.data.Point([longitude, latitude]), {\n    farmName,\n    name\n  });\n\nexport class MapPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { selectedDeviceId: undefined }; // agadhika Possible cleanup\n  }\n\n  componentDidUpdate() {\n    this.calculatePins(this.props);\n  }\n\n  onMapReady = map => {\n    // Create the map popup\n    this.popup = new AzureMaps.Popup();\n\n    // Create the device pin layers and bind click events\n    [\n      [nominalDeviceLayer, \"nominal\", \"pin-blue\"],\n      [warningDevicesLayer, \"warning\", \"pin-darkblue\"],\n      [criticalDevicesLayer, \"alert\", \"pin-red\"]\n    ].forEach(([name, classname, icon]) => {\n      map.addPins([], { name, icon, cluster: true });\n      map.addEventListener(\"click\", name, event => {\n        const [pin] = event.features;\n        this.popup.setPopupOptions({\n          position: pin.geometry.coordinates,\n          content: this.buildDevicePopup(pin.properties, classname) // agadhika Possible cleanup\n        });\n        this.popup.open(map);\n      });\n    });\n\n    // Save this.map here to prevent calculatePins\n    // from being called before the pins are added\n    this.map = map;\n    this.calculatePins(this.props, true);\n  };\n\n  buildDevicePopup = (properties, classname) => {\n    // agadhika Possible cleanup\n    const popupContentBox = document.createElement(\"div\");\n    popupContentBox.classList.add(\"popup-content-box\");\n    popupContentBox.classList.add(classname);\n\n    const type = document.createElement(\"div\");\n    type.classList.add(\"popup-type\");\n    type.innerText = properties.farmName;\n\n    const name = document.createElement(\"div\");\n    name.classList.add(\"popup-device-name\");\n    name.innerText = properties.name;\n\n    popupContentBox.appendChild(type);\n    popupContentBox.appendChild(name);\n\n    popupContentBox.onclick = () => {\n      // Check this to void any potential attempts to reference the component after unmount\n      if (this) this.openDeviceDetails(properties.id);\n    };\n\n    return popupContentBox;\n  };\n\n  calculatePins(props, mounting = false) {\n    if (this.map) {\n      if (this.props.farm && this.props.farm.geometry) {\n        const geoJson = this.props.farm.geometry;\n\n        // Calculating boundary pins to zoom to bounding box\n        zoomToGeometry(this.map, geoJson);\n\n        // Actuallly drawing the Polygon/MultiPolygon\n        let polygon;\n        if (geoJson.type === \"Polygon\") {\n          polygon = new AzureMaps.data.Polygon(geoJson.coordinates);\n        } else if (geoJson.type === \"MultiPolygon\") {\n          polygon = new AzureMaps.data.MultiPolygon(geoJson.coordinates);\n        }\n        // !NOTE: addPolygons doesn't exist in any documentation.\n        // In this commit, support for MultiPolygon was added. The part of the\n        // code that actually draws the polygon was not touched.\n        // At the time of this commit, the docs (https://docs.microsoft.com/en-us/azure/azure-maps/map-add-shape)\n        // suggest this snippet of code:\n\n        // const dataSource = new atlas.source.DataSource();\n        // map.sources.add(dataSource);\n\n        // // Create a rectangular polygon.\n        // dataSource.add(\n        //   new atlas.data.Feature(\n        //     new atlas.data.Polygon([                                                         // or MultiPolygon\n        //       [\n        //         [-73.98235, 40.76799],\n        //         [-73.95785, 40.80044],\n        //         [-73.94928, 40.7968],\n        //         [-73.97317, 40.76437],\n        //         [-73.98235, 40.76799]\n        //       ]\n        //     ])\n        //   )\n        // );\n\n        // // Create and add a polygon layer to render the polygon to the map.\n        // map.layers.add(\n        //   new atlas.layer.PolygonLayer(dataSource, null, {                                  // NOT MultiPolygonLayer\n        //     fillColor: \"red\",\n        //     opacaty: 0.5\n        //   })\n        // );\n\n        this.map.addPolygons([polygon], {\n          name: \"farm-azure-map\",\n          color: \"#1e90ff\",\n          opacity: 0.5,\n          overwrite: true\n        });\n      }\n      // if (props.analyticsVersion !== this.props.analyticsVersion || boundZoomToDevices) {\n      const geoLocatedDevices = this.extractGeoLocatedDevices(\n        props.devices || [],\n        props.farmId\n      );\n      // if (Object.keys(geoLocatedDevices).length > 0 && props.devicesInAlert) {\n      {\n        const { normal, warning, critical } = this.devicesToPins(\n          geoLocatedDevices\n        );\n\n        this.map.addPins(normal, {\n          name: nominalDeviceLayer,\n          fillColor: \"blue\",\n          overwrite: true\n        });\n        this.map.addPins(warning, {\n          name: warningDevicesLayer,\n          overwrite: true\n        });\n        this.map.addPins(critical, {\n          name: criticalDevicesLayer,\n          overwrite: true\n        });\n\n        // if (boundZoomToDevices) {\n        // this.zoomToPins([].concat.apply([], [ normal, warning, critical ]));\n        // }\n      }\n      // }\n    }\n  }\n\n  extractGeoLocatedDevices(devices, farmId) {\n    return Object.keys(devices)\n      .map(key => devices[key])\n      .filter(\n        device =>\n          device.latitude && device.longitude && device.farmId === farmId\n      );\n  }\n\n  devicesToPins(devices) {\n    return devices.reduce(\n      (acc, device) => {\n        const devicePin = deviceToMapPin(device);\n        const category = \"normal\";\n        if (\n          category === \"normal\" ||\n          category === Config.ruleSeverity.warning ||\n          category === Config.ruleSeverity.critical\n        ) {\n          return update(acc, {\n            [category]: { $push: [devicePin] }\n          });\n        }\n        return acc;\n      },\n      { normal: [], warning: [], critical: [] }\n    );\n  }\n\n  zoomToPins(pins) {\n    const lons = [];\n    const lats = [];\n    pins.forEach(({ geometry: { coordinates: [longitude, latitude] } }) => {\n      lons.push(longitude);\n      lats.push(latitude);\n    });\n\n    const swLon = Math.min.apply(null, lons);\n    const swLat = Math.min.apply(null, lats);\n    const neLon = Math.max.apply(null, lons);\n    const neLat = Math.max.apply(null, lats);\n\n    // Zoom the map to the bounding box of the devices\n    this.map.setCameraBounds({\n      bounds: [swLon, swLat, neLon, neLat],\n      padding: 50\n    });\n  }\n\n  openDeviceDetails = selectedDeviceId => this.setState({ selectedDeviceId }); // agadhika Possible cleanup\n\n  closeDeviceDetails = () => this.setState({ selectedDeviceId: undefined }); // agadhika Possible cleanup\n\n  render() {\n    const { t, isPending, mapKeyIsPending, azureMapsKey, error } = this.props;\n    const showOverlay = !error && isPending && mapKeyIsPending;\n    return (\n      <Panel className=\"map-panel-container\">\n        <PanelHeader className=\"mappanel-header\">\n          <PanelHeaderLabel>\n            {t(\"dashboard.panels.map.header\")}\n          </PanelHeaderLabel>\n          {/* { !showOverlay && isPending && <Indicator size=\"small\" /> } */}\n        </PanelHeader>\n        <PanelContent className=\"map-panel-container\">\n          {!error && (\n            <AzureMap\n              azureMapsKey={azureMapsKey}\n              onMapReady={this.onMapReady}\n              mapDivId={\"farm-boundary-map\"}\n            />\n          )}\n        </PanelContent>\n        {showOverlay && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {!mapKeyIsPending && !this.props.azureMapsKey && (\n          <PanelError>{t(\"dashboard.panels.map.notSupportedError\")}</PanelError>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n        {this.state.selectedDeviceId && ( // agadhika Possible cleanup\n          <DeviceDetailsContainer\n            onClose={this.closeDeviceDetails}\n            deviceId={this.state.selectedDeviceId}\n          />\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { MapPanel } from \"./mapPanel\";\n\nexport const MapPanelContainer = connect(null)(MapPanel);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  PanelError,\n  AjaxError,\n  ContextMenuAlign\n} from \"components/shared\";\nimport { svgs, getSceneData } from \"utilities\";\nimport { Modal } from \"components/shared/mapsModal/modal/modal\";\nimport {\n  mapModalType,\n  farmNameLoading,\n  getPNGFilefromSceneFiles\n} from \"utilities\";\nimport \"./droneMap.scss\";\nimport { appInsights } from \"applicationInsights\";\nconst sceneMapType = \"drone\";\nlet mapFileDownloadSelectObject = [];\nconst noMapImage = svgs.NoMapImage;\nexport class Drone extends Component {\n  constructor(props) {\n    super(props);\n    const farmId = this.props.farmId;\n    const mapsData = this.props.maps;\n    this.state = {\n      isPending: true,\n      isModalOpen: false,\n      mapName: undefined,\n      url: undefined,\n      mapFound: undefined,\n      farmName: farmNameLoading\n    };\n    this.onDroneClick = this.onDroneClick.bind(this);\n    this.onModalclose = this.onModalclose.bind(this);\n    this.getDroneSceneData = this.getDroneSceneData.bind(this);\n    this.getDroneSceneData(sceneMapType, farmId, mapsData);\n    // generateUrl(sceneMapType, farmId, mapsData);\n  }\n\n  onDroneClick() {\n    const { t } = this.props;\n    this.setState({\n      isModalOpen: true,\n      mapName: t(\"farms.panel.Orthomosaic\")\n    });\n    appInsights.trackEvent({ name: \"UiEvent:ModalOpen: Drone Imagery\" });\n  }\n\n  onModalclose() {\n    this.setState({ isModalOpen: false, modalName: undefined });\n    appInsights.trackEvent({ name: \"UiEvent:ModalClose: Drone Imagery\" });\n  }\n\n  getDroneSceneData(sceneMapType, farmId, mapsData) {\n    getSceneData(sceneMapType, farmId, mapsData, this.sceneDataCallback);\n  }\n\n  sceneDataCallback = (selectedObject, mapData, sceneError) => {\n    if (sceneError) {\n      this.setState({ sceneError });\n    } else if (mapData.mapFound) {\n      const pngUrl = getPNGFilefromSceneFiles(selectedObject);\n      this.setState({\n        url: pngUrl,\n        mapFound: mapData.mapFound,\n        latestMapDate: mapData.latestMapDate,\n        latestCreatedAt: mapData.latestCreatedAt\n      });\n      mapFileDownloadSelectObject = selectedObject.mapFileDownloadSelectObject;\n    } else {\n      this.setState({\n        url: mapData.url,\n        mapFound: mapData.mapFound\n      });\n    }\n  };\n\n  onImgError = (name, value) => {\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const { t, farmsError } = this.props;\n    const {\n      sceneError,\n      isModalOpen,\n      mapName,\n      url,\n      mapFound,\n      latestMapDate,\n      latestCreatedAt,\n      isDroneImageBroken\n    } = this.state;\n    const error = sceneError || farmsError;\n    const { farmName } = this.props;\n\n    return (\n      <Panel>\n        <PanelHeader>\n          <PanelHeaderLabel>{t(\"farms.panel.Drone\")}</PanelHeaderLabel>\n          <ContextMenuAlign right={true}>\n            <div id=\"date\">{latestMapDate}</div>\n          </ContextMenuAlign>\n        </PanelHeader>\n\n        <PanelContent>\n          {mapFound === undefined ? (\n            <div className=\"shimmer-soil-panel\"> </div>\n          ) : (\n            <div\n              className={url !== noMapImage ? \"drone-image\" : \"nodrone-image\"}\n            >\n              <center>\n                <img\n                  src={url}\n                  onClick={mapFound && this.onDroneClick}\n                  alt={\n                    isDroneImageBroken\n                      ? t(\"dashboard.panels.map.corruptImageError\")\n                      : t(\"farms.panel.nodrone-image\")\n                  }\n                  onError={() => this.onImgError(\"isDroneImageBroken\", true)}\n                />\n                {url !== noMapImage ? (\n                  <p>{t(\"farms.panel.Orthomosaic\")}</p>\n                ) : (\n                  <p>{t(\"maps.modal.noMapYet\")}</p>\n                )}\n              </center>\n            </div>\n          )}\n          {isModalOpen && (\n            <Modal\n              type={mapModalType}\n              name={mapName}\n              farmName={farmName}\n              modalClose={this.onModalclose}\n              mapDate={latestMapDate}\n              latestCreatedAt={latestCreatedAt}\n              blobUrl={url}\n              noMapImage={noMapImage}\n              mapFileDownloadSelectObject={mapFileDownloadSelectObject}\n              t={t}\n            />\n          )}\n        </PanelContent>\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FarmService } from \"services\";\nimport { permissions } from \"services/models\";\nimport { DeleteModal } from \"components/shared/deleteModal/deleteModal\";\nimport { OverviewPanel } from \"../../pages/farmDetails/panels/overview\";\nimport {\n  svgs,\n  noMapImage,\n  satelliteIndicesJobTypeName,\n  sensorPlacementJobTypeName,\n  soilMoistureJobTypeName\n} from \"utilities\";\nimport { PanelErrorBoundary } from \"components/shared\";\nimport { SatelliteIndicesMap } from \"./panels/satelliteIndicesMap/satelliteIndicesMap\";\nimport { SoilMoistureMap } from \"./panels/soilMoistureMap\";\nimport { MapPanelContainer as MapPanel } from \"./panels\";\nimport { TelemetryPanelContainer as TelemetryPanel } from \"components/shared/telemetryPanel\";\nimport {\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  Protected,\n  // RefreshBarContainer as RefreshBar,\n  Btn,\n  Grid,\n  Cell,\n  Select,\n  GenerateMapsFlyoutContainer\n} from \"components/shared\";\nimport { SensorPlacementMap } from \"./panels/sensorPlacementMap\";\nimport {\n  EditFarmFlyout,\n  AddDevicesContainer\n} from \"components/pages/farms/flyouts\";\nimport { Drone } from \"./panels/drone\";\n\nimport \"./farmDetails.scss\";\nimport { appInsights, reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nconst satelliteIndicesMap = \"Satellite Indices\";\nconst soilMoistureMap = \"Soil Moisture\";\nconst sensorPlacementMap = \"Sensor Placement\";\n\nconst AzureMaps = window.atlas;\n\nconst initialState = {\n  deleteModalSuccess: false,\n  deleteModalError: undefined,\n  deleteFarmPending: false,\n\n  // edit Farms Flyout\n  // openFlyoutName: undefined,\n\n  // delete Farm Modal\n  openModalName: undefined,\n\n  // Analytics data\n  currentActiveAlerts: [],\n  topAlerts: [],\n  alertsPerDeviceId: {},\n  eviBlobUrl: undefined,\n  soilMoistureUrl: undefined,\n  openWarningCount: undefined,\n  openCriticalCount: undefined,\n  countMaxAlerts: 0,\n\n  // Map data\n  devicesInAlert: {},\n\n  lastRefreshed: undefined,\n  devices: []\n};\n\nconst farmsPathName = \"/farms/\";\nclass FarmDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    const farmIdFromPathNameFirstIndex =\n      this.props.location.pathname.indexOf(farmsPathName) +\n      farmsPathName.length;\n    const farmIdFromPathNameLastIndex = this.props.location.pathname.length;\n    const farmIdFromPathName = this.props.location.pathname.substring(\n      farmIdFromPathNameFirstIndex,\n      farmIdFromPathNameLastIndex\n    );\n\n    this.state = {\n      DeviceCount: [],\n      ...initialState,\n      farmId:\n        this.props && this.props.location && this.props.location.state\n          ? this.props.location.state.id\n          : farmIdFromPathName,\n      farmName:\n        this.props &&\n        this.props.location &&\n        this.props.location.state &&\n        this.props.location.state.farmName,\n      farmNameLoading:\n        this.props &&\n        this.props.location &&\n        this.props.location.state &&\n        this.props.location.state.farmName\n          ? false\n          : true\n    };\n\n    !(this.props && this.props.location && this.props.location.state) &&\n      FarmService.getFarmById(this.state.farmId).subscribe(\n        farm => {\n          this.setState({ farmNameLoading: false, farmName: farm.name });\n        },\n        error =>\n          this.setState({ farmNameError: error, farmNameLoading: false }),\n        () => {}\n      );\n\n    this.subscriptions = [];\n\n    this.createMaps = this.createMaps.bind(this);\n    this.openDeleteFarm = this.openDeleteFarm.bind(this);\n    // TOBEADDED\n    // this.getOpenModal = this.getOpenModal.bind(this);\n    this.onDelete = this.onDelete.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.getSensorIds = this.getSensorIds.bind(this);\n\n    const {\n      fetchFarms,\n      farmsLastUpdated,\n      farmsError,\n\n      fetchDevices,\n      devicesLastUpdated,\n      devicesError,\n\n      deviceModelsLastUpdated,\n      deviceModelsError,\n      fetchDeviceModel,\n\n      fetchSensors,\n      sensorsLastUpdated,\n      sensorsError,\n\n      mapsError,\n      mapsLastUpdated,\n      fetchMaps\n    } = this.props;\n\n    if (!farmsLastUpdated && !farmsError) fetchFarms();\n    if (!devicesLastUpdated && !devicesError) fetchDevices();\n    if (!sensorsLastUpdated && !sensorsError) fetchSensors();\n    if (!mapsLastUpdated && !mapsError) fetchMaps();\n    if (!deviceModelsLastUpdated && !deviceModelsError) fetchDeviceModel();\n  }\n\n  getSensorIds() {\n    const { farmId } = this.state;\n    const { devices, sensors } = this.props;\n\n    return devices\n      .filter(device => device.farmId === farmId)\n      .reduce(\n        (acc, device) =>\n          acc.concat(sensors.filter(sensor => sensor.deviceId === device.id)),\n        []\n      )\n      .map(sensor => sensor.id);\n  }\n\n  componentDidMount() {\n    this.getDeviceStatus(this.props.devices);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.devices !== this.props.devices) {\n      this.getDeviceStatus(this.props.devices);\n    }\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n\n  extractfarmNames() {\n    const { farms } = this.props;\n    const farmsSelectObj = [];\n\n    for (let i = 0; i < farms.length; i++) {\n      farmsSelectObj.push({ label: farms[i].name, value: farms[i].id });\n    }\n\n    // farmsNameObject= farmsSelectObj;\n  }\n\n  createMaps(event) {\n    this.extractfarmNames();\n    const typeOfSelectedMap = event.target.value.value;\n    switch (typeOfSelectedMap) {\n      case satelliteIndicesMap:\n        this.setState({\n          openFlyoutName: satelliteIndicesMap,\n          jobTypeName: satelliteIndicesJobTypeName\n        });\n        break;\n      case soilMoistureMap:\n        this.setState({\n          openFlyoutName: soilMoistureMap,\n          jobTypeName: soilMoistureJobTypeName\n        });\n        break;\n      case sensorPlacementMap:\n        this.setState({\n          openFlyoutName: sensorPlacementMap,\n          jobTypeName: sensorPlacementJobTypeName\n        });\n        break;\n      default:\n    }\n  }\n\n  refreshRules = () => {\n    if (!this.props.rulesError && !this.props.isRulesPending)\n      this.props.fetchRules();\n  };\n\n  openFlyout = name => this.setState({ openFlyoutName: name });\n\n  onCloseFlyout = () => this.setState({ openFlyoutName: undefined });\n\n  deleteFarm = () => {\n    this.setState({\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      deleteFarmPending: true\n    });\n\n    this.subscription = FarmService.deleteFarm(this.state.farmId).subscribe(\n      () => {\n        this.props.deleteFarm([this.state.farmId]);\n        this.setState({\n          deleteModalError: undefined,\n          deleteModalSuccess: true,\n          deleteFarmPending: false\n        });\n      },\n      error => {\n        this.setState({\n          deleteModalError: error,\n          deleteModalSuccess: false,\n          isPending: false,\n          changesApplied: true,\n          deleteFarmPending: false\n        });\n      },\n      () =>\n        this.setState({\n          isPending: false,\n          changesApplied: true,\n          ruleDeleted: true\n        })\n    );\n  };\n\n  getOpenModal = () => {\n    if (this.state.openModalName === \"delete-farm\") {\n      return (\n        <DeleteModal\n          type=\"deleteFarm\"\n          itemId={this.state.farmId}\n          onClose={this.closeModal}\n          onDelete={this.onDelete}\n          deleteItem={this.deleteFarm}\n          title={this.props.t(\"farms.modals.delete.title\")}\n          deleteConfirmation={this.props.t(\n            \"farms.modals.delete.deleteConfirmation\",\n            { returnObjects: true }\n          )}\n          deleteBtn={this.props.t(\"modal.delete\")}\n          icon={svgs.trash}\n          t={this.props.t}\n          isPending={this.state.deleteFarmPending}\n          deleteModalError={this.state.deleteModalError}\n          deleteModalSuccess={this.state.deleteModalSuccess}\n          successMsg={this.props.t(\"farms.modals.delete.deleteSuccess\")}\n        />\n      );\n    }\n    return null;\n  };\n  openDeleteFarm = () => {\n    this.setState({ ...this.state, openModalName: \"delete-farm\" });\n  };\n  closeModal = () => {\n    const { history } = this.props;\n    if (this.state.deleteModalSuccess) history.replace(\"/farms\");\n    this.setState({ ...this.state, openModalName: undefined });\n  };\n\n  onDelete = () => {\n    const { history, fetchFarms } = this.props;\n    fetchFarms();\n    history.goBack();\n    this.setState({ ...this.state, openModalName: undefined });\n  };\n\n  getDeviceStatus = devices => {\n    let onlineCount = 0;\n    let offlineCount = 0;\n    let gatewayCount = 0;\n    let nodesCount = 0;\n    if (devices.length > 0) {\n      devices\n        .filter(item => item.farmId === this.state.farmId)\n        .map(item => {\n          if (item.status === \"Offline\") {\n            offlineCount = offlineCount + 1;\n          } else if (item.status === \"Online\") {\n            onlineCount = onlineCount + 1;\n          }\n          if (item.deviceModelType === \"Node\") {\n            nodesCount = nodesCount + 1;\n          } else if (item.deviceModelType === \"Gateway\") {\n            gatewayCount = gatewayCount + 1;\n          }\n          return null;\n        });\n      this.setState({\n        DeviceCount: [onlineCount, offlineCount, nodesCount, gatewayCount]\n      });\n    } else {\n      this.setState({ DeviceCount: [] });\n    }\n  };\n\n  render() {\n    const {\n      theme,\n      azureMapsKey,\n      // azureMapsKeyError,\n      // isAzureMapsKeyPending,\n\n      devices,\n      devicesError,\n      isDevicesPending,\n\n      isDeviceModelsPending,\n      deviceModelsError,\n\n      rules,\n      // isRulesPending,\n      t,\n      maps,\n\n      farms,\n      farmsError\n    } = this.props;\n\n    const {\n      openFlyoutName,\n      farmId,\n      currentActiveAlerts,\n      topAlerts,\n      farmName,\n      jobTypeName,\n      farmNameLoading,\n      DeviceCount\n    } = this.state;\n\n    // const currentActiveAlertsWithName = currentActiveAlerts.map(alert => ({\n    //   ...alert,\n    //   name: (rules[alert.ruleId] || {}).name || alert.ruleId,\n    //   // limit the number shown in the UI to 1000 active\n    //   countMaxAlerts: Math.min(alert.count, Config.maxAlertsCount)\n    // }));\n\n    // Determine if the rules for all of the alerts are actually loaded.\n    const unloadedRules =\n      topAlerts.filter(alert => !rules[alert.ruleId]).length +\n      currentActiveAlerts.filter(alert => !rules[alert.ruleId]).length;\n    if (unloadedRules > 0) {\n      // Fetch the rules since at least one alert doesn't know the name for its rule\n      this.refreshRules();\n    }\n\n    // if(alerts){\n    //   this.getAlertsForRules( alerts ,ruleIdsByFarmId)\n    // }\n\n    const selectObject = [\n      { label: t(\"maps.satelliteIndices\"), value: satelliteIndicesMap },\n      { label: t(\"maps.soilMoisture\"), value: soilMoistureMap },\n      { label: t(\"maps.sensorPlacement\"), value: sensorPlacementMap }\n    ];\n\n    const currentFarm = farms.find(farm => farm.id === farmId);\n    // TOBEADDED : MAPS-FLYOUT\n    const isFlyoutOpen =\n      openFlyoutName === satelliteIndicesMap ||\n      openFlyoutName === soilMoistureMap ||\n      openFlyoutName === sensorPlacementMap;\n\n    const AzureMapError = AzureMaps ? false : true;\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true} className=\"farmdetail-menus\">\n            {/* <DeviceGroupDropdown /> */}\n            <Protected permissions={permissions.editFarms}>\n              <Btn\n                svg={svgs.edit}\n                className=\"farm-details-menu-buttons\"\n                onClick={() => {\n                  this.openFlyout(\"edit\");\n                  appInsights.trackEvent({\n                    name: \"UiEvent:Click: Edit Farm Btn\"\n                  });\n                }}\n              >\n                {t(\"farms.flyouts.edit.open\")}\n              </Btn>\n            </Protected>\n            <Protected permissions={permissions.deleteFarms}>\n              <Btn\n                svg={svgs.trash}\n                className=\"farm-details-menu-buttons\"\n                onClick={() => {\n                  this.openDeleteFarm();\n                  appInsights.trackEvent({\n                    name: \"UiEvent:Click: Delete Farm Btn\"\n                  });\n                }}\n              >\n                {t(\"farms.delete\")}\n              </Btn>\n            </Protected>\n            <Protected permissions={permissions.addDevices}>\n              <Btn\n                svg={svgs.addDevice}\n                className=\"farm-details-menu-buttons\"\n                onClick={() => {\n                  this.openFlyout(\"addDevices\");\n                  appInsights.trackEvent({\n                    name: \"UiEvent:Click: Add Devices Fly Open Btn\"\n                  });\n                }}\n              >\n                {t(\"farms.addDevices\")}\n              </Btn>\n            </Protected>\n            <Protected permissions={permissions.createMaps}>\n              <Select\n                className=\"precision-maps-group-dropdown\"\n                placeholder=\"Generate Precision Maps\"\n                options={selectObject}\n                value={\"CREATE MAPS\"}\n                clearable={false}\n                searchable={false}\n                onChange={event => {\n                  this.createMaps(event);\n                  appInsights.trackEvent(\n                    {\n                      name:\n                        \"UiEvent:Click: Generate \" +\n                        event.target.value.value +\n                        \" Fly Open\"\n                    },\n                    {\n                      codeSource: {\n                        component: \"FarmDetails\"\n                      }\n                    }\n                  );\n                }}\n                icon={svgs.plus}\n              />\n            </Protected>\n          </ContextMenuAlign>\n\n          <ContextMenuAlign>\n            {/* <RefreshBar\n              refresh={this.refreshfarmDetail}\n              time={lastRefreshed}\n              isPending={isDevicesPending}\n              t={t}\n            /> */}\n          </ContextMenuAlign>\n        </ContextMenu>\n        <PageContent className=\"farmDetails-container\">\n          {openFlyoutName === \"edit\" && (\n            <EditFarmFlyout\n              farmId={farmId}\n              onClose={this.onCloseFlyout}\n              t={t}\n            />\n          )}\n          {openFlyoutName === \"addDevices\" && (\n            <AddDevicesContainer\n              farmId={farmId}\n              onClose={this.onCloseFlyout}\n              t={t}\n            />\n          )}\n          <div>\n            <Grid className=\"grid-farm-container\">\n              <Cell className=\"grid-farm-cell col-1\">\n                <OverviewPanel\n                  onlineDeviceCount={\n                    DeviceCount && DeviceCount.length > 0\n                      ? DeviceCount[0]\n                      : undefined\n                  }\n                  offlineDeviceCount={\n                    DeviceCount && DeviceCount.length > 0\n                      ? DeviceCount[1]\n                      : undefined\n                  }\n                  nodesCount={\n                    DeviceCount && DeviceCount.length > 0\n                      ? DeviceCount[2]\n                      : undefined\n                  }\n                  gatewaysCount={\n                    DeviceCount && DeviceCount.length > 0\n                      ? DeviceCount[3]\n                      : undefined\n                  }\n                  isPending={isDevicesPending || isDeviceModelsPending}\n                  error={farmsError || devicesError || deviceModelsError}\n                  t={t}\n                />\n              </Cell>\n              <Cell className=\"grid-farm-cell col-5\">\n                <PanelErrorBoundary\n                  msg={t(\"farms.farmDetails.panels.map.runtimeError\")}\n                >\n                  <MapPanel\n                    azureMapsKey={!AzureMapError && azureMapsKey}\n                    farmId={farmId}\n                    farm={currentFarm}\n                    devices={devices}\n                    // devicesInAlert={[]}\n                    mapKeyIsPending={false}\n                    isPending={isDevicesPending}\n                    error={farmsError || devicesError}\n                    t={t}\n                  />\n                </PanelErrorBoundary>\n              </Cell>\n\n              <Cell className=\"grid-farm-cell col-9\">\n                <TelemetryPanel\n                  theme={theme}\n                  sensorIds={this.getSensorIds()}\n                  showHeader={true}\n                  t={t}\n                />\n              </Cell>\n              <div className=\"grid-farm-maps\">\n                {t(\"maps.flyouts.latestPrecisionMaps\")}\n              </div>\n\n              <Cell className=\"grid-farm-cell col-3\">\n                <SoilMoistureMap\n                  t={t}\n                  farmName={farmName}\n                  farmId={farmId}\n                  maps={maps}\n                  noMapImage={t(\"dashboard.noData\")}\n                  farmsError={farmsError}\n                  farmNameLoading={farmNameLoading}\n                />\n              </Cell>\n              <Cell className=\"grid-farm-cell col-7\">\n                <PanelErrorBoundary\n                  msg={t(\"farms.farmDetails.panels.map.runtimeError\")}\n                >\n                  <SensorPlacementMap\n                    t={t}\n                    farmName={farmName}\n                    farmId={farmId}\n                    maps={maps}\n                    noMapImage={noMapImage}\n                    azureMapsKey={!AzureMapError && azureMapsKey}\n                    farm={currentFarm}\n                    mapKeyIsPending={false}\n                    farmNameLoading={farmNameLoading}\n                    farmsError={farmsError}\n                  />\n                </PanelErrorBoundary>\n              </Cell>\n              <Cell className=\"col-5\">\n                <SatelliteIndicesMap\n                  t={t}\n                  farmName={farmName}\n                  farmId={farmId}\n                  maps={maps}\n                  noMapImage={t(\"dashboard.noData\")}\n                  farmsError={farmsError}\n                  farmNameLoading={farmNameLoading}\n                />\n              </Cell>\n              <Cell className=\"grid-farm-cell col-5\">\n                <Drone\n                  farmName={farmName}\n                  farmId={farmId}\n                  maps={maps}\n                  noMapImage={t(\"dashboard.noData\")}\n                  farmsError={farmsError}\n                  farmNameLoading={farmNameLoading}\n                  t={t}\n                />\n              </Cell>\n            </Grid>\n\n            <div className=\"farm-details-link\">\n              <Link\n                to={{\n                  pathname: \"/maps\",\n                  state: { farmId: farmId, farmName: farmName }\n                }}\n              >\n                {t(\"maps.flyouts.viewAllMaps\")}\n              </Link>\n            </div>\n            {/** Wraped the grid into a div to fix the text alignment bug for view all maps link */}\n          </div>\n\n          {/* TOBEADDED */}\n          {isFlyoutOpen && (\n            <GenerateMapsFlyoutContainer\n              farmId={farmId}\n              flyoutName={openFlyoutName}\n              onClose={this.onCloseFlyout}\n              jobTypeName={jobTypeName}\n              farmsError={farmsError}\n              t={t}\n            />\n          )}\n        </PageContent>\n        {this.getOpenModal()}\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, FarmDetails, \"Farm Details\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport {\n  redux as appRedux,\n  getAzureMapsKey,\n  getTheme,\n  getTimeInterval,\n  getTimeSeriesExplorerUrl\n} from \"store/reducers/appReducer\";\n\nimport {\n  epics as jobsEpics,\n  getJobTypes,\n  getJobTypesError,\n  getJobTypesPendingStatus,\n  getJobTypesLastUpdated\n} from \"store/reducers/jobsReducer\";\n\nimport {\n  epics as rulesAlertsEpics,\n  getEntities as getRuleEntities,\n  getRulesPendingStatus,\n  getRulesError\n} from \"store/reducers/rulesAlertsReducer\";\nimport {\n  epics as farmEpics,\n  redux as farmRedux,\n  getFarms,\n  getFarmsError,\n  getFarmsLastUpdated,\n  getFarmsPendingStatus\n} from \"store/reducers/farmsReducer\";\nimport {\n  epics as deviceEpics,\n  getDevices,\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus,\n  getDeviceModelError,\n  getDeviceModelLastUpdated,\n  getDeviceModelsPendingStatus\n} from \"store/reducers/devicesReducer\";\n\nimport FarmDetails from \"./farmDetails\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  getSensorError,\n  getSensorPendingStatus,\n  getSensorLastUpdated\n} from \"store/reducers/sensorsReducer\";\n\nimport {\n  epics as mapsEpics,\n  getMaps,\n  getMapsError,\n  getMapsLastUpdated,\n  getMapsPendingStatus\n} from \"store/reducers/mapsReducer\";\n\nconst mapStateToProps = (state, props) => ({\n  farms: getFarms(state),\n  // farmID:\n  // props &&\n  // props.location &&\n  // props.location.state &&\n  // props.location.state.farmName\n  //   ? getMaps(state).filter(\n  //       map => map.farmName === props.location.state.farmName\n  //     )\n  //   : getMaps(state),\n  farmsError: getFarmsError(state),\n  farmsLastUpdated: getFarmsLastUpdated(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n\n  devices: getDevices(state),\n  devicesError: getDevicesError(state),\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state),\n\n  deviceModelsError: getDeviceModelError(state),\n  isDeviceModelsPending: getDeviceModelsPendingStatus(state),\n  deviceModelsLastUpdated: getDeviceModelLastUpdated(state),\n\n  maps: getMaps(state),\n\n  sensors: getSensors(state),\n  sensorsError: getSensorError(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n\n  azureMapsKey: getAzureMapsKey(state),\n  rules: getRuleEntities(state),\n  // rulesById: getRulesByFarmId(state, props),\n  // ruleIdsByFarmId : getRulesIDsByFarmId(state, props),\n  rulesError: getRulesError(state),\n  isRulesPending: getRulesPendingStatus(state),\n  // alerts: getAlerts(state, props),\n\n  theme: getTheme(state),\n  timeInterval: getTimeInterval(state),\n  timeSeriesExplorerUrl: getTimeSeriesExplorerUrl(state),\n\n  mapsError: getMapsError(state),\n  isMapsPending: getMapsPendingStatus(state),\n  mapsLastUpdated: getMapsLastUpdated(state),\n\n  jobTypes: getJobTypes(state),\n  jobTypesError: getJobTypesError(state),\n  isJobTypesPending: getJobTypesPendingStatus(state),\n  jobTypeslastUpdated: getJobTypesLastUpdated(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchJobTypes: () => dispatch(jobsEpics.actions.fetchJobTypes()),\n  fetchDeviceModel: () => dispatch(deviceEpics.actions.fetchDeviceModel()),\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices()),\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchMaps: () => dispatch(mapsEpics.actions.fetchMaps()),\n  fetchRules: () => dispatch(rulesAlertsEpics.actions.fetchRules()),\n  updateTimeInterval: timeInterval =>\n    dispatch(appRedux.actions.updateTimeInterval(timeInterval)),\n  deleteFarm: farmId => dispatch(farmRedux.actions.deleteFarm(farmId))\n});\n\nexport const FarmDetailsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(FarmDetails)\n);\n","// Copyright (c) Microsoft. All rights reserved.\nimport React from \"react\";\nimport \"./toolTip.scss\";\nimport { Svg } from \"components/shared\";\nimport { svgs } from \"utilities\";\n\nexport const ToolTip = props => {\n  const { closeTooltip, title, content } = props;\n  return (\n    <div className=\"arrow_box\">\n      <span>\n        {\" \"}\n        <Svg onClick={closeTooltip} path={svgs.cancelX} />\n      </span>\n      <p className=\"title\">\n        <b>{title} </b>{\" \"}\n      </p>\n      <p>{content}</p>\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport {\n  SoftSelectLinkRenderer,\n  TimeRenderer\n} from \"components/shared/cellRenderers\";\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\n\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const mapsColumnDefs = {\n  name: {\n    headerName: \"maps.grid.name\",\n    field: \"mapName\",\n    sort: \"asc\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    cellRendererFramework: SoftSelectLinkRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  farm: {\n    headerName: \"maps.grid.farm\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  type: {\n    headerName: \"maps.grid.type\",\n    field: \"type\",\n    comparator: caseInsensitiveStringComparator\n  },\n  date: {\n    headerName: \"maps.grid.date\",\n    field: \"date\",\n    cellRendererFramework: TimeRenderer\n  },\n  /* jobid: {\n    headerName: \"maps.grid.jobid\",\n    field: \"jobId\"\n  },\n  id: {\n    headerName: \"maps.grid.id\",\n    field: \"id\"\n  },*/\n  createdOn: {\n    headerName: \"maps.grid.createdon\",\n    field: \"createdAt\",\n    cellRendererFramework: TimeRenderer\n  }\n};\n\nexport const getSoftSelectId = ({ id }) => id;\n\nexport const defaultmapsGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"multiple\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { PcsGrid } from \"components/shared\";\nimport { mapsColumnDefs, defaultmapsGridProps } from \"./mapsGridConfig\";\nimport {\n  isFunc,\n  translateColumnDefs\n  //  contentTypeLabelsMap\n} from \"utilities\";\nimport { Modal } from \"components/shared/mapsModal/modal/modal\";\nimport moment from \"moment\";\nimport { appInsights } from \"applicationInsights\";\nimport {\n  dateFormat,\n  mapModalType,\n  // pngImageType,\n  // contentTypeInitials,\n  // getSceneData,\n  getPNGFilefromSceneFiles,\n  getSceneFile\n} from \"utilities\";\nimport { MapService } from \"services\";\n\nconst initialState = {\n  softSelectedId: undefined,\n  isModalOpen: false,\n  rowData: undefined,\n  blobUrlError: undefined,\n  isMapFilesPending: false,\n  noMaps: false,\n  mapFileDownloadSelectObject: [],\n  sensorPlacementLatLong: null\n};\n\nexport class MapsGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = initialState;\n\n    // Default device grid columns\n    this.columnDefs = [\n      mapsColumnDefs.name,\n      mapsColumnDefs.farm,\n      mapsColumnDefs.date,\n      mapsColumnDefs.createdOn,\n      mapsColumnDefs.type\n      // mapsColumnDefs.jobid,\n      // mapsColumnDefs.id\n    ];\n\n    this.onModalClose = this.onModalClose.bind(this);\n  }\n\n  onGridReady = gridReadyEvent => {\n    this.mapsGridApi = gridReadyEvent.api;\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  onModalClose() {\n    appInsights.trackEvent({\n      name: \"UiEvent:ModalClose: Map Modal \" + this.state.eachRowData.type\n    });\n    this.setState({ isModalOpen: false });\n  }\n\n  getFarmByID = farmid => {\n    return this.props.farms.filter(farm => farm.id === farmid);\n  };\n\n  onSoftSelectChange = (rowId, eachRowData) => {\n    const { onSoftSelectChange } = this.props;\n\n    appInsights.trackEvent({\n      name: \"UiEvent:ModalOpen: Map Modal \" + eachRowData.type\n    });\n\n    this.setState({\n      softSelectedId: eachRowData.id,\n      eachRowData: eachRowData,\n      isModalOpen: true,\n      isMapFilesPending: true\n    });\n\n    if (eachRowData.type === \"sensor-placement\") {\n      MapService.getSceneById(eachRowData.id).subscribe(scene =>\n        this.setState({\n          sensorPlacementLatLong: scene.properties.sensor_placements,\n          isMapFilesPending: false\n        })\n      );\n    }\n\n    getSceneFile(eachRowData.id, null, this.sceneDataCallback);\n\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(rowId, eachRowData);\n    }\n  };\n\n  sceneDataCallback = (selectedObject, mapData, sceneError) => {\n    if (sceneError) {\n      this.setState({\n        isMapFilesPending: false,\n        noPngMaps: true,\n        noMaps: true\n      });\n    } else if (mapData.mapFound) {\n      const pngUrl = getPNGFilefromSceneFiles(selectedObject);\n      this.setState({\n        mapFound: mapData.mapFound,\n        isMapFilesPending: mapData.isMapFilesPending,\n        blobUrl: pngUrl,\n        noPngMaps: mapData.noPngMaps,\n        noMaps: mapData.noMaps,\n        mapFileDownloadSelectObject: selectedObject.mapFileDownloadSelectObject\n      });\n    } else {\n      this.setState({\n        url: mapData.url,\n        mapFound: mapData.mapFound\n      });\n    }\n  };\n\n  onHardSelectChange = selectedObjs => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n    // Show the context buttons when there are rows checked.\n    if (isFunc(onContextMenuChange)) {\n      onContextMenuChange(selectedObjs.length > 0 ? this.contextBtns : null);\n    }\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedObjs);\n    }\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  onRowClicked = ({ data }) => {};\n  render() {\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultmapsGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: (this.state.softSelectedDevice || {}).id,\n      ...this.props, // Allow default property overrides\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: this.props.t\n      },\n\n      onGridReady: this.onGridReady,\n      onRowClicked: this.onRowClicked,\n      onSoftSelectChange: this.onSoftSelectChange,\n      onHardSelectChange: this.onHardSelectChange\n    };\n\n    const {\n      eachRowData,\n      isModalOpen,\n      blobUrlError,\n      blobUrl,\n      isMapFilesPending,\n      noMaps,\n      noPngMaps,\n      mapFileDownloadSelectObject,\n      sensorPlacementLatLong\n    } = this.state;\n    const { t } = this.props;\n    let farm = undefined;\n\n    if (eachRowData && eachRowData.farmId) {\n      farm = this.getFarmByID(eachRowData.farmId)[0];\n    }\n\n    return [\n      <PcsGrid key=\"farm-grid-key\" {...gridProps} />,\n      isModalOpen && (\n        <Modal\n          key=\"modal\"\n          type={mapModalType}\n          name={eachRowData.type}\n          t={t}\n          blobUrlError={blobUrlError}\n          blobUrl={blobUrl}\n          farm={farm}\n          farmName={eachRowData.farmName}\n          mapName={eachRowData.mapName}\n          modalClose={this.onModalClose}\n          mapFileDownloadSelectObject={mapFileDownloadSelectObject}\n          sensorPlacementLatLong={sensorPlacementLatLong}\n          mapDate={moment(eachRowData.date).format(dateFormat)}\n          latestCreatedAt={moment(eachRowData.createdAt).format(dateFormat)}\n          isPending={isMapFilesPending}\n          noMaps={noMaps}\n          noPngMaps={noPngMaps}\n        />\n      )\n    ];\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent,\n  Btn,\n  BtnToolbar,\n  FormControl,\n  FormSection,\n  ErrorMsg\n} from \"components/shared\";\n\nimport PropTypes from \"prop-types\";\n\nimport \"./filterControl.scss\";\n\nimport { DatePickerElement } from \"../../shared/generateMapsFlyout/datePickerElement\";\n\nimport { FormElementType, jobsDateFormat } from \"utilities\";\nimport moment from \"moment\";\n\nexport default class FilterControl extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleOnChange = (e, key, calendar) => {\n    /** check for date picker Jquery Object and Event for startDate */\n    if (calendar) {\n      const startDate = key.startDate.format(jobsDateFormat);\n      const endDate = key.endDate.format(jobsDateFormat);\n      this.setState({\n        [calendar]: {\n          from: startDate,\n          to: endDate\n        }\n      });\n    } else {\n      /** Below case is for Select element type */\n      if (e.target.value) {\n        this.setState({ [key]: e.target.value });\n      } else {\n        this.setState({ [key]: undefined });\n      }\n    }\n  };\n\n  // Get all the elements based on the Config provided\n  getElementByFilterContent = (filter, t, key) => {\n    switch (filter.type) {\n      case FormElementType.select:\n        return (\n          <React.Fragment key={filter.filterKey}>\n            {filter.label && <div className=\"heading\">{filter.label}</div>}\n\n            {filter.List && filter.typeProps && (\n              <FormControl\n                type=\"select\"\n                options={filter.List}\n                className={`flyouts-select-list  ${\n                  filter.className ? filter.className : \"\"\n                }`}\n                placeholder={filter.typeProps.placeholder}\n                onChange={e => this.handleOnChange(e, key)}\n                matchProp={\"label\"}\n                clearable={\n                  filter.typeProps.clearable\n                    ? filter.typeProps.clearable\n                    : this.props.clearable\n                }\n                searchable={\n                  filter.typeProps.searchable\n                    ? filter.typeProps.searchable\n                    : this.props.searchable\n                }\n                value={this.state[filter.filterKey]}\n              />\n            )}\n          </React.Fragment>\n        );\n\n      case FormElementType.datePicker:\n        return (\n          <React.Fragment key={filter.filterKey}>\n            {filter.label && <div className=\"heading\">{filter.label}</div>}\n            <div className=\"date-picker-container\">\n              <DatePickerElement\n                startDate={\n                  filter.typeProps.selectedValue &&\n                  filter.typeProps.selectedValue.from\n                    ? moment(filter.typeProps.selectedValue.from)\n                    : undefined\n                }\n                endDate={\n                  filter.typeProps.selectedValue &&\n                  filter.typeProps.selectedValue.to\n                    ? moment(filter.typeProps.selectedValue.to)\n                    : undefined\n                }\n                singleDatePicker={filter.typeProps.singleDatePicker}\n                className={filter.typeProps.className}\n                inputValue={filter.typeProps.inputValue}\n                IconClass={filter.typeProps.IconClass}\n                onChange={(e, index) => this.handleOnChange(e, index)}\n                containerType={filter.typeProps.containerType}\n                containerIcon={filter.typeProps.containerIcon}\n                containerPlaceHolder={filter.typeProps.containerPlaceHolder}\n                containerValue={\n                  this.state[filter.filterKey] &&\n                  this.state[filter.filterKey].from &&\n                  this.state[filter.filterKey].to\n                    ? `${this.state[filter.filterKey].from} to ${this.state[filter.filterKey].to} `\n                    : undefined\n                }\n                onApplyEvent={(e, picker) =>\n                  this.handleOnChange(e, picker, filter.filterKey)\n                }\n                t={t}\n              />\n            </div>\n          </React.Fragment>\n        );\n\n      default:\n        return (\n          <React.Fragment>\n            {filter.label && <div className=\"heading\">{filter.label}</div>}\n            <ErrorMsg>{t(\"maps.filterFlyout.invalidFilter\")}</ErrorMsg>\n          </React.Fragment>\n        );\n    }\n  };\n\n  componentDidMount() {\n    const stateObjfromProps = {};\n\n    // If there are state values already set, reset all the values here\n\n    this.props.filterConfig.FilterList.map(item => {\n      if (item.typeProps && item.typeProps.selectedValue) {\n        stateObjfromProps[item.filterKey] = item.typeProps.selectedValue;\n      }\n\n      return item;\n    });\n\n    this.setState(stateObjfromProps);\n  }\n\n  /** Gives you the count of filters applied */\n  getFilterCount = () => {\n    let count = 0;\n\n    Object.keys(this.state).map(stateKey => {\n      /** Undefined check when we use select box clearable button */\n      if (this.state[stateKey] !== undefined) {\n        if (!(Object.getOwnPropertyNames(this.state[stateKey]).length === 0)) {\n          count = count + 1;\n        }\n      }\n\n      return null;\n    });\n\n    return count;\n  };\n\n  // Gives all the state values to the parent component\n  onFilterClick = () => {\n    // let filterCount = Object.entries(this.state).filter((item) => item[1] !== undefined)\n    const filterCount = this.getFilterCount();\n\n    const obj = {\n      ...this.state,\n      isFilterOn: true,\n      appliedFilters: filterCount\n    };\n    this.props.filterConfig.applyCallback(obj);\n  };\n\n  // Resets the current state values and return an empty object to the parent component\n  onResetClick = () => {\n    const obj = {};\n    Object.keys(this.state).map(ele => (obj[ele] = undefined));\n    this.setState(obj);\n    this.props.filterConfig.applyCallback({});\n  };\n\n  render() {\n    const { t, onCloseFlyout, filterConfig } = this.props;\n\n    return (\n      <Flyout>\n        <FlyoutHeader>\n          <FlyoutTitle>\n            {\n              <div\n                className={`title ${\n                  filterConfig.header && filterConfig.header.className\n                    ? filterConfig.header.className\n                    : \"\"\n                }`}\n              >\n                {filterConfig.header && filterConfig.header.content\n                  ? filterConfig.header.content\n                  : \"\"}\n              </div>\n            }\n          </FlyoutTitle>\n          <FlyoutCloseBtn onClick={onCloseFlyout} />\n        </FlyoutHeader>\n        <FlyoutContent>\n          <form>\n            <FormSection>\n              {// Loop through all the elements(FilterList) of the config object\n              filterConfig.FilterList.map(element =>\n                this.getElementByFilterContent(element, t, element.filterKey)\n              )}\n            </FormSection>\n          </form>\n\n          <BtnToolbar className={\"wrapper-button-container\"}>\n            <Btn\n              primary={true}\n              onClick={this.onResetClick}\n              className=\"reset-btn\"\n            >\n              {t(\"jobs.flyouts.reset\")}\n            </Btn>\n            <Btn\n              primary={true}\n              type=\"submit\"\n              onClick={this.onFilterClick}\n              className=\"apply-btn\"\n            >\n              {t(\"jobs.flyouts.apply\")}\n            </Btn>\n          </BtnToolbar>\n        </FlyoutContent>\n      </Flyout>\n    );\n  }\n}\n\nFilterControl.propTypes = {\n  t: PropTypes.func,\n  onCloseFlyout: PropTypes.func,\n  filterConfig: PropTypes.object\n};\n\nFilterControl.defaultProps = {\n  t: null,\n  onCloseFlyout: undefined,\n  filterConfig: [],\n  clearable: true,\n  searchable: true\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport \"util\";\nimport { ToolTip } from \"../../shared/toolTip/toolTip\";\nimport {\n  AjaxError,\n  Select,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  Btn,\n  Protected,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput,\n  GenerateMapsFlyoutContainer\n} from \"components/shared\";\nimport { MapsGrid } from \"./mapsGrid\";\nimport { svgs, isDef, FormElementType } from \"utilities\";\nimport \"./maps.scss\";\nimport {\n  satelliteIndicesMap,\n  soilMoistureMap,\n  sensorPlacementMap,\n  satelliteIndicesJobTypeName,\n  sensorPlacementJobTypeName,\n  soilMoistureJobTypeName,\n  jobsDateFormat\n} from \"utilities\";\nimport { permissions } from \"services/models\";\nimport moment from \"moment\";\nimport FilterControl from \"components/shared/filter/filterControl\";\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\nimport { appInsights } from \"applicationInsights\";\n\nlet farmsNameObject = [];\nlet mapsTypesObject = [];\nlet filteredMaps = [];\n\nclass Maps extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contextBtns: null,\n      modalIsOpen: false,\n      farmsNameObject: [],\n      openFilterFlyout: false,\n      filterState: {\n        isFilterOn: false,\n        filterMapType: undefined,\n        selectedMapType: undefined,\n        selectedDate: undefined,\n        selectedFarmName: undefined,\n        appliedFilters: 0\n      }\n    };\n    this.createMaps = this.createMaps.bind(this);\n    this.modalclose = this.modalclose.bind(this);\n    this.modalopen = this.modalopen.bind(this);\n\n    const {\n      mapsLastUpdated,\n      fetchMaps,\n      mapsError,\n      fetchFarms,\n      farmsLastUpdated,\n      farmsError\n    } = this.props;\n\n    if (!mapsLastUpdated && !mapsError) {\n      fetchMaps();\n    }\n    if (!farmsLastUpdated && !farmsError) {\n      fetchFarms();\n    }\n  }\n\n  openFlyout = name => () => {\n    this.setState({ openFlyoutName: name });\n  };\n\n  componentDidMount() {\n    filteredMaps = this.props.maps;\n  }\n\n  closeFlyout = () => this.setState({ openFlyoutName: undefined });\n\n  onContextMenuChange = contextBtns => this.setState({ contextBtns });\n\n  onGridReady = gridReadyEvent => (this.mapGridApi = gridReadyEvent.api);\n  searchOnChange = ({ target: { value } }) => {\n    if (this.mapGridApi) this.mapGridApi.setQuickFilter(value);\n  };\n\n  modalopen() {\n    this.setState({ openModalName: soilMoistureMap });\n  }\n  modalclose() {\n    this.isModalopentrue = false;\n  }\n\n  createMaps(event) {\n    const typeOfSelectedMap = event.target.value.value;\n\n    switch (typeOfSelectedMap) {\n      case satelliteIndicesMap:\n        this.setState({\n          openFlyoutName: satelliteIndicesMap,\n          jobTypeName: satelliteIndicesJobTypeName\n        });\n        break;\n      case soilMoistureMap:\n        this.setState({\n          openFlyoutName: soilMoistureMap,\n          jobTypeName: soilMoistureJobTypeName\n        });\n        break;\n      case sensorPlacementMap:\n        this.setState({\n          openFlyoutName: sensorPlacementMap,\n          jobTypeName: sensorPlacementJobTypeName\n        });\n        break;\n      default:\n    }\n  }\n\n  toSelectOptionFromArray = item => ({ label: item, value: item });\n\n  toSelectOption = ({ name, id }) => ({ label: name, value: id });\n\n  closeTooltip = () => {\n    const { updateToolTipPendingStatus } = this.props;\n    updateToolTipPendingStatus();\n  };\n\n  filterMapsFlyout = () => {\n    this.setState({ openFilterFlyout: true });\n  };\n\n  onCloseFlyout = () => this.setState({ openFilterFlyout: false });\n\n  handleChangeMapType = event => {\n    this.setState({ selectedMapType: event.target.value.label });\n  };\n\n  handleChangeFarmName = event => {\n    this.setState({ selectedFarmName: event.target.value.label });\n  };\n\n  onFilterClick = FilterControlstate => {\n    appInsights.trackEvent({\n      name: \"UiEvent:Click: Maps Filter Flyout Apply Btn\"\n    });\n    const obj = {\n      filterState: {\n        filterMapType: FilterControlstate.map_type\n          ? FilterControlstate.map_type\n          : undefined,\n        selectedMapType: FilterControlstate.map_type\n          ? FilterControlstate.map_type\n          : undefined,\n        selectedDate: FilterControlstate.date\n          ? FilterControlstate.date\n          : undefined,\n        selectedFarmName: FilterControlstate.farm_name\n          ? FilterControlstate.farm_name\n          : undefined,\n        isFilterOn: FilterControlstate.isFilterOn,\n        appliedFilters: FilterControlstate.appliedFilters\n      }\n    };\n\n    this.setState(obj);\n\n    filteredMaps =\n      isDef(FilterControlstate.map_type) ||\n      isDef(FilterControlstate.farm_name) ||\n      (isDef(FilterControlstate.date) &&\n        (isDef(FilterControlstate.date.from) ||\n          isDef(FilterControlstate.date.to)))\n        ? this.props.maps.filter(\n            map =>\n              (isDef(FilterControlstate.map_type)\n                ? map.type === FilterControlstate.map_type.label\n                : {}) &&\n              (isDef(FilterControlstate.farm_name)\n                ? map.farmId === FilterControlstate.farm_name.value\n                : {}) &&\n              (isDef(FilterControlstate.date) &&\n              isDef(FilterControlstate.date.from)\n                ? isDef(FilterControlstate.date) &&\n                  isDef(FilterControlstate.date.to)\n                  ? moment(moment(map.date).format(jobsDateFormat)).isBetween(\n                      FilterControlstate.date.from,\n                      FilterControlstate.date.to,\n                      null,\n                      []\n                    )\n                  : moment(map.date).format(jobsDateFormat) ===\n                    FilterControlstate.date.from\n                : {})\n          )\n        : this.props.maps;\n  };\n\n  render() {\n    const {\n      openFlyoutName,\n      jobTypeName,\n      openFilterFlyout,\n      filterState\n    } = this.state;\n    const {\n      t,\n      maps,\n      mapsError,\n      isMapsPending,\n      // mapsLastUpdated,\n      fetchMaps,\n      isFarmsPending,\n      farms,\n      farmsError,\n      isTooltipPending,\n      mapTypes\n    } = this.props;\n\n    farmsNameObject = farms.map(this.toSelectOption);\n\n    mapsTypesObject = mapTypes\n      .filter(mapType => isDef(mapType))\n      .map(this.toSelectOptionFromArray);\n\n    const isFlyoutOpen =\n      openFlyoutName === satelliteIndicesMap ||\n      openFlyoutName === soilMoistureMap ||\n      openFlyoutName === sensorPlacementMap;\n    const gridProps = {\n      onGridReady: this.onGridReady,\n      rowData:\n        isMapsPending || isFarmsPending\n          ? undefined\n          : filterState && filterState.isFilterOn\n          ? filteredMaps\n          : maps || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: t,\n      refresh: fetchMaps,\n      farms: farms\n    };\n\n    const selectObject = [\n      { label: t(\"maps.satelliteIndices\"), value: satelliteIndicesMap },\n      { label: t(\"maps.soilMoisture\"), value: soilMoistureMap },\n      { label: t(\"maps.sensorPlacement\"), value: sensorPlacementMap }\n    ];\n\n    const classNameDatePicker = \"datepicker-textbox\";\n\n    /**\n     * FilterList specifies the object of a particular filter.\n     *\n     * List contains all the values for the select options.\n     *\n     * FormElementType is Type of filter Element you want.\n     *\n     * Label is text before the filter element.\n     *\n     * filterKey --> ***Important (Returns the state value based on this key).\n     *\n     * filterKey for DatePickers ==> it comes under Object as from and to values.\n     *\n     * typeProps contains the props needs to be passed on to nested component\n     *\n     *\n     */\n\n    //  console.log(\"SelectedOption filter state\", filterState.selectedFarmName)\n    const filterConfig = {\n      FilterList: [\n        {\n          List: mapsTypesObject,\n          type: FormElementType.select,\n          typeProps: {\n            selectedValue: filterState.selectedMapType,\n            placeholder: t(\"maps.filterFlyout.selectMapType\")\n          },\n          label: \"Type\",\n          filterKey: \"map_type\",\n          className: \"\"\n        },\n        {\n          type: FormElementType.datePicker,\n          label: \"Date\",\n          filterKey: \"date\",\n          typeProps: {\n            className: classNameDatePicker,\n            singleDatePicker: false,\n            inputValue: filterState.selectedDate,\n            IconClass: \"datepicker-icon\",\n            containerType: \"input\",\n            containerIcon: svgs.datePicker,\n            containerPlaceHolder: \"Enter Date Range\",\n            containerValue: filterState.selectedDate,\n            selectedValue: filterState.selectedDate\n          }\n        },\n        {\n          List: farmsNameObject,\n          type: FormElementType.select,\n          typeProps: {\n            selectedValue: filterState.selectedFarmName\n              ? filterState.selectedFarmName\n              : undefined,\n            placeholder: t(\"maps.filterFlyout.selectFarm\")\n          },\n          label: \"Name\",\n          filterKey: \"farm_name\",\n          className: \"\"\n        }\n      ],\n\n      applyCallback: this.onFilterClick,\n      resetCallback: this.onResetClick,\n      header: {\n        className: \"\",\n        content: t(\"jobs.flyouts.filter\")\n      }\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            {/* Search input Bar*/}\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"maps.searchPlaceholder\")}\n            />\n\n            {isTooltipPending === true && (\n              <ToolTip\n                t={t}\n                closeTooltip={this.closeTooltip}\n                title={t(\"maps.searchMap\")}\n                content={t(\"maps.searchMapName\")}\n              />\n            )}\n            <Protected permissions={permissions.createMaps}>\n              <Select\n                className=\"maps-group-dropdown\"\n                placeholder=\"Create Maps\"\n                options={selectObject}\n                clearable={false}\n                searchable={false}\n                onChange={event => {\n                  this.createMaps(event);\n                  appInsights.trackEvent(\n                    {\n                      name:\n                        \"UiEvent:Click: Generate \" +\n                        event.target.value.value +\n                        \" Fly Open\"\n                    },\n                    {\n                      codeSource: {\n                        component: \"Maps Page\"\n                      }\n                    }\n                  );\n                }}\n                icon={svgs.plus}\n              />\n            </Protected>\n            <ContextMenuAlign right={true}>\n              <Btn\n                svg={\n                  filterState.appliedFilters > 0\n                    ? svgs.appliedFilter\n                    : svgs.filter\n                }\n                className=\"filter-maps\"\n                onClick={event => {\n                  this.filterMapsFlyout(event);\n                  appInsights.trackEvent({\n                    name: \"UiEvent:Click: Maps Filter Flyout Open Btn\"\n                  });\n                }}\n              >\n                {t(\"jobs.filter\")}{\" \"}\n                {filterState.appliedFilters > 0 && (\n                  <span>{`(${filterState.appliedFilters})`}</span>\n                )}\n              </Btn>\n            </ContextMenuAlign>\n          </ContextMenuAlign>\n        </ContextMenu>\n\n        <PageContent className=\"maps-container\" key=\"page-content\">\n          {/* <RefreshBar\n            refresh={fetchMaps}\n            time={mapsLastUpdated}\n            isPending={isMapsPending}\n            t={t}\n          /> */}\n          <PageTitle titleValue={t(\"maps.title\")} />\n          {isFlyoutOpen && (\n            <GenerateMapsFlyoutContainer\n              farmsSelectObject={farmsNameObject}\n              t={t}\n              flyoutName={this.state.openFlyoutName}\n              onClose={this.closeFlyout}\n              jobTypeName={jobTypeName}\n              isFarmsPending={isFarmsPending}\n              farmsError={farmsError}\n            />\n          )}\n          {!!mapsError && <AjaxError t={t} error={mapsError} />}\n          {!mapsError && <MapsGrid {...gridProps} />}\n          {openFilterFlyout && (\n            <FilterControl\n              t={t}\n              onCloseFlyout={this.onCloseFlyout}\n              isPending={isFarmsPending}\n              filterConfig={filterConfig}\n            />\n          )}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Maps, \"Maps Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport {\n  epics as mapsEpics,\n  redux as mapsRedux,\n  getMaps,\n  getMapsError,\n  getMapsLastUpdated,\n  getMapsPendingStatus,\n  getTooltipPendingStatus,\n  getMapTypes\n} from \"store/reducers/mapsReducer\";\n\nimport Maps from \"./maps\";\nimport {\n  getFarms,\n  epics as farmEpics,\n  getFarmsError,\n  getFarmsLastUpdated,\n  getFarmsPendingStatus\n} from \"store/reducers/farmsReducer\";\n\nconst mapStateToProps = (state, props) => ({\n  maps:\n    props &&\n    props.location &&\n    props.location.state &&\n    props.location.state.farmName\n      ? getMaps(state).filter(\n          map => map.farmName === props.location.state.farmName\n        )\n      : getMaps(state),\n  farms: getFarms(state),\n  mapTypes: getMapTypes(state),\n  mapsError: getMapsError(state),\n  isMapsPending: getMapsPendingStatus(state),\n  isTooltipPending: getTooltipPendingStatus(state),\n  mapsLastUpdated: getMapsLastUpdated(state),\n  farmsError: getFarmsError(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  farmsLastUpdated: getFarmsLastUpdated(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchMaps: () => dispatch(mapsEpics.actions.fetchMaps()),\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms()),\n  updateToolTipPendingStatus: () => dispatch(mapsRedux.actions.updateTooltip())\n});\n\nexport const MapContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Maps)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport {\n  /* EMPTY_FIELD_VAL,*/ gridValueFormatters\n} from \"components/shared/pcsGrid/pcsGridConfig\";\nimport {\n  SoftSelectLinkRenderer,\n  JobStatusRenderer,\n  TimeRenderer\n} from \"components/shared/cellRenderers\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\n\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const jobsColumnDefs = {\n  id: {\n    headerName: \"jobs.grid.id\",\n    field: \"id\"\n  },\n  name: {\n    headerName: \"jobs.grid.name\",\n    field: \"name\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  typeOfJob: {\n    headerName: \"jobs.grid.typeOfJob\",\n    field: \"jobTypeName\"\n  },\n  farmName: {\n    headerName: \"jobs.grid.farmName\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  status: {\n    headerName: \"jobs.grid.status\",\n    field: \"currentState\",\n    cellRendererFramework: JobStatusRenderer,\n    cellStyle: {\n      overflow: \"visible\",\n      opacity: 1\n    }\n  },\n  startTime: {\n    headerName: \"jobs.grid.startDate\",\n    field: \"startDate\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  endTime: {\n    headerName: \"jobs.grid.endDate\",\n    field: \"endDate\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  createdAt: {\n    headerName: \"jobs.grid.createdAt\",\n    field: \"createdAt\",\n    cellRendererFramework: TimeRenderer\n  }\n};\n\nexport const getSoftSelectId = ({ id }) => id;\n\n/** Shared jobs grid AgGrid properties */\nexport const defaultjobsGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"single\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Btn, PcsGrid, Protected } from \"components/shared\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\nimport { jobsColumnDefs, defaultjobsGridProps } from \"./jobsGridConfig\";\nimport { DeleteModal } from \"components/shared/deleteModal/deleteModal\";\nimport { toJobsItemModel } from \"services/models\";\nimport {\n  isFunc,\n  translateColumnDefs,\n  svgs,\n  succeeded,\n  failed,\n  stopped,\n  stopRequested\n} from \"utilities\";\nimport { checkboxColumn } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { JobsService } from \"services\";\nconst initialState = {\n  softSelectedId: undefined,\n  rowData: undefined,\n  selectedJobs: undefined,\n  deleteModalSuccess: false,\n  deleteModalError: undefined,\n  abortJobPending: false\n};\n\nexport class JobsGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = initialState;\n\n    // Default device grid columns\n    this.columnDefs = [\n      checkboxColumn,\n      jobsColumnDefs.id,\n      jobsColumnDefs.name,\n      jobsColumnDefs.typeOfJob,\n      jobsColumnDefs.farmName,\n      jobsColumnDefs.status,\n      jobsColumnDefs.startTime,\n      jobsColumnDefs.endTime,\n      jobsColumnDefs.createdAt\n    ];\n\n    this.abortJob = this.abortJob.bind(this);\n\n    this.contextBtns = {\n      abort: (\n        <Protected key=\"abort\" permissions={permissions.deleteRules}>\n          <Btn\n            svg={svgs.abort}\n            className=\"abort-job\"\n            onClick={this.openModal(\"abort\")}\n          >\n            {this.props.t(\"jobs.abort\")}\n          </Btn>\n        </Protected>\n      )\n    };\n  }\n\n  openModal = ModalName => () =>\n    this.setState({\n      openModalName: ModalName\n    });\n\n  closeModal = () =>\n    this.setState({\n      openModalName: undefined\n    });\n\n  abortJobsClick = () => {\n    this.abortJob();\n  };\n\n  onGridReady = gridReadyEvent => {\n    this.jobsGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  setselectedJobs = selectedJobs => this.setState({ selectedJobs });\n\n  abortJob() {\n    this.setState({\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      abortJobPending: true\n    });\n    const { selectedJobs } = this.state;\n    for (let i = 0; i < selectedJobs.length; i++) {\n      this.subscription = JobsService.abortJobs(selectedJobs[i].id).subscribe(\n        job => {\n          this.props.abortJob([toJobsItemModel(job)]);\n          this.props.refresh();\n          this.setState({\n            deleteModalError: undefined,\n            deleteModalSuccess: true,\n            abortJobPending: false,\n            changesApplied: true\n          });\n        },\n        error =>\n          this.setState({\n            deleteModalError: error,\n            deleteModalSuccess: false,\n            changesApplied: true,\n            abortJobPending: false\n          })\n      );\n    }\n  }\n  onHardSelectChange = selectedJobs => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n\n    if (isFunc(onContextMenuChange)) {\n      this.setselectedJobs(selectedJobs);\n\n      let allowAbortJob = true;\n      for (let i = 0; i < selectedJobs.length; i++) {\n        if (\n          selectedJobs[i].currentState === failed ||\n          selectedJobs[i].currentState === succeeded ||\n          selectedJobs[i].currentState === stopped ||\n          selectedJobs[i].currentState === stopRequested\n        )\n          allowAbortJob = false;\n      }\n\n      if (allowAbortJob && selectedJobs.length >= 1)\n        onContextMenuChange(this.contextBtns.abort);\n      else {\n        onContextMenuChange(null);\n      }\n    }\n    if (isFunc(onHardSelectChange)) {\n      onContextMenuChange(this.contextBtns.abort);\n      onHardSelectChange(selectedJobs);\n    }\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  render() {\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultjobsGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: (this.state.softSelectedDevice || {}).id,\n      ...this.props, // Allow default property overrides\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: this.props.t\n      },\n      onGridReady: this.onGridReady,\n      onHardSelectChange: this.onHardSelectChange\n    };\n    const modal = this.state.openModalName === \"abort\";\n    return [\n      <PcsGrid key=\"farm-grid-key\" {...gridProps} />,\n      modal && (\n        <DeleteModal\n          key=\"abort-job\"\n          type=\"abortJob\"\n          deleteItem={this.abortJobsClick}\n          title={this.props.t(\"jobs.abortJobModal.title\")}\n          deleteConfirmation={this.props.t(\"jobs.abortJobModal.deleteInfo\")}\n          onClose={this.closeModal}\n          deleteBtn={this.props.t(\"jobs.abort\")}\n          t={this.props.t}\n          icon={svgs.abort}\n          isPending={this.state.abortJobPending}\n          deleteModalError={this.state.deleteModalError}\n          deleteModalSuccess={this.state.deleteModalSuccess}\n          successMsg={this.props.t(\"jobs.abortJobModal.success\")}\n        />\n      )\n    ];\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport \"util\";\nimport {\n  Btn,\n  AjaxError,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput\n} from \"components/shared\";\nimport { JobsGrid } from \"./jobsGrid\";\nimport { svgs, isDef, getJobSelectObjectData } from \"utilities\";\nimport \"./jobs.scss\";\nimport FilterControl from \"../../shared/filter/filterControl\";\nimport { FormElementType } from \"../../../utilities/constants\";\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nlet farmsNameObject = [];\nlet jobTypesObject = [];\nlet filteredJobs = [];\nclass Jobs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contextBtns: null,\n      farmsNameObject: [],\n      isCalculating: true,\n      openFlyout: false,\n      filterState: {\n        selectedStatus: undefined,\n        selectedFarmName: undefined,\n        selectedJobType: undefined,\n        isFilterOn: false,\n        filtersApplied: 0\n      }\n    };\n    const {\n      fetchJobs,\n      fetchFarms,\n      jobsLastUpdated,\n      jobsError,\n      farmsLastUpdated,\n      farmsError,\n      fetchJobTypes,\n      jobTypeslastUpdated,\n      jobTypesError\n    } = this.props;\n\n    if (!farmsLastUpdated && !farmsError) {\n      fetchFarms();\n    }\n    if (!jobsLastUpdated && !jobsError) {\n      fetchJobs();\n    }\n    if (!jobTypeslastUpdated && !jobTypesError) {\n      fetchJobTypes();\n    }\n\n    this.filterJobsFlyout = this.filterJobsFlyout.bind(this);\n    this.filterJobsGrid = this.filterJobsGrid.bind(this);\n    this.onCloseFlyout = this.onCloseFlyout.bind(this);\n  }\n\n  onContextMenuChange = contextBtns => this.setState({ contextBtns });\n\n  onGridReady = gridReadyEvent => (this.jobGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.jobGridApi) this.jobGridApi.setQuickFilter(value);\n  };\n\n  componentDidMount() {\n    filteredJobs = this.props.jobs;\n  }\n\n  filterJobsFlyout() {\n    this.setState({ openFlyout: true });\n  }\n\n  filterJobsGrid(FilterControlstate) {\n    const Filterobj = {\n      filterState: {\n        selectedStatus: FilterControlstate.status\n          ? FilterControlstate.status\n          : undefined,\n        selectedFarmName: FilterControlstate.farm_name\n          ? FilterControlstate.farm_name\n          : undefined,\n        selectedJobType: FilterControlstate.job_type\n          ? FilterControlstate.job_type\n          : undefined,\n        isFilterOn: FilterControlstate.isFilterOn,\n        filtersApplied: FilterControlstate.appliedFilters\n      }\n    };\n    this.setState(Filterobj);\n    filteredJobs = this.props.jobs.filter(\n      job =>\n        (isDef(FilterControlstate.farm_name)\n          ? job.arguments && job.arguments.farm_id\n            ? job.arguments.farm_id.includes(FilterControlstate.farm_name.value)\n            : job.arguments && job.arguments.farm_ids\n            ? job.arguments.farm_ids.includes(\n                FilterControlstate.farm_name.value\n              )\n            : null\n          : {}) &&\n        (isDef(FilterControlstate.status)\n          ? job.currentState === FilterControlstate.status.value\n          : {}) &&\n        (isDef(FilterControlstate.job_type)\n          ? job.typeId === FilterControlstate.job_type.value\n          : {})\n    );\n  }\n\n  toSelectOption = ({ name, id }) => ({ label: name, value: id });\n\n  onCloseFlyout = () => this.setState({ openFlyout: false });\n\n  render() {\n    const {\n      t,\n      jobs,\n      jobsError,\n      isJobsPending,\n      farms,\n      isFarmsPending,\n      // jobsLastUpdated,\n      fetchJobs,\n      abortJob,\n      jobTypes\n    } = this.props;\n\n    const { openFlyout, filterState } = this.state;\n\n    farmsNameObject = farms.map(this.toSelectOption);\n    jobTypesObject = jobTypes\n      .filter(jobType => jobType.name !== undefined)\n      .map(this.toSelectOption);\n\n    const gridProps = {\n      onGridReady: this.onGridReady,\n      rowData: isJobsPending\n        ? undefined\n        : filterState && filterState.isFilterOn\n        ? filteredJobs\n        : jobs || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: this.props.t,\n      refresh: fetchJobs,\n      abortJob: abortJob,\n      onRowClicked: ({ node }) => node.setSelected(!node.isSelected())\n    };\n\n    const filterConfig = {\n      FilterList: [\n        {\n          List: farmsNameObject,\n          type: FormElementType.select,\n          typeProps: {\n            selectedValue: filterState.selectedFarmName\n              ? filterState.selectedFarmName\n              : undefined,\n            placeholder: t(\"jobs.flyouts.selectFarms\")\n          },\n          label: t(\"jobs.flyouts.selectFarms\"),\n          filterKey: \"farm_name\",\n          className: \"\"\n        },\n        {\n          List: jobTypesObject,\n          type: FormElementType.select,\n          typeProps: {\n            selectedValue: filterState.selectedJobType\n              ? filterState.selectedJobType\n              : undefined,\n            placeholder: t(\"jobs.flyouts.jobSelect\")\n          },\n          label: t(\"jobs.flyouts.selectJobs\"),\n          filterKey: \"job_type\",\n          className: \"\"\n        },\n        {\n          List: getJobSelectObjectData(),\n          type: FormElementType.select,\n          typeProps: {\n            selectedValue: filterState.selectedStatus\n              ? filterState.selectedStatus\n              : undefined,\n            placeholder: t(\"jobs.flyouts.statusSelect\")\n          },\n          label: t(\"jobs.flyouts.status\"),\n          filterKey: \"status\",\n          className: \"\"\n        }\n      ],\n\n      applyCallback: this.filterJobsGrid,\n      resetCallback: this.onResetClick,\n      header: {\n        className: \"\",\n        content: t(\"jobs.flyouts.filter\")\n      }\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"jobs.searchPlaceholder\")}\n            />\n            {this.state.contextBtns}\n            <ContextMenuAlign right={true}>\n              <Btn\n                svg={\n                  filterState.filtersApplied > 0\n                    ? svgs.appliedFilter\n                    : svgs.filter\n                }\n                className=\"filter-job\"\n                onClick={this.filterJobsFlyout}\n              >\n                {this.props.t(\"jobs.filter\")}{\" \"}\n                {filterState.filtersApplied > 0 && (\n                  <span>{`(${filterState.filtersApplied})`}</span>\n                )}\n              </Btn>\n            </ContextMenuAlign>\n          </ContextMenuAlign>\n        </ContextMenu>\n\n        <PageContent className=\"jobs-container\" key=\"page-content\">\n          {/* <RefreshBar\n            refresh={fetchJobs}\n            time={jobsLastUpdated}\n            isPending={isJobsPending}\n            t={t}\n          /> */}\n          <PageTitle titleValue={t(\"jobs.title\")} />\n          {!!jobsError && <AjaxError t={t} error={jobsError} />}\n          {!jobsError && <JobsGrid {...gridProps} />}\n          {openFlyout && (\n            <FilterControl\n              t={t}\n              onCloseFlyout={this.onCloseFlyout}\n              isPending={isFarmsPending}\n              filterConfig={filterConfig}\n            />\n          )}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Jobs, \"Jobs Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport {\n  epics as jobsEpics,\n  redux as jobsRedux,\n  getJobs,\n  getJobsError,\n  getJobsLastUpdated,\n  getJobsPendingStatus,\n  getJobTypes,\n  getJobTypesError,\n  getJobTypesPendingStatus,\n  getJobTypesLastUpdated\n} from \"store/reducers/jobsReducer\";\n\nimport {\n  epics as farmEpics,\n  getFarms,\n  getFarmsMap,\n  getFarmsError,\n  getFarmsPendingStatus,\n  getFarmsLastUpdated\n} from \"store/reducers/farmsReducer\";\nimport Jobs from \"./jobs\";\n\n// Pass the data\nconst mapStateToProps = state => ({\n  farms: getFarms(state),\n  farmsError: getFarmsError(state),\n  isFarmsPending: getFarmsPendingStatus(state),\n  farmsLastUpdated: getFarmsLastUpdated(state),\n  jobs: getJobs(state),\n  jobTypes: getJobTypes(state),\n  jobTypesError: getJobTypesError(state),\n  isJobTypesPending: getJobTypesPendingStatus(state),\n  jobTypeslastUpdated: getJobTypesLastUpdated(state),\n  jobsError: getJobsError(state),\n  isJobsPending: getJobsPendingStatus(state),\n  jobsLastUpdated: getJobsLastUpdated(state),\n  farmsMap: getFarmsMap(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchJobs: () => dispatch(jobsEpics.actions.fetchJobs()),\n  abortJob: job => dispatch(jobsRedux.actions.abortJob(job)),\n  fetchJobTypes: () => dispatch(jobsEpics.actions.fetchJobTypes()),\n  fetchFarms: () => dispatch(farmEpics.actions.fetchFarms())\n});\n\nexport const JobsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Jobs)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport {\n  SoftSelectLinkRenderer,\n  TimeRenderer\n} from \"components/shared/cellRenderers\";\nimport {\n  /* EMPTY_FIELD_VAL,*/ gridValueFormatters\n} from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const sensorsColumnDefs = {\n  id: {\n    headerName: \"sensors.grid.id\",\n    field: \"id\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer\n  },\n  name: {\n    headerName: \"sensors.grid.name\",\n    field: \"name\",\n    sort: \"asc\",\n    cellRendererFramework: SoftSelectLinkRenderer,\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  sensorType: {\n    headerName: \"sensors.grid.type\",\n    field: \"modelName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  farm: {\n    headerName: \"sensors.grid.farm\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  portType: {\n    headerName: \"sensors.grid.portType\",\n    field: \"port.type\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  parentDevice: {\n    headerName: \"sensors.grid.parentDevice\",\n    field: \"parentDevice\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  portName: {\n    headerName: \"sensors.grid.portName\",\n    field: \"port.name\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  lastUpdated: {\n    headerName: \"sensors.grid.lastUpdated\",\n    field: \"lastModifiedAt\",\n    cellRendererFramework: TimeRenderer\n  }\n};\n\n/** Given an farm object, extract and return the device Id */\nexport const getSoftSelectId = ({ id }) => id;\n\n/** Shared farm grid AgGrid properties */\nexport const defaultSensorGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"single\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { isDef, dateFormat } from \"utilities\";\nimport moment from \"moment\";\n\nimport { PropertiesTable } from \"components/shared\";\nexport class SensorProperties extends React.Component {\n  render() {\n    const { sensorData, t } = this.props;\n\n    const SensorMeasuresArray = [];\n    let sensorName = undefined;\n    if (sensorData.SensorMeasuresList !== undefined) {\n      sensorData.SensorMeasuresList.map(sensorMeasure =>\n        SensorMeasuresArray.push(sensorMeasure.name)\n      );\n      sensorName = SensorMeasuresArray.join(\" , \");\n    }\n\n    const leftTableData = {\n      [t(\"sensors.flyouts.details.property.sensorName\")]: sensorData.name,\n      [t(\"sensors.flyouts.details.property.hardwareID\")]: sensorData.hardwareId,\n      [t(\"sensors.flyouts.details.property.sensorType\")]: sensorData.modelName,\n      [t(\n        \"sensors.flyouts.details.property.location\"\n      )]: sensorData.locationCordinate,\n      [t(\n        \"sensors.flyouts.details.property.parentDevice\"\n      )]: sensorData.parentDevice,\n      [t(\"sensors.flyouts.details.property.portType\")]: (sensorData.port || {})\n        .type\n    };\n\n    const rightTableData = {\n      [t(\"sensors.flyouts.details.property.sensorId\")]: (\n        <span className=\"sensorid\">{sensorData.id}</span>\n      ),\n      [t(\"sensors.flyouts.details.property.portName\")]: (sensorData.port || {})\n        .name,\n      [t(\"sensors.flyouts.details.property.addedOn\")]: moment(\n        sensorData.createdAt\n      ).format(dateFormat),\n      [t(\"sensors.flyouts.details.property.lastUpdated\")]: moment(\n        sensorData.lastModifiedAt\n      ).format(dateFormat),\n      [t(\"sensors.flyouts.details.property.farm\")]: isDef(\n        sensorData.farmName\n      ) ? (\n        <Link\n          to={{\n            pathname: `/farms/${sensorData.farmId}`,\n            state: {\n              id: sensorData.farmId,\n              farmName: sensorData.farmName\n            }\n          }}\n        >\n          {sensorData.farmName}\n        </Link>\n      ) : null,\n      [t(\"sensors.flyouts.details.property.measures\")]: sensorName\n    };\n\n    return (\n      <PropertiesTable\n        leftTableData={leftTableData}\n        rightTableData={rightTableData}\n      />\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport Flyout from \"components/shared/flyout\";\nimport { TelemetryPanelContainer as TelemetryPanel } from \"components/shared/telemetryPanel\";\nimport { svgs } from \"utilities\";\nimport { Svg } from \"components/shared/svg/svg\";\nimport { SensorProperties } from \"components/pages/sensors/sensorProperties/sensorProperties\";\nimport { appInsights, reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nconst Section = Flyout.Section;\n\nclass SensorDetails extends Component {\n  componentDidMount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyOpen: Sensor Details\" });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.sensorData.id !== this.props.sensorData.id) {\n      appInsights.trackEvent({ name: \"UiEvent:FlyChange: Sensor Details\" });\n    }\n  }\n  componentWillUnmount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyClose: Sensor Details\" });\n  }\n  render() {\n    const { t, onClose, sensorData, theme } = this.props;\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title />\n          <Flyout.CloseBtn onClick={onClose} />\n        </Flyout.Header>\n        <Flyout.Content className=\"sensor-details-container\">\n          {\n            <div className=\"sensor-details-container\">\n              <div>\n                <table className=\"header-table\">\n                  <tbody>\n                    <tr>\n                      <td className=\"sensorType\">\n                        <Svg\n                          path={\n                            sensorData.deviceModelType === \"Node\"\n                              ? svgs.nodeBig\n                              : svgs.gatewayBig\n                          }\n                        />\n                      </td>\n                      <td className=\"sensorName\">\n                        <div className=\"sensor-title\"> {sensorData.name}</div>\n                      </td>\n\n                      <td className=\"callspan-td\" />\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <Section.Container className=\"sensor-property-container\">\n                <Section.Header>\n                  {t(\"sensors.flyouts.details.property.title\")}\n                </Section.Header>\n                <Section.Content>\n                  <div>\n                    <SensorProperties sensorData={sensorData} t={t} />\n                  </div>\n                </Section.Content>\n              </Section.Container>\n              {/**\n              <Section.Container>\n                <Section.Header>\n                  {t(\"sensors.flyouts.details.alert.title\")}\n                </Section.Header>\n                <Section.Content />\n              </Section.Container>\n              */}\n              <Section.Container\n                className=\"sensor-telemetry-panel\"\n                collapsable={false}\n              >\n                <Section.Header>\n                  {t(\"sensors.flyouts.details.telemetry.title\")}\n                </Section.Header>\n                <Section.Content>\n                  <TelemetryPanel\n                    theme={theme}\n                    t={t}\n                    showHeader={false}\n                    sensorIds={[this.props.sensorData.id]}\n                  />\n                </Section.Content>\n              </Section.Container>\n            </div>\n          }\n        </Flyout.Content>\n      </Flyout.Container>\n    );\n  }\n}\n\nexport default withAITracking(\n  reactPlugin,\n  SensorDetails,\n  \"Sensor Details Flyout\"\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport SensorDetails from \"./sensorDetails\";\nimport {\n  getTheme,\n  getTimeSeriesExplorerUrl,\n  getTimeInterval\n} from \"store/reducers/appReducer\";\n\nimport {\n  getSensors,\n  getSensorError,\n  getSensorPendingStatus,\n  getSensorLastUpdated\n} from \"store/reducers/sensorsReducer\";\n\n// Pass the device details\nconst mapStateToProps = state => ({\n  sensors: getSensors(state),\n  sensorsError: getSensorError(state),\n  sensorLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n\n  theme: getTheme(state),\n  timeSeriesExplorerUrl: getTimeSeriesExplorerUrl(state),\n  timeInterval: getTimeInterval(state)\n});\n\nexport const SensorDetailsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    null\n  )(SensorDetails)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { PcsGrid, ComponentArray, Btn, Protected } from \"components/shared\";\nimport { sensorsColumnDefs, defaultSensorGridProps } from \"./sensorsGridConfig\";\nimport { isFunc, translateColumnDefs, svgs } from \"utilities\";\nimport { checkboxColumn } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { DeleteModal } from \"components/shared/deleteModal/deleteModal\";\nimport { SensorDetailsContainer } from \"../flyouts/sensorDetails.container\";\nimport { permissions /* toDiagnosticsModel*/ } from \"services/models\";\n\nconst closedFlyoutState = {\n  openFlyoutName: undefined,\n  softSelectedSensorId: undefined,\n  softSelectedSensorData: undefined\n};\n\nconst initialState = {\n  openFlyoutName: undefined,\n  softSelectedId: undefined,\n  selectedSensorList: undefined\n};\n\nexport class SensorsGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = initialState;\n    // Default device grid columns\n    this.columnDefs = [\n      checkboxColumn,\n      sensorsColumnDefs.name,\n      sensorsColumnDefs.sensorType,\n      sensorsColumnDefs.farm,\n      sensorsColumnDefs.portType,\n      sensorsColumnDefs.parentDevice,\n      sensorsColumnDefs.portName,\n      sensorsColumnDefs.lastUpdated\n    ];\n    this.contextBtns = (\n      <ComponentArray>\n        <Protected permissions={permissions.deleteSensors}>\n          <Btn svg={svgs.trash} onClick={this.openModal(\"delete\")}>\n            {props.t(\"sensors.modal.delete\")}\n          </Btn>\n        </Protected>\n      </ComponentArray>\n    );\n  }\n\n  /**\n   * Get the grid api options\n   *\n   * @param {Object} gridReadyEvent An object containing access to the grid APIs\n   */\n  onGridReady = gridReadyEvent => {\n    this.sensorGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  openModal = ModelName => () =>\n    this.setState({\n      openModalName: ModelName\n    });\n\n  closeModal = () =>\n    this.setState({\n      openModalName: undefined\n    });\n\n  clickContextBtn = input => () => {\n    // Just for demo purposes. Don't console log in a real grid.\n  };\n\n  openFlyout = flyoutName => () =>\n    this.setState({\n      openFlyoutName: flyoutName,\n      softSelectedSensorId: undefined,\n      softSelectedSensorData: undefined\n    });\n\n  getOpenFlyout = () => {\n    const constDetails = \"details\";\n    switch (this.state.openFlyoutName) {\n      case constDetails:\n        return (\n          <SensorDetailsContainer\n            key=\"sensor-device-key\"\n            onClose={this.closeFlyout}\n            sensorId={this.state.softSelectedSensorId}\n            sensorData={this.state.softSelectedSensorData}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n  /**\n   * Handles soft select props method.\n   * Soft selection happens when the user clicks on the row.\n   *\n   * @param rowId The id of the currently soft selected item\n   * @param rowData The rowData from the underlying grid. MAY BE OUT OF DATE.\n   */\n\n  closeFlyout = () => this.setState(closedFlyoutState);\n\n  onSoftSelectChange = (rowId, rowData) => {\n    // Note: only the Id is reliable, rowData may be out of date\n    const { onSoftSelectChange } = this.props;\n    const DETAILS = \"details\";\n    if (rowId) {\n      this.setState({\n        openFlyoutName: DETAILS,\n        softSelectedSensorId: rowId,\n        softSelectedSensorData: this.props.rowData.find(obj => obj.id === rowId)\n      });\n    } else {\n      this.closeFlyout();\n    }\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(rowId, rowData);\n    }\n  };\n\n  /**\n   * Handles context filter changes and calls any hard select props method.\n   * Hard selection happens when the user checks the box for the row.\n   *\n   * @param {Array} selectedObjs A list of currently selected objects in the grid\n   */\n  onHardSelectChange = selectedObjs => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n    // Show the context buttons when there are rows checked.\n    if (isFunc(onContextMenuChange)) {\n      onContextMenuChange(selectedObjs.length === 1 ? this.contextBtns : null);\n      this.setState({ selectedSensorList: selectedObjs[0] });\n    }\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedObjs);\n    }\n  };\n\n  deleteDevices = () => {\n    this.props.sensorListUpdate(this.state.selectedSensorList);\n  };\n  getModel = () => {\n    const constdelete = \"delete\";\n    switch (this.state.openModalName) {\n      case constdelete:\n        return (\n          <DeleteModal\n            key=\"delete-modal\"\n            type=\"deleteDevice\"\n            t={this.props.t}\n            deleteConfirmation={this.props.t(\n              \"sensors.deleteModal.deleteConfirmation\",\n              { returnObjects: true }\n            )}\n            title={this.props.t(\"sensors.deleteModal.title\")}\n            deleteItem={this.deleteDevices}\n            onClose={this.closeModal}\n            deleteBtn={this.props.t(\"modal.delete\")}\n            icon={svgs.trash}\n            isPending={this.props.deleteSensorPending}\n            deleteModalError={this.props.deleteModalError}\n            deleteModalSuccess={this.props.deleteModalSuccess}\n            successMsg={this.props.t(\"sensors.deleteSuccess\")}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  render() {\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultSensorGridProps,\n      columnDefs: translateColumnDefs(this.props.t, this.columnDefs),\n      sizeColumnsToFit: true,\n\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: (this.state.softSelectedSensorId || {}).id,\n      ...this.props, // Allow default property overrides\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: this.props.t\n      },\n      /* Grid Events */\n      onRowClicked: ({ node }) => node.setSelected(!node.isSelected()),\n      onGridReady: this.onGridReady,\n      onSoftSelectChange: this.onSoftSelectChange,\n      onHardSelectChange: this.onHardSelectChange,\n      onColumnMoved: this.onColumnMoved,\n      onSortChanged: this.onSortChanged\n    };\n\n    return [\n      <PcsGrid key=\"sensor-grid-key\" {...gridProps} />,\n      this.getOpenFlyout(),\n      this.getModel()\n    ];\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport {\n  AjaxError,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput\n} from \"components/shared\";\nimport { SensorsGrid } from \"./sensorsGrid\";\nimport \"./sensors.scss\";\nimport { sensorService } from \"services\";\nimport { isDef } from \"utilities\";\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nconst closedDeletePopupState = { openDeleteDevicePopup: undefined };\n\nclass Sensors extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sensorsList: [],\n      ...closedDeletePopupState,\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      deleteSensorPending: false\n    };\n  }\n\n  fetchApiData = () => {\n    const {\n      fetchSensors,\n      fetchSensorModels,\n      fetchDevices,\n      sensorsLastUpdated,\n      isSensorsPending,\n      sensorModelsLastUpdated,\n      isSensorModelsPending,\n      devicesLastUpdated,\n      isDevicesPending\n    } = this.props;\n    if (!sensorsLastUpdated && !isSensorsPending) fetchSensors();\n    if (!sensorModelsLastUpdated && !isSensorModelsPending) fetchSensorModels();\n    if (!isDevicesPending && !devicesLastUpdated) fetchDevices();\n  };\n  locFunc = (lat, lang) => {\n    let locationCordinate = undefined;\n    if (isDef(lat && lang)) {\n      locationCordinate = lat + \" , \" + lang;\n    }\n\n    return locationCordinate;\n  };\n\n  refreshSensorData = () => {\n    const { fetchSensors, fetchSensorModels, fetchDevices } = this.props;\n    fetchSensors();\n    fetchSensorModels();\n    fetchDevices();\n  };\n\n  componentDidMount() {\n    if (!this.props.sensorsLastUpdated && !this.props.isSensorsPending)\n      this.fetchApiData();\n    else this.sensorDataMappingFromProp();\n  }\n\n  onContextMenuChange = contextBtns =>\n    this.setState({\n      contextBtns,\n      openFlyoutName: undefined\n    });\n  onGridReady = gridReadyEvent => (this.sensorGridApi = gridReadyEvent.api);\n  searchOnChange = ({ target: { value } }) => {\n    if (this.sensorGridApi) this.sensorGridApi.setQuickFilter(value);\n  };\n\n  sensorDataMappingFromProp = () => {\n    const { sensors, sensorModels, devices } = this.props;\n    let deviceMapWithParent;\n    let sensorModelList;\n    const Sensorslist = sensors.map(item => {\n      return {\n        ...item\n      };\n    });\n    Sensorslist.forEach(sensor => {\n      sensorModelList = sensorModels.find(\n        sensorModel => sensorModel.id === sensor.sensorModelId\n      );\n      sensor.modelType =\n        sensorModelList === undefined ? undefined : sensorModelList.type;\n      sensor.modelName =\n        sensorModelList === undefined ? undefined : sensorModelList.name;\n      deviceMapWithParent = devices.find(\n        devicePrarent => devicePrarent.id === sensor.deviceId\n      );\n      sensor.parentDevice =\n        deviceMapWithParent === undefined\n          ? undefined\n          : deviceMapWithParent.name;\n      sensor.SensorMeasuresList =\n        sensorModelList === undefined\n          ? undefined\n          : sensorModelList.sensorMeasures;\n      sensor.farmName =\n        deviceMapWithParent === undefined\n          ? undefined\n          : deviceMapWithParent.farmName;\n      sensor.farmId =\n        deviceMapWithParent === undefined\n          ? undefined\n          : deviceMapWithParent.farmId;\n      sensor.deviceModelType =\n        deviceMapWithParent === undefined\n          ? undefined\n          : deviceMapWithParent.deviceModelType;\n      sensor.locationCordinate =\n        sensor.location === undefined\n          ? undefined\n          : this.locFunc(sensor.location.latitude, sensor.location.longitude);\n    });\n    this.setState({ sensorsList: Sensorslist });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // TO DO: Map this code on sensor selecter with one epic calling multiple epics for preformance inprovement.\n    if (\n      prevProps.sensors !== this.props.sensors ||\n      prevProps.sensorModels !== this.props.sensorModels ||\n      prevProps.devices !== this.props.devices\n    ) {\n      this.sensorDataMappingFromProp();\n    }\n  }\n  sensorListUpdate = Ids => {\n    this.setState({\n      deleteModalSuccess: false,\n      deleteModalError: undefined,\n      deleteSensorPending: true\n    });\n    this.subscription = sensorService.deleteSensor(Ids.id).subscribe(\n      () => {\n        this.props.deleteSensorsById([Ids.id]);\n        this.setState({\n          deleteModalError: undefined,\n          deleteModalSuccess: true,\n          deleteSensorPending: false\n        });\n      },\n      error =>\n        this.setState({\n          deleteModalError: error,\n          deleteModalSuccess: false,\n          isPending: false,\n          changesApplied: true,\n          deleteSensorPending: false\n        }),\n      () =>\n        this.setState({\n          isPending: false,\n          changesApplied: true,\n          ruleDeleted: true\n        })\n    );\n  };\n  closeDeletePopup = () => this.setState(closedDeletePopupState);\n\n  render() {\n    const {\n      t,\n      isSensorsPending,\n      // sensorsLastUpdated,\n      sensorsError\n    } = this.props;\n    const {\n      deleteModalSuccess,\n      deleteModalError,\n      deleteSensorPending\n    } = this.state;\n    const gridProps = {\n      sensorListUpdate: this.sensorListUpdate,\n      sensorList: this.state.sensorsList,\n      onGridReady: this.onGridReady,\n      rowData: isSensorsPending ? undefined : this.state.sensorsList || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: this.props.t,\n      deleteModalSuccess: deleteModalSuccess,\n      deleteModalError: deleteModalError,\n      deleteSensorPending: deleteSensorPending\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"sensors.searchPlaceholder\")}\n            />\n            {this.state.contextBtns}\n          </ContextMenuAlign>\n        </ContextMenu>\n        <PageContent className=\"sensors-container\">\n          {/* <RefreshBar\n            refresh={this.refreshSensorData}\n            time={sensorsLastUpdated}\n            isPending={isSensorsPending}\n            t={t}\n          /> */}\n          <PageTitle\n            titleValue={t(\"sensors.title\").concat(\n              \"(\",\n              String(this.state.sensorsList.length),\n              \")\"\n            )}\n          />\n          {!!sensorsError && <AjaxError t={t} error={sensorsError} />}\n          {!sensorsError && <SensorsGrid {...gridProps} />}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Sensors, \"Sensors Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport {\n  epics as sensorEpics,\n  getSensors,\n  redux as sensorRedux,\n  getSensorModels,\n  getSensorLastUpdated,\n  getSensorPendingStatus,\n  getSensorModelPendingStatus,\n  getSensorModelLastUpdated,\n  getSensorError\n} from \"store/reducers/sensorsReducer\";\nimport {\n  epics as deviceEpics,\n  getDevices,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus\n} from \"store/reducers/devicesReducer\";\nimport Sensors from \"./sensors\";\n\n// Pass the data\nconst mapStateToProps = state => ({\n  sensors: getSensors(state),\n  sensorModels: getSensorModels(state),\n  devices: getDevices(state),\n  sensorsError: getSensorError(state),\n  sensorsLastUpdated: getSensorLastUpdated(state),\n  isSensorsPending: getSensorPendingStatus(state),\n  sensorModelsLastUpdated: getSensorModelLastUpdated(state),\n  isSensorModelsPending: getSensorModelPendingStatus(state),\n  devicesLastUpdated: getDevicesLastUpdated(state),\n  isDevicesPending: getDevicesPendingStatus(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchSensors: () => dispatch(sensorEpics.actions.fetchSensors()),\n  fetchSensorModels: () => dispatch(sensorEpics.actions.fetchSensorModels()),\n  deleteSensorsById: sensor =>\n    dispatch(sensorRedux.actions.deleteSensorsbyId(sensor)),\n  fetchDevices: () => dispatch(deviceEpics.actions.fetchDevices())\n});\n\nexport const SensorContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Sensors)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport {\n  TimeRenderer,\n  SeverityRenderer,\n  ruleNameRenderer\n} from \"components/shared/cellRenderers\";\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const alertsColumnDefs = {\n  ruleName: {\n    headerName: \"alerts.grid.ruleName\",\n    field: \"ruleName\",\n    sort: \"asc\",\n    filter: \"text\",\n    cellRendererFramework: ruleNameRenderer,\n    comparator: caseInsensitiveStringComparator\n  },\n  description: {\n    headerName: \"alerts.grid.description\",\n    field: \"ruleDescription\",\n    filter: \"text\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  },\n  severity: {\n    headerName: \"alerts.grid.ruleSeverity\",\n    field: \"ruleSeverity\",\n    filter: \"text\",\n    cellRendererFramework: SeverityRenderer\n  },\n  totalCount: {\n    headerName: \"alerts.grid.totalCount\",\n    field: \"counts.total\"\n  },\n  open: {\n    headerName: \"alerts.grid.open\",\n    field: \"counts.open\"\n  },\n  acknowledged: {\n    headerName: \"alerts.grid.acknowledged\",\n    field: \"counts.acknowledged\"\n  },\n  closed: {\n    headerName: \"alerts.grid.closed\",\n    field: \"counts.closed\"\n  },\n  lastOccurrence: {\n    headerName: \"alerts.grid.lastOccurrence\",\n    field: \"lastOccurrence\",\n    cellRendererFramework: TimeRenderer,\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  }\n};\n\nexport const getSoftSelectId = ({ id }) => id;\n\n/** Shared alerts grid AgGrid properties */\nexport const defaultAlertsGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  pagination: true,\n  paginationPageSize: Config.paginationPageSize,\n  rowSelection: \"multiple\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { PcsGrid } from \"components/shared\";\nimport { alertsColumnDefs, defaultAlertsGridProps } from \"./alertsGridConfig\";\nimport { isFunc, translateColumnDefs } from \"utilities\";\nconst initialState = {\n  softSelectedId: undefined,\n  softSelectedAlert: undefined\n};\n\nexport class AlertsGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    // Set the initial state\n    this.state = initialState;\n\n    // Default device grid columns\n    this.columnDefs = [\n      alertsColumnDefs.ruleName,\n      alertsColumnDefs.description,\n      alertsColumnDefs.severity,\n      alertsColumnDefs.totalCount,\n      alertsColumnDefs.open,\n      alertsColumnDefs.acknowledged,\n      alertsColumnDefs.closed,\n      alertsColumnDefs.lastOccurrence\n    ];\n  }\n\n  onGridReady = gridReadyEvent => {\n    this.alertsGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  onSoftSelectChange = (rowId, rowData) => {\n    // Note: only the Id is reliable, rowData may be out of date\n    const { onSoftSelectChange } = this.props;\n\n    if (rowId) {\n      this.setState({\n        softSelectedId: rowId,\n        softSelectedAlert: rowData\n      });\n    }\n\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(rowId, rowData);\n    }\n  };\n\n  onHardSelectChange = selectedAlerts => {\n    const { onContextMenuChange, onHardSelectChange } = this.props;\n    // Show the context buttons when there are rows checked.\n    if (isFunc(onContextMenuChange)) {\n      onContextMenuChange(selectedAlerts.length > 0 ? this.contextBtns : null);\n    }\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedAlerts);\n    }\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  render() {\n    const { softSelectedAlert } = this.state;\n    const { t } = this.props;\n\n    const gridProps = {\n      /* Grid Properties */\n      ...defaultAlertsGridProps,\n      columnDefs: translateColumnDefs(t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: (softSelectedAlert || {}).id,\n      ...this.props, // Allow default property overrides\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: t\n      },\n      onGridReady: this.onGridReady,\n      onSoftSelectChange: this.onSoftSelectChange,\n      onHardSelectChange: this.onHardSelectChange\n    };\n\n    return <PcsGrid key=\"alert-grid-key\" {...gridProps} />;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport \"util\";\nimport {\n  AjaxError,\n  ComponentArray,\n  ContextMenu,\n  ContextMenuAlign,\n  PageContent,\n  PageTitle,\n  // RefreshBarContainer as RefreshBar,\n  SearchInput\n} from \"components/shared\";\nimport { AlertsGrid } from \"./alertsGrid\";\nimport \"./alerts.scss\";\nimport { reactPlugin } from \"applicationInsights\";\nimport { withAITracking } from \"@microsoft/applicationinsights-react-js\";\n\nclass Alerts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contextBtns: null\n    };\n\n    const {\n      rulesLastUpdated,\n      rulesError,\n      fetchRules,\n      alertsLastUpdated,\n      alertsError,\n      fetchAlerts\n    } = this.props;\n\n    if (!rulesLastUpdated && !rulesError) fetchRules();\n    if (!alertsLastUpdated && !alertsError) fetchAlerts();\n  }\n\n  onContextMenuChange = contextBtns => this.setState({ contextBtns });\n\n  onGridReady = gridReadyEvent => (this.alertsGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.alertsGridApi) this.alertsGridApi.setQuickFilter(value);\n  };\n\n  onRefresh() {\n    const { fetchAlerts, fetchRules } = this.props;\n    fetchAlerts();\n    fetchRules();\n  }\n\n  render() {\n    const {\n      t,\n      alertsError,\n      isAlertsPending,\n      // alertsLastUpdated,\n      // fetchAlerts,\n      alertsByRule\n    } = this.props;\n\n    const gridProps = {\n      onGridReady: this.onGridReady,\n      rowData: isAlertsPending ? undefined : alertsByRule || [],\n      onContextMenuChange: this.onContextMenuChange,\n      t: t,\n      refresh: this.onRefresh\n    };\n\n    return (\n      <ComponentArray>\n        <ContextMenu>\n          <ContextMenuAlign left={true}>\n            <SearchInput\n              onChange={this.searchOnChange}\n              placeholder={t(\"alerts.searchPlaceholder\")}\n            />\n          </ContextMenuAlign>\n        </ContextMenu>\n\n        <PageContent className=\"alerts-container\" key=\"page-content\">\n          {/* <RefreshBar\n            refresh={fetchAlerts}\n            time={alertsLastUpdated}\n            isPending={isAlertsPending}\n            t={t}\n          /> */}\n          <PageTitle\n            titleValue={t(\"alerts.title\").concat(\n              \"(\",\n              String(alertsByRule.length),\n              \")\"\n            )}\n          />\n          {!!alertsError && <AjaxError t={t} error={alertsError} />}\n          {!alertsError && <AlertsGrid {...gridProps} />}\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n\nexport default withAITracking(reactPlugin, Alerts, \"Alerts Grid\");\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport {\n  epics as rulesAlertsEpics,\n  getAlerts,\n  getAlertsError,\n  getAlertsPendingStatus,\n  getAlertsLastUpdated,\n  getAlertsRuleBased,\n  getRules,\n  getRulesError,\n  getRulesLastUpdated\n} from \"store/reducers/rulesAlertsReducer\";\nimport Alerts from \"./alerts\";\n\n// Pass the data\nconst mapStateToProps = state => ({\n  rules: getRules(state),\n  rulesError: getRulesError(state),\n  rulesLastUpdated: getRulesLastUpdated(state),\n  alerts: getAlerts(state),\n  alertsByRule: getAlertsRuleBased(state),\n  alertsError: getAlertsError(state),\n  isAlertsPending: getAlertsPendingStatus(state),\n  alertsLastUpdated: getAlertsLastUpdated(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchAlerts: () => dispatch(rulesAlertsEpics.actions.fetchAlerts()),\n  fetchRules: () => dispatch(rulesAlertsEpics.actions.fetchRules())\n});\n\nexport const AlertsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Alerts)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport {\n  AjaxError,\n  SuccessMessage,\n  Btn,\n  BtnToolbar,\n  Indicator,\n  Modal\n} from \"components/shared\";\nimport { svgs } from \"utilities\";\n\nimport \"./deleteModal.scss\";\n\nexport class DeleteModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      changesApplied: false\n    };\n  }\n\n  apply = () => {\n    const { deleteItem } = this.props;\n    deleteItem();\n    this.setState({ changesApplied: true });\n  };\n\n  genericCloseClick = eventName => {\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  render() {\n    const {\n      t,\n      isPending,\n      deleteModalError,\n      title,\n      deleteConfirmation,\n      deleteBtn,\n      icon,\n      deleteModalSuccess,\n      successMsg\n    } = this.props;\n    const { changesApplied } = this.state;\n\n    return (\n      <Modal\n        onClose={() => this.genericCloseClick(\"DeleteModal_ModalClose\")}\n        className=\"delete-modal-container\"\n      >\n        <Btn\n          className=\"delete-close-btn\"\n          onClick={() => this.genericCloseClick(\"DeleteModal_CloseClick\")}\n          svg={svgs.x}\n        />\n        <div className=\"delete-header-container\">{title}</div>\n        {!changesApplied && (\n          <div className=\"delete-info\">\n            {Array.isArray(deleteConfirmation) ? (\n              <div>\n                {deleteConfirmation.map((par, idx) => (\n                  <p key={idx}>{par}</p>\n                ))}\n              </div>\n            ) : (\n              <p> {deleteConfirmation}</p>\n            )}\n          </div>\n        )}\n        <div className=\"delete-summary\">\n          {!changesApplied && (\n            <BtnToolbar>\n              <Btn\n                svg={icon}\n                className=\"btn-delete\"\n                primary={true}\n                onClick={this.apply}\n              >\n                {deleteBtn}\n              </Btn>\n            </BtnToolbar>\n          )}\n          {isPending && <Indicator />}\n          {!isPending && changesApplied && deleteModalSuccess && (\n            <SuccessMessage\n              className=\"delete-modal-success\"\n              t={t}\n              key=\"delete-modal-success\"\n              successMsg={successMsg}\n            />\n          )}\n          {!isPending && changesApplied && deleteModalError !== undefined && (\n            <AjaxError\n              className=\"delete-modal-error\"\n              t={t}\n              key=\"delete-modal-error\"\n              error={deleteModalError}\n            />\n          )}\n        </div>\n      </Modal>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/btn.scss\";\n\nexport const Btn = props => {\n  const { svg, children, className, primary, ...btnProps } = props;\n  return (\n    <button\n      type=\"button\"\n      {...btnProps}\n      className={joinClasses(\n        \"btn\",\n        className,\n        primary ? \"btn-primary\" : \"btn-secondary\"\n      )}\n    >\n      {svg && <Svg path={props.svg} className=\"btn-icon\" />}\n      {children && <div className=\"btn-text\">{props.children}</div>}\n    </button>\n  );\n};\n\nBtn.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  primary: PropTypes.bool,\n  svg: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/btnToolbar.scss\";\n\nexport const BtnToolbar = props => (\n  <div className={joinClasses(\"btn-toolbar\", props.className)}>\n    {props.children}\n  </div>\n);\n\nBtnToolbar.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { joinClasses, svgs } from \"utilities\";\n\nimport \"./styles/errorMsg.scss\";\n\nexport const ErrorMsg = props => {\n  const { children, className } = props;\n  return (\n    <div className={joinClasses(\"error-message\", className)}>\n      <Svg path={svgs.error} className=\"error-icon\" />\n      {children}\n    </div>\n  );\n};\n\nErrorMsg.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Btn } from \"components/shared\";\nimport { joinClasses, svgs } from \"utilities\";\n\nimport \"./styles/fileInput.scss\";\n\nexport class FileInput extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fileInput = undefined;\n  }\n\n  setFileInputRef = element => (this.fileInput = element);\n\n  clickFileInput = () => {\n    if (this.fileInput) this.fileInput.click();\n  };\n\n  render() {\n    const { t, className, accept, onChange } = this.props;\n    return (\n      <div className={joinClasses(className, \"file-upload\")}>\n        <Btn\n          primary={true}\n          className=\"upload-btn\"\n          svg={svgs.upload}\n          onClick={this.clickFileInput}\n        >\n          {t(\"fileInput.upload\")}\n        </Btn>\n        <input\n          className=\"input-file\"\n          ref={this.setFileInputRef}\n          type=\"file\"\n          accept={accept}\n          onChange={onChange}\n        />\n      </div>\n    );\n  }\n}\n\nFileInput.propTypes = {\n  className: PropTypes.string,\n  t: PropTypes.func,\n  accept: PropTypes.string,\n  onChange: PropTypes.func\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const FormLabel = props => {\n  const {\n    formGroupId,\n    className,\n    children,\n    htmlFor,\n    isRequired,\n    ...rest\n  } = props;\n  const labelProps = {\n    ...rest,\n    className: joinClasses(\"form-group-label\", className),\n    htmlFor: htmlFor || formGroupId\n  };\n  return (\n    <label {...labelProps}>\n      {children}\n      <span className=\"field-required\">{isRequired ? \" *\" : \"\"}</span>\n    </label>\n  );\n};\n\nFormLabel.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  formGroupId: PropTypes.string,\n  htmlFor: PropTypes.string,\n  type: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isFunc, joinClasses } from \"utilities\";\n\nimport \"./styles/formGroup.scss\";\n\nlet idCounter = 0;\n\nexport class FormGroup extends Component {\n  constructor(props) {\n    super(props);\n    this.formGroupId = `formGroupId${idCounter++}`;\n  }\n\n  render() {\n    // Attach the formGroupId to allow automatic focus when a label is clicked\n    const childrenWithProps = React.Children.map(this.props.children, child => {\n      if (React.isValidElement(child) && isFunc(child.type)) {\n        return React.cloneElement(child);\n      }\n      return child;\n    });\n    return (\n      <div className={joinClasses(\"form-group\", this.props.className)}>\n        {childrenWithProps}\n      </div>\n    );\n  }\n}\n\nFormGroup.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { FormLabel } from \"./formLabel\";\nimport { FormGroup } from \"./formGroup\";\nimport { FormControl } from \"./formControl\";\nimport { svgs, joinClasses, isFunc, int } from \"utilities\";\n\nimport \"./styles/duration.scss\";\n\nexport class Duration extends Component {\n  static defaultProps = { type: \"text\" };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hours: 0,\n      minutes: 0,\n      seconds: 0\n    };\n  }\n\n  componentDidMount() {\n    const ms = (this.props.value && this.props.value.ms) || 0;\n    this.setState(this.convertMsToUnits(ms));\n  }\n\n  // TODO: Update the props to accept h, m, seconds, or value\n  componentDidUpdate() {\n    const ms = (this.props.value && this.props.value.ms) || 0;\n    this.setState(this.convertMsToUnits(ms));\n  }\n\n  convertMsToUnits(ms) {\n    // Max duration of 99h, 59m, 59s\n    const clippedMs = Math.min(ms || 0, 359999000);\n    let acc = clippedMs / 1000;\n    const seconds = Math.floor(acc % 60);\n    acc /= 60;\n    const minutes = Math.floor(acc % 60);\n    const hours = Math.floor(acc / 60);\n    return { hours, minutes, seconds };\n  }\n\n  convertUnitsToMs({ hours, minutes, seconds }) {\n    return 1000 * (60 * (60 * hours + minutes) + seconds);\n  }\n\n  createValueObject(units) {\n    const ms = this.convertUnitsToMs(units);\n    return { ...this.convertMsToUnits(ms), ms };\n  }\n\n  liftChange(value) {\n    const { onChange, name } = this.props;\n    if (isFunc(onChange)) onChange({ target: { name, value } });\n  }\n\n  onChange = ({ target }) => {\n    const { name, value } = target;\n    const newValue = this.createValueObject({\n      ...this.state,\n      [name]: int(value)\n    });\n    this.liftChange(newValue);\n  };\n\n  format(value) {\n    return `${value}`.padStart(2, \"0\");\n  }\n\n  onBlur = evt => {\n    if (this.props.onBlur) this.props.onBlur(evt);\n  };\n\n  render() {\n    const { disabled, className } = this.props;\n    const genericProps = {\n      ...Duration.defaultProps,\n      onChange: this.onChange,\n      onFocus: ({ target }) => {\n        // Work around for Edge selection bug\n        // See https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8229660/\n        setTimeout(() => target.select(), 10);\n      }, // Select contents on focus\n      disabled,\n      onBlur: this.onBlur\n    };\n    const { hours, minutes, seconds } = this.state;\n    return (\n      <div className={joinClasses(\"duration-control-container\", className)}>\n        <FormGroup>\n          <FormLabel>HH</FormLabel>\n          <FormControl\n            {...genericProps}\n            name=\"hours\"\n            value={this.format(hours)}\n          />\n        </FormGroup>\n        <Svg path={svgs.colon} className=\"duration-colon-icon\" />\n        <FormGroup>\n          <FormLabel>MM</FormLabel>\n          <FormControl\n            {...genericProps}\n            name=\"minutes\"\n            value={this.format(minutes)}\n          />\n        </FormGroup>\n        <Svg path={svgs.colon} className=\"duration-colon-icon\" />\n        <FormGroup>\n          <FormLabel>SS</FormLabel>\n          <FormControl\n            {...genericProps}\n            name=\"seconds\"\n            value={this.format(seconds)}\n          />\n        </FormGroup>\n      </div>\n    );\n  }\n}\n\nDuration.propTypes = {\n  value: PropTypes.object,\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node,\n  onChange: PropTypes.func,\n  name: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactSelect from \"react-select\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/select.scss\";\n\nconst onChangeSelect = (onChange, name) => value =>\n  onChange({ target: { name, value } });\n\nexport const Select = ({ className, onChange, name, ...props }) => {\n  return (\n    <ReactSelect\n      className={joinClasses(\"select-container\", className)}\n      {...props}\n      onChange={onChangeSelect(onChange, name)}\n    />\n  );\n};\n\nSelect.propTypes = { className: PropTypes.string };\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Duration } from \"./duration\";\nimport { Select } from \"./select\";\nimport { ErrorMsg } from \"./errorMsg\";\nimport { joinClasses, isFunc, Link } from \"utilities\";\n\nimport \"./styles/formControl.scss\";\n\nexport class FormControl extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { edited: false };\n  }\n\n  onChange = evt => {\n    const { onChange, link } = this.props;\n    if (link && isFunc(link.onChange)) link.onChange(evt);\n    if (isFunc(onChange)) onChange(evt);\n\n    !this.state.edited && this.setState({ edited: true });\n  };\n\n  onBlur = evt => {\n    if (this.props.onBlur) this.props.onBlur(evt);\n    !this.state.edited && this.setState({ edited: true });\n  };\n\n  selectControl(type, controlProps) {\n    switch (type) {\n      case \"text\":\n        return <input type=\"text\" {...controlProps} />;\n      case \"password\":\n        return <input type=\"password\" {...controlProps} />;\n      case \"number\":\n        return <input type=\"number\" {...controlProps} />;\n      case \"textarea\":\n        return <textarea type=\"text\" {...controlProps} />;\n      case \"duration\":\n        return <Duration {...controlProps} />;\n      case \"select\":\n        return <Select {...controlProps} />;\n      default:\n        return null; // Unknown form control\n    }\n  }\n\n  getErrorMsg(link, error = \"\") {\n    return link ? link.error : error;\n  }\n\n  render() {\n    const {\n      type,\n      formGroupId,\n      className,\n      link,\n      error,\n      errorState,\n      ...rest\n    } = this.props;\n    const valueOverrides = link ? { value: link.value } : {};\n    const errorMsg =\n      typeof errorState === \"undefined\" && this.state.edited && !rest.disabled\n        ? this.getErrorMsg(link, error)\n        : \"\";\n    const controlProps = {\n      ...rest,\n      id: rest.id || formGroupId,\n      className: joinClasses(\n        \"form-control\",\n        className,\n        errorState || errorMsg ? \"error\" : \"\"\n      ),\n      onChange: this.onChange,\n      onBlur: this.onBlur,\n      ...valueOverrides\n    };\n    return (\n      <div className=\"form-control-container\">\n        {this.selectControl(type, controlProps)}\n        {errorMsg && <ErrorMsg>{errorMsg}</ErrorMsg>}\n      </div>\n    );\n  }\n}\n\nFormControl.propTypes = {\n  type: PropTypes.oneOf([\n    \"text\",\n    \"password\",\n    \"number\",\n    \"textarea\",\n    \"duration\",\n    \"select\"\n  ]).isRequired,\n  errorState: PropTypes.bool,\n  formGroupId: PropTypes.string,\n  link: PropTypes.instanceOf(Link),\n  error: PropTypes.string,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/formSection.scss\";\n\nexport const FormSection = props => (\n  <div className={joinClasses(\"form-section\", props.className)}>\n    {props.children}\n  </div>\n);\n\nFormSection.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const Hyperlink = props => {\n  const { children, className, href } = props;\n\n  if (!href) return null;\n  return (\n    <a {...props} className={joinClasses(\"link\", className)}>\n      {children}\n    </a>\n  );\n};\n\nHyperlink.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  href: PropTypes.string,\n  target: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Btn } from \"components/shared\";\n\nimport \"./styles/pill.scss\";\n\nexport const Pill = ({ svg, label, onSvgClick, altSvgText }) => (\n  <div className=\"pill\">\n    {label}\n    {svg && (\n      <Btn\n        onClick={onSvgClick}\n        svg={svg}\n        className=\"pill-icon\"\n        alt={altSvgText}\n      />\n    )}\n  </div>\n);\n\nPill.propTypes = {\n  svg: PropTypes.string,\n  label: PropTypes.string,\n  onSvgClick: PropTypes.func,\n  altSvgText: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Pill } from \"./pill\";\nimport \"./styles/pillGroup.scss\";\n\nexport const PillGroup = ({ pills, onSvgClick, svg, altSvgText }) => (\n  <div className=\"pill-group\">\n    {pills.map((pill, idx) => (\n      <Pill\n        key={idx}\n        label={pill}\n        svg={svg}\n        onSvgClick={onSvgClick(idx)}\n        altSvgText={altSvgText}\n      />\n    ))}\n  </div>\n);\n\nPillGroup.propTypes = {\n  svg: PropTypes.string,\n  onSvgClick: PropTypes.func,\n  pills: PropTypes.arrayOf(PropTypes.string),\n  altSvgText: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { FormLabel } from \"./formLabel\";\nimport { isFunc, svgs, joinClasses } from \"utilities\";\n\nimport \"./styles/radio.scss\";\n\nlet radioInputCnt = 0;\n\nexport class Radio extends Component {\n  constructor(props) {\n    super(props);\n    this.formGroupId = `radioInputId${radioInputCnt++}`;\n\n    this.radioInputElement = React.createRef();\n  }\n\n  onChange = evt => {\n    const { onChange, link } = this.props;\n    if (link && isFunc(link.onChange)) link.onChange(evt);\n    if (isFunc(onChange)) onChange(evt);\n  };\n\n  // Needs to be a stateful component in order to access refs\n  render() {\n    const { className, children, id, disabled, link, ...rest } = this.props;\n    const valueOverrides = link\n      ? {\n          checked: link.value === rest.value,\n          onChange: this.onChange\n        }\n      : {};\n    const radioProps = { ...rest, ...valueOverrides };\n    let contentChildren = children;\n    if (typeof contentChildren === \"string\") {\n      contentChildren = <FormLabel>{contentChildren}</FormLabel>;\n    }\n    const childrenWithProps = React.Children.map(contentChildren, child => {\n      if (React.isValidElement(child) && isFunc(child.type)) {\n        return React.cloneElement(child, {\n          formGroupId: this.formGroupId,\n          disabled:\n            disabled ||\n            (radioProps.checked === undefined ? false : !radioProps.checked)\n        });\n      }\n      return child;\n    });\n\n    return (\n      <div className={joinClasses(\"radio-container\", className)}>\n        <div className=\"radio-input-container\">\n          <input\n            {...radioProps}\n            {...valueOverrides}\n            type=\"radio\"\n            disabled={disabled}\n            id={id || this.formGroupId}\n            ref={this.radioInputElement}\n          />\n          <Svg\n            path={svgs.radioSelected}\n            className={joinClasses(\"radio-icon\", disabled ? \"disabled\" : \"\")}\n            onClick={() => this.radioInputElement.current.click()}\n          />\n        </div>\n        <div className=\"input-contents\">{childrenWithProps}</div>\n      </div>\n    );\n  }\n}\n// className, children, id, checked, disabled\nRadio.propTypes = {\n  checked: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  id: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\n// This component has no style sheet.\n// The styles are applied contextually by its parent (expected to be FormSection).\n\nexport const SectionDesc = props => (\n  <div className={joinClasses(\"section-desc\", props.className)}>\n    {props.children}\n  </div>\n);\n\nSectionDesc.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const SummaryBody = props => (\n  <div className={joinClasses(\"summary-body\", props.className)}>\n    {props.children}\n  </div>\n);\n\nSummaryBody.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nexport const SummaryCount = props => (\n  <div className={joinClasses(\"summary-count\", props.className)}>\n    {props.children}\n  </div>\n);\n\nSummaryCount.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/summarySection.scss\";\n\nexport const SummarySection = props => (\n  <div className={joinClasses(\"summary-section\", props.className)}>\n    {props.children}\n  </div>\n);\n\nSummarySection.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Svg } from \"components/shared\";\nimport { isFunc, svgs, joinClasses } from \"utilities\";\nimport { FormLabel } from \"./formLabel\";\nimport \"./styles/toggleBtn.scss\";\n\nexport class ToggleBtn extends Component {\n  onChange = () => {\n    const { onChange, name, value } = this.props;\n    if (isFunc(onChange)) {\n      const event = {\n        target: { name, value: !value }\n      };\n      onChange(event);\n    }\n  };\n\n  render() {\n    const { value, disabled, className, children } = this.props;\n\n    const svgProps = {\n      path: svgs.loadingToggle,\n      className: joinClasses(\"pcs-toggle\", className ? className : \"\")\n    };\n    let contentChildren = children;\n    if (typeof contentChildren === \"string\") {\n      contentChildren = <FormLabel>{contentChildren}</FormLabel>;\n    }\n    const childrenWithProps = React.Children.map(contentChildren, child => {\n      if (React.isValidElement(child)) {\n        return React.cloneElement(child, {\n          formGroupId: `${this.formGroupId}_child`,\n          disabled: disabled || (value === undefined ? false : !value)\n        });\n      }\n      return child;\n    });\n    if (!disabled) {\n      svgProps.path = value ? svgs.enableToggle : svgs.disableToggle;\n      svgProps.onClick = this.onChange;\n      svgProps.className = joinClasses(\n        svgProps.className,\n        value ? \" enable-toggle\" : \" disable-toggle\"\n      );\n    } else {\n      svgProps.className = joinClasses(svgProps.className, \" disabled\");\n    }\n    return (\n      <div className=\"toggle-btn-div\">\n        <Svg {...svgProps} alt=\"\" />\n        <div className=\"input-contents\">{childrenWithProps}</div>\n      </div>\n    );\n  }\n}\n\nexport default ToggleBtn;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { joinClasses } from \"utilities\";\n\nimport \"./styles/tooltip.scss\";\n\nexport const Tooltip = props => {\n  const { content, children, position } = props;\n\n  return (\n    <div className=\"tooltip-container\">\n      <div className={joinClasses(\"tooltip\", position)}>\n        <div className=\"tooltip-content\">{content}</div>\n        <div className=\"tooltip-arrow\" />\n      </div>\n      {children}\n    </div>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { joinClasses, svgs } from \"utilities\";\n\nimport \"./styles/successMsg.scss\";\n\nexport const SuccessMsg = props => {\n  const { children, className } = props;\n  return (\n    <div className={joinClasses(\"success-message\", className)}>\n      <Svg path={svgs.online} className=\"success-icon\" />\n      {children}\n    </div>\n  );\n};\n\nSuccessMsg.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n","import { camelCaseReshape, getItems } from \"utilities\";\n\nexport const deviceModelsModel = (response = []) =>\n  getItems(response).map(deviceModelModel);\n\nexport const deviceModelModel = (response = {}) =>\n  camelCaseReshape(response, {\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    type: \"type\",\n    manufacturer: \"manufacturer\",\n    \"ports.name\": \"name\",\n    \"ports.type\": \"type\",\n    name: \"name\",\n    description: \"description\"\n  });\n\nexport const toDeviceModel = (device = {}) =>\n  camelCaseReshape(device, {\n    status: \"status\",\n    id: \"id\",\n    createdAt: \"createdAt\",\n    lastModifiedAt: \"lastModifiedAt\",\n    deviceModelId: \"deviceModelId\",\n    hardwareId: \"hardwareId\",\n    createIoTHubDevice: \"createIoTHubDevice\",\n    farmId: \"farmId\",\n    reportingInterval: \"reportingInterval\",\n    \"location.latitude\": \"latitude\",\n    \"location.longitude\": \"longitude\",\n    \"location.elevation\": \"elevation\",\n    parentDeviceId: \"parentDeviceId\",\n    name: \"name\",\n    description: \"description\",\n    properties: \"properties\"\n  });\n\nexport const toDevicesModel = (response = []) =>\n  getItems(response).map(toDeviceModel);\n\nexport const toDevicePortModel = (response = []) =>\n  response.map(deviceType =>\n    camelCaseReshape(deviceType, {\n      id: \"id\",\n      name: \"name\",\n      type: \"type\"\n    })\n  );\n\nexport const toDevicePortsModel = (response = []) =>\n  getItems(response).map(toDevicePortModel);\n\nexport const toNewDeviceRequestModel = (device = {}) => {\n  return {\n    deviceModelId: device.deviceModelId,\n    hardwareId: device.hardwareId,\n    createIoTHubDevice: device.createIoTHubDevice,\n    farmId: device.farmId,\n    reportingInterval: device.reportingInterval,\n    location: {\n      latitude: device.latitude,\n      longitude: device.longitude,\n      elevation: device.elevation\n    },\n    parentDeviceId: device.parentDeviceId,\n    name: device.name,\n    description: device.description,\n    properties: device.properties\n  };\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport \"rxjs\";\nimport { Observable } from \"rxjs\";\n\nimport moment from \"moment\";\nimport { schema, normalize } from \"normalizr\";\nimport update from \"immutability-helper\";\n\nimport { createSelector } from \"reselect\";\nimport { UserService } from \"services\";\n\nimport {\n  createReducerScenario,\n  createEpicScenario,\n  resetPendingAndErrorReducer,\n  errorPendingInitialState,\n  pendingReducer,\n  errorReducer,\n  getPending,\n  setPending,\n  toActionCreator,\n  getError\n} from \"store/utilities\";\n\nimport Config from \"app.config\";\n\n// ========================= Epics - START\nconst handleError = fromAction => error =>\n  Observable.of(\n    redux.actions.registerError(fromAction.type, { error, fromAction })\n  );\n\nexport const epics = createEpicScenario({\n  /** Fetch Users list from backend */\n  fetchUsers: {\n    type: \"USER_FETCH\",\n    epic: fromAction =>\n      Observable.from(fromAction.payload)\n        .bufferCount(Config.graphApiUserBufferSize)\n        .map(userIds => UserService.getUsersByIds(userIds))\n        .mergeAll()\n        .map(toActionCreator(redux.actions.mergeUsers, fromAction))\n        .catch(handleError(fromAction))\n  }\n});\n\nconst userSchema = new schema.Entity(\"users\");\nconst userListSchema = new schema.Array(userSchema);\n// ========================= Schemas - END\n\n// ========================= Reducers - START\nconst initialState = {\n  ...errorPendingInitialState,\n  userEntities: {},\n  userItems: [],\n  userlastUpdated: \"\"\n};\n\nconst updateUserReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { users },\n    result\n  } = normalize(payload, userListSchema);\n  return update(state, {\n    userEntities: { $set: users },\n    userItems: { $set: result },\n    userlastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\nconst mergeUserReducer = (state, { payload, fromAction }) => {\n  const {\n    entities: { users },\n    result\n  } = normalize(payload, userListSchema);\n  return update(state, {\n    userEntities: { $merge: users },\n    userItems: { $push: result },\n    userlastUpdated: { $set: moment() },\n    ...setPending(fromAction.type, false)\n  });\n};\n\n/* Action types that cause a pending flag */\nconst fetchableTypes = [epics.actionTypes.fetchUsers];\n\nexport const redux = createReducerScenario({\n  updateUsers: { type: \"USER_UPDATE\", reducer: updateUserReducer },\n  mergeUsers: { type: \"USER_MERGE\", reducer: mergeUserReducer },\n  registerError: { type: \"USER_REDUCER_ERROR\", reducer: errorReducer },\n  isFetching: { multiType: fetchableTypes, reducer: pendingReducer },\n  resetPendingAndError: {\n    type: \"USER_REDUCER_RESET_ERROR_PENDING\",\n    reducer: resetPendingAndErrorReducer\n  }\n});\n\nexport const reducer = {\n  users: redux.getReducer(initialState)\n};\n\n// ========================= Reducers - END\n\n// ========================= Selectors - START\nexport const getUsersReducer = state => state.users;\n\nexport const getUserEntities = state =>\n  getUsersReducer(state).userEntities || {};\n\nexport const getUserItems = state => getUsersReducer(state).userItems || [];\n\nexport const getUserLastUpdated = state =>\n  getUsersReducer(state).userlastUpdated;\n\nexport const getUserError = state =>\n  getError(getUsersReducer(state), epics.actionTypes.fetchUsers);\n\nexport const getUserPendingStatus = state =>\n  getPending(getUsersReducer(state), epics.actionTypes.fetchUsers);\n\nexport const getUsers = createSelector(\n  getUserEntities,\n  getUserItems,\n  (userEntities, userItems) => userItems.map(id => userEntities[id])\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport Config from \"app.config\";\nimport { isFunc } from \"utilities\";\n\nconst AzureMaps = window.atlas;\n\nexport class AzureMap extends Component {\n  componentDidMount() {\n    if (!this.map && this.props.azureMapsKey) {\n      this.initializeMap(this.props.azureMapsKey);\n    }\n  }\n\n  componentDidUpdate() {\n    if (!this.map && this.props.azureMapsKey) {\n      this.initializeMap(this.props.azureMapsKey);\n    }\n  }\n\n  componentWillUnmount() {\n    // Clean up the azure map resources on unmount\n    if (this.map) this.map.remove();\n  }\n\n  shouldComponentUpdate(nextProps) {\n    // Component props never result in a dom updates from React\n    return false;\n  }\n\n  initializeMap(azureMapsKey) {\n    const map = new AzureMaps.Map(\"map\", {\n      \"subscription-key\": azureMapsKey,\n      center: Config.mapCenterPosition,\n      zoom: 10,\n      style: \"satellite\"\n    });\n\n    map.addEventListener(\"load\", () => {\n      if (isFunc(this.props.onMapReady)) {\n        this.props.onMapReady(this.map);\n      }\n    });\n\n    // Wait until the map resources are ready.\n    map.events.add(\"ready\", () => {\n      // Optional. Add the map style control so we can see how the custom control reacts.\n      map.controls.add([new AzureMaps.control.StyleControl()], {\n        position: \"bottom-right\"\n      });\n      map.controls.add(\n        [\n          // Add zoom control to the map\n          new AzureMaps.control.ZoomControl({\n            style: \"light\"\n          })\n        ],\n        {\n          position: \"top-right\"\n        }\n      );\n    });\n\n    this.map = map;\n  }\n\n  render() {\n    return <div id=\"map\" />;\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\n/**\n * A tool for drawing polygons on the map using a mouse.\n * @param map An Azure Maps map instance to attach the drawing tool too.\n * @param beforeLayer The layer or name of a layer to render the drawing layer before.\n * @param drawingEndedCallback A callback function that is fired when a drawing has been completed. If recieves a Shape that contains a Polygon feature in it.\n */\nexport const PolygonDrawingTool = function(\n  map,\n  beforeLayer,\n  drawingEndedCallback\n) {\n  const _self = this;\n\n  const _datasource = new window.atlas.source.DataSource();\n  map.sources.add(_datasource);\n\n  let _activeShape;\n\n  const pl = new window.atlas.layer.PolygonLayer(_datasource, null, {\n    fillColor: \"rgba(255,165,0,0.2)\"\n  });\n  map.layers.add(pl, beforeLayer);\n\n  map.layers.add(\n    new window.atlas.layer.LineLayer(_datasource, null, {\n      strokeColor: \"orange\",\n      strokeWidth: 2\n    }),\n    beforeLayer\n  );\n\n  const _handleRadius = 5;\n\n  const _dragHandleLayer = new window.atlas.layer.BubbleLayer(\n    _datasource,\n    null,\n    {\n      color: \"orange\",\n      radius: _handleRadius,\n      strokeColor: \"white\",\n      strokeWidth: 2\n    }\n  );\n  map.layers.add(_dragHandleLayer, beforeLayer);\n\n  /** *********************\n   * Private Methods\n   ***********************/\n\n  // When the user presses 'esc', take the polygon out of edit mode and re-add to base map.\n  document.addEventListener(\n    \"keydown\",\n    function(e) {\n      if (e.keyCode === 27 && _activeShape) {\n        const ring = _activeShape.getCoordinates()[0];\n        ring.pop();\n\n        // Close the ring.\n        if (ring.length >= 1) {\n          ring.push([ring[0][0], ring[0][1]]); // Add the first coordinate to the end to close the polygon.\n        }\n\n        _activeShape.setCoordinates([ring]);\n        _self.endDrawing();\n      }\n    },\n    false\n  );\n\n  function mouseUp(e) {\n    if (_activeShape) {\n      const ring = _activeShape.getCoordinates()[0];\n      ring.pop(); // Remove the preview coordinate.\n      ring.push(e.position); // Add the current coordinate.\n      ring.push(e.position); // Add a preview coordinate.\n      _activeShape.setCoordinates([ring]);\n    }\n  }\n\n  function dragHandleSelected(e) {\n    if (_activeShape) {\n      const ring = _activeShape.getCoordinates()[0];\n      if (ring.length > 0) {\n        // Check to see if user clicked on or close to the first position.\n        const dist = pixelDistance(ring[0], e.position);\n        if (dist <= _handleRadius * 1.2) {\n          ring.pop(); // Remove the preview coordinate.\n          ring.pop(); // Remove the last coordinate that was added due to the maps mouseup event.\n\n          // Close the ring.\n          if (ring.length >= 1) {\n            ring.push([ring[0][0], ring[0][1]]); // Add the first coordinate to the end to close the polygon.\n          }\n\n          _activeShape.setCoordinates([ring]);\n          _self.endDrawing();\n        }\n      }\n    }\n  }\n\n  function mouseMove(e) {\n    if (_activeShape) {\n      // Update the last coordinate in the polygon which is there for preview purposes.\n      const ring = _activeShape.getCoordinates()[0];\n\n      if (ring.length > 1) {\n        ring[ring.length - 1] = e.position;\n        _activeShape.setCoordinates([ring]);\n      }\n    }\n  }\n\n  function pixelDistance(pos1, pos2) {\n    // Approximately\n    const dLat = (pos2[1] - pos1[1]) * (Math.PI / 180);\n    const dLon = (pos2[0] - pos1[0]) * (Math.PI / 180);\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(pos1[1] * (Math.PI / 180)) *\n        Math.cos(pos2[1] * (Math.PI / 180)) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const groundResolution =\n      (Math.cos((pos2[1] * Math.PI) / 180) * Math.PI) /\n      (Math.pow(2, map.getCamera().zoom) * 256);\n    return c / groundResolution;\n  }\n\n  /** *********************\n   * Public Methods\n   ***********************/\n\n  /**\n   * Clears all data in the drawing layer.\n   */\n  this.clear = function() {\n    _activeShape = null;\n    _datasource.clear();\n    _self.endDrawing();\n  };\n\n  /**\n   * Starts a new drawing session. Clears all data in the drawing layer.\n   */\n  this.startDrawing = function() {\n    _self.clear();\n\n    map.getCanvasContainer().style.cursor = \"pointer\";\n\n    _activeShape = new window.atlas.Shape(\n      new window.atlas.data.Polygon([[[]]])\n    );\n    _datasource.add(_activeShape);\n\n    // Show drag handle layer.\n    _dragHandleLayer.setOptions({\n      visible: true\n    });\n\n    // Add mouse events to map.\n    map.events.add(\"mousemove\", mouseMove);\n    map.events.add(\"mouseup\", mouseUp);\n    map.events.add(\"mouseup\", _dragHandleLayer, dragHandleSelected);\n  };\n\n  /**\n   * Stops any current drawing in progress.\n   */\n  this.endDrawing = function() {\n    map.getCanvasContainer().style.cursor = \"\";\n\n    // Hide drag handle layer.\n    _dragHandleLayer.setOptions({\n      visible: false\n    });\n\n    // Unbind mouse events\n    map.events.remove(\"mousemove\", mouseMove);\n    map.events.remove(\"mouseup\", mouseUp);\n    map.events.remove(\"mouseup\", _dragHandleLayer, dragHandleSelected);\n\n    if (drawingEndedCallback) {\n      drawingEndedCallback(_activeShape);\n    }\n  };\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  svgs,\n  isNull,\n  isEmptyCheck,\n  isJSON,\n  getCentroid,\n  geoJSONValidation,\n  KeyCodes,\n  handleKeyPressInput\n} from \"utilities\";\nimport {\n  AjaxError,\n  Indicator,\n  Btn,\n  Svg,\n  Panel,\n  PanelHeader,\n  PanelContent,\n  PanelOverlay,\n  PanelError\n} from \"components/shared\";\nimport { AzureMap } from \"./azureMap\";\nimport { PolygonDrawingTool } from \"./PolygonDrawingTool\";\n// import {mapStyles} from \"utilities\";\nimport \"./mapPanel.scss\";\n// import { toAzureMapSearchResultModel } from \"services/models\"; //TODO\n\nconst AzureMaps = window.atlas;\n\nlet datasource;\nlet drawingTools;\n\nexport class MapPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchQuery: \"\",\n      showList: false,\n      address: \"\",\n      searchUnsuccessful: false,\n      centerSet: false,\n      currentGeoJSON: props.geometry\n    };\n    this.searchAddress = this.searchAddress.bind(this);\n    this.handleSearchInputChange = this.handleSearchInputChange.bind(this);\n    this.onMapReady = this.onMapReady.bind(this);\n  }\n\n  onMapReady = map => {\n    // Create the map popup\n    this.popup = new AzureMaps.Popup();\n    const {\n      getGeoJSON,\n      geometry,\n      address,\n      azureMapsKey,\n      setGeoJSONInvalidStatus\n    } = this.props;\n    let center = this.state.centerSet;\n    const { currentGeoJSON } = this.state;\n    map.addEventListener(\"load\", function(e) {\n      datasource = new AzureMaps.source.DataSource();\n\n      map.sources.add(datasource);\n      // var pinLayer= new AzureMaps.layer.SymbolLayer(datasource);\n      // map.layers.add(pinLayer);\n\n      if (\n        !isNull(geometry) &&\n        !isEmptyCheck(geometry) &&\n        isJSON(geometry) &&\n        geoJSONValidation.isPolygon(JSON.parse(geometry))\n      ) {\n        const GeoJSON = JSON.parse(geometry);\n        if (!center) {\n          const c = getCentroid(GeoJSON.coordinates);\n          map.setCamera({\n            center: c,\n            zoom: 14\n          });\n          center = true;\n        }\n        const polygon = new AzureMaps.data.Polygon(GeoJSON.coordinates);\n        datasource.add(polygon);\n        const polygonLayer = new AzureMaps.layer.PolygonLayer(datasource);\n        map.layers.add(polygonLayer, \"abcde\");\n      }\n\n      if (!center && !isNull(address) && !isEmptyCheck(address)) {\n        fetch(\n          `https://atlas.microsoft.com/search/fuzzy/json?typeahead=true&api-version=1.0&subscription-key=${azureMapsKey}&query=${address}`\n        )\n          .then(results => {\n            return results.json();\n          })\n          .then(searchResults => {\n            if (searchResults.results.length !== 0) {\n              const results = searchResults.results;\n              const latLon = results[0].position;\n              map.setCamera({\n                center: [latLon.lon, latLon.lat],\n                zoom: 14\n              });\n              center = true;\n            }\n          });\n      }\n\n      drawingTools = new PolygonDrawingTool(map, /* pinLayer =*/ null, function(\n        polygonShape\n      ) {\n        if (polygonShape) {\n          const result = JSON.stringify(polygonShape.data.geometry);\n          getGeoJSON(result);\n          setGeoJSONInvalidStatus(false);\n        } else {\n          getGeoJSON(currentGeoJSON);\n        }\n      });\n      document\n        .getElementById(\"drawPolygon\")\n        .addEventListener(\"click\", function() {\n          drawingTools.startDrawing();\n        });\n\n      document\n        .getElementById(\"clearPolygon\")\n        .addEventListener(\"click\", function() {\n          drawingTools.clear();\n        });\n    });\n    this.setState({ centerSet: center });\n    this.map = map;\n  };\n\n  style = styleOption => {\n    if (this.map) {\n      this.map.setStyle({ style: styleOption });\n    }\n  };\n\n  /**\n * TODO provide search suggestions to the user\ninputQuery(event) {\n  this.setState({ ...this.state, searchQuery: event.target.value });\n  const target = event.target;\n  const name = target.name;\n  const value = target.value;\n  if (name === \"queryBox\" && value.length >= 3) {\n    this.getSearchResults(value);\n  }\n  console.log(mapSearch);\n}\n*/\n\n  searchAddress = address => {\n    const searchQuery = isEmptyCheck(this.state.searchQuery)\n      ? address\n      : this.state.searchQuery;\n\n    fetch(\n      `https://atlas.microsoft.com/search/fuzzy/json?typeahead=true&api-version=1.0&subscription-key=${this.props.azureMapsKey}&query=${searchQuery}`\n    )\n      .then(results => {\n        return results.json();\n      })\n      .then(searchResults => {\n        if (searchResults.results) {\n          const results = searchResults.results;\n          if (results.length === 0) {\n            this.setState({ ...this.state, searchUnsuccessful: true });\n          } else {\n            const latLon = results[0].position;\n            this.map.setCamera({\n              center: [latLon.lon, latLon.lat],\n              zoom: 13\n            });\n            this.setState({ ...this.state, searchUnsuccessful: false });\n          }\n        }\n      });\n  };\n\n  handleSearchInputChange(event) {\n    const searchBox = event.target;\n    const value = searchBox.value;\n    this.setState({ ...this.state, searchQuery: value });\n  }\n\n  render() {\n    const { t, isPending, mapKeyIsPending, azureMapsKey, error } = this.props;\n    const { searchQuery, searchUnsuccessful } = this.state;\n    const showOverlay = !error && isPending && mapKeyIsPending;\n    return (\n      <Panel className=\"map-panel-container\">\n        <PanelHeader>\n          <div className=\"address-container\">\n            <input\n              type=\"textarea\"\n              name=\"queryBox\"\n              className=\"address\"\n              value={searchQuery}\n              onChange={this.handleSearchInputChange}\n              onKeyPress={event =>\n                handleKeyPressInput(event, this.searchAddress, KeyCodes.Enter)\n              }\n            />\n            <Btn onClick={this.searchAddress} className=\"address-button\">\n              {t(\"farms.panels.map.submit\")}\n            </Btn>\n          </div>\n        </PanelHeader>\n        <PanelContent className=\"map-panel-container\">\n          <div className=\"map-panel-container\">\n            <AzureMap\n              azureMapsKey={azureMapsKey}\n              onMapReady={this.onMapReady}\n              drawingTools={this.drawingTools}\n            />\n            {searchUnsuccessful && (\n              <PanelError className=\"search-results\">\n                location not found\n              </PanelError>\n            )}\n            <button\n              type=\"button\"\n              className=\"control-btn draw-polygon\"\n              id=\"drawPolygon\"\n            >\n              <Svg path={svgs.edit} className=\"icon-btn\" />\n            </button>\n            <button\n              type=\"button\"\n              className=\"control-btn delete-polygon\"\n              id=\"clearPolygon\"\n            >\n              <Svg path={svgs.cancelX} className=\"icon-btn\" />\n            </button>\n          </div>\n        </PanelContent>\n        {showOverlay && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {!mapKeyIsPending && !this.props.azureMapsKey && (\n          <PanelError>{t(\"farms.panels.map.notSupportedError\")}</PanelError>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { MapPanel } from \"./mapPanel\";\n\nexport const MapPanelContainer = connect(null)(MapPanel);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { Svg } from \"components/shared/svg/svg\";\nimport { ErrorMsg } from \"components/shared/forms\";\nimport { svgs } from \"utilities\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelContent,\n  Radio\n  // Hyperlink\n} from \"components/shared\";\n\nimport \"./descriptionPanel.scss\";\n\nexport class DescriptionPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { selectedPanel: this.props.geoSelect };\n    this.toggleGeoJSONInput = this.toggleGeoJSONInput.bind(this);\n  }\n\n  toggleGeoJSONInput(event) {\n    const geoSelectValue = event.target.value;\n    const newState = { ...this.state, selectedPanel: geoSelectValue };\n    this.setState(newState);\n    this.props.toggleGeoJSONInput(geoSelectValue);\n  }\n  render() {\n    const { t, isGeometryEmpty } = this.props;\n    const { selectedPanel } = this.state;\n    return (\n      <Panel className=\"description-panel-content\">\n        <PanelHeader className=\"description-panel-header-container\">\n          <PanelHeaderLabel>\n            <div className=\"description-panel-header\">\n              {t(\"farms.panels.descriptionPanel.header\")}\n              <div className=\"tooltip\">\n                <Svg className=\"summary-icon tooltip\" path={svgs.infoBubble} />\n                <span className=\"tooltip tooltiptext\">\n                  {t(\"farms.panels.descriptionPanel.panelBody\")}\n                </span>\n              </div>\n              {isGeometryEmpty && (\n                <ErrorMsg className=\"create-farm-error-panel\">\n                  <div className=\"farm-error-message\">\n                    {t(\"farms.errorMsg.required\")}\n                  </div>\n                </ErrorMsg>\n              )}\n            </div>\n          </PanelHeaderLabel>\n        </PanelHeader>\n        <PanelContent className=\"description-panel-content\">\n          {this.props.disableMarkOnMap ? (\n            <div className=\"markOnMapDisabled\">\n              {t(\"farms.panels.descriptionPanel.markOnMapDisabled\")}\n            </div>\n          ) : (\n            <Radio\n              checked={selectedPanel === \"Azure-Maps\"}\n              value=\"Azure-Maps\"\n              onChange={this.toggleGeoJSONInput}\n            >\n              {t(\"farms.panels.descriptionPanel.azuremaps\")}\n            </Radio>\n          )}\n          <Radio\n            checked={selectedPanel === \"GeoJSON\"}\n            value=\"GeoJSON\"\n            onChange={this.toggleGeoJSONInput}\n          >\n            <div className=\"form-group-label\">\n              {t(\"farms.panels.descriptionPanel.geoJSON\")}\n              <div className=\"description-panel-header tooltip\">\n                <Svg className=\"summary-icon tooltip\" path={svgs.infoBubble} />\n                <span className=\"tooltip tooltiptext\">\n                  <div>\n                    {t(\"farms.panels.descriptionPanel.geoJSONInstructions\")}\n                  </div>\n                </span>\n              </div>\n            </div>\n            {selectedPanel === \"GeoJSON\" && (\n              <p className=\"geo-JSON-panel-header\">\n                {\" \"}\n                {t(\"farms.panels.geoJSON.panelBody\")}\n              </p>\n            )}\n          </Radio>\n        </PanelContent>\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  Panel,\n  PanelContent,\n  FormControl,\n  PanelParagraph\n} from \"components/shared\";\nimport {\n  isJSON,\n  isEmptyCheck,\n  isNull,\n  geoJSONValidation,\n  sampleGeoJSON\n} from \"utilities\";\nimport \"./geoJSON.scss\";\n\n// var GeoJSONErrors = [];\nlet isInvalid = undefined;\n\nexport class GeoJSON extends Component {\n  constructor(props) {\n    super(props);\n\n    isInvalid = false;\n    this.state = {\n      geoString:\n        !isNull(this.props.GeoJSON) &&\n        !isEmptyCheck(this.props.GeoJSON) &&\n        isJSON(this.props.GeoJSON) &&\n        (geoJSONValidation.isPolygon(JSON.parse(this.props.GeoJSON)) ||\n          geoJSONValidation.isMultiPolygon(JSON.parse(this.props.GeoJSON)))\n          ? JSON.stringify(JSON.parse(this.props.GeoJSON), null, 4)\n          : this.props.GeoJSON\n    };\n\n    this.handleGeoJSONInput = this.handleGeoJSONInput.bind(this);\n    // this.callback = this.callback.bind(this);\n  }\n  /**\n   * TODO For Error Display\n  callback(valid,errors){\n    GeoJSONErrors = [...errors];\n  }\n  */\n  componentDidMount() {\n    const { GeoJSON } = this.props;\n\n    if (GeoJSON) {\n      const geoString =\n        !isNull(GeoJSON) &&\n        !isEmptyCheck(GeoJSON) &&\n        isJSON(GeoJSON) &&\n        (geoJSONValidation.isPolygon(JSON.parse(GeoJSON)) ||\n          geoJSONValidation.isMultiPolygon(JSON.parse(GeoJSON)))\n          ? JSON.stringify(JSON.parse(GeoJSON), null, 4)\n          : GeoJSON;\n      this.setState({\n        geoString\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { GeoJSON } = this.props;\n    if (GeoJSON && GeoJSON !== prevProps.GeoJSON) {\n      this.setState({\n        geoString:\n          !isNull(GeoJSON) &&\n          !isEmptyCheck(GeoJSON) &&\n          isJSON(GeoJSON) &&\n          (geoJSONValidation.isPolygon(JSON.parse(GeoJSON)) ||\n            geoJSONValidation.isMultiPolygon(JSON.parse(GeoJSON)))\n            ? JSON.stringify(JSON.parse(GeoJSON), null, 4)\n            : GeoJSON\n      });\n    }\n  }\n\n  handleGeoJSONInput(event) {\n    const geoJSONInput = event.target;\n    let geoJSONValue = geoJSONInput.value;\n    let invalid = false;\n    if (isJSON(geoJSONValue)) {\n      if (geoJSONValue.length === 0) {\n        invalid = false;\n        geoJSONValue = \"\";\n      } else {\n        const geoJSONObject = JSON.parse(geoJSONValue);\n        if (\n          geoJSONValidation.valid(geoJSONObject, this.callback) &&\n          (geoJSONValidation.isPolygon(geoJSONObject, this.callback) ||\n            geoJSONValidation.isMultiPolygon(geoJSONObject, this.callback)) &&\n          geoJSONValue.length > 0\n        ) {\n          invalid = false;\n        } else {\n          invalid = true;\n        }\n      }\n    } else {\n      invalid = true;\n    }\n    isInvalid = invalid;\n    this.props.getGeoJSON(geoJSONValue);\n    this.props.setGeoJSONInvalidStatus(invalid);\n    this.setState({ ...this.state, geoString: geoJSONValue });\n  }\n\n  render() {\n    const { t } = this.props;\n    const { geoString } = this.state;\n    return (\n      <Panel className=\"no-box-shadow\">\n        <PanelContent className=\"geo-json\">\n          <FormControl\n            type=\"textarea\"\n            name=\"geoJSON\"\n            value={geoString || \"\"}\n            onChange={this.handleGeoJSONInput}\n            id={isInvalid ? \"invalid-input\" : \"geo-string\"}\n            placeholder={JSON.stringify(sampleGeoJSON, null, 4)}\n          />\n          {/* TODO {isInvalid && GeoJSONErrors.map(error => {return <PanelParagraph className=\"warning-text\" key={error}>{error}</PanelParagraph>})} */}\n          {isInvalid && (\n            <PanelParagraph className=\"warning-text\">\n              {t(\"farms.panels.geoJSON.geoJSONError\")}\n            </PanelParagraph>\n          )}\n        </PanelContent>\n      </Panel>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport {\n  Validator,\n  svgs,\n  LinkedComponent,\n  isEmptyCheck,\n  isJSON,\n  nonAlphaNumeric,\n  isObject\n} from \"utilities\";\nimport {\n  AjaxError,\n  Btn,\n  BtnToolbar,\n  FormLabel,\n  FormControl,\n  Indicator,\n  FormGroup,\n  Svg,\n  SuccessMessage,\n  Grid,\n  Cell\n} from \"components/shared\";\nimport { FarmService } from \"services\";\nimport { toNewFarmRequestModel } from \"services/models\";\nimport {\n  MapPanelContainer as MapPanel,\n  DescriptionPanel,\n  GeoJSON\n} from \"components/pages/farms/panels\";\nimport { cropSuggestions } from \"utilities\";\n\nimport \"./farmEditor.scss\";\nimport { appInsights } from \"applicationInsights\";\nimport geoJSONValidation from \"geojson-validation\";\n\nconst AzureMaps = window.atlas;\n\n// A state object for a new Farm\nconst newFarm = () => ({\n  name: \"\",\n  address: \"\",\n  geometry: \"\",\n  crops: \"\"\n});\n\nexport class FarmEditor extends LinkedComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: undefined,\n      isPending: false,\n      changesApplied: undefined,\n      formData: newFarm(),\n      farms: this.props.farms,\n      geoSelect: \"GeoJSON\",\n      isGeoJSONInvalid: false,\n      editableFarm: undefined,\n      isCreateFarmSuccess: undefined,\n      isEditFarmSuccess: undefined\n    };\n\n    this.toggleGeoJSONInput = this.toggleGeoJSONInput.bind(this);\n    this.getGeoJSON = this.getGeoJSON.bind(this);\n  }\n\n  isFormValid() {\n    const validity = [\n      this.farmNameLink,\n      this.farmAddressLink,\n      this.farmCropLink\n    ].every(link => !link.error);\n    return validity;\n  }\n\n  setFormState = newFarm => {\n    this.setState({\n      ...this.state,\n      editableFarm: newFarm,\n      formData: {\n        name: newFarm.name,\n        geometry: newFarm.geometry,\n        address: newFarm.properties.address,\n        crops: cropSuggestions.find(\n          crop => crop.value === newFarm.properties.crops\n        )\n      }\n    });\n  };\n\n  componentDidMount() {\n    const { farm } = this.props;\n    if (farm) {\n      this.setFormState(farm);\n    }\n    appInsights.trackEvent({\n      name: \"UiEvent:FlyOpen: \" + (farm ? \"Edit\" : \"New\") + \" Farm\"\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { farm } = nextProps;\n    if (farm) {\n      this.setFormState(farm);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n    appInsights.trackEvent({\n      name: \"UiEvent:FlyClose: Edit/New Farm\"\n    });\n  }\n\n  apply = event => {\n    event.preventDefault();\n    const { insertFarm, modifyFarm, farm } = this.props;\n    this.setState({\n      isPending: true,\n      error: null\n    });\n    const { formData } = this.state;\n    const { geometry } = formData;\n    const isGeoJSONFilled =\n      isObject(geometry) &&\n      isJSON(JSON.stringify(geometry)) &&\n      (geoJSONValidation.isPolygon(geometry) ||\n        geoJSONValidation.isMultiPolygon(geometry));\n    if (!isGeoJSONFilled) formData.geometry = undefined;\n    const requestProps = JSON.parse(JSON.stringify(formData));\n    if (farm) {\n      this.subscription = FarmService.updateFarm(\n        farm.id,\n        toNewFarmRequestModel(requestProps)\n      )\n        .mergeMap(farm => {\n          return FarmService.getFarmById(farm.id);\n        })\n        .subscribe(\n          updatedFarm => {\n            modifyFarm([{ ...updatedFarm }]);\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              isEditFarmSuccess: true\n            });\n            this.props.history.push(`/farms/${farm.id}`, {\n              id: farm.id,\n              farmName: formData.name\n            });\n          },\n          error =>\n            this.setState({ error, isPending: false, changesApplied: true }),\n          () =>\n            this.setState({\n              isPending: false,\n              changesApplied: true,\n              confirmStatus: false\n            })\n        );\n    } else {\n      this.subscription = FarmService.createFarm(\n        toNewFarmRequestModel(requestProps)\n      ).subscribe(\n        farm => {\n          insertFarm({ farm });\n          this.setState({\n            isPending: false,\n            changesApplied: true,\n            isCreateFarmSuccess: true\n          });\n        },\n        error =>\n          this.setState({ error, isPending: false, changesApplied: true }),\n        () =>\n          this.setState({\n            isPending: false,\n            changesApplied: true,\n            confirmStatus: false\n          })\n      );\n    }\n  };\n\n  formControlChange = () => {\n    if (this.state.changesApplied) {\n      this.setState({ changesApplied: false });\n    }\n  };\n\n  getGeoJSON(geoString) {\n    let geoJSON;\n    if (\n      !isEmptyCheck(geoString) &&\n      isJSON(geoString) &&\n      (geoJSONValidation.isPolygon(JSON.parse(geoString)) ||\n        geoJSONValidation.isMultiPolygon(JSON.parse(geoString)))\n    ) {\n      geoJSON = JSON.parse(geoString);\n    } else {\n      geoJSON = geoString;\n    }\n    const newForm = {\n      ...this.state.formData,\n      geometry: geoJSON\n    };\n\n    this.setState({ ...this.state, formData: newForm, changesApplied: false });\n  }\n\n  toggleGeoJSONInput(value) {\n    const newState = { ...this.state, geoSelect: value };\n    this.setState(newState);\n  }\n\n  setGeoJSONInvalidStatus = isInvalid => {\n    this.setState({\n      isGeoJSONInvalid: isInvalid\n    });\n  };\n\n  render() {\n    const {\n      t,\n      // onClose,\n      azureMapsKey,\n      azureMapsKeyError,\n      farm\n    } = this.props;\n\n    const {\n      isPending,\n      error,\n      changesApplied,\n      geoSelect,\n      formData,\n      isGeoJSONInvalid,\n      isCreateFarmSuccess,\n      isEditFarmSuccess\n    } = this.state;\n\n    const requiredValidator = new Validator().check(\n      Validator.notEmpty,\n      t(\"farms.errorMsg.required\")\n    );\n    this.formDataLink = this.linkTo(\"formData\");\n\n    const AzureMapError = AzureMaps ? false : true;\n\n    this.farmNameLink = this.formDataLink\n      .forkTo(\"name\")\n      .withValidator(requiredValidator)\n      .reject(nonAlphaNumeric)\n      .check(Validator.noSpaces, () => t(\"farms.errorMsg.spaceNotAllowed\"))\n      .check(\n        value => (this.props ? Validator.maxlength(value, 25) : true),\n        () => t(\"farms.errorMsg.maxLengthName\")\n      )\n      .check(Validator.minlength, () => t(\"farms.errorMsg.minLength\"));\n\n    this.farmAddressLink = this.formDataLink\n      .forkTo(\"address\")\n      .check(\n        value => (this.props ? Validator.maxlength(value, 200) : true),\n        () => t(\"farms.errorMsg.maxLengthAddress\")\n      )\n      .check(\n        value => (value ? Validator.minlength(value) : true),\n        () => t(\"farms.errorMsg.minLength\")\n      );\n\n    this.farmCropLink = this.formDataLink\n      .forkTo(\"crops\")\n      .map(({ value }) => value);\n\n    const isGeometryEmpty =\n      formData.geometry === \"\" || formData.geometry === undefined\n        ? true\n        : false;\n\n    const submitButtonDisabled =\n      !this.isFormValid() ||\n      isPending ||\n      isGeoJSONInvalid ||\n      isGeometryEmpty ||\n      isCreateFarmSuccess;\n\n    return (\n      <form onSubmit={e => e.preventDefault()} className=\"farms-editor-form\">\n        <div className=\"form-control-inputs\">\n          {/* Name Label */}\n          <FormGroup className=\"form-control-group\">\n            <FormLabel className=\"input-label\">\n              {t(\"farms.flyouts.editor.name\")}\n            </FormLabel>\n            <Svg className=\"svg-mandatory\" path={svgs.error} />\n            <div className=\"tooltip\">\n              <Svg className=\"summary-icon tooltip\" path={svgs.infoBubble} />\n              <span className=\"tooltip tooltiptext\">\n                {t(\"farms.flyouts.editor.toolTips.farmName\")}\n              </span>\n            </div>\n            <FormControl\n              className=\"farms-editor-input\"\n              type=\"text\"\n              maxLength={26}\n              name=\"name\"\n              placeholder={t(\"farms.flyouts.editor.farmName\")}\n              onChange={this.formControlChange.bind(this)}\n              link={this.farmNameLink}\n              value={formData.name}\n            />\n          </FormGroup>\n          {/* Crop Label */}\n          <FormGroup className=\"form-control-group\">\n            <FormLabel className=\"input-label\">\n              {t(\"farms.flyouts.editor.crops\")}\n            </FormLabel>\n            <div className=\"tooltip\">\n              <Svg className=\"summary-icon tooltip\" path={svgs.infoBubble} />\n              <span className=\"tooltip tooltiptext\">\n                {t(\"farms.flyouts.editor.toolTips.crops\")}\n              </span>\n            </div>\n            <FormControl\n              type=\"select\"\n              className=\"farms-editor-input\"\n              options={cropSuggestions}\n              link={this.farmCropLink}\n              clearable={false}\n              searchable={true}\n              matchProp={\"label\"}\n              onChange={this.formControlChange.bind(this)}\n              name=\"crops\"\n              value={formData.crops}\n              placeholder={t(\"farms.flyouts.editor.selectCrops\")}\n            />\n          </FormGroup>\n          {/* Address Label */}\n          <FormGroup className=\"form-control-group\">\n            <FormLabel className=\"input-label\">\n              {t(\"farms.flyouts.editor.address\")}\n            </FormLabel>\n\n            <div className=\"tooltip\">\n              <Svg className=\"summary-icon tooltip\" path={svgs.infoBubble} />\n              <span className=\"tooltip tooltiptext\">\n                {t(\"farms.flyouts.editor.toolTips.farmAddress\")}\n              </span>\n            </div>\n            <FormControl\n              className=\"farms-editor-input\"\n              type=\"text\"\n              maxLength={201}\n              onChange={this.formControlChange.bind(this)}\n              name=\"address\"\n              placeholder={t(\"farms.flyouts.editor.farmAddress\")}\n              link={this.farmAddressLink}\n              value={formData.address}\n            />\n          </FormGroup>\n        </div>\n        <div className=\"form-placeholder\">\n          <Grid>\n            <Cell className=\"col-2\">\n              <DescriptionPanel\n                t={t}\n                toggleGeoJSONInput={this.toggleGeoJSONInput}\n                geoSelect={geoSelect}\n                isGeometryEmpty={isGeometryEmpty}\n                disableMarkOnMap={geoJSONValidation.isMultiPolygon(\n                  formData.geometry\n                )}\n              />\n            </Cell>\n            <Cell className=\"col-8\">\n              {geoSelect === \"Azure-Maps\" && (\n                <MapPanel\n                  azureMapsKey={!AzureMapError && azureMapsKey}\n                  mapKeyIsPending={false}\n                  setGeoJSONInvalidStatus={this.setGeoJSONInvalidStatus}\n                  error={azureMapsKeyError}\n                  t={t}\n                  getGeoJSON={this.getGeoJSON}\n                  address={formData.address}\n                  geometry={\n                    isObject(formData.geometry)\n                      ? JSON.stringify(formData.geometry)\n                      : formData.geometry\n                  }\n                />\n              )}\n              {geoSelect === \"GeoJSON\" && (\n                <GeoJSON\n                  t={t}\n                  getGeoJSON={this.getGeoJSON}\n                  setGeoJSONInvalidStatus={this.setGeoJSONInvalidStatus}\n                  GeoJSON={\n                    isObject(formData.geometry)\n                      ? JSON.stringify(formData.geometry)\n                      : formData.geometry\n                  }\n                />\n              )}\n            </Cell>\n          </Grid>\n        </div>\n\n        {isCreateFarmSuccess === true && (\n          <SuccessMessage\n            className=\"farms-editor-success\"\n            t={t}\n            successMsg={t(\"farms.flyouts.editor.createFarmSuccess\")}\n          />\n        )}\n        {isEditFarmSuccess === true && (\n          <SuccessMessage\n            className=\"farms-editor-success\"\n            t={t}\n            successMsg={t(\"farms.flyouts.editor.editFarmSuccess\")}\n          />\n        )}\n        {/** Displays an error message if one occurs while applying changes. */}\n        {error && (\n          <AjaxError className=\"farms-editor-error\" t={t} error={error} />\n        )}\n        {/** If changes are not yet applied, show the buttons for applying changes and closing the flyout. */\n        !changesApplied && !isPending && !isCreateFarmSuccess && (\n          <BtnToolbar className=\"button-box\">\n            {/* <Btn svg={svgs.cancelX} onClick={onClose} className=\"close-editor\">\n              {t(\"farms.flyouts.editor.cancel\")}\n            </Btn>\n            */}\n            <Btn\n              primary={true}\n              disabled={submitButtonDisabled}\n              type=\"button\"\n              id={submitButtonDisabled ? \"applyBtnDisabled\" : \"applyBtn\"}\n              name=\"apply\"\n              onClick={event => {\n                appInsights.trackEvent(\n                  {\n                    name:\n                      \"UiEvent:Click: \" +\n                      (farm ? \"Edit\" : \"Create\") +\n                      \" Farm Btn\"\n                  },\n                  {\n                    context: {\n                      createFarmMode: {\n                        geoSelect // Azure maps mode or GeoJSON mode\n                      }\n                    }\n                  }\n                );\n                this.apply(event);\n              }}\n            >\n              {t(\"farms.flyouts.editor.apply\")}\n            </Btn>\n          </BtnToolbar>\n        )}\n        {isPending && (\n          <BtnToolbar className=\"button-box\">\n            <Indicator />\n          </BtnToolbar>\n        )}\n        {/**\n         * If changes are applied, show only the close button.\n         * Other text or component might be included here as well.\n         * For example, you might provide a link to the detail page for a newly submitted job.\n         * */\n        !!changesApplied && (\n          <BtnToolbar className=\"button-box\">\n            {/* <Btn svg={svgs.cancelX} onClick={onClose} className=\"close-editor\">\n              {t(\"farms.flyouts.editor.close\")}\n            </Btn> */}\n          </BtnToolbar>\n        )}\n      </form>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { FarmEditor } from \"./farmEditor\";\nimport { withRouter } from \"react-router-dom\";\nimport {\n  redux as farmRedux,\n  getFarms,\n  getFarmById\n} from \"store/reducers/farmsReducer\";\nimport { getAzureMapsKey } from \"store/reducers/appReducer\";\n\nconst mapStatetoProps = (state, props) => ({\n  farms: getFarms(state),\n  farm: props.farmId ? getFarmById(state, props.farmId) : undefined,\n  azureMapsKey: getAzureMapsKey(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  insertFarm: farm => dispatch(farmRedux.actions.insertFarm(farm)),\n  modifyFarm: farm => dispatch(farmRedux.actions.modifyFarm(farm)),\n  deleteFarm: farm => dispatch(farmRedux.actions.deleteFarm(farm))\n});\n\nexport const FarmEditorContainer = withRouter(\n  withNamespaces()(\n    connect(\n      mapStatetoProps,\n      mapDispatchToProps\n    )(FarmEditor)\n  )\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport i18n from \"i18n\";\n\n// Error response abstractions\nexport class AjaxError {\n  static from = ajaxError => new AjaxError(ajaxError);\n\n  constructor(ajaxError) {\n    this.ajaxError = ajaxError;\n    const resp = ajaxError.response || {};\n    // In Java, the ExceptionMessage contains a generic message and info about the request.\n    // But the InnerExceptionMessage message looks to contain information about the actual error.\n    this.errorMessage =\n      resp.InnerExceptionMessage ||\n      resp.ExceptionMessage ||\n      resp.Message ||\n      resp.Error ||\n      ajaxError.message ||\n      `An unknown error occurred`;\n    this.status = ajaxError.status;\n\n    // Log all errors in the console\n    console.error(ajaxError); // eslint-disable-line no-console\n\n    // For general application errors, figure out a more detailed message if possible.\n    // In dotNet, the ExceptionMessage may contain JSON that can be further parsed.\n    if (this.status >= 500 && this.errorMessage) {\n      this.errorMessage =\n        (JSON.parse(this.errorMessage) || {}).Message || this.errorMessage;\n    }\n  }\n\n  /**\n   * Wrap the message in a getter method to allow customizing for certain status codes\n   */\n  get message() {\n    if (this.status === 0) {\n      // No response from the service (e.g. timeout, network disconnect, CORS, etc.)\n      return i18n.t(\"errorCode.noResponse\");\n    } else if (this.status === 401) {\n      // User not logged in\n      return i18n.t(\"errorCode.notLoggedIn\");\n    } else if (this.status === 403) {\n      // User not authorized\n      return i18n.t(\"errorCode.notAuthorized\");\n    } else if (this.status === 404) {\n      // Endpoint not found\n      return i18n.t(\"errorCode.notFound\");\n    } else if (this.status >= 300 && this.status < 400) {\n      // Redirection\n      return i18n.t(\"errorCode.redirection\");\n    } else if (Config.retryableStatusCodes.has(this.status)) {\n      return i18n.t(\"errorCode.retryFailure\");\n    } else if (this.status >= 500 && this.errorCode) {\n      return i18n.t(`errorCode.${this.errorCode}`);\n    } else if (this.status === 400) {\n      return (\n        this.ajaxError.response.message || this.ajaxError.response.error.message\n      ); // `errorCode.${this.ajaxError.response.code}`;\n    } else return i18n.t(\"errorCode.unknown\");\n  }\n}\n\nexport class RetryableAjaxError extends AjaxError {\n  static from = ajaxError => new RetryableAjaxError(ajaxError);\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport const isAlphaNumericRegex = /^[a-zA-Z0-9_]*$/;\nexport const nonAlphaNumeric = x => !x.match(isAlphaNumericRegex);\n\nexport const cropSuggestions = [\n  { value: \"Corn\", label: \"Corn\" },\n  { value: \"Cotton\", label: \"Cotton\" },\n  { value: \"Maize\", label: \"Maize\" },\n  { value: \"Rice\", label: \"Rice\" },\n  { value: \"Soybean\", label: \"Soybean\" },\n  { value: \"Wheat\", label: \"Wheat\" },\n  { value: \"Others\", label: \"Others\" }\n];\n\nexport const contentTypeExtensionsMap = new Map([\n  [\"image/tiff\", \".tiff\"],\n  [\"image/png\", \".png\"],\n  [\"image/jpeg\", \".jpeg\"],\n  [\"image/bmp\", \".bmp\"],\n  [\"image/webp\", \".webp\"],\n  [\"text/csv\", \".csv\"],\n  [\"text/plain\", \".txt\"],\n  [\"text/tab-separated-values\", \".tsv\"],\n  [\"application/octet-stream\", \".bin\"],\n  [\"application/json\", \".json\"]\n]);\n\nexport const contentTypeLabelsMap = new Map([\n  [\"image/tiff\", \"TIFF\"],\n  [\"image/png\", \"PNG\"],\n  [\"image/jpeg\", \"JPEG\"],\n  [\"image/bmp\", \"BMP\"],\n  [\"image/webp\", \"WEBP\"],\n  [\"text/csv\", \"CSV\"],\n  [\"text/plain\", \"TEXT\"],\n  [\"text/tab-separated-values\", \"TSV\"],\n  [\"application/octet-stream\", \"BIN\"],\n  [\"application/json\", \"JSON\"]\n]);\n\nexport const mapStyles = [\n  \"road\",\n  \"grayscale_dark\",\n  \"night\",\n  \"road_shaded_relief\",\n  \"satellite\",\n  \"satellite_road_labels\"\n];\n\nexport const sampleGeoJSON = {\n  type: \"Polygon\",\n  coordinates: [\n    [\n      [74.00390625, 17.07778960654538],\n      [74.99267578125, 15.496032414238634],\n      [79.1455078125, 19.973348786110602],\n      [74.00390625, 17.07778960654538]\n    ]\n  ]\n};\n\nexport const KeyCodes = {\n  Enter: 13\n};\n\nexport const ruleStatus = {\n  enabled: \"Enabled\",\n  disabled: \"Disabled\"\n};\n\nexport const sortIndices = [\"asc\", \"desc\"];\nexport const dateFormat = \"YYYY-MM-DD HH:mm:ss\";\nexport const date = \"date\";\nexport const id = \"id\";\nexport const downloadSASUrl = \"downloadSASUrl\";\nexport const fileType = \"image/png\";\nexport const latestMapIndex = 0;\nexport const name = \"name\";\nexport const succeeded = \"Succeeded\";\nexport const failed = \"Failed\";\nexport const stopped = \"Stopped\";\nexport const stopRequested = \"StopRequested\";\nexport const jobsDateFormat = \"YYYY-MM-DD\";\nexport const satelliteIndicesMap = \"Satellite Indices\";\nexport const soilMoistureMap = \"Soil Moisture\";\nexport const sensorPlacementMap = \"Sensor Placement\";\nexport const soilMoistureMeatureType = \"SoilMoisture\";\nexport const mapModalType = \"MAP-MODAL\";\nexport const pngImageType = \"PNG\";\nexport const satelliteIndicesJobTypeName = \"get_farm_imagery\";\nexport const sensorPlacementJobTypeName = \"sensor_placement_model\";\nexport const soilMoistureJobTypeName = \"soil_moisture_heatmap\";\nexport const noMapImage = \"./noMap.png\";\nexport const getDownloadRequest = \"GET\";\nexport const createdAt = \"createdAt\";\nexport const enabled = \"Enabled\";\nexport const disabled = \"Disabled\";\nexport const contentTypeInitials = \"image/\";\nexport const farmNameLoading = \"Loading...\";\n\nexport const JobsStatusValues = {\n  submittedStatus: \"Submitted\",\n  acceptedStatus: \"Accepted\",\n  runningStatus: \"Running\",\n  pendingRetryStatus: \"PendingRetry\",\n  failedStatus: \"Failed\",\n  succeededStatus: \"Succeeded\",\n  stoppedStatus: \"Stopped\"\n};\n\n/** Filter Control Enums */\n\nexport const FormElementType = {\n  select: \"select\",\n  input: \"input\",\n  datePicker: \"datepicker\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\n// import Config from 'app.config';\nimport { Observable } from \"rxjs\";\nimport { authDisabledUser } from \"./models\";\n\nimport { UserAgentApplication } from \"msal\";\n\nexport class AuthService {\n  static authContext; // Created on AuthService.initialize()\n  static authEnabled = false;\n\n  static initialize() {\n    if (typeof global.DeploymentConfig === \"undefined\") {\n      alert(\n        \"The dashboard configuration is missing.\\n\\nVerify the content of webui-config.js.\"\n      );\n      throw new Error(\n        \"The global configuration is missing. Verify the content of webui-config.js.\"\n      );\n    }\n\n    if (typeof global.DeploymentConfig.authEnabled !== \"undefined\") {\n      AuthService.authEnabled = global.DeploymentConfig.authEnabled;\n      if (!AuthService.authEnabled) {\n        console.warn(\"Auth is disabled! (see webui-config.js)\"); // eslint-disable-line no-console\n      }\n    }\n\n    const msalConfig = {\n      auth: {\n        clientId: global.DeploymentConfig.aad.appId,\n        authority:\n          global.DeploymentConfig.aad.instance +\n          global.DeploymentConfig.aad.tenant,\n        redirectUri: window.location.origin\n      }\n    };\n\n    AuthService.msalInstance = new UserAgentApplication(msalConfig);\n    AuthService.msalInstance.handleRedirectCallback((error, response) => {\n      // console.log(\"I don't know what to do here (handleRedirectCallback)\");\n      // console.log(error);\n      // console.log(response);\n    });\n\n    AuthService.getCurrentUser();\n  }\n\n  static isDisabled() {\n    return AuthService.authEnabled === false;\n  }\n\n  static isEnabled() {\n    return !AuthService.isDisabled();\n  }\n\n  static onLoad(successCallback) {\n    AuthService.initialize();\n    if (AuthService.isDisabled()) {\n      console.debug(\"Skipping Auth onLoad because Auth is disabled\"); // eslint-disable-line no-console\n      if (successCallback) successCallback();\n      return;\n    }\n\n    AuthService.doLoginIfNotLoggedInOrLoggingIn();\n    if (AuthService.getCurrentUser()) {\n      successCallback();\n    }\n  }\n\n  static doLoginIfNotLoggedInOrLoggingIn() {\n    // eslint-disable-next-line no-console\n    console.log(\n      \"Was told to login... Fould already logged in user \",\n      AuthService.msalInstance.getAccount(),\n      \" and login_in_progress is \",\n      AuthService.msalInstance.getLoginInProgress()\n    );\n    if (\n      !AuthService.msalInstance.getAccount() &&\n      !AuthService.msalInstance.getLoginInProgress()\n    ) {\n      console.log(\"Hence, initiating login with redirect\"); // eslint-disable-line no-console\n      AuthService.msalInstance.loginRedirect({\n        scopes: [\n          `${global.DeploymentConfig.backendEndpoint}/user_impersonation`,\n          \"https://graph.microsoft.com/User.ReadBasic.All\"\n        ]\n      });\n    }\n  }\n\n  static getCurrentUser() {\n    if (AuthService.isDisabled()) {\n      return Observable.of(authDisabledUser);\n    }\n\n    return AuthService.msalInstance.getAccount();\n  }\n\n  static logout() {\n    if (AuthService.isDisabled()) return;\n\n    AuthService.msalInstance.logout();\n  }\n\n  static getAccessTokenApi() {\n    return Observable.create(observer => {\n      const tokenRequest = {\n        scopes: [\n          `${global.DeploymentConfig.backendEndpoint}/user_impersonation`\n        ]\n      };\n      return AuthService.msalInstance\n        .acquireTokenSilent(tokenRequest)\n        .then(response => {\n          // console.log(\"(Acquire Token Silent) Received response: \", response);\n          observer.next(response.accessToken);\n          observer.complete();\n        })\n        .catch(error => {\n          // eslint-disable-next-line no-console\n          console.log(\n            `acquireTokenSilent failed with Authentication Error: ${error}`\n          );\n          console.log(\"Trying acquireTokenRedirect...\"); // eslint-disable-line no-console\n          AuthService.msalInstance.acquireTokenRedirect(tokenRequest);\n          observer.error(error);\n        });\n    });\n  }\n\n  static getAccessTokenGraph() {\n    return Observable.create(observer => {\n      const tokenRequest = {\n        scopes: [\"User.ReadBasic.All\"]\n      };\n      return AuthService.msalInstance\n        .acquireTokenSilent(tokenRequest)\n        .then(response => {\n          // console.log(\"(Acquire Token Silent) Received response: \", response);\n          observer.next(response.accessToken);\n          observer.complete();\n        })\n        .catch(error => {\n          // eslint-disable-next-line no-console\n          console.log(\n            `acquireTokenSilent failed with Authentication Error: ${error}`\n          );\n          // console.log(\"Trying acquireTokenRedirect...\");\n          AuthService.msalInstance.acquireTokenRedirect(tokenRequest);\n          observer.error(error);\n        });\n    });\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport Config from \"app.config\";\nimport { HttpClient } from \"utilities/httpClient\";\n\nexport class UserService {\n  // Graph endpoints\n  static getUsers() {\n    const response = HttpClient.get(\n      Config.serviceUrls.graphApiUsers,\n      {},\n      true,\n      true\n    );\n    return response.map(response => response.value);\n  }\n\n  static getUsersByIds(ids) {\n    const query =\n      \"?$filter=\" + ids.map(id => \"id eq '\" + id + \"'\").join(\" or \");\n\n    const response = HttpClient.get(\n      `${Config.serviceUrls.graphApiUsers}${query}`,\n      {},\n      true,\n      true\n    );\n    return response.map(response => response.value);\n  }\n\n  // Gets user by email or UPN\n  static getUserByEmailOrUpn(email) {\n    const query = `?$filter=mail eq '${email}' or userPrincipalName eq '${email}'`;\n    const response = HttpClient.get(\n      `${Config.serviceUrls.graphApiUsers}${query}`,\n      {},\n      true,\n      true\n    );\n    return response.map(response => response.value);\n  }\n\n  static getUserSuggestions(value) {\n    const query = `?$filter=startswith(displayName,'${value}') or startswith(givenName,'${value}') or startswith(surname,'${value}') or startswith(mail,'${value}') or startswith(userPrincipalName,'${value}')`;\n    const response = HttpClient.get(\n      `${Config.serviceUrls.graphApiUsers}${query}`,\n      {},\n      true,\n      true\n    );\n    return response.map(response => response.value);\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\n/* eslint-disable valid-jsdoc */\nimport { getFormattedTelemtery } from \"utilities\";\nimport { Observable } from \"rxjs\";\n\n/**\n *  A helper function containing the logic to convert a getTelemetry response\n *  object into the chart object structure.\n *\n * @param getCurrentTelemetry A function that returns an object of formatted telemetry messages\n * @param response An object of telemetry messages from the getTelemetry response\n */\nexport const transformTelemetryResponse = getCurrentTelemetry => items => {\n  return Observable.from(items)\n    .flatMap(({ properties, timestamps }) => {\n      const id =\n        properties.length !== 0\n          ? properties.find(property => property.name === \"Id\").values[0]\n          : undefined;\n\n      const dataset =\n        properties.length !== 0\n          ? properties.filter(\n              property =>\n                property.name !== \"Id\" && property.name !== \"timestamp\"\n              // && property.name !== \"Device\"\n              // && property.name !== \"Farm\"\n              // && property.name !== \"Measure\"\n              // && property.name !== \"Timestamp\"\n              // && property.name !== \"Value\"\n            )\n          : undefined;\n\n      const telemetry = dataset\n        ? dataset.reduce((acc, measure) => {\n            const metric = measure.name;\n            const measureMap = measure.values.map((value, index) => ({\n              metric,\n              deviceId: id,\n              data: value,\n              time: timestamps[index]\n            }));\n            return acc.concat(measureMap);\n          }, [])\n        : undefined;\n      return telemetry ? telemetry : [];\n    })\n    .reduce((acc, { metric, deviceId, time, data }) => {\n      return getFormattedTelemtery(acc, { metric, deviceId, time, data });\n    }, getCurrentTelemetry());\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport * from \"./editFarmFlyout\";\nexport * from \"./newFarmFlyout\";\nexport * from \"./farmEditor\";\nexport * from \"./addDevices\";\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport Flyout from \"components/shared/flyout\";\nimport Config from \"app.config\";\nimport { LinkedComponent } from \"utilities\";\nimport { AccessControlContainer } from \"../accessControl\";\nimport { ComponentArray, Protected } from \"components/shared\";\nimport { permissions } from \"services/models\";\nimport \"./settings.scss\";\n\nconst Section = Flyout.Section;\n\nexport class Settings extends LinkedComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      desiredSimulationState: this.props.isSimulationEnabled,\n      diagnosticsOptIn: this.props.diagnosticsOptIn,\n      logoFile: undefined,\n      applicationName: \"\",\n      loading: false,\n      toggledSimulation: false,\n      madeLogoUpdate: false,\n      username: undefined,\n      openFlyout: \"\"\n    };\n\n    this.applicationName = this.linkTo(\"applicationName\").map(value =>\n      value.length === 0 ? undefined : value\n    );\n  }\n\n  openManageUsers = () => this.setState({ openFlyout: \"manageUsers\" });\n\n  closeFlyout = () => this.setState({ openFlyout: \"\" });\n\n  componentWillReceiveProps({\n    setLogoPending,\n    setLogoError,\n    diagnosticsOptIn\n  }) {\n    const { madeLogoUpdate } = this.state;\n    this.setState({ diagnosticsOptIn: diagnosticsOptIn });\n    if (madeLogoUpdate && !setLogoPending && !setLogoError) {\n      this.props.onClose();\n    }\n  }\n\n  onChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: value });\n  };\n\n  onFlyoutClose = eventName => {\n    return this.props.onClose();\n  };\n\n  toggleDiagnostics = () => {\n    const { diagnosticsOptIn } = this.state;\n    this.setState({ diagnosticsOptIn: !diagnosticsOptIn }, () => {\n      this.props.updateDiagnosticsOptIn(!diagnosticsOptIn);\n    });\n  };\n\n  render() {\n    const { t } = this.props;\n    const { openFlyout } = this.state;\n\n    return (\n      <ComponentArray>\n        <Flyout.Container>\n          <Flyout.Header>\n            <Flyout.Title>{t(\"settingsFlyout.title\")}</Flyout.Title>\n            <Flyout.CloseBtn\n              onClick={this.onFlyoutClose.bind(\n                this,\n                \"Settings_TopXClose_Click\"\n              )}\n            />\n          </Flyout.Header>\n          <Flyout.Content className=\"settings-workflow-container\">\n            <Protected key=\"edit\" permissions={permissions.readRoleAssignments}>\n              <Section.Container collapsable={false}>\n                <Section.Header>\n                  <div\n                    onClick={this.openManageUsers}\n                    className=\"cursor-pointer\"\n                  >\n                    {this.props.t(\"users.manageUsersFlyout.title\")}\n                  </div>\n                </Section.Header>\n              </Section.Container>\n            </Protected>\n            <Section.Container collapsable={false}>\n              <Section.Header>\n                {t(\"settingsFlyout.sendDiagnosticsHeader\")}\n              </Section.Header>\n              <Section.Content className=\"diagnostics-content\">\n                {this.props.t(\"settingsFlyout.sendDiagnosticsText\")}\n                <a\n                  href={Config.serviceUrls.privacy}\n                  className=\"privacy-link\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {this.props.t(\n                    \"settingsFlyout.sendDiagnosticsMicrosoftPrivacyUrl\"\n                  )}\n                </a>\n              </Section.Content>\n            </Section.Container>\n            {/* <ApplicationSettingsContainer\n              onUpload={this.onUpload}\n              applicationNameLink={this.applicationName}\n              {...this.props} />\n            {\n              (madeLogoUpdate && setLogoError) &&\n              <div className=\"set-logo-error\">\n                {t('settingsFlyout.setLogoError')}\n              </div>\n            } */}\n            {\n              // <div className=\"btn-container\">\n              // {\n              //   !loading && hasChanged &&\n              //   <Btn type=\"submit\" /*onClick={this.onFlyoutClose.bind(this, 'Settings_Apply_Click')}*/ className=\"apply-button\">{t('settingsFlyout.apply')}</Btn>\n              // }\n              // {/* <Btn svg={svgs.x} onClick={this.onFlyoutClose.bind(this, 'Settings_Close_Click')} className=\"close-button\">\n              //   {hasChanged ? t('settingsFlyout.cancel') : t('settingsFlyout.close')}</Btn> */}\n              // {loading && <Indicator size='small' />}\n              // </div>\n            }\n            <span className=\"version\">\n              {t(\"settingsFlyout.version\")}:\n              {\" v \" + global.DeploymentConfig.farmbeatsVersion}\n            </span>\n          </Flyout.Content>\n        </Flyout.Container>\n\n        {openFlyout === \"manageUsers\" && (\n          <AccessControlContainer onClose={this.closeFlyout} />\n        )}\n      </ComponentArray>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { PcsGrid } from \"components/shared\";\nimport {\n  translateColumnDefs,\n  caseInsensitiveStringComparator\n} from \"utilities\";\nimport Flyout from \"components/shared/flyout\";\n\nimport \"./accessControl.scss\";\nimport { AddUserContainer as AddUser } from \"./assignRole.container\";\nimport { SuccessMessage, AjaxError } from \"components/shared\";\nimport { DeleteRoleAssignmentRenderer } from \"./deleteRoleAssignmentRenderer\";\nimport { appInsights } from \"applicationInsights\";\n\nexport class AccessControl extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { requestedUserIds: [], error: null, success: null };\n\n    this.setSuccess = this.setSuccess.bind(this);\n    this.setError = this.setError.bind(this);\n    this.getGridData = this.getGridData.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      roleAssignmentLastUpdated,\n      roleAssignmentFetchPending,\n      fetchRoleAssignments,\n\n      roleDefinitionLastUpdated,\n      roleDefinitionPending,\n      fetchRoleDefinitions\n    } = this.props;\n\n    if (!roleAssignmentLastUpdated && !roleAssignmentFetchPending) {\n      fetchRoleAssignments();\n    }\n    if (!roleDefinitionLastUpdated && !roleDefinitionPending) {\n      fetchRoleDefinitions();\n    }\n\n    appInsights.trackEvent({ name: \"UiEvent:FlyOpen: Access Control\" });\n  }\n\n  componentWillUnmount() {\n    appInsights.trackEvent({ name: \"UiEvent:FlyClose: Access Control\" });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { userPending, roleAssignments, fetchUsers, users } = this.props;\n\n    // If users are not being fetched and we have non-empty role assignments list\n    if (!userPending && roleAssignments.length > 0) {\n      // Find out the ids for the users that we don't have resolutions for,\n      // and we have not requested resolutions for\n      // Resolution => get name and other details from graph endpoint\n      const reqdUserIds = roleAssignments\n        .filter(roleAssignment => roleAssignment.objectIdType === \"UserId\")\n        .filter(\n          roleAssignment =>\n            roleAssignment.tenantId === global.DeploymentConfig.aad.tenant\n        )\n        .map(roleAssignment => roleAssignment.objectId)\n        .filter(\n          objectId =>\n            !users.map(user => user.id).includes(objectId) &&\n            !this.state.requestedUserIds.includes(objectId)\n        );\n\n      // If there are ids we need to resolve, dispatch the action\n      // and append to the list of requested user ids\n      if (reqdUserIds.length > 0) {\n        fetchUsers(reqdUserIds);\n        this.setState({\n          requestedUserIds: this.state.requestedUserIds.concat(reqdUserIds)\n        });\n      }\n    }\n  }\n\n  setSuccess(success) {\n    this.setState({ success, error: null });\n  }\n\n  setError(error) {\n    this.setState({ error, success: null });\n  }\n\n  onFlyoutClose = eventName => {\n    this.props.clearRolesError();\n    this.props.onClose();\n  };\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  getGridData() {\n    const {\n      users,\n      userError,\n      userPending,\n      roleAssignments,\n      roleAssignmentFetchError,\n      roleAssignmentFetchPending,\n      roleDefinitions,\n      roleDefinitionError,\n      roleDefinitionPending\n    } = this.props;\n    if (\n      !userError &&\n      !roleDefinitionError &&\n      !roleAssignmentFetchError &&\n      !userPending &&\n      !roleAssignmentFetchPending &&\n      !roleDefinitionPending &&\n      users &&\n      users.length > 0 &&\n      roleAssignments &&\n      roleAssignments.length > 0 &&\n      roleDefinitions &&\n      roleDefinitions.length > 0\n    ) {\n      // Keeping only UserId RoleAssingments form the current tenant\n      const userRoleAssignments = roleAssignments\n        .filter(roleAssignment => roleAssignment.objectIdType === \"UserId\")\n        .filter(\n          roleAssignment =>\n            roleAssignment.tenantId === global.DeploymentConfig.aad.tenant\n        );\n\n      const gridData = userRoleAssignments\n        .map(roleAssignment => {\n          const user = users.find(user => user.id === roleAssignment.objectId);\n          if (!user) {\n            return null;\n          }\n          const roleDefinition = roleDefinitions.find(\n            roleDefinition =>\n              roleDefinition.id === roleAssignment.roleDefinitionId\n          );\n          const returnObject = {\n            emailOrUpn: user.mail ? user.mail : user.userPrincipalName,\n            role: roleDefinition.name,\n\n            roleAssignment: roleAssignment\n          };\n          return returnObject;\n        })\n        .filter(data => data !== null);\n\n      const skippedRoleAssignments =\n        userRoleAssignments.length - gridData.length;\n      if (skippedRoleAssignments > 0) {\n        console.warn(\"User role assignments skipped: \", skippedRoleAssignments); // eslint-disable-line no-console\n      }\n\n      return gridData;\n    }\n  }\n\n  render() {\n    const {\n      t,\n      deleteRoleAssignmentsById,\n      userError,\n      roleAssignmentFetchError,\n      roleAssignmentAddError,\n      roleAssignmentDeleteError,\n      roleDefinitionError,\n      clearRolesError,\n      roleAssignmentAddPending,\n      roleAssignmentDeletePending\n    } = this.props;\n    const { success, error } = this.state;\n\n    this.columnDefs = [\n      {\n        headerName: \"users.manageUsersFlyout.rolesGridSection.colHeaders.email\",\n        field: \"emailOrUpn\",\n        width: 150,\n        sort: \"asc\",\n        comparator: caseInsensitiveStringComparator\n      },\n      {\n        field: \"role\",\n        headerName: \"users.manageUsersFlyout.rolesGridSection.colHeaders.role\",\n        width: 50\n      },\n      {\n        cellRendererFramework: DeleteRoleAssignmentRenderer,\n        width: 45,\n        cellRendererParams: {\n          deleteRoleAssignmentsById,\n          clearRolesError,\n          successCallback: this.setSuccess,\n          errorCallback: this.setError\n        },\n        suppressSorting: true\n      }\n    ];\n    const rowData = this.getGridData();\n    const gridProps = {\n      ...this.defaulGridProps,\n      columnDefs: translateColumnDefs(t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      rowData: rowData,\n      ...this.props,\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: rowData => rowData.roleAssignment.id,\n      context: {\n        t: t\n      }\n    };\n\n    const dataFetchError =\n      userError || roleDefinitionError || roleAssignmentFetchError;\n\n    const onActionError =\n      error || roleAssignmentAddError || roleAssignmentDeleteError;\n\n    const actionPending =\n      roleAssignmentAddPending || roleAssignmentDeletePending;\n\n    return (\n      <Flyout.Container>\n        <Flyout.Header>\n          <Flyout.Title>{t(\"users.manageUsersFlyout.title\")}</Flyout.Title>\n          <Flyout.CloseBtn\n            onClick={this.onFlyoutClose.bind(this, \"Users_TopXClose_Click\")}\n          />\n        </Flyout.Header>\n        {!dataFetchError && (\n          <div className=\"manage-users\">\n            <AddUser\n              successCallback={this.setSuccess}\n              errorCallback={this.setError}\n            />\n\n            <Flyout.Section.Container collapsable={false}>\n              <Flyout.Section.Header>\n                {t(\"users.manageUsersFlyout.rolesGridSection.header\")}\n              </Flyout.Section.Header>\n            </Flyout.Section.Container>\n\n            {/* Don't try to move the grid into a Flyout.Section.Content. The grid disappears and I don't know why. */}\n            <div className=\"add-device-grid\">\n              <PcsGrid key=\"farm-grid-key\" {...gridProps} />\n            </div>\n            {!actionPending && (success || onActionError) && (\n              <Flyout.Section.Container\n                collapsable={false}\n                className=\"error-section\"\n              >\n                <Flyout.Section.Content>\n                  {!onActionError && (\n                    <SuccessMessage\n                      className=\"add-role-assignment-success\"\n                      t={t}\n                      successMsg={success}\n                    />\n                  )}\n                  {onActionError && <AjaxError t={t} error={onActionError} />}\n                </Flyout.Section.Content>\n              </Flyout.Section.Container>\n            )}\n          </div>\n        )}\n\n        {!!dataFetchError && (\n          <div className=\"manage-error-section\">\n            <AjaxError error={dataFetchError} t={t} />\n          </div>\n        )}\n      </Flyout.Container>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  AjaxError,\n  Indicator,\n  TimeSeriesInsightsLinkContainer\n} from \"components/shared\";\nimport {\n  Panel,\n  PanelContent,\n  PanelError,\n  PanelHeader,\n  PanelHeaderLabel,\n  PanelMsg,\n  PanelOverlay\n} from \"components/shared\";\nimport { DatePickerElement } from \"./datePickerElement\";\nimport { TelemetryChartContainer as TelemetryChart } from \"./telemetryChart.container\";\nimport { transformTelemetryResponse } from \"./utils\";\nimport { chartColorObjects } from \"./chartColorObjects\";\nimport { Observable, Subject } from \"rxjs\";\nimport { joinClasses } from \"utilities\";\nimport moment from \"moment\";\nimport { TelemetryService } from \"services\";\nimport { ContextMenuAlign } from \"components/shared\";\n\nimport \"./telemetryPanel.scss\";\nimport { appInsights } from \"applicationInsights\";\n\nconst initialState = {\n  telemetryLive: {},\n  isTelemetryPending: true,\n  telemetryError: null,\n  isRealTimeTelemetry: true,\n  telemetryCustom: {},\n  telemetryCustomDateRange: { start: null, end: null },\n  buttonActive: \"live\", // live, custom\n  measureNameTypeMap: new Map(),\n  selectedMeasureType: \"\",\n  selectedMeasureName: \"\"\n};\n\nconst refreshEvent = (devices = [], sensors = [], sensorModels = []) => ({\n  devices,\n  sensors,\n  sensorModels\n});\n\nexport default class TelemetryPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      ...initialState,\n      ...this.getSensorMeasureData(props.sensors, props.sensorModels)\n    };\n    this.subscriptions = [];\n    this.telemetryPanelRefresh$ = new Subject(); // Restarts all streams\n\n    this.filterSensorIds = this.filterSensorIds.bind(this);\n    this.onApplyEvent = this.onApplyEvent.bind(this);\n    this.onLiveButtonClick = this.onLiveButtonClick.bind(this);\n    this.getSensorMeasureNameUnitMap = this.getSensorMeasureNameUnitMap.bind(\n      this\n    );\n    this.getCustomTelemetryStream = this.getCustomTelemetryStream.bind(this);\n\n    const {\n      fetchDevices,\n      devicesLastUpdated,\n      devicesError,\n\n      fetchSensors,\n      sensorsLastUpdated,\n      sensorsError,\n\n      fetchSensorModels,\n      sensorModelsLastUpdated,\n      sensorModelsError\n    } = this.props;\n\n    if (!devicesLastUpdated && !devicesError) fetchDevices();\n    if (!sensorsLastUpdated && !sensorsError) fetchSensors();\n    if (!sensorModelsLastUpdated && !sensorModelsError) fetchSensorModels();\n  }\n\n  componentDidMount() {\n    // Telemetry stream - START\n    const getTelemetryStream = ({\n      devices = [],\n      sensors = [],\n      sensorModels = {}\n    }) => {\n      return Observable.from(this.filterSensorIds(sensorModels, sensors))\n        .mergeMap(sensorId =>\n          TelemetryService.getTelemetryBySensorIdP1D(sensorId)\n        )\n        .toArray()\n        .flatMap(transformTelemetryResponse(() => this.state.telemetryLive))\n        .map(telemetryLive => {\n          this.getTelemetryByDisplayName(telemetryLive, devices, sensors);\n          return {\n            telemetryLive\n          };\n        });\n    };\n    // Telemetry stream - END\n\n    this.subscriptions.push(\n      this.telemetryPanelRefresh$.subscribe(() =>\n        this.setState({\n          telemetryLive: {},\n          isTelemetryPending: true\n        })\n      )\n    );\n\n    this.subscriptions.push(\n      this.telemetryPanelRefresh$.switchMap(getTelemetryStream).subscribe(\n        telemetryState => {\n          this.setState({\n            ...telemetryState,\n            lastRefreshed: moment(),\n            isTelemetryPending: false\n          });\n        },\n        telemetryError => {\n          this.setState({ telemetryError, isTelemetryPending: false });\n        }\n      )\n    );\n\n    // Start polling all panels\n    if (\n      this.props.devicesLastUpdated &&\n      this.props.sensorsLastUpdated &&\n      this.props.sensorModelsLastUpdated\n    ) {\n      this.telemetryPanelRefresh$.next(\n        refreshEvent(\n          this.props.devices,\n          this.props.sensors,\n          this.props.sensorModels\n        )\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.devicesLastUpdated &&\n      this.props.sensorsLastUpdated &&\n      this.props.sensorModelsLastUpdated && // If now I have everything and ...\n      !(\n        prevProps.devicesLastUpdated &&\n        prevProps.sensorsLastUpdated &&\n        prevProps.sensorModelsLastUpdated\n      ) // ... in the previous update, I was missing something, then update telemetry\n    ) {\n      this.setState(\n        {\n          ...this.getSensorMeasureData(\n            this.props.sensors,\n            this.props.sensorModels\n          )\n        },\n        () => {\n          if (this.state.isRealTimeTelemetry) {\n            this.telemetryPanelRefresh$.next(\n              refreshEvent(\n                this.props.devices,\n                this.props.sensors,\n                this.props.sensorModels\n              )\n            );\n          } else {\n            this.getCustomTelemetryStream();\n          }\n        }\n      );\n    }\n  }\n\n  getSensorMeasureData(sensors, sensorModels) {\n    const { sensorIds } = this.props;\n\n    const validSensorModelIds = sensors\n      .filter(sensor => sensorIds.includes(sensor.id))\n      .map(sensor => sensor.sensorModelId);\n\n    const measureNameMeasureTypeList = sensorModels\n      .filter(sensorModel => validSensorModelIds.includes(sensorModel.id))\n      .reduce((acc, sensorModel) => acc.concat(sensorModel.sensorMeasures), [])\n      .map(sensorMeasure => [sensorMeasure.name, sensorMeasure.type]);\n\n    return {\n      measureNameTypeMap: new Map(measureNameMeasureTypeList),\n      selectedMeasureType:\n        measureNameMeasureTypeList.length > 0\n          ? measureNameMeasureTypeList[0][1]\n          : \"\",\n      selectedMeasureName:\n        measureNameMeasureTypeList.length > 0\n          ? measureNameMeasureTypeList[0][0]\n          : \"\"\n    };\n  }\n\n  filterSensorIds(sensorModels, sensors) {\n    const { selectedMeasureName } = this.state;\n    const { sensorIds } = this.props;\n\n    const sensorModelIds = sensorModels\n      .filter(sensorModel =>\n        sensorModel.sensorMeasures\n          .map(sensorMeasure => sensorMeasure.name)\n          .includes(selectedMeasureName)\n      )\n      .map(sensorModel => sensorModel.id);\n\n    return sensors\n      .filter(sensor => sensorModelIds.includes(sensor.sensorModelId))\n      .map(sensor => sensor.id)\n      .filter(sensorId => sensorIds.includes(sensorId));\n  }\n\n  getTelemetryByDisplayName(telemetry, devices, sensors) {\n    const deviceIdNameList = devices.map(device => [device.id, device.name]);\n    const deviceIdNameMap = new Map(deviceIdNameList);\n\n    const sensorIdDisplayNameList = devices\n      .reduce(\n        (acc, device) =>\n          acc.concat(sensors.filter(sensor => sensor.deviceId === device.id)),\n        []\n      )\n      .map(sensor => [\n        sensor.id,\n        [deviceIdNameMap.get(sensor.deviceId), sensor.name, sensor.id].join(\"_\")\n      ]);\n\n    const sensorIdDisplayNameMap = new Map(sensorIdDisplayNameList);\n\n    // replace sensor id with name\n    for (const sensorMeasure in telemetry) {\n      if (Object.prototype.hasOwnProperty.call(telemetry, sensorMeasure)) {\n        for (const sensorId in telemetry[sensorMeasure]) {\n          if (\n            Object.prototype.hasOwnProperty.call(\n              telemetry[sensorMeasure],\n              sensorId\n            )\n          ) {\n            telemetry[sensorMeasure][sensorIdDisplayNameMap.get(sensorId)] =\n              telemetry[sensorMeasure][sensorId];\n            delete telemetry[sensorMeasure][sensorId];\n          }\n        }\n      }\n    }\n  }\n\n  getSensorMeasureNameUnitMap() {\n    const { devices, sensors, sensorModels } = this.props;\n\n    const sensorMeasureNameUnitList = devices\n      .reduce(\n        (acc, device) =>\n          acc.concat(sensors.filter(sensor => sensor.deviceId === device.id)),\n        []\n      )\n      .reduce(\n        (acc, sensor) =>\n          acc.concat(\n            sensorModels.filter(\n              sensorModel => sensorModel.id === sensor.sensorModelId\n            )\n          ),\n        []\n      )\n      .reduce((acc, sensorModel) => acc.concat(sensorModel.sensorMeasures), [])\n      .map(sensorMeasure => [sensorMeasure.name, sensorMeasure.unit]);\n\n    return new Map(sensorMeasureNameUnitList);\n  }\n\n  // onApply event For Date Picker\n  onApplyEvent(event, picker) {\n    const start = moment(picker.startDate).toISOString();\n    const end = moment(picker.endDate).toISOString();\n\n    this.setState({\n      telemetryCustom: {},\n      telemetryCustomDateRange: { start: start, end: end },\n      buttonActive: \"custom\",\n      isTelemetryPending: true\n    });\n\n    this.getCustomTelemetryStream();\n  }\n\n  getCustomTelemetryStream() {\n    const { telemetryCustomDateRange } = this.state;\n    const { devices, sensors, sensorModels } = this.props;\n    const telemetryCurrent = {};\n\n    Observable.from(this.filterSensorIds(sensorModels, sensors))\n      .mergeMap(sensorId =>\n        TelemetryService.getTelemetryBySensorIdForDateRange(\n          sensorId,\n          telemetryCustomDateRange.start,\n          telemetryCustomDateRange.end\n        )\n      )\n      .toArray()\n      .flatMap(transformTelemetryResponse(() => telemetryCurrent))\n      .map(telemetryCustom => {\n        this.getTelemetryByDisplayName(telemetryCustom, devices, sensors);\n        return {\n          telemetryCustom: telemetryCustom,\n          isTelemetryPending: false\n        };\n      })\n      .subscribe(\n        telemetryState =>\n          this.setState({\n            ...telemetryState,\n            lastRefreshed: moment(),\n            isRealTimeTelemetry: false\n          }),\n        telemetryError =>\n          this.setState({\n            telemetryError,\n            isTelemetryPending: false\n          })\n      );\n  }\n\n  refreshTelemetryData() {\n    const { buttonActive } = this.state;\n    const { devices, sensors, sensorModels } = this.props;\n\n    if (buttonActive === \"live\") {\n      this.setState(\n        {\n          telemetryLive: {},\n          isTelemetryPending: true\n        },\n        () => {\n          this.telemetryPanelRefresh$.next(\n            refreshEvent(devices, sensors, sensorModels)\n          );\n        }\n      );\n    } else if (buttonActive === \"custom\") {\n      this.setState(\n        {\n          telemetryCustom: {},\n          isTelemetryPending: true\n        },\n        () => {\n          this.getCustomTelemetryStream();\n        }\n      );\n    }\n  }\n\n  onLiveButtonClick() {\n    this.setState({\n      istelemetryPending: false,\n      isRealTimeTelemetry: true,\n      buttonActive: \"live\"\n    });\n  }\n\n  render() {\n    const {\n      t,\n      theme,\n\n      isDevicesPending,\n      isSensorsPending,\n      isSensorModelsPending,\n      devicesError,\n      sensorsError,\n      sensorModelsError\n    } = this.props;\n\n    const {\n      buttonActive,\n      isTelemetryPending,\n      telemetryError,\n      isRealTimeTelemetry,\n      telemetryLive,\n      telemetryCustom,\n      measureNameTypeMap,\n      selectedMeasureType,\n      selectedMeasureName\n    } = this.state;\n\n    const timeSeriesExplorerUrl = global.DeploymentConfig.tsiEndpoint;\n    const isPending =\n      isDevicesPending ||\n      isSensorsPending ||\n      isTelemetryPending ||\n      isSensorModelsPending;\n    const error =\n      devicesError || sensorsError || telemetryError || sensorModelsError;\n    const telemetry = isRealTimeTelemetry ? telemetryLive : telemetryCustom;\n    const sensorMeasureNameUnitMap = this.getSensorMeasureNameUnitMap();\n\n    const classNameLive =\n      buttonActive === \"live\"\n        ? \"live-button live-button-active\"\n        : \"live-button\";\n    const classNameDatePicker =\n      buttonActive === \"custom\"\n        ? \"date-picker-button date-picker-button-active\"\n        : \"date-picker-button\";\n\n    return (\n      <Panel className=\"telemetry-panel\">\n        <PanelHeader>\n          {this.props.showHeader && (\n            <PanelHeaderLabel>\n              {t(\"dashboard.panels.telemetry.header\")}\n            </PanelHeaderLabel>\n          )}\n          <ContextMenuAlign>\n            <DatePickerElement\n              className={classNameDatePicker}\n              onApplyEvent={this.onApplyEvent}\n              t={t}\n            />\n            <button className={classNameLive} onClick={this.onLiveButtonClick}>\n              {t(\"dashboard.liveButton\")}\n            </button>\n          </ContextMenuAlign>\n        </PanelHeader>\n        <PanelContent className=\"telemetry-panel-container\">\n          <div className=\"options-container bold-measure-type\">\n            {Array.from(new Set(measureNameTypeMap.values())).map(\n              (measureType, index) => (\n                <button\n                  key={index}\n                  onClick={() =>\n                    this.setState({ selectedMeasureType: measureType })\n                  }\n                  className={joinClasses(\n                    \"telemetry-option\",\n                    selectedMeasureType === measureType ? \"active\" : \"\"\n                  )}\n                >\n                  {measureType}\n                </button>\n              )\n            )}\n          </div>\n          <div className=\"options-container\">\n            {Array.from(measureNameTypeMap.keys())\n              .filter(\n                tKey => measureNameTypeMap.get(tKey) === selectedMeasureType\n              )\n              .map((key, index) => {\n                return (\n                  <button\n                    key={index}\n                    onClick={() =>\n                      this.setState({ selectedMeasureName: key }, () => {\n                        this.refreshTelemetryData();\n                      })\n                    }\n                    className={joinClasses(\n                      \"telemetry-option\",\n                      selectedMeasureName === key ? \"active\" : \"\"\n                    )}\n                  >\n                    {key}\n                  </button>\n                );\n              })}\n          </div>\n\n          <TelemetryChart\n            telemetry={telemetry}\n            telemetryKey={selectedMeasureName}\n            theme={theme}\n            colors={chartColorObjects}\n          />\n          {Object.keys(telemetry).length !== 0 && (\n            <div className=\"measure-unit-container\">\n              {\"Measure Unit: \" +\n                sensorMeasureNameUnitMap.get(selectedMeasureName)}\n            </div>\n          )}\n          {!isPending && Object.keys(telemetry).length === 0 && (\n            <PanelMsg className=\"no-data\">{t(\"dashboard.noData\")}</PanelMsg>\n          )}\n          {isPending === true && <PanelMsg>{t(\"dashboard.wait\")}</PanelMsg>}\n          {timeSeriesExplorerUrl && (\n            <TimeSeriesInsightsLinkContainer\n              href={timeSeriesExplorerUrl}\n              onClick={() => {\n                appInsights.trackEvent(\n                  {\n                    name: \"UiEvent:Click: Explore in TSI Link\"\n                  },\n                  { type: \"External Link Click\", toUrl: timeSeriesExplorerUrl }\n                );\n              }}\n            />\n          )}\n        </PanelContent>\n        {isPending && (\n          <PanelOverlay>\n            <Indicator />\n          </PanelOverlay>\n        )}\n        {error && (\n          <PanelError>\n            <AjaxError t={t} error={error} />\n          </PanelError>\n        )}\n      </Panel>\n    );\n  }\n}\n\nTelemetryPanel.propTypes = {\n  t: PropTypes.func.isRequired,\n  theme: PropTypes.oneOf([\"light\", \"dark\"]).isRequired,\n  showHeader: PropTypes.bool.isRequired\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport const chartColors = [\n  \"#01B8AA\",\n  \"#F2C80F\",\n  \"#E81123\",\n  \"#3599B8\",\n  \"#33669A\",\n  \"#26FFDE\",\n  \"#E0E7EE\",\n  \"#FDA954\",\n  \"#FD625E\",\n  \"#FF4EC2\",\n  \"#FFEE91\"\n];\nexport const chartColorObjects = chartColors.map(color => ({ color }));\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport {\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent\n} from \"components/shared/flyout\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { dateFormat } from \"utilities\";\nimport { LinkedComponent } from \"utilities\";\nimport { ManualAssociate } from \"./manualAssociate\";\nimport {\n  Btn,\n  // ContextMenuAlign,\n  AjaxError,\n  SuccessMessage,\n  BtnToolbar,\n  Indicator\n} from \"components/shared\";\nimport { deviceService } from \"services\";\nimport { toNewDeviceRequestModel } from \"services/models/deviceModels\";\n\nimport \"./associateDevices.scss\";\nimport { isArray } from \"util\";\nimport { appInsights } from \"applicationInsights\";\n\nconst MANUAL = \"manualAssociate\";\n// const RECOMMENDED = \"recommended\";\n\nconst initialState = {\n  selectedTab: MANUAL,\n  associateDeviceError: undefined,\n  changesApplied: undefined,\n  isAssociateDevicePending: undefined,\n  deviceFarmMapping: undefined,\n  isAssociateDevicesSuccessful: undefined\n};\n\nexport class AssociateDevices extends LinkedComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n\n    const {\n      deviceLastUpdated,\n      deviceError,\n      fetchDevices,\n\n      deviceModelLastUpdated,\n      deviceModelError,\n      fetchDeviceModel,\n\n      farmLastUpdated,\n      farmsError,\n      fetchFarms\n    } = this.props;\n\n    if (!deviceLastUpdated && !deviceError) fetchDevices();\n    if (!farmLastUpdated && !farmsError) fetchFarms();\n    if (!deviceModelLastUpdated && !deviceModelError) fetchDeviceModel();\n\n    this.onClickTabChange = this.onClickTabChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.rowData !== nextProps.rowData) {\n      this.setState({\n        isAssociateDevicesSuccessful: undefined,\n        isAssociateDevicePending: undefined,\n        associateDeviceError: undefined,\n        changesApplied: undefined\n      });\n    }\n  }\n\n  componentWillUnmount() {}\n\n  apply = event => {\n    appInsights.trackEvent({ name: \"UiEvent:Click: Associate Devices Btn\" });\n    event.preventDefault();\n    const { modifyDevices, devices } = this.props;\n    const { deviceFarmMapping } = this.state;\n    this.setState({\n      isAssociateDevicePending: true,\n      associateDeviceError: null\n    });\n    Observable.from(deviceFarmMapping)\n      .mergeMap(selectedDevice => {\n        const editableDevice = devices.find(\n          device => device.id === selectedDevice.deviceId\n        );\n        editableDevice.farmId = selectedDevice.farmId;\n        const requestProps = JSON.parse(JSON.stringify(editableDevice));\n        return deviceService.updateDevice(\n          editableDevice.id,\n          toNewDeviceRequestModel(requestProps)\n        );\n      })\n      .mergeMap(device => {\n        return deviceService.getDeviceById(device.id);\n      })\n      .subscribe(\n        updatedDevice => {\n          const { farmsMap, devices, deviceModelsMap } = this.props;\n          updatedDevice.deviceModelType = deviceModelsMap.get(\n            updatedDevice.deviceModelId\n          );\n          updatedDevice.deviceModelName = deviceModelsMap.get(\n            updatedDevice.deviceModelId\n          );\n          const deviceMapWithParent = devices.find(\n            deviceParent => deviceParent.id === updatedDevice.parentDeviceId\n          );\n          updatedDevice.parentDevice =\n            deviceMapWithParent === undefined\n              ? undefined\n              : deviceMapWithParent.name;\n          updatedDevice.lastModifiedAt = moment(\n            updatedDevice.lastModifiedAt\n          ).format(dateFormat);\n          updatedDevice.farmName = updatedDevice.farmId\n            ? farmsMap.get(updatedDevice.farmId)\n            : undefined;\n\n          modifyDevices([{ ...updatedDevice }]);\n          this.setState({\n            isAssociateDevicePending: false,\n            changesApplied: true,\n            isAssociateDevicesSuccessful: true\n          });\n        },\n        error =>\n          this.setState({\n            associateDeviceError: error,\n            isAssociateDevicePending: false,\n            changesApplied: true\n          }),\n        () =>\n          this.setState({\n            isAssociateDevicePending: false,\n            changesApplied: true,\n            confirmStatus: false\n          })\n      );\n  };\n\n  onClickTabChange(selectedTab) {\n    this.setState({\n      selectedTab: selectedTab\n    });\n  }\n\n  onDeviceFarmMappingChange = newDeviceMapping => {\n    const deviceFarmMapping = [];\n    for (const [deviceId, farmId] of newDeviceMapping) {\n      deviceFarmMapping.push({\n        deviceId,\n        farmId\n      });\n    }\n    this.setState({ ...this.state, deviceFarmMapping });\n  };\n\n  areDevicesAssigned = () => {\n    const { deviceFarmMapping } = this.state;\n    let validity = false;\n    if (isArray(deviceFarmMapping) && deviceFarmMapping.length !== 0) {\n      validity = true;\n      deviceFarmMapping.forEach(device => {\n        if (!device.farmId) validity = false;\n      });\n    }\n    return validity;\n  };\n\n  render() {\n    const { onClose, t, farms, rowData } = this.props;\n    const {\n      selectedTab,\n      associateDeviceError,\n      changesApplied,\n      isAssociateDevicesSuccessful,\n      isAssociateDevicePending\n    } = this.state;\n    const generalProps = {\n      t,\n      rowData,\n      farms,\n      onDeviceFarmMappingChange: this.onDeviceFarmMappingChange\n    };\n\n    return (\n      <div className=\"associate-device-container\">\n        <Flyout>\n          <FlyoutHeader>\n            <FlyoutTitle>\n              {t(\"devices.flyouts.associateDevices.title\")}\n            </FlyoutTitle>\n            <FlyoutCloseBtn onClick={onClose} />\n          </FlyoutHeader>\n          <FlyoutContent className=\"associate-device-content \">\n            {/*\n            TODO change when both tabs are created\n            <ContextMenuAlign left={true} className=\"tab-container\">\n              <Btn\n                className={selectedTab === RECOMMENDED ? \"tab active\" : \"tab\"}\n                onClick={() => this.onClickTabChange(RECOMMENDED)}\n              >\n                {t(\"farms.flyouts.addDevices.recommended\")}\n              </Btn>\n              <Btn\n                className={selectedTab === MANUAL ? \"tab active\" : \"tab\"}\n                onClick={() => this.onClickTabChange(MANUAL)}\n              >\n                {t(\"devices.flyouts.associateDevices.manualSelect.header\")}\n              </Btn>\n            </ContextMenuAlign> */}\n            {selectedTab === MANUAL && <ManualAssociate {...generalProps} />}\n            {/* TODO Add RecommendedDevices component */}\n            {/* {selectedTab === RECOMMENDED && <RecommendedDevices {...generalProps} />} */}\n\n            {/** Displays an error message if one occurs while applying changes. */}\n            {associateDeviceError && (\n              <AjaxError\n                className=\"associate-devices-error\"\n                t={t}\n                error={associateDeviceError}\n              />\n            )}\n            {changesApplied === true &&\n              isAssociateDevicesSuccessful === true && (\n                <SuccessMessage\n                  className=\"associate-devices-success\"\n                  t={t}\n                  successMsg={t(\"devices.flyouts.associateDevices.success\")}\n                />\n              )}\n            {/** If changes are not yet applied, show the buttons for applying changes and closing the flyout. */\n            !changesApplied && !isAssociateDevicePending && (\n              <BtnToolbar className=\"button-box\">\n                <Btn onClick={onClose} id=\"cancelBtn\">\n                  {t(\"devices.flyouts.associateDevices.cancel\")}\n                </Btn>\n                <Btn\n                  primary={true}\n                  disabled={!this.areDevicesAssigned()}\n                  type=\"submit\"\n                  onClick={this.apply}\n                  id={\n                    !this.areDevicesAssigned() ? \"applyBtnDisabled\" : \"applyBtn\"\n                  }\n                >\n                  {t(\"devices.flyouts.associateDevices.assign\")}\n                </Btn>\n              </BtnToolbar>\n            )}\n            {isAssociateDevicePending && (\n              <BtnToolbar className=\"button-box\">\n                <Indicator />\n              </BtnToolbar>\n            )}\n            {/**\n             * If changes are applied, show only the close button.\n             * Other text or component might be included here as well.\n             * For example, you might provide a link to the detail page for a newly submitted job.\n             * */\n            !!changesApplied && (\n              <BtnToolbar>\n                {/* <Btn svg={svgs.cancelX} onClick={onClose}>\n                  {t(\"devices.flyouts.associateDevices.close\")}\n                </Btn> */}\n              </BtnToolbar>\n            )}\n          </FlyoutContent>\n        </Flyout>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport {\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent\n} from \"components/shared/flyout\";\nimport { Observable } from \"rxjs\";\nimport moment from \"moment\";\nimport { LinkedComponent, svgs, dateFormat } from \"utilities\";\nimport { SelectDevices } from \"./selectDevices\";\nimport \"./addDevices.scss\";\nimport {\n  Btn,\n  // ContextMenuAlign,\n  AjaxError,\n  BtnToolbar,\n  SectionDesc,\n  SuccessMessage,\n  SummaryBody,\n  SummaryCount,\n  Indicator,\n  SummarySection\n} from \"components/shared\";\nimport { deviceService } from \"services\";\nimport { toNewDeviceRequestModel } from \"services/models/deviceModels\";\nimport { appInsights } from \"applicationInsights\";\n\nconst SELECTDEVICES = \"selectDevices\";\n// const RECOMMENDED = \"recommended\";\n\nconst initialState = {\n  selectedTab: SELECTDEVICES,\n  addDeviceError: undefined,\n  changesApplied: undefined,\n  isAddDevicePending: undefined,\n  selectedDevices: undefined,\n  isAddDeviceSuccessful: undefined\n};\n\nexport class AddDevices extends LinkedComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n\n    const {\n      deviceLastUpdated,\n      deviceError,\n      fetchDevices,\n\n      deviceModelLastUpdated,\n      deviceModelError,\n      fetchDeviceModel,\n\n      farmLastUpdated,\n      farmsError,\n      fetchFarms\n    } = this.props;\n\n    if (!deviceLastUpdated && !deviceError) fetchDevices();\n    if (!farmLastUpdated && !farmsError) fetchFarms();\n    if (!deviceModelLastUpdated && !deviceModelError) fetchDeviceModel();\n\n    this.onClickTabChange = this.onClickTabChange.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.rowData !== nextProps.rowData) {\n      this.setState({ ...initialState });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) this.subscription.unsubscribe();\n  }\n\n  apply = event => {\n    const { modifyDevices, devices, farmId } = this.props;\n    const { selectedDevices } = this.state;\n    event.preventDefault();\n    appInsights.trackEvent(\n      { name: \"UiEvent:Click: Add Devices Btn\" },\n      {\n        context: {\n          deviceCount:\n            selectedDevices && selectedDevices.length\n              ? selectedDevices.length\n              : 0\n        }\n      }\n    );\n    this.setState({\n      isAddDevicePending: true,\n      addDeviceError: null\n    });\n\n    Observable.from(selectedDevices)\n      .mergeMap(selectedDevice => {\n        const editableDevice = devices.find(\n          device => device.id === selectedDevice.deviceId\n        );\n        editableDevice.farmId = farmId;\n        const requestProps = JSON.parse(JSON.stringify(editableDevice));\n        return deviceService.updateDevice(\n          editableDevice.id,\n          toNewDeviceRequestModel(requestProps)\n        );\n      })\n      .mergeMap(device => {\n        return deviceService.getDeviceById(device.id);\n      })\n      .subscribe(\n        updatedDevice => {\n          const { farmsMap, devices, deviceModelsMap } = this.props;\n          updatedDevice.deviceModelType = deviceModelsMap.get(\n            updatedDevice.deviceModelId\n          );\n          updatedDevice.deviceModelName = deviceModelsMap.get(\n            updatedDevice.deviceModelId\n          );\n          const deviceMapWithParent = devices.find(\n            deviceParent => deviceParent.id === updatedDevice.parentDeviceId\n          );\n          updatedDevice.parentDevice =\n            deviceMapWithParent === undefined\n              ? undefined\n              : deviceMapWithParent.name;\n          updatedDevice.lastModifiedAt = moment(\n            updatedDevice.lastModifiedAt\n          ).format(dateFormat);\n          updatedDevice.farmName = updatedDevice.farmId\n            ? farmsMap.get(updatedDevice.farmId)\n            : undefined;\n          modifyDevices([{ ...updatedDevice }]);\n          this.setState({\n            isAddDevicePending: false,\n            changesApplied: true,\n            isAddDeviceSuccessful: true\n          });\n        },\n        error =>\n          this.setState({\n            addDeviceError: error,\n            isAddDevicePending: false,\n            changesApplied: true\n          }),\n        () =>\n          this.setState({\n            isAddDevicePending: false,\n            changesApplied: true,\n            confirmStatus: false\n          })\n      );\n  };\n\n  onClickTabChange(selectedTab) {\n    this.setState({\n      selectedTab: selectedTab\n    });\n  }\n\n  onHardSelectChange = selectedDevices => {\n    this.setState({ selectedDevices });\n  };\n\n  render() {\n    const { onClose, t, farms, devices } = this.props;\n    const {\n      selectedTab,\n      addDeviceError,\n      changesApplied,\n      isAddDeviceSuccessful,\n      selectedDevices,\n      isAddDevicePending\n    } = this.state;\n    const generalProps = {\n      t,\n      farms,\n      devices,\n      onHardSelectChange: this.onHardSelectChange\n    };\n\n    return (\n      <div className=\"add-device-container\">\n        <Flyout>\n          <FlyoutHeader>\n            <FlyoutTitle>{t(\"farms.flyouts.addDevices.header\")}</FlyoutTitle>\n            <FlyoutCloseBtn onClick={onClose} />\n          </FlyoutHeader>\n          <FlyoutContent className=\"add-device-content \">\n            {/* <ContextMenuAlign left={true} className=\"tab-container\">\n              <Btn\n                className={selectedTab === RECOMMENDED ? \"tab active\" : \"tab\"}\n                onClick={() => this.onClickTabChange(RECOMMENDED)}\n              >\n                {t(\"farms.flyouts.addDevices.recommended\")}\n              </Btn>\n              <Btn\n                className={selectedTab === SELECTDEVICES ? \"tab active\" : \"tab\"}\n                onClick={() => this.onClickTabChange(SELECTDEVICES)}\n              >\n                {t(\"farms.flyouts.addDevices.selectDevices\")}\n              </Btn>\n            </ContextMenuAlign> */}\n            {selectedTab === SELECTDEVICES && (\n              <SelectDevices {...generalProps} />\n            )}\n            {/* TODO Add RecommendedDevices component */}\n            {/* {selectedTab === RECOMMENDED && <RecommendedDevices {...generalProps} />} */}\n\n            <SummarySection>\n              <SummaryBody>\n                <SummaryCount>\n                  {selectedDevices ? selectedDevices.length : 0}\n                </SummaryCount>\n                <SectionDesc>\n                  {t(\"farms.flyouts.addDevices.selectedDevices\")}\n                </SectionDesc>\n              </SummaryBody>\n            </SummarySection>\n\n            {/** Displays an error message if one occurs while applying changes. */}\n            {addDeviceError && (\n              <AjaxError\n                className=\"add-devices-error\"\n                t={t}\n                error={addDeviceError}\n              />\n            )}\n            {changesApplied === true && isAddDeviceSuccessful === true && (\n              <SuccessMessage\n                className=\"add-devices-success\"\n                t={t}\n                successMsg={t(\"farms.flyouts.addDevices.success\")}\n              />\n            )}\n            {/** If changes are not yet applied, show the buttons for applying changes and closing the flyout. */\n            !changesApplied && !isAddDevicePending && (\n              <BtnToolbar className=\"button-box\">\n                <Btn id=\"cancelBtn\" svg={svgs.cancelX} onClick={onClose}>\n                  {t(\"farms.flyouts.addDevices.cancel\")}\n                </Btn>\n                <Btn\n                  primary={true}\n                  disabled={!selectedDevices || selectedDevices.length === 0}\n                  type=\"submit\"\n                  onClick={this.apply}\n                  id={\n                    !selectedDevices || selectedDevices.length === 0\n                      ? \"applyBtnDisabled\"\n                      : \"applyBtn\"\n                  }\n                >\n                  {t(\"farms.flyouts.addDevices.apply\")}\n                </Btn>\n              </BtnToolbar>\n            )}\n            {isAddDevicePending && (\n              <BtnToolbar className=\"button-box\">\n                <Indicator />\n              </BtnToolbar>\n            )}\n            {/**\n             * If changes are applied, show only the close button.\n             * Other text or component might be included here as well.\n             * For example, you might provide a link to the detail page for a newly submitted job.\n             * */\n            !!changesApplied && (\n              <BtnToolbar>\n                {/* <Btn svg={svgs.cancelX} onClick={onClose}>\n                  {t(\"farms.flyouts.addDevice.close\")}\n                </Btn> */}\n              </BtnToolbar>\n            )}\n          </FlyoutContent>\n        </Flyout>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const addDeviceColumnDefs = {\n  deviceName: {\n    headerName: \"farms.flyouts.addDevices.deviceName\",\n    field: \"deviceName\",\n    sort: \"asc\",\n    comparator: caseInsensitiveStringComparator\n  },\n  farmName: {\n    headerName: \"farms.flyouts.addDevices.farmName\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value)\n  }\n};\n\nexport const getSoftSelectId = ({ id }) => id;\n\nexport const defaultAddDeviceGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  rowSelection: \"multiple\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { isFunc, translateColumnDefs } from \"utilities\";\nimport { PcsGrid } from \"components/shared\";\nimport { checkboxColumn } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport {\n  addDeviceColumnDefs,\n  defaultAddDeviceGridProps\n} from \"./addDeviceGridConfig\";\nimport \"./addDeviceGrid.scss\";\n\nconst initialState = {\n  softSelectedId: undefined,\n  selectedDevices: undefined\n};\n\nexport class AddDeviceGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n\n    this.columnDefs = [\n      checkboxColumn,\n      addDeviceColumnDefs.deviceName,\n      addDeviceColumnDefs.farmName\n    ];\n\n    this.defaulGridProps = { ...defaultAddDeviceGridProps };\n  }\n\n  getSoftSelectId = ({ id } = \"\") => id;\n\n  onGridReady = gridReadyEvent => {\n    this.addDeviceGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  onHardSelectChange = selectedDevices => {\n    const { onHardSelectChange } = this.props;\n    if (isFunc(onHardSelectChange)) {\n      onHardSelectChange(selectedDevices);\n      this.setState({ selectedDevices });\n    }\n  };\n\n  onSoftSelectChange = (rowId, rowData) => {\n    // Note: only the Id is reliable, rowData may be out of date\n    const { onSoftSelectChange } = this.props;\n    if (rowId) {\n      this.setState({ softSelectedId: rowId });\n    }\n    if (isFunc(onSoftSelectChange)) {\n      onSoftSelectChange(rowId, rowData);\n    }\n  };\n\n  render() {\n    const { t } = this.props;\n    const { softSelectedId } = this.state;\n    const gridProps = {\n      ...this.defaulGridProps,\n      columnDefs: translateColumnDefs(t, this.columnDefs),\n      sizeColumnsToFit: true,\n      getSoftSelectId: this.getSoftSelectId,\n      softSelectId: softSelectedId,\n      ...this.props,\n      deltaRowDataMode: true,\n      enableSorting: true,\n      unSortIcon: true,\n      getRowNodeId: ({ id }) => id,\n      context: {\n        t: t\n      },\n      /* Grid Events */\n      onGridReady: this.onGridReady,\n      onRowClicked: ({ node }) => node.setSelected(!node.isSelected()),\n      onHardSelectChange: this.onHardSelectChange,\n      onSoftSelectChange: this.onSoftSelectChange\n    };\n\n    return (\n      <div className=\"add-device-grid\">\n        <PcsGrid {...gridProps} />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport {\n  ComponentArray,\n  PageContent,\n  ContextMenuAlign,\n  SearchInput\n} from \"components/shared\";\nimport { AddDeviceGrid } from \"./addDeviceGrid\";\nimport \"./addDevices.scss\";\nconst initialState = {\n  selectedDevices: undefined\n};\n\nexport class SelectDevices extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n  }\n\n  onGridReady = gridReadyEvent => (this.addDeviceGridApi = gridReadyEvent.api);\n\n  searchOnChange = ({ target: { value } }) => {\n    if (this.addDeviceGridApi) this.addDeviceGridApi.setQuickFilter(value);\n  };\n\n  mapDevicesToFarm = () => {\n    const { farms, devices } = this.props;\n    const deviceList = devices.map((device, id) => {\n      const farm = farms.find(\n        farm => device.farmId && farm.id === device.farmId\n      );\n      return {\n        farmId: farm ? farm.id : null,\n        id: id,\n        deviceId: device.id,\n        farmName: farm ? farm.name : undefined,\n        deviceName: device.name\n      };\n    });\n\n    return deviceList;\n  };\n\n  render() {\n    const rowData = this.mapDevicesToFarm();\n    const { t, onHardSelectChange } = this.props;\n    const gridProps = {\n      t,\n      onGridReady: this.onGridReady,\n      rowData,\n      onHardSelectChange: onHardSelectChange\n    };\n    return (\n      <ComponentArray>\n        <ContextMenuAlign left={true}>\n          <SearchInput\n            className=\"search-Devices\"\n            onChange={this.searchOnChange}\n            placeholder={t(\"farms.flyouts.addDevices.searchPlaceholder\")}\n          />\n        </ContextMenuAlign>\n        <PageContent>\n          <AddDeviceGrid {...gridProps} />\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { FarmSelectRenderer } from \"components/shared\";\nimport { gridValueFormatters } from \"components/shared/pcsGrid/pcsGridConfig\";\nimport { caseInsensitiveStringComparator } from \"utilities\";\nconst { checkForEmpty } = gridValueFormatters;\n\nexport const associateDeviceColumnDefs = {\n  deviceName: {\n    headerName: \"devices.flyouts.associateDevices.deviceName\",\n    field: \"deviceName\",\n    sort: \"asc\",\n    comparator: caseInsensitiveStringComparator\n  },\n  currentFarm: {\n    headerName: \"devices.flyouts.associateDevices.currentFarm\",\n    field: \"farmName\",\n    valueFormatter: ({ value }) => checkForEmpty(value),\n    comparator: caseInsensitiveStringComparator\n  },\n  assignToFarm: {\n    headerName: \"devices.flyouts.associateDevices.assignToFarm\",\n    field: \"assignToFarm\",\n    cellRendererFramework: FarmSelectRenderer,\n    suppressSorting: true\n  }\n};\n\nexport const getSoftSelectId = ({ id }) => id;\n\nexport const defaultAssociateDeviceGridProps = {\n  enableColResize: true,\n  multiSelect: true,\n  rowSelection: \"multiple\"\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { isFunc, translateColumnDefs } from \"utilities\";\nimport { PcsGrid } from \"components/shared\";\nimport {\n  associateDeviceColumnDefs,\n  defaultAssociateDeviceGridProps\n} from \"./associateDeviceGridConfig\";\nimport \"./associateDeviceGrid.scss\";\nconst initialState = {\n  softSelectedId: undefined,\n  selectedDevices: undefined\n};\n\nexport class AssociateDeviceGrid extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = initialState;\n\n    this.columnDefs = [\n      associateDeviceColumnDefs.deviceName,\n      associateDeviceColumnDefs.currentFarm,\n      associateDeviceColumnDefs.assignToFarm\n    ];\n\n    this.defaulGridProps = { ...defaultAssociateDeviceGridProps };\n  }\n\n  onGridReady = gridReadyEvent => {\n    this.associateDeviceGridApi = gridReadyEvent.api;\n    // Call the onReady props if it exists\n    if (isFunc(this.props.onGridReady)) {\n      this.props.onGridReady(gridReadyEvent);\n    }\n  };\n\n  onFarmSelectChange = (data, farmId) => {\n    const { onFarmSelectChange } = this.props;\n    if (isFunc(onFarmSelectChange)) {\n      onFarmSelectChange(data, farmId);\n    }\n  };\n\n  render() {\n    const { t, farms } = this.props;\n    const { softSelectedId } = this.state;\n    const gridProps = {\n      ...this.defaulGridProps,\n      columnDefs: translateColumnDefs(t, this.columnDefs),\n      sizeColumnsToFit: true,\n      softSelectId: softSelectedId,\n      ...this.props,\n      deltaRowDataMode: true,\n      enableSorting: true,\n      getRowNodeId: ({ id }) => id,\n      unSortIcon: true,\n      context: {\n        t: t,\n        farms: farms,\n        onFarmSelectChange: this.onFarmSelectChange\n      },\n      /* Grid Events */\n      onGridReady: this.onGridReady\n    };\n\n    return (\n      <div className=\"associate-device-grid\">\n        <PcsGrid {...gridProps} />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport {\n  ComponentArray,\n  PageContent,\n  ContextMenuAlign,\n  FormControl,\n  Btn\n} from \"components/shared\";\nimport { AssociateDeviceGrid } from \"./associateDeviceGrid\";\nimport \"./associateDevices.scss\";\nimport { LinkedComponent, isFunc } from \"utilities\";\n\nconst initialState = {\n  farmApplyToAll: undefined,\n  deviceMapping: undefined\n};\n\nexport class ManualAssociate extends LinkedComponent {\n  constructor(props) {\n    super(props);\n    const { rowData } = props;\n    const deviceMapping = new Map();\n    rowData.forEach(device => {\n      deviceMapping.set(device.id, undefined);\n    });\n    this.state = { ...initialState, deviceMapping };\n  }\n\n  onGridReady = gridReadyEvent =>\n    (this.associateDeviceGridApi = gridReadyEvent.api);\n\n  toSelectOptions = ({ id, name }) => {\n    return {\n      label: name,\n      value: id\n    };\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.rowData !== nextProps.rowData) {\n      const { rowData, onDeviceFarmMappingChange } = nextProps;\n      const { deviceMapping } = this.state;\n      const newDeviceMapping = new Map();\n      rowData.forEach(device => {\n        if (deviceMapping.get(device.id))\n          newDeviceMapping.set(device.id, deviceMapping.get(device.id));\n        else newDeviceMapping.set(device.id, undefined);\n      });\n      if (isFunc(onDeviceFarmMappingChange)) {\n        onDeviceFarmMappingChange(newDeviceMapping);\n      }\n      this.setState({ ...initialState, deviceMapping: newDeviceMapping });\n    }\n  }\n\n  mapDevicesToFarm = () => {\n    const { rowData } = this.props;\n    const { deviceMapping } = this.state;\n\n    return rowData.map((device, id) => {\n      return {\n        farmId: device.farmId,\n        id: id,\n        deviceId: device.id,\n        farmName: device.farmName ? device.farmName : undefined,\n        deviceName: device.name,\n        assignToFarm: deviceMapping ? deviceMapping.get(device.id) : undefined\n      };\n    });\n  };\n\n  onApplyFarmToAll = () => {\n    const { farmApplyToAll } = this.state;\n    const { rowData, onDeviceFarmMappingChange } = this.props;\n    const deviceMapping = new Map();\n    rowData.forEach(device => {\n      deviceMapping.set(device.id, farmApplyToAll);\n    });\n    if (isFunc(onDeviceFarmMappingChange)) {\n      onDeviceFarmMappingChange(deviceMapping);\n    }\n    this.setState({ ...this.state, deviceMapping });\n  };\n\n  onFarmSelectChange = (data, farmId) => {\n    if (farmId) {\n      const { deviceMapping } = this.state;\n      const { onDeviceFarmMappingChange } = this.props;\n      const rowData = this.mapDevicesToFarm();\n      const row = rowData.find(row => row.id === data.id);\n\n      if (data.deviceId === row.deviceId)\n        deviceMapping.set(data.deviceId, farmId);\n      else deviceMapping.set(row.deviceId, farmId);\n      if (isFunc(onDeviceFarmMappingChange)) {\n        onDeviceFarmMappingChange(deviceMapping);\n      }\n      this.setState({\n        ...this.state,\n        farmApplyToAll: undefined,\n        deviceMapping\n      });\n    }\n  };\n\n  render() {\n    const { t, farms } = this.props;\n    const rowData = this.mapDevicesToFarm();\n    const gridProps = {\n      t,\n      rowData,\n      farms,\n      onGridReady: this.onGridReady,\n      onFarmSelectChange: this.onFarmSelectChange\n    };\n    const farmOptions = farms.map(this.toSelectOptions);\n\n    this.applyToAllLink = this.linkTo(\"farmApplyToAll\").map(\n      ({ value }) => value\n    );\n    return (\n      <ComponentArray>\n        <ContextMenuAlign left={true}>\n          <div className=\"farm-applytoall-group\">\n            <FormControl\n              type=\"select\"\n              options={farmOptions}\n              className=\"farm-apply-to-all-select\"\n              clearable={false}\n              searchable={true}\n              placeholder={t(\"devices.flyouts.associateDevices.selectFarm\")}\n              link={this.applyToAllLink}\n            />\n            <Btn\n              className=\"farm-apply-to-all-btn\"\n              onClick={() => this.onApplyFarmToAll()}\n            >\n              {t(\"devices.flyouts.associateDevices.applyToAll\")}\n            </Btn>\n          </div>\n        </ContextMenuAlign>\n        <PageContent>\n          <AssociateDeviceGrid {...gridProps} />\n        </PageContent>\n      </ComponentArray>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { AccessControl } from \"./accessControl\";\n\nimport {\n  epics as userEpics,\n  getUsers,\n  getUserError,\n  getUserLastUpdated,\n  getUserPendingStatus\n} from \"store/reducers/userReducer\";\nimport {\n  epics as roleEpics,\n  redux as rolesRedux,\n  getRoleAssignments,\n  getFetchRoleAssignmentError,\n  getAddRoleAssignmentError,\n  getDeleteRoleAssignmentError,\n  getRoleAssignmentLastUpdated,\n  getFetchRoleAssignmentPendingStatus,\n  getRoleDefinitions,\n  getRoleDefinitionError,\n  getRoleDefinitionLastUpdated,\n  getRoleDefinitionPendingStatus,\n  getAddRoleAssignmentPendingStatus,\n  getDeleteRoleAssignmentPendingStatus\n} from \"store/reducers/rolesReducer\";\n\nconst mapStateToProps = state => ({\n  users: getUsers(state),\n  userError: getUserError(state),\n  userLastUpdated: getUserLastUpdated(state),\n  userPending: getUserPendingStatus(state),\n\n  roleAssignments: getRoleAssignments(state),\n  roleAssignmentFetchError: getFetchRoleAssignmentError(state),\n  roleAssignmentAddError: getAddRoleAssignmentError(state),\n  roleAssignmentDeleteError: getDeleteRoleAssignmentError(state),\n  roleAssignmentLastUpdated: getRoleAssignmentLastUpdated(state),\n  roleAssignmentFetchPending: getFetchRoleAssignmentPendingStatus(state),\n  roleAssignmentAddPending: getAddRoleAssignmentPendingStatus(state),\n  roleAssignmentDeletePending: getDeleteRoleAssignmentPendingStatus(state),\n\n  roleDefinitions: getRoleDefinitions(state),\n  roleDefinitionError: getRoleDefinitionError(state),\n  roleDefinitionLastUpdated: getRoleDefinitionLastUpdated(state),\n  roleDefinitionPending: getRoleDefinitionPendingStatus(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchUsers: userIds => dispatch(userEpics.actions.fetchUsers(userIds)),\n  fetchRoleAssignments: () =>\n    dispatch(roleEpics.actions.fetchRoleAssignments()),\n  updateRoleAssignment: (id, payload) =>\n    dispatch(roleEpics.actions.updateRoleAssignment({ id, payload })),\n  deleteRoleAssignmentsById: (id, callbacks) =>\n    dispatch(roleEpics.actions.deleteRoleAssignmentById({ id, callbacks })),\n  fetchRoleDefinitions: () =>\n    dispatch(roleEpics.actions.fetchRoleDefinitions()),\n  clearRolesError: () => dispatch(rolesRedux.actions.clearError())\n});\n\nexport const AccessControlContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AccessControl)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport \"bootstrap-daterangepicker/daterangepicker.css\";\nimport { svgs } from \"utilities\";\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\nimport { Btn } from \"components/shared\";\nexport class DatePickerElement extends Component {\n  render() {\n    const {\n      inputValue,\n      onApplyEvent,\n      containerType,\n      containerPlaceHolder,\n      containerValue,\n      containerIcon,\n      className,\n      IconClass,\n      t,\n      minDate,\n      startDate,\n      endDate\n    } = this.props;\n    return (\n      <DateRangePicker\n        singleDatePicker={this.props.singleDatePicker}\n        showDropdowns\n        maxDate={moment()}\n        minDate={minDate}\n        startDate={startDate}\n        endDate={endDate}\n        opens=\"left\"\n        onApply={onApplyEvent}\n      >\n        {containerType ? (\n          <React.Fragment>\n            <input\n              className={className}\n              type=\"text\"\n              placeholder={containerPlaceHolder}\n              defaultValue={containerValue}\n              onChange={this.props.onChange}\n            />\n            {containerIcon && (\n              <span className={IconClass}>\n                <img\n                  src={containerIcon}\n                  alt={t(\"maps.filterFlyout.datePickerIcon\")}\n                />\n              </span>\n            )}\n          </React.Fragment>\n        ) : (\n          <Btn primary={true} svg={svgs.calendar} className=\"date-picker-btn\">\n            {inputValue}\n          </Btn>\n        )}\n      </DateRangePicker>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/gatewayBig.75fd713f.svg\";","module.exports = __webpack_public_path__ + \"static/media/nodeBig.3275de77.svg\";","module.exports = __webpack_public_path__ + \"static/media/onlineStatus.f90b7d37.svg\";","module.exports = __webpack_public_path__ + \"static/media/offlineStatus.6c2b4151.svg\";","module.exports = __webpack_public_path__ + \"static/media/onlineStatusBig.b5a2d95d.svg\";","module.exports = __webpack_public_path__ + \"static/media/infoBubble.256850bd.svg\";","module.exports = __webpack_public_path__ + \"static/media/GatewayBlack.a4154c82.svg\";","module.exports = __webpack_public_path__ + \"static/media/gateway.6a9c2364.svg\";","module.exports = __webpack_public_path__ + \"static/media/node.f2d7a65c.svg\";","import React from \"react\";\n\nexport function getDisplayValueFromSuggestion(suggestion, query) {\n  if ((suggestion.mail || \"\").startsWith(query)) {\n    return suggestion.mail;\n  } else if (suggestion.userPrincipalName.startsWith(query)) {\n    return suggestion.userPrincipalName;\n  } else {\n    return suggestion.mail || suggestion.userPrincipalName;\n  }\n}\n\nexport function suggestionRenderer(suggestion, { query }) {\n  const matchingValueFromSuggestion = getDisplayValueFromSuggestion(\n    suggestion,\n    query\n  );\n  return (\n    <div>\n      <div>{suggestion.displayName}</div>\n      <div>{matchingValueFromSuggestion}</div>\n    </div>\n  );\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport { AuthService } from \"services\";\nimport { getUser } from \"store/reducers/appReducer\";\nimport { Profile } from \"./profile\";\n\nconst mapStateToProps = state => ({\n  user: getUser(state)\n});\n\nconst mapDispatchToProps = () => ({\n  logout: () => AuthService.logout()\n});\n\nexport const ProfileContainer = withRouter(\n  withNamespaces()(\n    connect(\n      mapStateToProps,\n      mapDispatchToProps\n    )(Profile)\n  )\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n// import { getEnumTranslation } from 'utilities';\nimport {\n  Btn,\n  ErrorMsg,\n  PropertyGrid as Grid,\n  PropertyRow as Row,\n  PropertyCell as Cell\n} from \"components/shared\";\nimport Flyout from \"components/shared/flyout\";\n\nimport \"./profile.scss\";\n\n// const Section = Flyout.Section;\n\nexport const Profile = props => {\n  const { t, user, logout, onClose } = props;\n\n  // const roleArray = Array.from(user.roles);\n  // const permissionArray = Array.from(user.permissions);\n\n  return (\n    <Flyout.Container>\n      <Flyout.Header>\n        <Flyout.Title>{t(\"profileFlyout.title\")}</Flyout.Title>\n        <Flyout.CloseBtn onClick={onClose} />\n      </Flyout.Header>\n      <Flyout.Content className=\"profile-container\">\n        {!user && (\n          <div className=\"profile-container\">\n            <ErrorMsg className=\"profile-error\">\n              {t(\"profileFlyout.noUser\")}\n            </ErrorMsg>\n          </div>\n        )}\n        {user && (\n          <div className=\"profile-container\">\n            <div className=\"profile-header\">\n              <Grid className=\"profile-header-grid\">\n                <Row>\n                  <Cell className=\"col-7\">\n                    <h2>{user.email}</h2>\n                  </Cell>\n                  <Cell className=\"col-3\">\n                    <Btn primary={true} onClick={logout}>\n                      {t(\"profileFlyout.logout\")}\n                    </Btn>\n                  </Cell>\n                </Row>\n              </Grid>\n            </div>\n\n            {/* <Section.Container>\n              <Section.Header>{t('profileFlyout.roles')}</Section.Header>\n              <Section.Content>\n                {\n                  (roleArray.length === 0)\n                    ? t('profileFlyout.noRoles')\n                    :\n                    <Grid>\n                      {\n                        roleArray.map((roleName, idx) =>\n                          <Row key={idx}>\n                            <Cell>{roleName}</Cell>\n                          </Row>\n                        )\n                      }\n                    </Grid>\n                }\n              </Section.Content>\n            </Section.Container>\n\n            <Section.Container>\n              <Section.Header>{t('profileFlyout.permissions')}</Section.Header>\n              <Section.Content>\n                {\n                  (permissionArray.length === 0)\n                    ? t('profileFlyout.noPermissions')\n                    :\n                    <Grid>\n                      {\n                        permissionArray.map((permissionName, idx) =>\n                          <Row key={idx}>\n                            <Cell>{getEnumTranslation(t, 'permissions', permissionName)}</Cell>\n                          </Row>\n                        )\n                      }\n                    </Grid>\n                }\n              </Section.Content>\n            </Section.Container> */}\n\n            {/* <BtnToolbar>\n              <Btn svg={svgs.cancelX} onClick={onClose}>{t('profileFlyout.close')}</Btn>\n            </BtnToolbar> */}\n          </div>\n        )}\n      </Flyout.Content>\n    </Flyout.Container>\n  );\n};\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport {\n  getTheme,\n  getVersion,\n  getLogo,\n  isDefaultLogo,\n  getName,\n  getReleaseNotes,\n  setLogoError,\n  setLogoPendingStatus\n} from \"store/reducers/appReducer\";\nimport { Settings } from \"./settings\";\nimport { epics as appEpics } from \"store/reducers/appReducer\";\n\nconst mapStateToProps = state => ({\n  theme: getTheme(state),\n  version: getVersion(state),\n  logo: getLogo(state),\n  name: getName(state),\n  isDefaultLogo: isDefaultLogo(state),\n  releaseNotesUrl: getReleaseNotes(state),\n  setLogoPending: setLogoPendingStatus(state),\n  setLogoError: setLogoError(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  updateDiagnosticsOptIn: diagnosticsOptIn =>\n    dispatch(appEpics.actions.updateDiagnosticsOptIn(diagnosticsOptIn)),\n  updateLogo: (logo, headers) =>\n    dispatch(appEpics.actions.updateLogo({ logo, headers }))\n});\n\nexport const SettingsContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Settings)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport {\n  Btn,\n  FormGroup,\n  FormLabel,\n  FormControl,\n  Indicator,\n  Svg,\n  FileInput\n} from \"components/shared\";\nimport { svgs, isValidExtension } from \"utilities\";\nimport Flyout from \"components/shared/flyout\";\nimport Config from \"app.config\";\n// import { toDiagnosticsModel } from 'services/models';\n\nimport \"./applicationSettings.scss\";\n\nconst Section = Flyout.Section;\n\nexport class ApplicationSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentLogo: this.props.logo,\n      currentApplicationName: this.props.name,\n      edit: false,\n      previewLogo: this.props.logo,\n      newLogoName: undefined,\n      isDefaultLogo: this.props.isDefaultLogo,\n      validating: false,\n      isValidFile: false\n    };\n  }\n\n  renderSvgLogo = logo => <Svg path={logo} className=\"logo-svg\" />;\n\n  renderUploadContainer = () => {\n    const { t, applicationNameLink } = this.props;\n    const {\n      isDefaultLogo,\n      isValidFile,\n      currentLogo,\n      previewLogo,\n      newLogoName,\n      currentApplicationName\n    } = this.state;\n    const fileNameClass = isValidFile ? \"file-name-valid\" : \"file-name-invalid\";\n    return (\n      <div className=\"upload-logo-name-container\">\n        <div className=\"upload-logo-container\">\n          <div className=\"image-preview\">\n            {isDefaultLogo ? (\n              this.renderSvgLogo(currentLogo)\n            ) : (\n              <img\n                className=\"logo-img\"\n                src={previewLogo}\n                alt={t(\"applicationSettings.previewLogo\")}\n              />\n            )}\n          </div>\n          <div className=\"replace-logo\">\n            {t(\"applicationSettings.replaceLogo\")}\n          </div>\n          <div className=\"upload-btn-container\">\n            <FileInput\n              className=\"upload-button\"\n              onChange={this.onUpload}\n              accept={Config.validExtensions}\n              label={t(\"applicationSettings.upload\")}\n              t={t}\n            />\n            <div className=\"file-upload-feedback\">\n              {isValidFile ? (\n                <Svg\n                  className=\"checkmark\"\n                  path={svgs.checkmark}\n                  alt={t(\"applicationSettings.checkmark\")}\n                />\n              ) : (\n                newLogoName && (\n                  <Svg\n                    className=\"invalid-file-x\"\n                    path={svgs.x}\n                    alt={t(\"applicationSettings.error\")}\n                  />\n                )\n              )}\n            </div>\n            <div className={fileNameClass}>{newLogoName}</div>\n          </div>\n          {!isValidFile && newLogoName && (\n            <div className=\"upload-error-message\">\n              <Svg\n                className=\"upload-error-asterisk\"\n                path={svgs.error}\n                alt={t(\"applicationSettings.error\")}\n              />\n              {t(\"applicationSettings.uploadError\")}\n            </div>\n          )}\n          <Section.Content className=\"platform-section-description show-line-breaks\">\n            {t(\"applicationSettings.logoDescription\")}\n          </Section.Content>\n        </div>\n        <FormGroup className=\"name-input-container\">\n          <FormLabel className=\"section-subtitle\">\n            {t(\"applicationSettings.applicationName\")}\n          </FormLabel>\n          <FormControl\n            type=\"text\"\n            className=\"name-input long\"\n            placeholder={t(currentApplicationName)}\n            link={applicationNameLink}\n          />\n        </FormGroup>\n      </div>\n    );\n  };\n\n  render() {\n    const { t } = this.props;\n    const {\n      isDefaultLogo,\n      validating,\n      currentLogo,\n      currentApplicationName,\n      edit\n    } = this.state;\n    return (\n      <Section.Container className=\"setting-section\">\n        <Section.Header>{t(\"applicationSettings.nameAndLogo\")}</Section.Header>\n        <Section.Content>\n          {t(\"applicationSettings.nameLogoDescription\")}\n        </Section.Content>\n        <Section.Content>\n          {edit ? (\n            validating ? (\n              <div className=\"upload-logo-name-container\">\n                <Indicator size=\"small\" />\n              </div>\n            ) : (\n              this.renderUploadContainer()\n            )\n          ) : (\n            <div>\n              <div className=\"current-logo-container\">\n                <div className=\"current-logo-name\">\n                  <div className=\"current-logo\">\n                    {isDefaultLogo ? (\n                      this.renderSvgLogo(currentLogo)\n                    ) : (\n                      <img\n                        className=\"current-logo\"\n                        src={currentLogo}\n                        alt={t(\"applicationSettings.currentLogo\")}\n                      />\n                    )}\n                  </div>\n                  <div className=\"name-container\">\n                    {t(currentApplicationName)}\n                  </div>\n                </div>\n                <div className=\"edit-button-div\">\n                  <Btn\n                    svg={svgs.edit}\n                    onClick={this.enableEdit}\n                    className=\"edit-button\"\n                  >\n                    {t(\"applicationSettings.edit\")}\n                  </Btn>\n                </div>\n              </div>\n            </div>\n          )}\n        </Section.Content>\n      </Section.Container>\n    );\n  }\n\n  enableEdit = () => this.setState({ edit: true });\n\n  onUpload = e => {\n    let file = e.target.files[0];\n    this.setState({\n      validating: true,\n      validFile: false\n    });\n    if (file.size <= Config.maxLogoFileSizeInBytes && isValidExtension(file)) {\n      this.setState({\n        newLogoName: file.name,\n        previewLogo: URL.createObjectURL(file),\n        isDefaultLogo: false,\n        validating: false,\n        isValidFile: true\n      });\n    } else {\n      this.setState({\n        previewLogo: this.state.currentLogo,\n        newLogoName: file !== undefined ? file.name : undefined,\n        isDefaultLogo: this.props.isDefaultLogo,\n        validating: false,\n        isValidFile: false\n      });\n      file = undefined;\n    }\n    this.props.onUpload(file);\n  };\n}\n\nexport default ApplicationSettings;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { ApplicationSettings } from \"./applicationSettings\";\n\nexport const ApplicationSettingsContainer = connect(null)(ApplicationSettings);\n","/* eslint-disable */\n\n// Copyright (c) Microsoft. All rights reserved.\n\n// Polyfills for cross browser support\n\nimport \"core-js/features/array/flat-map\";\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    return this.substr(position || 0, searchString.length) === searchString;\n  };\n}\n\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, 'includes', {\n    value: function (searchElement, fromIndex) {\n\n      if (this == null) throw new TypeError('\"this\" is null or not defined');\n\n      var o = Object(this);\n      var len = o.length >>> 0;\n      if (len === 0) return false;\n\n      var n = fromIndex | 0;\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));\n      }\n\n      while (k < len) {\n        if (sameValueZero(o[k], searchElement)) return true;\n        k++;\n      }\n\n      return false;\n    }\n  });\n}\n\nif (!String.prototype.includes) {\n  String.prototype.includes = function (search, start) {\n    'use strict';\n    if (typeof start !== 'number') start = 0;\n\n    if (start + search.length > this.length) {\n      return false;\n    } else {\n      return this.indexOf(search, start) !== -1;\n    }\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchStr, Position) {\n    if (!(Position < this.length))\n      Position = this.length;\n    else\n      Position |= 0;\n    return this.substr(Position - searchStr.length, searchStr.length) === searchStr;\n  };\n}\n\nif (!String.prototype.padStart) {\n  String.prototype.padStart = function padStart(targetLength, padString) {\n    targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n    padString = String(padString || ' ');\n    if (this.length > targetLength) {\n      return String(this);\n    } else {\n      targetLength = targetLength - this.length;\n      if (targetLength > padString.length) {\n        padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n      }\n      return padString.slice(0, targetLength) + String(this);\n    }\n  };\n}\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\nif (!Object.entries) {\n  Object.entries = function (obj) {\n    var ownProps = Object.keys(obj),\n      i = ownProps.length,\n      resArray = new Array(i); // preallocate the Array\n    while (i--)\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n\n    return resArray;\n  };\n}\n\nif (!Object.values) {\n  Object.values = (obj) => Object.keys(obj).map(key => obj[key]);\n}\n\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value: function(predicate) {\n     // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return kValue.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return undefined.\n      return undefined;\n    },\n    configurable: true,\n    writable: true\n  });\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { AssociateDevices } from \"./associateDevices\";\nimport {\n  getFarms,\n  getFarmsError,\n  getFarmsMap,\n  getFarmsPendingStatus,\n  getFarmsLastUpdated,\n  epics as farmsEpics\n} from \"store/reducers/farmsReducer\";\n\nimport {\n  redux as deviceRedux,\n  getDevices,\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus,\n  getDeviceModelError,\n  getDeviceModelsMap,\n  getDeviceModelLastUpdated,\n  getDeviceModuleStatusPendingStatus,\n  epics as devicesEpics\n} from \"store/reducers/devicesReducer\";\n\nconst mapStatetoProps = state => ({\n  farms: getFarms(state),\n  farmsMap: getFarmsMap(state),\n  farmsError: getFarmsError(state),\n  isFarmPending: getFarmsPendingStatus(state),\n  farmLastUpdated: getFarmsLastUpdated(state),\n\n  devices: getDevices(state),\n  deviceError: getDevicesError(state),\n  isDevicePending: getDevicesPendingStatus(state),\n  deviceLastUpdated: getDevicesLastUpdated(state),\n\n  deviceModelsMap: getDeviceModelsMap(state),\n  deviceModelError: getDeviceModelError(state),\n  isDeviceModelPending: getDeviceModuleStatusPendingStatus(state),\n  deviceModelLastUpdated: getDeviceModelLastUpdated(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchDevices: () => dispatch(devicesEpics.actions.fetchDevices()),\n  fetchFarms: () => dispatch(farmsEpics.actions.fetchFarms()),\n  fetchDeviceModel: () => dispatch(devicesEpics.actions.fetchDeviceModel()),\n  modifyDevices: devices => dispatch(deviceRedux.actions.modifyDevices(devices))\n});\n\nexport const AssociateDevicesContainer = withNamespaces()(\n  connect(\n    mapStatetoProps,\n    mapDispatchToProps\n  )(AssociateDevices)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { FarmEditorContainer } from \"./farmEditor\";\nimport {\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent\n} from \"components/shared/flyout\";\n\nimport \"./farmFlyout.scss\";\n\nexport class EditFarmFlyout extends Component {\n  render() {\n    const { onClose, t, farmId } = this.props;\n    return (\n      <div className=\"farms-container editfarm-Details\">\n        <Flyout>\n          <FlyoutHeader>\n            <FlyoutTitle>{t(\"farms.flyouts.edit.header\")}</FlyoutTitle>\n            <FlyoutCloseBtn onClick={onClose} />\n          </FlyoutHeader>\n          <FlyoutContent>\n            <FarmEditorContainer onClose={onClose} farmId={farmId} />\n          </FlyoutContent>\n        </Flyout>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { FarmEditorContainer } from \"./farmEditor\";\nimport {\n  Flyout,\n  FlyoutHeader,\n  FlyoutTitle,\n  FlyoutCloseBtn,\n  FlyoutContent\n} from \"components/shared/flyout\";\n\nimport \"./farmFlyout.scss\";\n\nexport class NewFarmFlyout extends Component {\n  render() {\n    const { onClose, t } = this.props;\n    return (\n      <div className=\"farms-container\">\n        <Flyout>\n          <FlyoutHeader>\n            <FlyoutTitle>{t(\"farms.flyouts.create.header\")}</FlyoutTitle>\n            <FlyoutCloseBtn onClick={onClose} />\n          </FlyoutHeader>\n          <FlyoutContent>\n            <FarmEditorContainer onClose={onClose} />\n          </FlyoutContent>\n        </Flyout>\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport * from \"./addDevices.container\";\nexport * from \"./addDevices\";\nexport * from \"./selectDevices\";\nexport * from \"./recommendedDevices\";\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport { AddDevices } from \"./addDevices\";\nimport {\n  getFarms,\n  getFarmsError,\n  getFarmsMap,\n  getFarmsPendingStatus,\n  getFarmsLastUpdated,\n  epics as farmsEpics\n} from \"store/reducers/farmsReducer\";\n\nimport {\n  redux as deviceRedux,\n  getDevices,\n  getDevicesError,\n  getDevicesLastUpdated,\n  getDevicesPendingStatus,\n  getDeviceModelError,\n  getDeviceModelsMap,\n  getDeviceModelLastUpdated,\n  getDeviceModuleStatusPendingStatus,\n  epics as devicesEpics\n} from \"store/reducers/devicesReducer\";\n\nconst mapStatetoProps = state => ({\n  farms: getFarms(state),\n  farmsMap: getFarmsMap(state),\n  farmsError: getFarmsError(state),\n  isFarmPending: getFarmsPendingStatus(state),\n  farmLastUpdated: getFarmsLastUpdated(state),\n\n  devices: getDevices(state),\n  deviceError: getDevicesError(state),\n  isDevicePending: getDevicesPendingStatus(state),\n  deviceLastUpdated: getDevicesLastUpdated(state),\n\n  deviceModelsMap: getDeviceModelsMap(state),\n  deviceModelError: getDeviceModelError(state),\n  isDeviceModelPending: getDeviceModuleStatusPendingStatus(state),\n  deviceModelLastUpdated: getDeviceModelLastUpdated(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchDevices: () => dispatch(devicesEpics.actions.fetchDevices()),\n  fetchFarms: () => dispatch(farmsEpics.actions.fetchFarms()),\n  fetchDeviceModel: () => dispatch(devicesEpics.actions.fetchDeviceModel()),\n  modifyDevices: devices => dispatch(deviceRedux.actions.modifyDevices(devices))\n});\n\nexport const AddDevicesContainer = withNamespaces()(\n  connect(\n    mapStatetoProps,\n    mapDispatchToProps\n  )(AddDevices)\n);\n","module.exports = __webpack_public_path__ + \"static/media/ackAlert.dd3f029e.svg\";","module.exports = __webpack_public_path__ + \"static/media/apply.c12e5a4b.svg\";","module.exports = __webpack_public_path__ + \"static/media/cancelX.7fa679fa.svg\";","module.exports = __webpack_public_path__ + \"static/media/carat.37d66c39.svg\";","module.exports = __webpack_public_path__ + \"static/media/changeStatus.70bfc514.svg\";","module.exports = __webpack_public_path__ + \"static/media/checkmark.87f2c5eb.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevron.b14cee41.svg\";","module.exports = __webpack_public_path__ + \"static/media/chevronRight.308efd88.svg\";","module.exports = __webpack_public_path__ + \"static/media/closeAlert.9526f3f7.svg\";","module.exports = __webpack_public_path__ + \"static/media/colon.e1e07d6f.svg\";","module.exports = __webpack_public_path__ + \"static/media/farmbeats.33a3ea60.svg\";","module.exports = __webpack_public_path__ + \"static/media/copy.e7d786c1.svg\";","module.exports = __webpack_public_path__ + \"static/media/critical.5998f9be.svg\";","module.exports = __webpack_public_path__ + \"static/media/alerts.c1a43727.svg\";","module.exports = __webpack_public_path__ + \"static/media/download.4c2460a6.svg\";","module.exports = __webpack_public_path__ + \"static/media/addDevice.cfb25557.svg\";","module.exports = __webpack_public_path__ + \"static/media/deviceIcon.23f2bfd8.svg\";","module.exports = __webpack_public_path__ + \"static/media/disableToggle.e52634de.svg\";","module.exports = __webpack_public_path__ + \"static/media/disabled.f09e9a89.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit.e24b9585.svg\";","module.exports = __webpack_public_path__ + \"static/media/ellipsis.065dbc25.svg\";","module.exports = __webpack_public_path__ + \"static/media/enableToggle.21b69aaa.svg\";","module.exports = __webpack_public_path__ + \"static/media/errorAsterisk.d87f9c79.svg\";","module.exports = __webpack_public_path__ + \"static/media/failed.a8b1ba60.svg\";","module.exports = __webpack_public_path__ + \"static/media/glimmer.a5da9107.svg\";","module.exports = __webpack_public_path__ + \"static/media/hamburger.37af7b5c.svg\";","module.exports = __webpack_public_path__ + \"static/media/info.a9c9160f.svg\";","module.exports = __webpack_public_path__ + \"static/media/linkTo.eda9e28b.svg\";","module.exports = __webpack_public_path__ + \"static/media/loadingToggle.727b1cdd.svg\";","module.exports = __webpack_public_path__ + \"static/media/manageFilters.d66159d9.svg\";","module.exports = __webpack_public_path__ + \"static/media/packages.239be8c9.svg\";","module.exports = __webpack_public_path__ + \"static/media/physicalDevice.7ac0e2ec.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.56b72310.svg\";","module.exports = __webpack_public_path__ + \"static/media/questionMark.afe20a3f.svg\";","module.exports = __webpack_public_path__ + \"static/media/radioSelected.e357cef2.svg\";","module.exports = __webpack_public_path__ + \"static/media/radioUnselected.7ce04025.svg\";","module.exports = __webpack_public_path__ + \"static/media/reconfigure.9ee9d920.svg\";","module.exports = __webpack_public_path__ + \"static/media/refresh.e4b8b71f.svg\";","module.exports = __webpack_public_path__ + \"static/media/ruleDisabled.4d48d382.svg\";","module.exports = __webpack_public_path__ + \"static/media/ruleEnabled.6ffb434b.svg\";","module.exports = __webpack_public_path__ + \"static/media/SIMManagement.8a538a0d.svg\";","module.exports = __webpack_public_path__ + \"static/media/searchIcon.0afbe391.svg\";","module.exports = __webpack_public_path__ + \"static/media/SensorHubBlack.a5f04abb.svg\";","module.exports = __webpack_public_path__ + \"static/media/settings.b2e0ae57.svg\";","module.exports = __webpack_public_path__ + \"static/media/simulatedDevice.943be8d5.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabDashboard.f40e12ba.svg\";","module.exports = __webpack_public_path__ + \"static/media/calendar.f7d4ea35.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabDeployments.dfe3bb5f.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabMaintenance.60268ace.svg\";","module.exports = __webpack_public_path__ + \"static/media/tabLayouts.dfe3bb5f.svg\";","module.exports = __webpack_public_path__ + \"static/media/trash.508696d1.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload.d861357c.svg\";","module.exports = __webpack_public_path__ + \"static/media/warning.0271b0a4.svg\";","module.exports = __webpack_public_path__ + \"static/media/x.59ea468d.svg\";","module.exports = __webpack_public_path__ + \"static/media/abort.efea15a3.svg\";","module.exports = __webpack_public_path__ + \"static/media/rejected.14edc9e1.svg\";","module.exports = __webpack_public_path__ + \"static/media/waiting.b30fb041.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter.4967e135.svg\";","module.exports = __webpack_public_path__ + \"static/media/filterApplied.5e8cb381.svg\";","module.exports = __webpack_public_path__ + \"static/media/jobs.b5a539bb.svg\";","module.exports = __webpack_public_path__ + \"static/media/rules.fca274bd.svg\";","module.exports = __webpack_public_path__ + \"static/media/sensors.e6d83381.svg\";","module.exports = __webpack_public_path__ + \"static/media/farms.57389647.svg\";","module.exports = __webpack_public_path__ + \"static/media/devices.07277f4f.svg\";","module.exports = __webpack_public_path__ + \"static/media/maps.a7e1fa6a.svg\";","module.exports = __webpack_public_path__ + \"static/media/links.33e0027d.svg\";","module.exports = __webpack_public_path__ + \"static/media/noMapImage.38a7f9c9.svg\";","module.exports = __webpack_public_path__ + \"static/media/datePicker.34c77213.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconDarkCheckmarkBubble.7e5011bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconDarkInfoBubble.4759a5ab.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconDarkQuestionBubble.b924b496.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconLightCheckmarkBubble.d7771d32.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconLightInfoBubble.b74368ec.svg\";","module.exports = __webpack_public_path__ + \"static/media/IconLightQuestionBubble.546baaf9.svg\";","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { svgs } from \"utilities\";\nimport Shell from \"components/shell/shell\";\nimport { SettingsContainer, ProfileContainer } from \"components/shell/flyouts\";\nimport {\n  DevicesContainer,\n  RulesContainer,\n  SensorContainer,\n  FarmsContainer,\n  FarmDetailsContainer,\n  MapContainer,\n  JobsContainer,\n  AlertsContainer\n} from \"./pages\";\nimport { initialize as initAppInsights } from \"applicationInsights\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      openFlyout: \"\"\n    };\n    // Init is here and not in index.js because we need history object\n    initAppInsights(\n      global.DeploymentConfig.appInsightsInstrumentationKey,\n      props.history\n    );\n  }\n\n  closeFlyout = () => this.setState({ openFlyout: \"\" });\n\n  openSystemSettings = () => this.setState({ openFlyout: \"settings\" });\n\n  openUserProfile = () => this.setState({ openFlyout: \"profile\" });\n\n  render() {\n    const { openFlyout } = this.state;\n    const tabsConfig = [\n      {\n        to: \"/farms\",\n        exact: true,\n        svg: svgs.tabs.farms,\n        labelId: \"tabs.farms\",\n        component: FarmsContainer\n      },\n      {\n        to: \"/devices\",\n        exact: true,\n        svg: svgs.tabs.devices,\n        labelId: \"tabs.devices\",\n        component: DevicesContainer\n      },\n      {\n        to: \"/sensors\",\n        exact: true,\n        svg: svgs.tabs.sensors,\n        labelId: \"tabs.sensors\",\n        component: SensorContainer\n      },\n      {\n        to: \"/maps\",\n        exact: true,\n        svg: svgs.tabs.maps,\n        labelId: \"tabs.maps\",\n        component: MapContainer\n      },\n      {\n        to: \"/rules\",\n        exact: true,\n        svg: svgs.tabs.rules,\n        labelId: \"tabs.rules\",\n        component: RulesContainer\n      },\n      {\n        to: \"/alerts\",\n        exact: true,\n        svg: svgs.tabs.alerts,\n        labelId: \"tabs.alerts\",\n        component: AlertsContainer\n      },\n      {\n        to: \"/jobs\",\n        exact: false,\n        svg: svgs.tabs.jobs,\n        labelId: \"tabs.jobs\",\n        component: JobsContainer\n      }\n    ];\n    const pagesConfig = [\n      {\n        to: \"/farms\",\n        exact: true,\n        component: FarmsContainer\n      },\n      {\n        to: \"/sensors\",\n        exact: true,\n        component: SensorContainer\n      },\n      {\n        to: \"/devices\",\n        exact: true,\n        component: DevicesContainer\n      },\n      {\n        to: \"/maps\",\n        exact: true,\n        component: MapContainer\n      },\n      {\n        to: \"/farms/:name\",\n        exact: true,\n        component: FarmDetailsContainer\n      },\n      {\n        to: \"/jobs\",\n        exact: true,\n        component: JobsContainer\n      },\n      {\n        to: \"/rules\",\n        exact: true,\n        component: RulesContainer\n      },\n      {\n        to: \"/alerts\",\n        exact: true,\n        component: AlertsContainer\n      }\n    ];\n\n    const crumbsConfig = [\n      {\n        path: \"/devices\",\n        crumbs: [{ to: \"/devices\", labelId: \"tabs.devices\" }]\n      },\n      {\n        path: \"/sensors\",\n        crumbs: [{ to: \"/sensors\", labelId: \"tabs.sensors\" }]\n      },\n      {\n        path: \"/maps\",\n        crumbs: [{ to: \"/maps\", labelId: \"tabs.maps\" }]\n      },\n\n      {\n        path: \"/farms\",\n        crumbs: [{ to: \"/farms\", labelId: \"tabs.farms\" }]\n      },\n      {\n        path: \"/farms/:name\",\n        crumbs: [\n          { to: \"/farms\", labelId: \"tabs.farms\" },\n          {\n            to: \"/farms/:name\",\n            matchParam: \"name\",\n            state: this.props.location.state\n          }\n        ]\n      },\n      {\n        path: \"/rules\",\n        crumbs: [{ to: \"/rules\", labelId: \"tabs.rules\" }]\n      },\n      {\n        path: \"/alerts\",\n        crumbs: [{ to: \"/alerts\", labelId: \"tabs.alerts\" }]\n      },\n      {\n        path: \"/jobs\",\n        crumbs: [{ to: \"/jobs\", labelId: \"tabs.jobs\" }]\n      }\n    ];\n\n    const shellProps = {\n      tabsConfig,\n      pagesConfig,\n      crumbsConfig,\n      openSystemSettings: this.openSystemSettings,\n      openUserProfile: this.openUserProfile,\n      ...this.props\n    };\n\n    return (\n      <Shell denyAccess={false} {...shellProps}>\n        {openFlyout === \"settings\" && (\n          <SettingsContainer onClose={this.closeFlyout} />\n        )}\n        {openFlyout === \"profile\" && (\n          <ProfileContainer onClose={this.closeFlyout} />\n        )}\n      </Shell>\n    );\n  }\n}\n\nexport default App;\n","module.exports = \"data:image/png;base64,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\"","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\n\nimport {\n  epics as roleEpics,\n  redux as rolesRedux,\n  getRoleAssignments,\n  getRoleDefinitions,\n  getAddRoleAssignmentPendingStatus\n} from \"store/reducers/rolesReducer\";\n\nimport { AddUser } from \"./assignRole\";\n\nconst mapStateToProps = state => ({\n  roleAssignments: getRoleAssignments(state),\n  roleDefinitions: getRoleDefinitions(state),\n  roleAssignmentAddPending: getAddRoleAssignmentPendingStatus(state)\n});\n\n// Wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  addRoleAssignment: roleAssignment =>\n    dispatch(roleEpics.actions.addRoleAssignment(roleAssignment)),\n  clearError: () => dispatch(rolesRedux.actions.clearError())\n});\n\nexport const AddUserContainer = withNamespaces()(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AddUser)\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Observable } from \"rxjs\";\nimport Autosuggest from \"react-autosuggest\";\nimport { permissions } from \"services/models\";\nimport { UserService } from \"services/userService\";\nimport {\n  Indicator,\n  FormGroup,\n  FormControl,\n  Btn,\n  Protected,\n  BtnToolbar,\n  ThemedSvgContainer,\n  Tooltip\n} from \"components/shared\";\nimport { themedPaths } from \"utilities\";\nimport Flyout from \"components/shared/flyout\";\n\nimport { getDisplayValueFromSuggestion, suggestionRenderer } from \"./utils\";\nimport { appInsights } from \"applicationInsights\";\n\nexport class AddUser extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      roleDefinitionOption: null,\n      suggestions: []\n    };\n    this.suggestionsFetchSubscription = null;\n\n    this.roleChangeHandler = this.roleChangeHandler.bind(this);\n    this.inputChangeHandler = this.inputChangeHandler.bind(this);\n    this.addUser = this.addUser.bind(this);\n    this.onSuggestionsFetchRequested = this.onSuggestionsFetchRequested.bind(\n      this\n    );\n    this.onSuggestionsClearRequested = this.onSuggestionsClearRequested.bind(\n      this\n    );\n    this.getSuggestionValue = this.getSuggestionValue.bind(this);\n  }\n\n  inputChangeHandler(event, { newValue }) {\n    this.setState({\n      email: newValue,\n      error: null\n    });\n  }\n\n  getSuggestionValue(suggestion) {\n    return getDisplayValueFromSuggestion(suggestion, this.state.email);\n  }\n\n  roleChangeHandler(event) {\n    this.setState({\n      roleDefinitionOption: event.target.value\n    });\n  }\n\n  onSuggestionsFetchRequested({ value }) {\n    if (this.suggestionsFetchSubscription)\n      this.suggestionsFetchSubscription.unsubscribe();\n    this.suggestionsFetchSubscription = Observable.of(value)\n      .map(value => UserService.getUserSuggestions(value))\n      .mergeAll()\n      .subscribe(next => this.setState({ suggestions: next }));\n  }\n\n  onSuggestionsClearRequested() {\n    this.setState({\n      suggestions: []\n    });\n  }\n\n  addUser() {\n    const { email, roleDefinitionOption } = this.state;\n    const { successCallback, errorCallback, t, clearError } = this.props;\n    clearError();\n    errorCallback(null);\n    Observable.of(email)\n      .map(\n        emailId => UserService.getUserByEmailOrUpn(emailId) // Get user for emailId or upn\n      )\n      .mergeAll()\n      .subscribe(\n        next => {\n          if (next.length > 1) {\n            errorCallback({\n              message: t(\n                \"users.manageUsersFlyout.addRoleSection.roleAddError.multipleUsersFound\"\n              )\n            });\n          } else if (next.length === 0) {\n            errorCallback({\n              message: t(\n                \"users.manageUsersFlyout.addRoleSection.roleAddError.noUserFound\"\n              )\n            });\n          } else {\n            const user = next[0];\n            const objectId = user.id;\n            Observable.of(objectId)\n              .map(objectId =>\n                this.props.addRoleAssignment({\n                  objectId,\n                  roleDefinitionId: roleDefinitionOption.value,\n                  objectIdType: \"UserId\",\n                  tenantId: global.DeploymentConfig.aad.tenant\n                })\n              )\n              .subscribe(\n                () => {},\n                error => {\n                  errorCallback(error);\n                },\n                () => {\n                  successCallback(\n                    t(\"users.manageUsersFlyout.addRoleSection.roleAddSuccess\")\n                  );\n                }\n              );\n          }\n        },\n        error => {\n          errorCallback(error);\n        }\n      );\n  }\n  toSelectOption = ({ id, name }) => {\n    return {\n      label: name,\n      value: id\n    };\n  };\n\n  formValid = () => {\n    return (\n      this.state.roleDefinitionOption &&\n      !this.props.roleAssignmentAddPending &&\n      this.state.email !== \"\"\n    );\n  };\n  render() {\n    const { roleDefinitionOption, email, suggestions } = this.state;\n    const { t, roleDefinitions } = this.props;\n    const pending = this.props.roleAssignmentAddPending;\n    const roleSelectOptions = roleDefinitions.map(this.toSelectOption);\n\n    const autoSuggestInputProps = {\n      placeholder: t(\"users.manageUsersFlyout.addRoleSection.enterEmail\"),\n      value: email,\n      onChange: this.inputChangeHandler\n    };\n    return (\n      <Protected permissions={permissions.addUser}>\n        <Flyout.Section.Container collapsable={false}>\n          <Flyout.Section.Header>\n            <div>\n              {t(\"users.manageUsersFlyout.addRoleSection.header\")}\n              <Tooltip\n                content={t(\n                  \"users.manageUsersFlyout.addRoleSection.tooltipText\"\n                )}\n              >\n                <ThemedSvgContainer paths={themedPaths.questionBubble} />\n              </Tooltip>\n            </div>\n          </Flyout.Section.Header>\n          <Flyout.Section.Content>\n            <div className=\"form-control-inputs\">\n              <div className=\"add-role-inputs\">\n                <Autosuggest\n                  suggestions={suggestions}\n                  onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n                  onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n                  getSuggestionValue={this.getSuggestionValue}\n                  renderSuggestion={suggestionRenderer}\n                  inputProps={autoSuggestInputProps}\n                  renderInputComponent={props => (\n                    <input {...props} spellCheck={false} />\n                  )} // Agnivesh: This is to keep spellcheck off, I couldn't find any prop on autosuggest that could do it, and there's no CSS fix\n                  // shouldRenderSuggestions={value => value.trim().length > 0} // Use this to set a min char limit to fetch suggestions\n                />\n\n                <FormGroup className=\"form-control-group form-role\">\n                  <FormControl\n                    type=\"select\"\n                    className=\"role-editor-input form-select-role\"\n                    onChange={this.roleChangeHandler}\n                    disabled={pending}\n                    options={roleSelectOptions}\n                    placeholder={t(\n                      \"users.manageUsersFlyout.addRoleSection.selectRole\"\n                    )}\n                    value={roleDefinitionOption}\n                  ></FormControl>\n                </FormGroup>\n              </div>\n              <BtnToolbar>\n                <Btn\n                  primary={true}\n                  onClick={() => {\n                    this.addUser();\n                    appInsights.trackEvent({\n                      name: \"UiEvent:Click: Add User Button\"\n                    });\n                  }}\n                  disabled={!this.formValid()}\n                  type=\"submit\"\n                  id={this.formValid() ? \"applyRole\" : \"disableRole\"}\n                >\n                  {t(\"users.manageUsersFlyout.addRoleSection.addRole\")}\n                </Btn>\n              </BtnToolbar>\n              {pending && (\n                <div className=\"role-loader\">\n                  <Indicator />\n                </div>\n              )}\n            </div>\n          </Flyout.Section.Content>\n        </Flyout.Section.Container>\n      </Protected>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { permissions } from \"services/models\";\nimport { Btn, Indicator, Protected } from \"components/shared\";\nimport { svgs } from \"utilities\";\nimport { appInsights } from \"applicationInsights\";\n\nexport class DeleteRoleAssignmentRenderer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deletePending: false\n    };\n  }\n\n  render() {\n    const t = this.props.context.t;\n    const {\n      deleteRoleAssignmentsById,\n      successCallback,\n      clearRolesError\n    } = this.props;\n    const deletePending = this.state.deletePending;\n    return (\n      <div>\n        {!deletePending && (\n          <Protected permissions={permissions.deleteUser}>\n            <Btn\n              svg={svgs.trash}\n              className=\"delete-user\"\n              onClick={event => {\n                appInsights.trackEvent({\n                  name: \"UiEvent:Click: Delete User Button\"\n                });\n                clearRolesError();\n                this.setState({\n                  deletePending: true\n                });\n                deleteRoleAssignmentsById(\n                  this.props.node.data.roleAssignment.id,\n                  {\n                    success: () =>\n                      successCallback(\n                        t(\n                          \"users.manageUsersFlyout.rolesGridSection.roleDeleteSuccess\"\n                        )\n                      ),\n                    error: () => {\n                      this.setState({ deletePending: false });\n                    }\n                  }\n                );\n              }}\n            />\n          </Protected>\n        )}\n        {!!deletePending && (\n          <div className={\"delete-pending-indicator\"}>\n            <center>\n              <Indicator size={\"small\"} />\n            </center>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\n\nimport \"bootstrap-daterangepicker/daterangepicker.css\";\n// import 'bootstrap/dist/css/bootstrap.min.css';\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\n\nexport class DatePickerElement extends Component {\n  render() {\n    return (\n      <DateRangePicker\n        showDropdowns\n        maxDate={moment()}\n        opens=\"left\"\n        onApply={this.props.onApplyEvent}\n      >\n        <button className={this.props.className}>\n          {this.props.t(\"dashboard.custom\")}\n        </button>\n      </DateRangePicker>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nexport * from \"./associateDevices.container\";\nexport * from \"./associateDevices\";\nexport * from \"./manualAssociate\";\nexport * from \"./recommendedDevices\";\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport { Route, Switch, NavLink } from \"react-router-dom\";\n\nimport { Svg } from \"components/shared\";\nimport { svgs, isDef } from \"utilities\";\n\nconst Crumb = ({ children }) => <div className=\"crumb\">{children}</div>;\nconst Chevron = () => <Svg path={svgs.chevronRight} className=\"chevron-icon\" />;\n\nconst CrumbFromConfig = ({ t, crumb, match, isLast }) => {\n  const separator = <Chevron key={`${crumb.to}-chevron`} />;\n\n  if (isDef(crumb.labelId) && !isDef(crumb.matchParam)) {\n    if (!isLast) {\n      return [\n        <NavLink to={crumb.to} className=\"crumb\" key={crumb.to}>\n          {t(crumb.labelId)}\n        </NavLink>,\n        separator\n      ];\n    } else {\n      return (\n        <Crumb to={crumb.to} key={crumb.to}>\n          {crumb.state\n            ? crumb.state.farmName\n            : t(crumb.labelId)\n            ? t(crumb.labelId)\n            : null}\n        </Crumb>\n      );\n    }\n  } else if (!isDef(crumb.labelId) && isDef(crumb.matchParam)) {\n    return (\n      <Crumb to={crumb.to} key={crumb.to}>\n        {crumb.state ? crumb.state.farmName : match.params[crumb.matchParam]}\n      </Crumb>\n    );\n  }\n};\n\nexport const Breadcrumbs = ({ t, crumbsConfig }) => (\n  <Switch>\n    {crumbsConfig.map(({ path, crumbs }) => (\n      <Route\n        key={path}\n        exact\n        path={path}\n        render={props => {\n          return crumbs.map((crumb, idx) => (\n            <CrumbFromConfig\n              {...props}\n              key={crumb.to}\n              t={t}\n              crumb={crumb}\n              isLast={idx === crumbs.length - 1}\n            />\n          ));\n        }}\n      />\n    ))}\n  </Switch>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\n\nimport { Breadcrumbs } from \"./breadcrumbs\";\nimport { Svg } from \"components/shared\";\n// import { toDiagnosticsModel } from 'services/models';\nimport { isFunc, svgs } from \"utilities\";\nimport ProfileImagePath from \"assets/images/profile.png\";\n\nimport \"./header.scss\";\nimport { appInsights } from \"applicationInsights\";\n\nconst docsDropdown = \"docsDropdown\";\n\nconst parentHasClass = (element, ...searchClasses) => {\n  if (\n    typeof element.className === \"string\" &&\n    element.className\n      .split(\" \")\n      .some(classname =>\n        searchClasses.some(searchClass => searchClass === classname)\n      )\n  )\n    return true;\n  return (\n    element.parentNode && parentHasClass(element.parentNode, ...searchClasses)\n  );\n};\n\nconst docLinks = [\n  {\n    translationId: \"header.documentation\",\n    url: \"https://aka.ms/FarmBeatsDocumentation\",\n    eventName: \"Help_Documentation\"\n  },\n  {\n    translationId: \"header.sendSuggestion\",\n    url: \"https://aka.ms/FarmBeatsForum\",\n    eventName: \"Help_Suggestion\"\n  },\n  {\n    translationId: \"header.reportIssue\",\n    url: \"https://aka.ms/FarmBeatsMSDN\",\n    eventName: \"Help_ReportIssue\"\n  }\n];\n\n/** The header component for the top of the page */\nexport class Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { openDropdown: \"\" };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"mousedown\", this.handleWindowMousedown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"mousedown\", this.handleWindowMousedown);\n  }\n\n  handleWindowMousedown = ({ target }) => {\n    const isMenuTrigger = parentHasClass(target, \"menu-item\", \"menu-trigger\");\n    if (!isMenuTrigger && this.state.openDropdown) {\n      this.setState({ openDropdown: \"\" });\n    }\n  };\n\n  toggleDropdown = openDropdown => () => {\n    this.setState({ openDropdown });\n  };\n\n  render() {\n    return (\n      <header className=\"app-header\" role=\"banner\">\n        <div className=\"breadcrumbs\">\n          <Breadcrumbs\n            t={this.props.t}\n            crumbsConfig={this.props.crumbsConfig}\n          />\n        </div>\n        {/* <div className=\"label\">{ this.props.t('header.appName') }</div> */}\n        <div className=\"items-container\">\n          <div className=\"menu-container\">\n            <button\n              className=\"menu-trigger\"\n              onClick={this.toggleDropdown(docsDropdown)}\n            >\n              <Svg path={svgs.questionMark} className=\"item-icon\" />\n            </button>\n            {this.state.openDropdown === docsDropdown && (\n              <div className=\"menu\">\n                {docLinks.map(({ url, translationId, eventName }) => (\n                  <a\n                    key={translationId}\n                    className=\"menu-item\"\n                    target=\"_blank\"\n                    href={url}\n                    onClick={() => {\n                      appInsights.trackEvent(\n                        { name: \"UiEvent:Click: \" + eventName + \" Link\" },\n                        { type: \"External Link Click\", toUrl: url }\n                      );\n                    }}\n                    rel=\"noopener noreferrer\"\n                  >\n                    {this.props.t(translationId)}\n                  </a>\n                ))}\n              </div>\n            )}\n          </div>\n          {isFunc(this.props.openSystemSettings) && (\n            <button onClick={this.props.openSystemSettings}>\n              <Svg path={svgs.settings} className=\"item-icon\" />\n            </button>\n          )}\n          {isFunc(this.props.openUserProfile) && (\n            <button\n              className=\"item-icon profile\"\n              onClick={this.props.openUserProfile}\n            >\n              <img\n                src={ProfileImagePath}\n                alt={this.props.t(\"header.profile\")}\n              />\n            </button>\n          )}\n        </div>\n      </header>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { Header } from \"./header\";\n\nexport const HeaderContainer = connect(null)(Header);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Svg, Indicator } from \"components/shared\";\nimport { svgs } from \"utilities\";\n// import { toDiagnosticsModel } from 'services/models';\n\nimport \"./navigation.scss\";\n\n/** A window size less than this will automatically collapse the left nav */\nconst minExpandedNavWindowWidth = 800;\n\n/**\n * A presentational component for nav item svgs\n *\n * @param {ReactSVGProps} props see https://www.npmjs.com/package/react-svg\n */\nconst NavIcon = props => <Svg {...props} className=\"nav-item-icon\" />;\n\n/** A presentational component navigation tab links */\nconst TabLink = props => (\n  <NavLink to={props.to} className=\"nav-item\" activeClassName=\"active\">\n    <NavIcon path={props.svg} />\n    <div className=\"nav-item-text\">{props.t(props.labelId)}</div>\n  </NavLink>\n);\n\n/** The navigation component for the left navigation */\nclass Navigation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      collapsed: false,\n      lastWidth: window.innerWidth\n    };\n  }\n\n  componentDidMount() {\n    // Collapse the nav if the window width is too small\n    window.addEventListener(\"resize\", this.collapseNav);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.collapseNav);\n  }\n\n  collapseNav = () => {\n    if (\n      window.innerWidth < minExpandedNavWindowWidth &&\n      window.innerWidth < this.state.lastWidth && // When the window is shrinking\n      !this.state.collapsed\n    ) {\n      this.setState({ collapsed: true, lastWidth: window.innerWidth });\n    } else {\n      this.setState({ lastWidth: window.innerWidth });\n    }\n  };\n\n  toggleExpanded = event => {\n    this.setState({ collapsed: !this.state.collapsed }, () =>\n      window.dispatchEvent(new Event(\"resize\"))\n    );\n  };\n\n  render() {\n    const isExpanded = !this.state.collapsed;\n    const { name, logo, isDefaultLogo, t, getLogoPending } = this.props;\n    return (\n      <nav className={`app-nav ${isExpanded && \"expanded\"}`}>\n        <div className=\"nav-item company\">\n          {getLogoPending ? (\n            <Indicator size=\"medium\" />\n          ) : isDefaultLogo ? (\n            <NavIcon path={logo} />\n          ) : (\n            <div className=\"nav-item-icon\">\n              <img src={logo} alt=\"Logo\" />\n            </div>\n          )}\n          {!getLogoPending && <div className=\"nav-item-text\">{t(name)}</div>}\n        </div>\n        <button\n          className=\"nav-item hamburger\"\n          onClick={this.toggleExpanded}\n          aria-label=\"Hamburger\"\n        >\n          <NavIcon path={svgs.hamburger} />\n        </button>\n        {this.props.tabs.map((tabProps, i) => (\n          <TabLink {...tabProps} t={t} key={i} />\n        ))}\n      </nav>\n    );\n  }\n}\n\nexport default Navigation;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  getLogo,\n  getName,\n  isDefaultLogo,\n  getLogoPendingStatus\n} from \"store/reducers/appReducer\";\nimport Navigation from \"./navigation\";\n\nconst mapStateToProps = state => ({\n  logo: getLogo(state),\n  name: getName(state),\n  isDefaultLogo: isDefaultLogo(state),\n  getLogoPending: getLogoPendingStatus(state)\n});\n\nconst NavigationContainer = withRouter(connect(mapStateToProps)(Navigation));\n\nexport default NavigationContainer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport \"./main.scss\";\n\n/**\n * A presentational component for rendering a page.\n * The children of the component should contain the entire page layout.\n */\nconst Main = props => (\n  <main className=\"app-main\">\n    <div className=\"main-container\">{props.children}</div>\n  </main>\n);\n\nexport default Main;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\n\nimport { PageContent } from \"components/shared\";\n\nimport \"./pageNotFound.scss\";\n\nexport const PageNotFound = ({ t }) => (\n  <PageContent className=\"page-not-found-container\">\n    {t(\"pageNotFound.title\")}\n    <br />\n    <br />\n    <span className=\"quote\">{t(\"pageNotFound.message\")}</span>\n  </PageContent>\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { withNamespaces } from \"react-i18next\";\nimport { PageNotFound } from \"./pageNotFound\";\n\nexport const PageNotFoundContainer = withNamespaces()(PageNotFound);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\nimport { Trans } from \"react-i18next\";\n\n// App Components\nimport Config from \"app.config\";\nimport { HeaderContainer as Header } from \"./header/header.container\";\nimport NavigationContainer from \"./navigation/navigationContainer\";\nimport Main from \"./main/main\";\nimport { PageNotFoundContainer as PageNotFound } from \"./pageNotFound\";\nimport { Hyperlink } from \"components/shared\";\n\nimport \"./shell.scss\";\n\n/** The base component for the app shell */\nclass Shell extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { openFlyout: \"\" };\n  }\n\n  componentDidMount() {\n    const { history, registerRouteEvent } = this.props;\n    // Initialize listener to inject the route change event into the epic action stream\n    history.listen(({ pathname }) => registerRouteEvent(pathname));\n  }\n\n  render() {\n    const {\n      tabsConfig,\n      pagesConfig,\n      crumbsConfig,\n      openSystemSettings,\n      openUserProfile,\n      t,\n      theme,\n      children,\n      denyAccess,\n      userEmail\n    } = this.props;\n\n    return (\n      <div className={`shell-container theme-${theme}`}>\n        {denyAccess && (\n          <div className=\"shell\">\n            <Main>\n              <Header crumbsConfig={crumbsConfig} t={t} />\n              <div className=\"access-denied\">\n                <Trans i18nKey={\"accessDenied.message\"}>\n                  You don&apos;t have permissions.\n                  <Hyperlink\n                    href={Config.contextHelpUrls.accessDenied}\n                    target=\"_blank\"\n                  >\n                    {t(\"accessDenied.learnMore\")}\n                  </Hyperlink>\n                </Trans>\n              </div>\n            </Main>\n          </div>\n        )}\n        {!denyAccess && pagesConfig && (\n          <div className=\"shell\">\n            <NavigationContainer tabs={tabsConfig} t={t} />\n            <Main>\n              <Header\n                crumbsConfig={crumbsConfig}\n                openSystemSettings={openSystemSettings}\n                openUserProfile={openUserProfile}\n                userEmail={userEmail}\n                t={t}\n              />\n              <Switch>\n                <Redirect exact from=\"/\" to={pagesConfig[0].to} />\n                {pagesConfig.map(({ to, exact, component }) => (\n                  <Route\n                    key={to}\n                    exact={exact}\n                    path={to}\n                    component={component}\n                  />\n                ))}\n                <Route component={PageNotFound} />\n              </Switch>\n              {children}\n            </Main>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Shell;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React, { Component } from \"react\";\nimport update from \"immutability-helper\";\nimport \"tsiclient\";\n\nimport \"./telemetryChart.scss\";\n\n// const maxDatums = 10000; // Max telemetry messages for the telemetry graph\n\n// Extend the immutability helper to include object autovivification\nupdate.extend(\"$auto\", (val, obj) => update(obj || {}, val));\n\nexport class TelemetryChart extends Component {\n  static telemetryChartCount = 0;\n\n  constructor(props) {\n    super(props);\n\n    this.chartId = `telemetry-chart-container-${TelemetryChart.telemetryChartCount++}`;\n    this.state = {\n      renderChart: true\n    };\n\n    window.addEventListener(\"blur\", this.handleWindowBlur);\n    window.addEventListener(\"focus\", this.handleWindowFocus);\n\n    this.tsiClient = new window.TsiClient();\n  }\n\n  handleWindowBlur = () => this.setState({ renderChart: false });\n  handleWindowFocus = () => this.setState({ renderChart: true });\n\n  componentDidMount() {\n    this.lineChart = new this.tsiClient.ux.LineChart(\n      document.getElementById(this.chartId)\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"blur\", this.handleWindowBlur);\n    window.removeEventListener(\"focus\", this.handleWindowFocus);\n  }\n\n  componentDidUpdate() {\n    const { telemetry, theme, telemetryKey } = this.props;\n    if (\n      Object.keys(telemetry).length &&\n      telemetryKey &&\n      telemetry[telemetryKey]\n    ) {\n      const chartData = Object.keys(telemetry[telemetryKey]).map(deviceId => ({\n        [deviceId]: telemetry[telemetryKey][deviceId]\n      }));\n      const noAnimate = telemetryKey === this.props.telemetryKey;\n      // Set a timeout to allow the panel height to be calculated before updating the graph\n      setTimeout(() => {\n        if (this && this.state && this.lineChart && this.state.renderChart) {\n          this.lineChart.render(\n            chartData,\n            {\n              grid: false,\n              legend: \"compact\",\n              noAnimate, // If the telemetryKey changes, animate\n              tooltip: true,\n              canDownload: false,\n              yAxisState: \"shared\", // Default to all values being on the same axis\n              theme,\n              offset: \"Local\"\n            },\n            this.props.colors\n          );\n        }\n      }, 10);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"telemetry-chart-container\">\n        <div className=\"chart-container\" id={this.chartId} />\n      </div>\n    );\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { connect } from \"react-redux\";\nimport { TelemetryChart } from \"./telemetryChart\";\n\nexport const TelemetryChartContainer = connect(null)(TelemetryChart);\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { combineEpics } from \"redux-observable\";\n\n// Epics\nimport { epics as appEpics } from \"./reducers/appReducer\";\nimport { epics as devicesEpics } from \"./reducers/devicesReducer\";\nimport { epics as farmEpics } from \"./reducers/farmsReducer\";\nimport { epics as mapEpics } from \"./reducers/mapsReducer\";\nimport { epics as jobsEpics } from \"./reducers/jobsReducer\";\nimport { epics as sensorsEpic } from \"./reducers/sensorsReducer\";\nimport { epics as rulesAlertsEpics } from \"./reducers/rulesAlertsReducer\";\nimport { epics as userEpics } from \"./reducers/userReducer\";\nimport { epics as roleEpics } from \"./reducers/rolesReducer\";\n\n// import { template } from 'lodash-es';\n\n// Extract the epic function from each property object\nconst epics = [\n  ...appEpics.getEpics(),\n  ...devicesEpics.getEpics(),\n  ...farmEpics.getEpics(),\n  ...mapEpics.getEpics(),\n  ...jobsEpics.getEpics(),\n  ...sensorsEpic.getEpics(),\n  ...rulesAlertsEpics.getEpics(),\n  ...userEpics.getEpics(),\n  ...roleEpics.getEpics()\n];\n\nconst rootEpic = combineEpics(...epics);\n\nexport default rootEpic;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { combineReducers } from \"redux\";\n\n// Reducers\nimport { reducer as appReducer } from \"./reducers/appReducer\";\nimport { reducer as devicesReducer } from \"./reducers/devicesReducer\";\nimport { reducer as rulesAlertsReducer } from \"./reducers/rulesAlertsReducer\";\nimport { reducer as farmReducer } from \"./reducers/farmsReducer\";\nimport { reducer as mapReducer } from \"./reducers/mapsReducer\";\nimport { reducer as jobsReducer } from \"./reducers/jobsReducer\";\nimport { reducer as sensorsReducer } from \"./reducers/sensorsReducer\";\nimport { reducer as userReducer } from \"./reducers/userReducer\";\nimport { reducer as roleReducer } from \"./reducers/rolesReducer\";\n\nconst rootReducer = combineReducers({\n  ...appReducer,\n  ...devicesReducer,\n  ...rulesAlertsReducer,\n  ...farmReducer,\n  ...mapReducer,\n  ...jobsReducer,\n  ...sensorsReducer,\n  ...userReducer,\n  ...roleReducer\n});\n\nexport default rootReducer;\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { withNamespaces } from \"react-i18next\";\nimport {\n  epics as appEpics,\n  getTheme,\n  getCurrentUserEmail\n} from \"store/reducers/appReducer\";\nimport App from \"./app\";\n\nconst mapStateToProps = state => ({\n  userEmail: getCurrentUserEmail(state),\n  theme: getTheme(state)\n});\n\n// Wrap with the router and wrap the dispatch method\nconst mapDispatchToProps = dispatch => ({\n  fetchUser: () => dispatch(appEpics.actions.fetchUser()),\n  registerRouteEvent: pathname =>\n    dispatch(appEpics.actions.detectRouteChange(pathname))\n  // logout: () => AuthService.logout()\n});\n\nexport const AppContainer = withRouter(\n  withNamespaces()(\n    connect(\n      mapStateToProps,\n      mapDispatchToProps\n    )(App)\n  )\n);\n","// Copyright (c) Microsoft. All rights reserved.\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n\n    // reload once when the new Service Worker starts activating\n    let refreshing;\n    navigator.serviceWorker.addEventListener(\"controllerchange\", function() {\n      if (refreshing) return;\n      refreshing = true;\n      window.location.reload();\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\"); // eslint-disable-line no-console\n\n              // this is just an example\n              // don't use window.confirm in real life; it's terrible\n              if (window.confirm(\"New version available! OK to refresh?\")) {\n                installingWorker.postMessage({ type: \"SKIP_WAITING\" });\n              } else {\n                console.log(\"You are vewing old content\"); // eslint-disable-line no-console\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\"); // eslint-disable-line no-console\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error); // eslint-disable-line no-console\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { configureStore } from \"store/configureStore\";\nimport { AppContainer as App } from \"components/app.container\";\nimport registerServiceWorker from \"registerServiceWorker\";\nimport { AuthService } from \"services\";\nimport { epics as appEpics } from \"store/reducers/appReducer\";\n\n// Initialize internationalization\nimport \"./i18n\";\n\n// Include cross browser polyfills\nimport \"./polyfills\";\n\n// Include base page css\nimport \"./index.scss\";\n\n// Initialize the user authentication\nAuthService.onLoad(() => {\n  // Create the redux store and redux-observable streams\n  const store = configureStore();\n\n  // Initialize the app redux state\n  store.dispatch(appEpics.actions.initializeApp());\n\n  if (process.env.NODE_ENV !== \"production\") {\n    const whyDidYouRender = require(\"@welldone-software/why-did-you-render\");\n    whyDidYouRender(React);\n  }\n\n  // Create the React app\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n\n  registerServiceWorker();\n});\n","// Copyright (c) Microsoft. All rights reserved.\n\nimport { createStore, applyMiddleware } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootEpic from \"./rootEpic\";\nimport rootReducer from \"./rootReducer\";\n\nexport function configureStore() {\n  // Initialize the redux-observable epics\n  const epicMiddleware = createEpicMiddleware(rootEpic);\n  // Initialize the redux store with middleware\n  return createStore(\n    rootReducer,\n    composeWithDevTools(applyMiddleware(epicMiddleware))\n  );\n}\n"],"sourceRoot":""}