(this.webpackJsonpdatahubux=this.webpackJsonpdatahubux||[]).push([[0],[,,function(e,t,a){"use strict";a.d(t,"L",(function(){return h})),a.d(t,"O",(function(){return f})),a.d(t,"I",(function(){return g})),a.d(t,"S",(function(){return b})),a.d(t,"P",(function(){return v})),a.d(t,"B",(function(){return E})),a.d(t,"ab",(function(){return S})),a.d(t,"f",(function(){return O})),a.d(t,"qb",(function(){return C})),a.d(t,"J",(function(){return j})),a.d(t,"o",(function(){return N})),a.d(t,"M",(function(){return D})),a.d(t,"N",(function(){return M})),a.d(t,"Z",(function(){return A})),a.d(t,"K",(function(){return I})),a.d(t,"z",(function(){return k})),a.d(t,"Q",(function(){return F})),a.d(t,"u",(function(){return w})),a.d(t,"x",(function(){return R})),a.d(t,"v",(function(){return T})),a.d(t,"A",(function(){return P})),a.d(t,"G",(function(){return x})),a.d(t,"F",(function(){return U})),a.d(t,"E",(function(){return L})),a.d(t,"C",(function(){return B})),a.d(t,"D",(function(){return _})),a.d(t,"g",(function(){return G})),a.d(t,"w",(function(){return J})),a.d(t,"ob",(function(){return Pa})),a.d(t,"pb",(function(){return Wa})),a.d(t,"e",(function(){return Qa})),a.d(t,"d",(function(){return Ya})),a.d(t,"X",(function(){return Xa.w})),a.d(t,"k",(function(){return Xa.g})),a.d(t,"h",(function(){return Xa.d})),a.d(t,"i",(function(){return Xa.e})),a.d(t,"cb",(function(){return Xa.z})),a.d(t,"c",(function(){return Xa.c})),a.d(t,"bb",(function(){return Xa.y})),a.d(t,"kb",(function(){return Xa.H})),a.d(t,"m",(function(){return Xa.i})),a.d(t,"l",(function(){return Xa.h})),a.d(t,"H",(function(){return Xa.q})),a.d(t,"p",(function(){return Xa.k})),a.d(t,"t",(function(){return Xa.o})),a.d(t,"T",(function(){return Xa.s})),a.d(t,"V",(function(){return Xa.u})),a.d(t,"nb",(function(){return Xa.K})),a.d(t,"r",(function(){return Xa.m})),a.d(t,"mb",(function(){return Xa.J})),a.d(t,"lb",(function(){return Xa.I})),a.d(t,"R",(function(){return Xa.r})),a.d(t,"eb",(function(){return Xa.B})),a.d(t,"ib",(function(){return Xa.F})),a.d(t,"gb",(function(){return Xa.D})),a.d(t,"jb",(function(){return Xa.G})),a.d(t,"U",(function(){return Xa.t})),a.d(t,"Y",(function(){return Xa.x})),a.d(t,"db",(function(){return Xa.A})),a.d(t,"fb",(function(){return Xa.C})),a.d(t,"hb",(function(){return Xa.E})),a.d(t,"W",(function(){return Xa.v})),a.d(t,"y",(function(){return Xa.p})),a.d(t,"j",(function(){return Xa.f})),a.d(t,"q",(function(){return Xa.l})),a.d(t,"n",(function(){return Xa.j})),a.d(t,"s",(function(){return Xa.n})),a.d(t,"b",(function(){return Xa.b})),a.d(t,"a",(function(){return Xa.a})),a.d(t,"rb",(function(){return ts}));a(139),a(30),a(140);var s=a(9),n=a(13),r=a(118),o=a.n(r);var i=(e,t)=>{t=Object.assign({pascalCase:!1},t);const a=e=>t.pascalCase?e.charAt(0).toUpperCase()+e.slice(1):e;return 0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():/^[a-z\d]+$/.test(e)?a(e):(e!==e.toLowerCase()&&(e=(e=>{let t=!1,a=!1,s=!1;for(let n=0;n<e.length;n++){const r=e[n];t&&/[a-zA-Z]/.test(r)&&r.toUpperCase()===r?(e=e.slice(0,n)+"-"+e.slice(n),t=!1,s=a,a=!0,n++):a&&s&&/[a-zA-Z]/.test(r)&&r.toLowerCase()===r?(e=e.slice(0,n-1)+"-"+e.slice(n-1),s=a,a=!1,t=!0):(t=r.toLowerCase()===r,s=a,a=r.toUpperCase()===r)}return e})(e)),a(e=e.replace(/^[.\- ]+/,"").toLowerCase().replace(/[.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase())))},l=a(54),c=a(20),d=a.n(c),m=a(22),u=a(15),p=a.n(u);const h=e=>"function"===typeof e,f=e=>"object"===typeof e,g=e=>parseInt(e,10),b=(...e)=>e.filter(e=>!!e).join(" ").trim(),v=e=>e.match(/^$|^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@(([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),E=e=>e.Items||e.items||[],y=e=>Array.isArray(e)?e.map(y):null!==e&&f(e)?Object.entries(e).reduce((e,[t,a])=>(e[i(t)]=y(a),e),{}):e,S=(e,t)=>Object.keys(t).reduce((a,s)=>o.a.copy(s,t[s],e,a),{}),O=(e,t)=>S(y(e),t),C=(e,t)=>t.map(t=>{const a=t.headerName?e(t.headerName):void 0,n=t.headerTooltip?e(t.headerTooltip):a;return Object(s.a)({},t,{headerName:a,headerTooltip:n})}),j=e=>null!==e&&void 0!==e&&""!==e,N=e=>j(e)?e:n.a.emptyValue,D=e=>{try{if(M(e))return!1;if(0===e.length)return!0;const t=JSON.parse(e);if(t&&"object"===typeof t)return!0}catch(t){return console.log("Error while parsing json: ",t),!1}return!1},M=e=>null===e,A=e=>j(e)?e:n.a.emptyValue,I=e=>!e&&0===e.length,k=(e,t,a,s)=>{const n="".concat(t,".").concat(a),r=e(n);return r===n?s||a:r},F=e=>{if(!e)return!1;const t=e.name.split(".").pop().toLowerCase();return n.a.validExtensions.indexOf("."+t)>-1},w=e=>e&&Array.isArray(e.conditions)&&e.conditions.length?e.conditions.map(e=>e.field||n.a.emptyFieldValue).join(" & "):n.a.emptyFieldValue,R=e=>{const t=e[0];let a,s,n,r,o=0,i=0,l=0,c=0;for(a=0,s=t.length-1;a<t.length;s=a,a+=1)n=t[a],r=t[s],o+=n[0]*r[1],o-=n[1]*r[0];for(o*=3,a=0,s=t.length-1;a<t.length;s=a,a+=1)n=t[a],r=t[s],i=n[0]*r[1]-n[1]*r[0],l+=(n[0]+r[0])*i,c+=(n[1]+r[1])*i;return[l/o,c/o]},T=a(120);T.define("Position",(function(e){const t=[];return e.length>2&&t.push(l.a.t("farms.panels.geoJSON.invalidCoordinates")),(e[0]<-180||e[0]>180)&&t.push(l.a.t("farms.panels.geoJSON.invalidXCoordinate")),(e[1]<-90||e[1]>90)&&t.push(l.a.t("farms.panels.geoJSON.invalidYCoordinate")),t}));const P=(e,{metric:t,deviceId:a,time:s,data:n})=>n?d()(e,{[t]:{$auto:{[a]:{$auto:{"":{$auto:{[s]:{$auto:{val:{$set:n}}}}}}}}}}):e,x=(e,t,a)=>{e.which===a&&t()},U=(e,t,a,s)=>{const n=[];let r=void 0,o=!1,i=!0;m.e.getMapFileByIdAndType(e,t).subscribe(e=>{if(void 0!==e){r=void 0,o=!1,i=!0,0===e.length&&(o=!0);for(let t=0;t<e.length;t++)Xa.e.get(e[t].contentType)===Xa.x&&(r=e[t].downloadSASUrl,i=!1),n.push({label:Xa.e.get(e[t].contentType)||e[t].contentType,value:e[t].downloadSASUrl,contentType:e[t].contentType})}const t={mapFileDownloadSelectObject:n},l={url:e&&e[Xa.s]?e[Xa.s][Xa.k]:void 0,latestMapDate:s?p()(s[Xa.s][Xa.h]).format(Xa.i):void 0,latestCreatedAt:s?p()(s[Xa.s][Xa.f]).format(Xa.i):void 0,mapFound:!0,noMaps:o,noPngMaps:i,isMapFilesPending:!1,blobUrl:r};a(t,l,null)},e=>a({},{},e))},L=(e,t,a,s)=>{((e,t,a,s)=>{let n;const r=Pa.NoMapImage;m.e.getLatestFarmMapFileById(e,t).subscribe(e=>{if(0!==e.length){e.sort((e,t)=>new Date(t.date)-new Date(e.date)),n=e[Xa.s][Xa.q],void 0!==a.filter(e=>e.id===n)&&U(n,Xa.o,s,e)}else{s({},{mapFound:!1,url:r},null)}},e=>s({},{},e))})(e,t,a,s)},B=()=>[{label:l.a.t("maps.status.submitted"),value:Xa.b.submittedStatus},{label:l.a.t("maps.status.accepted"),value:Xa.b.acceptedStatus},{label:l.a.t("maps.status.running"),value:Xa.b.runningStatus},{label:l.a.t("maps.status.pendingRetry"),value:Xa.b.pendingRetryStatus},{label:l.a.t("maps.status.failed"),value:Xa.b.failedStatus},{label:l.a.t("maps.status.succeeded"),value:Xa.b.succeededStatus},{label:l.a.t("maps.status.stopped"),value:Xa.b.stoppedStatus}],_=e=>{let t=null;return e.mapFileDownloadSelectObject.map(e=>e.label===Xa.x?t=e.value:null),t};function G(e,t){return(e||"").toLowerCase().localeCompare((t||"").toLowerCase())}function J(e,t){const a=t.map(e=>e.field),s=[...new Set(a)],n=this.props.sensorModels.filter(e=>e.sensorMeasures.some(e=>s.includes(e.name))).map(e=>e.id),r=this.props.sensors.filter(e=>n.includes(e.sensorModelId)).map(e=>e.deviceId);return this.props.devices.filter(e=>r.includes(e.id)).filter(t=>t.farmId===e).length}var z=a(465),V=a.n(z),H=a(466),q=a.n(H),K=a(467),W=a.n(K),$=a(468),Q=a.n($),Z=a(469),Y=a.n(Z),X=a(470),ee=a.n(X),te=a(471),ae=a.n(te),se=a(472),ne=a.n(se),re=a(473),oe=a.n(re),ie=a(474),le=a.n(ie),ce=a(475),de=a.n(ce),me=a(476),ue=a.n(me),pe=a(477),he=a.n(pe),fe=a(478),ge=a.n(fe),be=a(292),ve=a.n(be),Ee=a(293),ye=a.n(Ee),Se=a(294),Oe=a.n(Se),Ce=a(295),je=a.n(Ce),Ne=a(296),De=a.n(Ne),Me=a(479),Ae=a.n(Me),Ie=a(480),ke=a.n(Ie),Fe=a(481),we=a.n(Fe),Re=a(482),Te=a.n(Re),Pe=a(483),xe=a.n(Pe),Ue=a(484),Le=a.n(Ue),Be=a(485),_e=a.n(Be),Ge=a(486),Je=a.n(Ge),ze=a(487),Ve=a.n(ze),He=a(488),qe=a.n(He),Ke=a(489),We=a.n(Ke),$e=a(490),Qe=a.n($e),Ze=a(297),Ye=a.n(Ze),Xe=a(491),et=a.n(Xe),tt=a(492),at=a.n(tt),st=a(493),nt=a.n(st),rt=a(494),ot=a.n(rt),it=a(495),lt=a.n(it),ct=a(496),dt=a.n(ct),mt=a(497),ut=a.n(mt),pt=a(498),ht=a.n(pt),ft=a(499),gt=a.n(ft),bt=a(500),vt=a.n(bt),Et=a(501),yt=a.n(Et),St=a(502),Ot=a.n(St),Ct=a(503),jt=a.n(Ct),Nt=a(504),Dt=a.n(Nt),Mt=a(505),At=a.n(Mt),It=a(506),kt=a.n(It),Ft=a(507),wt=a.n(Ft),Rt=a(508),Tt=a.n(Rt),Pt=a(509),xt=a.n(Pt),Ut=a(298),Lt=a.n(Ut),Bt=a(510),_t=a.n(Bt),Gt=a(511),Jt=a.n(Gt),zt=a(512),Vt=a.n(zt),Ht=a(513),qt=a.n(Ht),Kt=a(514),Wt=a.n(Kt),$t=a(515),Qt=a.n($t),Zt=a(516),Yt=a.n(Zt),Xt=a(517),ea=a.n(Xt),ta=a(518),aa=a.n(ta),sa=a(299),na=a.n(sa),ra=a(300),oa=a.n(ra),ia=a(519),la=a.n(ia),ca=a(520),da=a.n(ca),ma=a(521),ua=a.n(ma),pa=a(522),ha=a.n(pa),fa=a(523),ga=a.n(fa),ba=a(524),va=a.n(ba),Ea=a(525),ya=a.n(Ea),Sa=a(526),Oa=a.n(Sa),Ca=a(527),ja=a.n(Ca),Na=a(528),Da=a.n(Na),Ma=a(529),Aa=a.n(Ma),Ia=a(530),ka=a.n(Ia),Fa=a(531),wa=a.n(Fa),Ra=a(532),Ta=a.n(Ra);const Pa={tabs:{dashboard:_t.a,devices:Da.a,sensors:Oa.a,deployments:Vt.a,maintenance:qt.a,packages:lt.a,layouts:Wt.a,example:Ye.a,farms:ja.a,jobs:va.a,rules:ya.a,maps:Aa.a,alerts:ge.a},devices:{generic:we.a,sensorhub:wt.a,subedge:Lt.a,gateway:Lt.a,deviceModelGateway:na.a,deviceModelGatewayBig:ve.a,node:oa.a,nodeBig:ye.a,online:Oe.a,offline:je.a,onlineBig:De.a},NoMapImage:wa.a,calendar:Jt.a,ackAlert:V.a,filter:ha.a,appliedFilter:ga.a,addDevice:ke.a,apply:q.a,cancelX:W.a,abort:la.a,waiting:ua.a,rejected:da.a,downloadButton:Ae.a,carat:Q.a,changeStatus:Y.a,checkmark:ee.a,chevron:ae.a,chevronRight:ne.a,closeAlert:oe.a,colon:le.a,farmbeats:de.a,copy:ue.a,critical:he.a,disableToggle:Te.a,disabled:xe.a,edit:Le.a,ellipsis:_e.a,enableToggle:Je.a,error:Ve.a,failed:qe.a,glimmer:We.a,hamburger:Qe.a,info:et.a,infoBubble:Ye.a,links:ka.a,linkTo:at.a,loadingToggle:nt.a,manageFilters:ot.a,physicalDevice:dt.a,plus:ut.a,questionMark:ht.a,radioSelected:gt.a,radioUnselected:vt.a,reconfigure:yt.a,refresh:Ot.a,ruleDisabled:jt.a,ruleEnabled:Dt.a,search:kt.a,settings:Tt.a,simmanagement:At.a,simulatedDevice:xt.a,trash:Qt.a,upload:Yt.a,warning:ea.a,node:oa.a,nodeBig:ye.a,gateway:na.a,gatewayBig:ve.a,online:Oe.a,offline:je.a,onlineBig:De.a,x:aa.a,datePicker:Ta.a};var xa=a(533),Ua=a.n(xa),La=a(534),Ba=a.n(La),_a=a(535),Ga=a.n(_a),Ja=a(536),za=a.n(Ja),Va=a(537),Ha=a.n(Va),qa=a(538),Ka=a.n(qa);const Wa={checkmarkBubble:{dark:Ua.a,light:za.a},infoBubble:{dark:Ba.a,light:Ha.a},questionBubble:{dark:Ga.a,light:Ka.a}};var $a=a(0);class Qa{constructor(e={}){this.validators=e.validators||[],this.rejectors=e.rejectors||[]}check(e,t=!0){return this.validators=[...this.validators,a=>e(a)?"":h(t)?t(a):t],this}checkDuplicate(e,t=!0){return this.validators=[...this.validators,a=>e(a,[])?"":h(t)?t(a):t],this}reject(e){return this.rejectors=[...this.rejectors,e],this}shouldReject(e){return this.rejectors.some(t=>t(e))}hasErrors(e){let t="";for(let a=0;a<this.validators.length;a++)if(t=this.validators[a](e),t)return t;return t}}Qa.notEmpty=e=>Array.isArray(e)?e.length>0:"number"===typeof e||!!e,Qa.latValidation=e=>{if(e.toString().includes("Syncing "))return!0;return new RegExp(/^(\+|-)?(?:90(?:(?:\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\.[0-9]{1,6})?))$/).test(e)},Qa.longValidation=e=>{if(e.toString().includes("Syncing "))return!0;return new RegExp(/^(\+|-)?(?:180(?:(?:\.0{1,6})?)|(?:[0-9]|[1-9][0-9]|1[0-7][0-9])(?:(?:\.[0-9]{1,6})?))$/).test(e)},Qa.reportingIntervalValidation=e=>{if(e.toString().includes("Syncing "))return!0;return new RegExp(/^(1[2-8][0-9]|19[0-9]|[2-9][0-9]{2}|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-7][0-9]{4}|8[0-5][0-9]{3}|86[0-3][0-9]{2}|86400)$/).test(e)},Qa.nameValidation=e=>new RegExp(/^[A-Za-z0-9_]+[A-Za-z0-9_\s]*$/).test(e),Qa.notDuplicate=(e,t,a,s)=>{let n=!0;if(e!==s)if("devices"===a){void 0!==t.find(t=>t.displayName.trim().toString().toLowerCase()===e.trim().toString().toLowerCase())&&(n=!1)}else if("templates"===a){void 0!==t.find(t=>t.templateName.trim().toString().toLowerCase()===e.trim().toString().toLowerCase())&&(n=!1)}else if("rules"===a){void 0!==t.find(t=>t.name.trim().toString().toLowerCase()===e.trim().toString().toLowerCase())&&(n=!1)}else if("farms"===a){void 0!==t.find(t=>t.name.trim().toString().toLowerCase()===e.trim().toString().toLowerCase())&&(n=!1)}return n},Qa.noSpaces=e=>0===e.trim().length&&e.match(/\s/g)?e.replace(/\s/g,""):!!e,Qa.maxlength=(e,t)=>!(!M(e)&&e.length>t),Qa.charlength=e=>!(!M(e)&&e.length>25),Qa.minlength=e=>!(!M(e)&&e.length<3);class Za extends Qa{constructor(...e){if(super(),this.onChange=({target:{value:e,type:t,checked:a}})=>{if(this.shouldReject(e))return;const s=this.mappers.reduce((e,t)=>t(e),"checkbox"===t?a:e);this.set(s)},this.to=e=>{const t=this.selector,a=this.setter;return this.setter=t=>a({[e]:t}),this.selector=a=>t(a)[e],this},this.map=e=>(this.mappers=[...this.mappers,e],this),this.getLinkedChildren=e=>this.value.map((t,a)=>e(this.forkTo(a),a)),this.forkTo=e=>new Za(this).to(e),1===e.length&&e[0]instanceof Za){const t=e[0];this.component=t.component,this.setter=t.setter,this.selector=t.selector}else{if(!(e.length>=2))throw new Error("Link class: Invalid constructor signature.");{const t=e[0],a=e[1];this.component=t,this.setter=e=>({[a]:e}),this.selector=e=>e[a]}}this.mappers=[]}set(e){return this.component.setState(d()(this.component.state,this.setter({$set:e}))),this}get value(){const e=this.selector(this.component.state);return j(e)?e:""}get error(){return this.hasErrors(this.value)}withValidator(e){return this.validators=e.validators,this.rejectors=e.rejectors,this}}class Ya extends $a.Component{constructor(...e){super(...e),this.linkTo=e=>new Za(this,e)}}var Xa=a(141);const es=window.atlas;function ts(e,t){const a=es.data.BoundingBox.fromData(t);e.setCamera({bounds:a,padding:50})}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"U",(function(){return u})),a.d(t,"k",(function(){return p.a})),a.d(t,"n",(function(){return p.d})),a.d(t,"o",(function(){return p.e})),a.d(t,"l",(function(){return p.b})),a.d(t,"m",(function(){return p.c})),a.d(t,"b",(function(){return r.a})),a.d(t,"c",(function(){return r.b})),a.d(t,"h",(function(){return r.c})),a.d(t,"j",(function(){return r.d})),a.d(t,"p",(function(){return r.e})),a.d(t,"q",(function(){return r.f})),a.d(t,"r",(function(){return r.g})),a.d(t,"s",(function(){return r.h})),a.d(t,"v",(function(){return r.i})),a.d(t,"L",(function(){return r.j})),a.d(t,"T",(function(){return r.k})),a.d(t,"V",(function(){return r.l})),a.d(t,"W",(function(){return r.m})),a.d(t,"Y",(function(){return r.o})),a.d(t,"Z",(function(){return r.p})),a.d(t,"ab",(function(){return r.q})),a.d(t,"eb",(function(){return r.r})),a.d(t,"fb",(function(){return r.s})),a.d(t,"w",(function(){return b})),a.d(t,"x",(function(){return j})),a.d(t,"A",(function(){return N})),a.d(t,"z",(function(){return D})),a.d(t,"K",(function(){return T})),a.d(t,"N",(function(){return P})),a.d(t,"O",(function(){return x})),a.d(t,"P",(function(){return U})),a.d(t,"Q",(function(){return L})),a.d(t,"R",(function(){return J})),a.d(t,"S",(function(){return z})),a.d(t,"bb",(function(){return K.a})),a.d(t,"cb",(function(){return W})),a.d(t,"db",(function(){return Q})),a.d(t,"B",(function(){return Z})),a.d(t,"C",(function(){return Y})),a.d(t,"D",(function(){return ee})),a.d(t,"E",(function(){return te})),a.d(t,"F",(function(){return ae})),a.d(t,"G",(function(){return se})),a.d(t,"H",(function(){return ne})),a.d(t,"J",(function(){return re})),a.d(t,"I",(function(){return X})),a.d(t,"u",(function(){return oe})),a.d(t,"d",(function(){return ie})),a.d(t,"t",(function(){return Se})),a.d(t,"i",(function(){return Oe.a})),a.d(t,"y",(function(){return Ce})),a.d(t,"X",(function(){return je})),a.d(t,"M",(function(){return Me}));var s=a(0),n=a.n(s),r=a(91),o=a(2);a(942);const i=({error:e,t:t,className:a})=>n.a.createElement("div",{className:Object(o.S)("ajax-error-container",a)},n.a.createElement(r.c,null,t("errorFormat",{message:e.message}))),l=({children:e})=>e;a(428);const c=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("context-menu-container",t)},e),d=({children:e,className:t,left:a})=>n.a.createElement("div",{className:Object(o.S)("context-menu-align-container",t,a?"left":"right")},e);var m=a(56);a(943);const u=e=>{e.children;let t=e.className,a=Object(m.a)(e,["children","className"]);return n.a.createElement("div",{className:Object(o.S)("context-menu-search-input",t)},n.a.createElement(K.a,{path:o.ob.search,className:"search-icon"}),n.a.createElement("input",Object.assign({},a,{className:"search-input",type:"text"})))};a(82);var p=a(16);a(947);const h=()=>n.a.createElement("div",{className:"dot"},n.a.createElement("span",{className:"inner"})),f=new Set(["large","medium","normal","small","mini"]),g=new Set(["ring","bar"]),b=e=>{const t=e.size,a=e.pattern,s=e.className,r=f.has(t)?t:"normal",i=g.has(a)?a:"ring";return n.a.createElement("div",{className:Object(o.S)("wait-indicator",r,i,s)},n.a.createElement(h,null),n.a.createElement(h,null),n.a.createElement(h,null),n.a.createElement(h,null),n.a.createElement(h,null),n.a.createElement(h,null))};a(948);const v=({children:e,className:t,onClick:a})=>n.a.createElement("div",{onClick:a,className:Object(o.S)("modal-fade-box",t)},e);a(949);const E=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("modal-content",t)},e);a(950);const y=({children:e,className:t})=>n.a.createElement("header",{className:Object(o.S)("modal-header",t)},n.a.createElement("div",null,e));a(951);const S=({children:e,className:t,onClickDisagree:a,onClickAgree:s})=>n.a.createElement("footer",{className:Object(o.S)("modal-footer",t)},n.a.createElement("button",{onClick:a,className:"action"},"Disagree"),n.a.createElement("button",{onClick:s,className:"action"},"I Agree"));var O=a(27);a(952);var C=Object(O.c)()(({children:e,className:t,t:a})=>n.a.createElement("div",{className:Object(o.S)("content",t)},n.a.createElement("div",null,n.a.createElement("div",null," ",n.a.createElement("b",null," ",a("eula.h1")," ",n.a.createElement("br",null)," ",a("eula.h2")," ")," "),n.a.createElement("div",null," ",a("eula.0_d")," "),n.a.createElement("ol",null,n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.1_h")," "),n.a.createElement("ol",{type:"a"},n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.1a_h")," ")," ",a("eula.1a_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.1b_h")," ")," ",a("eula.1b_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.1c_h")," ")," ",a("eula.1c_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.1d_h")," ")," ",a("eula.1d_d")," "))),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.2_h")," "),n.a.createElement("ol",{type:"a"},n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.2a_h")," ")," ",a("eula.2a_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.2b_h")," ")," ",a("eula.2b_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.2c_h")," ")," ",a("eula.2c_d")," "))),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.3_h")," ")," ",a("eula.3_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.4_h")," ")," ",a("eula.3_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.5_h")," ")," ",a("eula.3_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.6_h")," ")," ",a("eula.6_d"),n.a.createElement("ol",{type:"a"},n.a.createElement("li",null," ",a("eula.6a_d")," "),n.a.createElement("li",null," ",a("eula.6b_d")," "),n.a.createElement("li",null," ",a("eula.6c_d")," "),n.a.createElement("li",null," ",a("eula.6d_d")," "),n.a.createElement("li",null," ",a("eula.6e_d")," "))),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.7_h")," ")," ",a("eula.7_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.8_h")," ")," ",a("eula.8_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.9_h")," ")," ",a("eula.9_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.10_h")," ")," ",a("eula.10_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.11_h")," ")," ",a("eula.11_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.12_h")," ")," ",a("eula.12_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13_h")," ")," ",a("eula.13_d"),n.a.createElement("ol",{type:"a"},n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13a_h")," ")," ",a("eula.13a_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13b_h")," ")," ",a("eula.13b_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13c_h")," "),n.a.createElement("ol",{type:"i"},n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13c1_h")," ")," ",a("eula.13c1_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.13c2_h")," ")," ",a("eula.13c2_d")," ")),a("eula.13c_d")))),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.14_h")," ")," ")," ",n.a.createElement("br",null),n.a.createElement("li",null," ",n.a.createElement("b",null," ",n.a.createElement("div",null,a("eula.15_h1")," ")," ",a("eula.15_h2")," ",n.a.createElement("div",null," ",a("eula.15_h3")," "))," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.16_h")," ")," ",a("eula.16_d"),n.a.createElement("ol",{type:"a"},n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.16a_h")," ")," ",a("eula.16a_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.16b_h")," ")," ",a("eula.16b_d")," "),n.a.createElement("li",null," ",n.a.createElement("b",null," ",a("eula.16c_h")," ")," ",a("eula.16c_d"),n.a.createElement("ol",{type:"i"},n.a.createElement("li",null," ",a("eula.16c1_d")," "),n.a.createElement("li",null," ",a("eula.16c2_d")," "),n.a.createElement("li",null," ",a("eula.16c3_d")," ")))))))));a(953);class j extends s.Component{constructor(e){super(e),this.listenKeyboard=e=>{"Escape"!==e.key&&27!==e.keyCode||this.props.onClose()},this.onOverlayClick=e=>{e.preventDefault()},this.onClickDisagree=()=>{this.setState({disagree:!0})},this.state={disagree:!1}}componentDidMount(){this.props.onClose&&window.addEventListener("keydown",this.listenKeyboard,!0)}componentWillUnmount(){this.props.onClose&&window.removeEventListener("keydown",this.listenKeyboard,!0)}render(){return"EULA"===this.props.type?n.a.createElement("div",{className:Object(o.S)("modal","open",this.props.className)},n.a.createElement("article",{className:"content-wrapper"},n.a.createElement(y,null,"Microsoft Software License Terms")," ",n.a.createElement(C,null,this.props.content),this.state.disagree&&n.a.createElement("div",{id:"disagree"}," ","To start using the application please read and agree to the terms by clicking on the ",n.a.createElement("b",null," I Agree ")," button"," "),n.a.createElement(S,{onClickAgree:this.props.onEulaAgree,onClickDisagree:this.onClickDisagree}))):n.a.createElement("div",{className:Object(o.S)("modal-container",this.props.className)},n.a.createElement(v,{onClick:this.onOverlayClick}),n.a.createElement(E,null,this.props.children))}}a(954);const N=({titleValue:e,className:t})=>n.a.createElement("h1",{className:Object(o.S)("page-title",t)},e);a(955);a(956);a(957);new Set(["large","medium","small","normal"]);a(958);a(959);const D=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("page-content-container",e)},t);var M=a(9),A=a(543),I=a(555),k=a(26),F=a.n(k),w=a(13),R=a(41);a(966);class T extends s.Component{constructor(e){super(e),this.registerResizeEvent=()=>this.resizeEvents.next("r"),this.onGridReady=e=>{this.gridApi=e.api,this.props.sizeColumnsToFit&&this.resizeEvents.next("r"),Object(o.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.refreshRows=()=>{this.gridApi&&Object(o.L)(this.gridApi.updateRowData)&&this.gridApi.updateRowData({update:[]})},this.onSelectionChanged=()=>{const e=this.props,t=e.onHardSelectChange,a=e.onSelectionChanged;Object(o.L)(t)&&t(this.gridApi.getSelectedRows()),Object(o.L)(a)&&a()},this.onRowClicked=e=>{const t=e.event.target.className;if(t.indexOf&&-1===t.indexOf("soft-select-link")){const t=this.props.onRowClicked;Object(o.L)(t)&&t(e)}},this.defaultPcsGridProps={suppressDragLeaveHidesColumns:!0,suppressCellSelection:!0,suppressRowClickSelection:!0,suppressLoadingOverlay:!0,suppressNoRowsOverlay:!0,sortingOrder:o.kb},this.subscriptions=[],this.resizeEvents=new F.a.Subject}componentDidMount(){this.subscriptions.push(this.resizeEvents.debounceTime(w.a.gridResizeDebounceTime).filter(()=>!!this.gridApi&&!!this.props.sizeColumnsToFit).subscribe(()=>this.gridApi.sizeColumnsToFit())),window.addEventListener("resize",this.registerResizeEvent)}componentWillUnmount(){window.removeEventListener("resize",this.registerResizeEvent),this.subscriptions.forEach(e=>e.unsubscribe())}componentDidUpdate(e){e.softSelectId!==this.props.softSelectId&&this.refreshRows(),!this.props.rowData||!this.props.rowData.length||e.rowData&&e.rowData.length||this.resizeEvents.next("r")}render(){const e=this.props,t=e.onSoftSelectChange,a=e.getSoftSelectId,s=e.softSelectId,r=e.context,i=void 0===r?{}:r,l=e.style,c=Object(m.a)(e,["onSoftSelectChange","getSoftSelectId","softSelectId","context","style"]),d=Object(M.a)({},this.defaultPcsGridProps,{},c,{modules:I.a,headerHeight:R.b,rowHeight:R.b,onGridReady:this.onGridReady,onSelectionChanged:this.onSelectionChanged,onRowClicked:this.onRowClicked,rowClassRules:{"pcs-row-soft-selected":({data:e})=>!!Object(o.L)(a)&&a(e)===s},context:Object(M.a)({},i,{onSoftSelectChange:t,getSoftSelectId:a})}),u=this.props,p=u.rowData,h=u.pcsLoadingTemplate,f=n.a.createElement("div",{className:"pcs-grid-loading-container"},h||n.a.createElement(b,null));return n.a.createElement("div",{className:"pcs-grid-container ag-theme-dark ".concat(d.suppressMovableColumns?"":"movable-columns"),style:l},p?"":f,n.a.createElement(A.AgGridReact,d))}}a(159);const P=e=>n.a.createElement("div",{className:Object(o.S)("cell",e.className),title:e.title},e.children),x=e=>n.a.createElement("div",{className:Object(o.S)("property-grid-container",e.className)},e.children),U=e=>n.a.createElement("div",{className:Object(o.S)("grid-header",e.className)},e.children),L=e=>n.a.createElement("div",{className:Object(o.S)("row",e.className)},e.children);var B=a(23);class _ extends s.Component{userHasPermission(){let e=this.props,t=e.permissions,a=e.userPermissions;return a=new Set(a),t.reduce((e,t)=>e&&a.has(t),!0)}render(){const e=this.props,t=e.children,a=e.permissions,s=this.userHasPermission();return Object(o.L)(t)?t(s,a):s?t:null}}var G=a(29);const J=Object(B.b)(e=>({userPermissions:Object(G.r)(e).permissions}),null)(_),z=({permissions:e,t:t,className:a})=>n.a.createElement(r.c,{className:Object(o.S)("protected-error",a)},t("protected.permissionDenied",{permissions:e}));var V=a(15),H=a.n(V);a(967);class q extends s.Component{constructor(...e){super(...e),this.refresh=()=>!this.props.isPending&&this.props.refresh()}render(){const e=this.props,t=e.t,a=e.isPending,s=e.time;return n.a.createElement("div",{className:"last-updated-container"},a||s?n.a.createElement("span",{className:"time"},n.a.createElement("span",{className:"refresh-text"},t(a?"refreshBar.refreshing":"refreshBar.lastRefreshed")," "),a?"":H()(s).format(o.m)):null,n.a.createElement(r.a,{svg:o.ob.refresh,className:"refresh-btn ".concat(a?"refreshing":""),onClick:this.refresh}))}}Object(B.b)(null)(q);var K=a(32);const W=Object(B.b)(e=>({theme:Object(G.o)(e)}),null)((e={})=>{let t=e.theme,a=e.paths,s=Object(m.a)(e,["theme","paths"]);return n.a.createElement(K.a,Object.assign({path:(a||{})[t]},s))});a(968);class $ extends s.Component{render(){const e=this.props,t=e.t,a=e.href;return n.a.createElement("div",{className:"time-series-explorer-container"},n.a.createElement(r.i,{href:a,target:"_blank"},t("timeSeriesInsights.explore")," "),n.a.createElement(r.s,{content:n.a.createElement(O.a,{i18nKey:"timeSeriesInsights.exploreTooltip"},"To view in TSI, get permissions from the solution owner.",n.a.createElement(r.i,{href:w.a.contextHelpUrls.exploreTimeSeries,target:"_blank"},t("timeSeriesInsights.learnMore")))},n.a.createElement(W,{paths:o.pb.questionBubble})))}}const Q=Object(O.c)()(Object(B.b)(null)($));a(969);const Z=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("panel-container",e)},t),Y=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("panel-content",t)},e),X=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("panel-overlay-container",t)},e),ee=({children:e,className:t})=>n.a.createElement(X,{className:"error-overlay"},n.a.createElement("div",{className:Object(o.S)("panel-error-container",t)},e));class te extends s.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}render(){return this.state.hasError?n.a.createElement(Z,null,n.a.createElement(ee,null,this.props.msg)):this.props.children}}const ae=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("panel-header",t)},e),se=({children:e,className:t})=>n.a.createElement("h2",{className:Object(o.S)("panel-header-label",t)},e),ne=({children:e,className:t})=>n.a.createElement("div",{className:Object(o.S)("panel-message",t)},e),re=({children:e,className:t})=>n.a.createElement("p",{className:Object(o.S)("panel-paragraph",t)},e);a(441);const oe=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("grid-container",e)},t),ie=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("grid-cell",e)},n.a.createElement("div",{className:"grid-cell-contents"},t));var le=a(22),ce=a(255),de=a(19),me=a(303),ue=(a(971),a(17));let pe,he=void 0;const fe={itemCount:3,isPending:!1,error:void 0,successCount:0,changesApplied:!1,date:new Date,farmName:void 0,isChecked:void 0,startDate:void 0,endDate:void 0,mapGenerated:void 0,farm:null,sensorMeasureName:"",flyoutName:void 0,farmId:void 0,jobError:void 0,selectDate:!1,confirmStatus:void 0,noJobType:!1,jobCreationError:void 0};class ge extends o.d{constructor(e){super(e),this.apply=e=>{e.preventDefault(),this.setState({isPending:!0,successCount:0,error:null}),this.subscription=le.e.updateMapsItems().subscribe(e=>{this.setState({successCount:this.state.successCount+this.state.itemCount})},e=>this.setState({error:e,isPending:!1}),()=>this.setState({isPending:!1,confirmStatus:!1}))},this.onDateSelect=({target:{value:e}})=>{switch(e){case"recommended":pe=H()().subtract(365,"d").format(o.R),this.setState({selectDate:!1,startDate:pe,endDate:H()().format(o.R)});break;case"select-date":this.setState({selectDate:!0});break;case"this-week":this.setState({selectDate:!1,startDate:H()().subtract(7,"d").format(o.R),endDate:H()().format(o.R)});break;case"yesterday":this.setState({selectDate:!1,startDate:H()().subtract(1,"d").format(o.R),endDate:H()().subtract(1,"d").format(o.R)})}},this.state=Object(M.a)({},fe,{farm:e.farmId}),this.onApplyEvent=this.onApplyEvent.bind(this),this.selectFarm=this.selectFarm.bind(this),this.selectSensorMeasure=this.selectSensorMeasure.bind(this),this.generateMaps=this.generateMaps.bind(this),this.getsensorMeasureSelectObject=this.getsensorMeasureSelectObject.bind(this),this.getFarmId=this.getFarmId.bind(this),e.jobTypeslastUpdated||e.jobTypesError||e.fetchJobTypes(),e.sensorsLastUpdated||e.isSensorsPending||e.fetchSensors(),e.sensorModelsLastUpdated||e.isSensorModelsPending||e.fetchSensorModels(),e.isDevicesPending||e.devicesLastUpdated||e.fetchDevices()}static getDerivedStateFromProps(e,t){if(e.flyoutName!==t.flyoutName){if(e.flyoutName===o.eb)return Object(M.a)({},fe,{flyoutName:e.flyoutName,startDate:H()().subtract(7,"d").format(o.R),endDate:H()().format(o.R)});if(e.flyoutName===o.ib)return Object(M.a)({},fe,{flyoutName:e.flyoutName,startDate:H()().subtract(1,"d").format(o.R),endDate:H()().subtract(1,"d").format(o.R)});if(e.flyoutName===o.gb)return pe=H()().subtract(365,"d").format(o.R),Object(M.a)({},fe,{flyoutName:e.flyoutName,startDate:pe,endDate:H()().format(o.R)})}return null}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),ue.a.trackEvent({name:"UiEvent:FlyClose: Generate "+this.props.flyoutName})}componentDidUpdate(e){e.flyoutName!==this.props.flyoutName&&ue.a.trackEvent({name:"UiEvent:FlyChange: Generate "+this.props.flyoutName})}componentDidMount(){ue.a.trackEvent({name:"UiEvent:FlyOpen: Generate "+this.props.flyoutName}),this.props.flyoutName===o.eb?this.setState({flyoutName:this.props.flyoutName,startDate:H()().subtract(7,"d").format(o.R),endDate:H()().format(o.R)}):this.props.flyoutName===o.ib?this.setState({flyoutName:this.props.flyoutName,startDate:H()().subtract(1,"d").format(o.R),endDate:H()().subtract(1,"d").format(o.R)}):(pe=H()().subtract(365,"d").format(o.R),this.setState({flyoutName:this.props.flyoutName,startDate:pe,endDate:H()().format(o.R)}))}onApplyEvent(e,t){const a=t.startDate.format(o.R),s=t.endDate.format(o.R);this.setState({startDate:a,endDate:s})}selectFarm(e){this.setState({farm:e.target.value,sensorMeasureName:""})}selectSensorMeasure(e){this.setState({sensorMeasureName:e.target.value.value})}getFarmId(){return this.props.farmId?this.props.farmId:null===this.state.farm||void 0===this.state.farm?"":this.state.farm.value}generateMaps(){const e=this.props,t=e.flyoutName,a=e.insertJob,s=this.state,n=s.startDate,r=s.endDate,o=s.sensorMeasureName,i={startDate:n,endDate:r,farmId:this.getFarmId(),sensorMeasureName:o,mapType:t,jobTypeId:he};if(void 0===he)this.setState({noJobType:!0,mapGenerated:!1,changesApplied:!0});else{const e=JSON.parse(JSON.stringify(i));le.d.submitJob(Object(de.v)(e)).subscribe(e=>{a({job:e}),this.setState({isPending:!1,changesApplied:!0,mapGenerated:!0})},e=>{this.setState({jobCreationError:e,isPending:!1,changesApplied:!0,mapGenerated:!1})})}}formIsValid(){const e=[this.farmNameLink].every(e=>!e.error),t=[this.sensorMeasureNameLink].every(e=>!e.error),a=this.props,s=a.flyoutName,n=a.farmId,r=this.state,i=r.farm,l=r.sensorMeasureName,c=void 0!==n||e&&!Object(o.N)(i),d=s!==o.ib||t&&!Object(o.K)(l);return c&&d}getsensorMeasureSelectObject(){const e=this.props,t=e.devices,a=e.sensors,s=e.sensorModels,n=this.getFarmId(),r=t.filter(e=>e.farmId===n).reduce((e,t)=>e.concat(a.filter(e=>e.deviceId===t.id)),[]).reduce((e,t)=>e.concat(s.filter(e=>e.id===t.sensorModelId)),[]).reduce((e,t)=>e.concat(t.sensorMeasures),[]).filter(e=>e.type===o.jb).map(e=>e.name);return Array.from(new Set(r)).map(e=>Object({label:e,value:e}))}render(){const e=this.props,t=e.t,a=e.onClose,s=e.flyoutName,c=e.farmsSelectObject,d=e.farmId,m=e.isJobTypesPending,u=e.isFarmsPending,h=e.farmsError,f=e.jobTypeName,g=e.jobTypes,v=e.jobTypesError,E=this.state,y=E.itemCount,S=E.isPending,O=E.jobCreationError,C=E.selectDate,j=E.changesApplied,N=E.farm,D=E.sensorMeasureName,M=E.startDate,A=E.endDate,I=E.mapGenerated,k=E.noJobType,F=u||m,w=h||v;he=g?(g.find(e=>e.name===f)||{}).id:void 0,this.farmNameLink=this.linkTo("farm").check(o.e.notEmpty,()=>t("templates.flyouts.errorMsg.fieldCantBeEmpty")),this.sensorMeasureNameLink=this.linkTo("sensorMeasureName").check(o.e.notEmpty,()=>t("templates.flyouts.errorMsg.fieldCantBeEmpty"));const R=H()().subtract(7,"d").format(o.R),T=H()().format(o.R);return n.a.createElement("div",{className:"mapsflyout"},n.a.createElement(p.a,null,n.a.createElement(p.d,null,n.a.createElement(p.e,null,n.a.createElement("div",{className:"bold"}," ",s)),n.a.createElement(p.b,{onClick:a})),n.a.createElement(p.c,null,!!w&&n.a.createElement(i,{className:"map-generation-error",t:t,error:w}),!w&&F&&n.a.createElement(r.b,{className:"map-flyout-indicator"},n.a.createElement(b,null)),!w&&!F&&n.a.createElement("form",{className:"maps-flyout-container",onSubmit:this.apply},n.a.createElement("div",{className:"maps-flyout-header"},s===o.eb&&t("maps.flyouts.satteliteIndicesMapDescription"),s===o.ib&&t("maps.flyouts.soilMoistureMapDescription"),s===o.gb&&t("maps.flyouts.sensorPlacementMapDescription")),void 0!==d&&n.a.createElement("div",{className:"maps-flyout-descr"},n.a.createElement(me.a,{to:{pathname:"/maps",state:{farmId:d}}},t("maps.flyouts.allMapsLink"))),void 0===d&&n.a.createElement("div",{className:"bold"},t("maps.flyouts.selectFarms")),void 0===d&&n.a.createElement(r.m,{className:"flyouts-select-list",options:c,matchProp:"label",value:N,clearable:!1,searchable:!0,onChange:this.selectFarm,icon:o.ob.plus,placeholder:t("maps.flyouts.selectFarmPlaceholder"),link:this.farmNameLink}),s===o.ib&&n.a.createElement("div",{className:"bold soil-info"},t("maps.flyouts.selectSensorMeasures"),n.a.createElement("div",{className:"soil-tooltip"},n.a.createElement(K.a,{className:"summary-icon soil-tooltip",path:o.ob.infoBubble}),n.a.createElement("span",{className:"soil-tooltip soil-tooltip-text"},t("maps.flyouts.soilMoistureTooltip")))),s===o.ib&&n.a.createElement(r.m,{className:"flyouts-select-list soil-moisutre-measure",options:this.getsensorMeasureSelectObject(),matchProp:"label",value:D,clearable:!1,searchable:!0,onChange:this.selectSensorMeasure,icon:o.ob.plus,placeholder:t("maps.flyouts.selectSensorMeasurePlaceholder"),link:this.sensorMeasureNameLink}),n.a.createElement(l,null,n.a.createElement(r.f,{className:"radio"},n.a.createElement(r.g,null,n.a.createElement("div",{className:"bold"},t("maps.flyouts.selectDates"))),s===o.ib&&n.a.createElement(r.k,{name:"date",value:"yesterday",onClick:this.onDateSelect,defaultChecked:!0},t("maps.flyouts.yesterday")),n.a.createElement("div",null,n.a.createElement("div",null,s===o.ib&&n.a.createElement(r.k,{name:"date",value:"this-week",onClick:this.onDateSelect},t("maps.flyouts.past7Days").concat("  (",String(R)," to ",String(T),")"))),s===o.eb&&n.a.createElement(r.k,{name:"date",value:"this-week",onClick:this.onDateSelect,defaultChecked:s===o.eb},t("maps.flyouts.thisWeek").concat("  (",String(R)," to ",String(T),")"))),s===o.gb&&n.a.createElement(r.k,{name:"date",value:"recommended",defaultChecked:!0,onClick:this.onDateSelect},t("maps.flyouts.recommended")),n.a.createElement("div",{className:"select-date-range"},n.a.createElement(r.k,{name:"date",value:"select-date",onClick:this.onDateSelect},t("maps.flyouts.selectDateRange")),C&&n.a.createElement(ce.a,{inputValue:M+" to "+A,onApplyEvent:this.onApplyEvent})))),!0===I&&n.a.createElement(je,{className:"map-generation-success",t:t,successMsg:t("maps.flyouts.jobSuccess")}),!0===k&&n.a.createElement(i,{className:"map-generation-error",t:t,error:{message:t("maps.flyouts.noJobType")}}),O&&n.a.createElement(i,{className:"map-generation-error",t:t,error:O}),!j&&!S&&n.a.createElement(r.b,null,n.a.createElement(r.a,{primary:!0,disabled:S||0===y||!this.formIsValid(),type:"submit",onClick:()=>{this.generateMaps(),ue.a.trackEvent({name:"UiEvent:Click: Generate "+s+" Maps Btn"})},className:"generate-map-btn",id:this.formIsValid()?"applyMapBtn":"applyMapBtnDisabled"},t("maps.flyouts.generateMapsButton"))),S&&n.a.createElement(r.b,{className:"button-box"},n.a.createElement(b,null)),!!j&&n.a.createElement(r.b,null)))))}}var be=a(24),ve=a(46),Ee=a(21),ye=a(18);const Se=Object(B.b)(e=>({farmsMap:Object(be.f)(e),sensors:Object(Ee.i)(e),sensorModels:Object(Ee.f)(e),devices:Object(ye.i)(e),jobTypes:Object(ve.b)(e),sensorsLastUpdated:Object(Ee.c)(e),isSensorsPending:Object(Ee.h)(e),sensorModelsLastUpdated:Object(Ee.d)(e),isSensorModelsPending:Object(Ee.e)(e),devicesLastUpdated:Object(ye.k)(e),isDevicesPending:Object(ye.l)(e),jobTypesError:Object(ve.c)(e),isJobTypesPending:Object(ve.e)(e),jobTypeslastUpdated:Object(ve.d)(e)}),e=>({fetchJobTypes:()=>e(ve.a.actions.fetchJobTypes()),fetchFarms:()=>e(be.a.actions.fetchFarms()),fetchSensors:()=>e(Ee.a.actions.fetchSensors()),fetchSensorModels:()=>e(Ee.a.actions.fetchSensorModels()),fetchDevices:()=>e(ye.a.actions.fetchDevices()),insertJob:t=>e(ve.k.actions.insertJob(t))}))(ge);var Oe=a(35);a(981);const Ce=({msg:e,t:t,className:a})=>n.a.createElement("div",null,n.a.createElement("div",{className:a||"no-map-image"},n.a.createElement("img",{src:o.ob.NoMapImage,alt:t("maps.modal.noMap")})),n.a.createElement("div",{className:"no-map-text"},e));a(982);const je=({successMsg:e,t:t,className:a})=>n.a.createElement("div",{className:Object(o.S)("success-message-container",a)},n.a.createElement(r.n,null,t("successMessage",{message:t(e,{message:e})})));a(983);const Ne=({data:e,colonAvailable:t})=>n.a.createElement("table",null,n.a.createElement("tbody",null,e&&Object.entries(e).map(([e,a],s)=>n.a.createElement("tr",{key:s},n.a.createElement("td",{className:"label"},Object(o.o)(e)),n.a.createElement("td",null,t?": ":""),n.a.createElement("td",null,Object(o.o)(a)))))),De=({leftTableData:e,rightTableData:t,isTableColon:a})=>n.a.createElement("div",{className:"properties-container"},n.a.createElement(Ne,{data:e,colonAvailable:a}),n.a.createElement(Ne,{data:t,colonAvailable:a}));De.defaultProps={isTableColon:!0};var Me=De},,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return u})),a.d(t,"k",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"h",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"i",(function(){return v})),a.d(t,"g",(function(){return E})),a.d(t,"f",(function(){return y})),a.d(t,"l",(function(){return S}));var s=a(9),n=a(26),r=a(20),o=a.n(r);const i=(e,t)=>{const a=(t,a={})=>Object(s.a)({type:e,payload:t},a);return"undefined"!==typeof t?()=>a(t):a};function l(e){return t=>(console.error('Uncaught error in epic "'.concat(e,'":'),t),n.Observable.empty())}function c(e){if(!e.type&&!e.rawType||!e.epic&&!e.rawEpic)throw new Error('Error in createEpicCase: "type" and "epic" are required parameters');const t=e.rawType||"EPIC_".concat(e.type);return{type:t,action:i(t,e.staticPayload),epic:function(e,t,a){return a?(t,s)=>a(t,s,e).catch(l(e)):(a,s)=>a.ofType(e).flatMap(e=>t(e,s,a)).catch(l(e))}(t,e.epic,e.rawEpic)}}function d(e={}){const t=Object.keys(e).reduce((t,a)=>{const n=c(e[a]),r=n.type,o=n.action,i=n.epic;return{actionTypes:Object(s.a)({},t.actionTypes,{[a]:r}),actions:Object(s.a)({},t.actions,{[a]:o}),epics:Object(s.a)({},t.epics,{[a]:i})}},{actionTypes:{},actions:{},epics:{}});return Object(s.a)({},t,{getEpics:()=>Object.keys(t.epics).map(e=>t.epics[e])})}function m(e={}){const t=Object.keys(e).reduce((t,a)=>{const n=function(e){if(!e.type&&!e.rawType&&!e.multiType||!e.reducer)throw new Error('Error in createReducerCase: "type" and "reducer" are required parameters');const t=e.multiType||e.rawType||"REDUX_".concat(e.type);return{type:t,action:e.multiType?void 0:i(t,e.staticPayload),reducer:e.reducer}}(e[a]),r=n.type,o=n.action,l=n.reducer;return{actionTypes:Object(s.a)({},t.actionTypes,{[a]:r}),actions:Object(s.a)({},t.actions,{[a]:o}),reducers:Object(s.a)({},t.reducers,{[a]:l})}},{actionTypes:{},actions:{},reducers:{}}),a=t.actionTypes,n=t.actions,r=t.reducers,o=Object.keys(r).reduce((e,t)=>{const n=a[t],o=Array.isArray(n)?n:[n],i=r[t],l=o.reduce((e,t)=>Object(s.a)({},e,{[t]:i}),{});return Object(s.a)({},e,{},l)},{});return{actionTypes:a,actions:n,reducers:r,getReducer:(e={})=>(t=e,a)=>a.type in o?o[a.type](t,a):t}}const u={pending:{},errors:{}},p=(e,t)=>({pending:{[e]:{$set:t}}}),h=(e,t)=>({errors:{[e]:{$set:t}}}),f=(e,{payload:t})=>o()(e,Object(s.a)({},p(t,!1),{},h(t))),g=(e,{type:t})=>o()(e,Object(s.a)({},p(t,!0),{},h(t))),b=(e,{payload:t,error:a})=>o()(e,Object(s.a)({},p(t,!1),{},h(t,a))),v=(e,{payload:t})=>o()(e,{errors:{$set:{}}}),E=(e,t)=>e.pending[t],y=(e,t)=>e.errors[t],S=(e,t)=>a=>e(a,{fromAction:t})},,function(e,t,a){"use strict";(function(e){const a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_SERVICE_URL||"https://tmp-farmbeats-api.azurewebsites.net/",s={serviceUrls:{auth:"".concat(a,"/auth/v1/"),config:"".concat(a,"/config/v1/"),iotHubManager:"".concat(a,"/iothubmanager/v1/"),telemetry:"".concat(a,"/Telemetry"),deviceSimulation:"".concat(a,"/devicesimulation/v1/"),diagnostics:"".concat(a,"/diagnostics/v1/"),privacy:"https://privacy.microsoft.com/privacystatement",template:"".concat(a,"/sensorboxmanager/v1/"),scene:"".concat(a,"/Scene"),sceneFile:"".concat(a,"/SceneFile"),deviceModel:"".concat(a,"/DeviceModel"),farms:"".concat(a,"/Farm"),device:"".concat(a,"/Device"),sensors:"".concat(a,"/Sensor"),sensorModel:"".concat(a,"/SensorModel"),job:"".concat(a,"/Job"),alerts:"".concat(a,"/Alert"),jobType:"".concat(a,"/JobType"),rules:"".concat(a,"/Rule"),roleAssignment:"".concat(a,"/RoleAssignment"),roleDefinition:"".concat(a,"/RoleDefinition"),graphApiUsers:"".concat("https://graph.microsoft.com","/v1.0/users")},contextHelpUrls:{accessDenied:"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac#add-or-remove-users",rolesAndPermissions:"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac",ruleActionsEmail:"https://go.microsoft.com/fwlink/?linkid=2041110&clcid=0x409",exploreTimeSeries:"https://docs.microsoft.com/azure/iot-accelerators/iot-accelerators-remote-monitoring-rbac-tsi",deploymentPriority:"https://docs.microsoft.com/en-us/azure/iot-edge/module-deployment-monitoring#priority"},apiGetAllMaxItems:1e3,graphApiUserBufferSize:15,showWalkthroughExamples:!1,defaultAjaxTimeout:2e4,maxRetryAttempts:2,retryWaitTime:2e3,retryableStatusCodes:new Set([0,401,502,503]),paginationPageSize:14,smallGridPageSize:8,clickDebounceTime:180,gridResizeDebounceTime:200,dashboardRefreshInterval:15e3,telemetryRefreshInterval:12e4,actionSetupPollingInterval:2e4,actionSetupPollingTimeLimit:12e4,simulationId:"1",validExtensions:[".png",".jpeg",".jpg",".svg"].join(),emptyFieldValue:"---",emptyValue:"--",maxTopAlerts:5,maxAlertsCount:1e3,mapCenterPosition:[-122.3320708,47.606],ruleSeverity:{info:"info",warning:"warning",critical:"critical"},alertStatus:{open:"open",closed:"closed",acknowledged:"acknowledged"},maxLogoFileSizeInBytes:307200,device:{device:"IoT device",edgeDevice:"IoT Edge device"},deviceType:{simulated:"Simulated",physical:"Real"},deviceModel:{node:"node",gateway:"gateway",online:"online",offline:"offline"},jobModel:{submitted:"submitted",accepted:"accepted",running:"running",pendingRetry:"pendingretry",failed:"failed",succeeded:"succeeded",stopped:"stopped",stopRequested:"stoprequested"},authenticationType:{symmetricKey:"Symmetric key",x509:"X.509"},authenticationKey:{autoKey:"Auto generate keys",manualKey:"Enter keys manually"}};t.a=s}).call(this,a(70))},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return m}));var s=a(0),n=a.n(s);a(945);const r=({children:e})=>n.a.createElement("div",{className:"flyout-container"},e);var o=a(2);const i=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("flyout-header",e)},t),l=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("flyout-title",e)},t);var c=a(4);const d=e=>n.a.createElement(c.b,Object.assign({},e,{svg:o.ob.x,className:"flyout-close-btn"})),m=({className:e,children:t})=>n.a.createElement("div",{className:Object(o.S)("flyout-content",e)},t);var u=a(6),p=a.n(u);class h extends s.Component{constructor(e){super(e),this.toggle=e=>{e.preventDefault(),this.setState({accordionIsOpen:!this.state.accordionIsOpen})};const t=this.props,a=t.isCollapsable,s=void 0===a||a,n=t.isClosed,r=void 0===n||n;this.state={accordionIsOpen:r,accordionIsCollapsable:s}}getChildContext(){const e=this.state;return{accordionIsOpen:e.accordionIsOpen,accordionIsCollapsable:e.accordionIsCollapsable,toggleAccordion:this.toggle}}render(){return s.Children.only(this.props.children)}}h.childContextTypes={accordionIsOpen:p.a.bool.isRequired,accordionIsCollapsable:p.a.bool.isRequired,toggleAccordion:p.a.func.isRequired};const f=e=>{var t,a;return a=t=class extends s.Component{render(){const t=this.context,a=t.accordionIsOpen,s=t.accordionIsCollapsable,r=t.toggleAccordion;return n.a.createElement(e,Object.assign({},this.props,{accordionIsOpen:a,accordionIsCollapsable:s,toggleAccordion:r}))}},t.contextTypes={accordionIsOpen:p.a.bool.isRequired,toggleAccordion:p.a.func.isRequired,accordionIsCollapsable:p.a.bool.isRequired},a},g=f(({accordionIsOpen:e,children:t})=>e?t:null);a(946);var b=a(32);var v={Container:({collapsable:e,className:t,children:a,closed:s})=>n.a.createElement(h,{isCollapsable:e,isClosed:s},n.a.createElement("div",{className:Object(o.S)("flyout-section",t)},a)),Header:f(({accordionIsCollapsable:e,className:t,children:a,toggleAccordion:s,accordionIsOpen:r})=>{const i={className:Object(o.S)("flyout-section-header",t)};return e?n.a.createElement("button",Object.assign({},i,{onClick:s}),a,e&&n.a.createElement(b.a,{path:o.ob.chevron,className:Object(o.S)("collapse-section-icon",r?"expanded":"collapsed")})):n.a.createElement("div",i,a)}),Content:({className:e,children:t})=>n.a.createElement(g,null,n.a.createElement("div",{className:Object(o.S)("flyout-section-content",e)},t))};t.f={Container:r,Header:i,Title:l,CloseBtn:d,Content:m,Section:v}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d}));var s=a(1046),n=a(1045),r=a(544),o=a.n(r);let i=null;const l=new n.a,c=o()(),d=(e,t)=>{if(!t)throw new Error("History object missing");if(!e)throw new Error("Instrumentation key missing");i=new s.a({config:{instrumentationKey:e,maxBatchInterval:0,disableFetchTracking:!1,extensions:[l],extensionConfig:{[l.identifier]:{history:t}}}}),i.loadAppInsights();i.addTelemetryInitializer(e=>(e.ext.app.sesId=c,!0))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"n",(function(){return O})),a.d(t,"m",(function(){return C})),a.d(t,"k",(function(){return M})),a.d(t,"j",(function(){return A})),a.d(t,"l",(function(){return I})),a.d(t,"c",(function(){return w})),a.d(t,"d",(function(){return R})),a.d(t,"g",(function(){return T})),a.d(t,"i",(function(){return P})),a.d(t,"b",(function(){return x})),a.d(t,"h",(function(){return U})),a.d(t,"e",(function(){return L})),a.d(t,"f",(function(){return B}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(29),u=a(22),p=a(11);const h=e=>t=>n.Observable.of(O.actions.registerError(e.type,{error:t,fromAction:e})),f=Object(p.b)({fetchDevices:{type:"DEVICES_FETCH",epic:e=>n.Observable.forkJoin(u.h.getDevices(),u.h.getDeviceModels(),u.c.getFarms()).map(([e,t,a])=>{const n=new Map,r=new Map,o=new Map;return a.forEach(e=>{o.set(e.id,e.name)}),t.forEach(e=>{n.set(e.id,e.type)}),t.forEach(e=>{r.set(e.id,e.type)}),e.forEach(t=>{t.deviceModelType=n.get(t.deviceModelId),t.deviceModelName=r.get(t.deviceModelId);const a=e.find(e=>e.id===t.parentDeviceId);t.parentDevice=void 0===a?void 0:a.name,t.farmName=null===t.farmId?void 0:o.get(t.farmId)}),Object(s.a)({},e)}).map(Object(p.l)(O.actions.updateDevices,e)).catch(h(e))},fetchDeviceModel:{type:"DEVICESMODEL_FETCH",epic:e=>u.h.getDeviceModels().map(Object(p.l)(O.actions.updateDevicesModel,e)).catch(h(e))},refreshDevices:{type:"DEVICES_REFRESH",rawEpic:e=>e.ofType(m.v.actionTypes.updateActiveDeviceGroup).map(({payload:e})=>e).distinctUntilChanged().map(e=>f.actions.fetchDevices())},deleteDevicesById:{type:"DELETE_DEVICES_BY_ID",epic:e=>n.Observable.from(e.payload).flatMap(({id:e})=>u.h.deleteDevice(e).map(()=>e)).map(Object(p.l)(O.actions.deleteDevices,e))}}),g=new i.b.Entity("devices"),b=new i.b.Array(g),v=new i.b.Entity("deviceModels"),E=new i.b.Array(v),y=Object(s.a)({},p.d,{entities:{},items:[],deviceModelEntities:{},deviceModelItems:[],lastUpdated:void 0,deviceModelLastUpdated:void 0}),S=[f.actionTypes.fetchDevices,f.actionTypes.fetchDeviceModel,f.actionTypes.fetchDevicesByCondition,f.actionTypes.fetchEdgeAgent],O=Object(p.c)({updateDevices:{type:"DEVICES_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,b),r=n.entities.devices,l=n.result;return c()(e,Object(s.a)({entities:{$set:r},items:{$set:l},lastUpdated:{$set:o()()}},Object(p.k)(a.type,!1)))}},updateDevicesModel:{type:"DEVICEMODEL_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,E),r=n.entities.deviceModels,l=n.result;return c()(e,Object(s.a)({deviceModelEntities:{$set:r},deviceModelItems:{$set:l},deviceModelLastUpdated:{$set:o()()}},Object(p.k)(a.type,!1)))}},updateDevicesByCondition:{type:"DEVICES_UPDATE_BY_CONDITION",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,b).entities.devices;return c()(e,Object(s.a)({devicesByCondition:{$set:n}},Object(p.k)(a.type,!1)))}},registerError:{type:"DEVICES_REDUCER_ERROR",reducer:p.e},isFetching:{multiType:S,reducer:p.h},deleteDevices:{type:"DEVICE_DELETE",reducer:(e,{payload:t,fromAction:a})=>{const s=t.reduce((t,a)=>{const s=e.items.indexOf(a);return-1!==s&&t.push([s,1]),t},[]);return c()(e,{entities:{$unset:t},items:{$splice:s}})}},insertDevices:{type:"DEVICE_INSERT",reducer:(e,{payload:t})=>{const a=t.map(e=>Object(s.a)({},e,{isNew:!0})),n=Object(i.a)(a,b),r=n.entities.devices,o=n.result;return e.entities?c()(e,{entities:{$merge:r},items:{$splice:[[0,0,...o]]}}):c()(e,{entities:{$set:r},items:{$set:o}})}},modifyDevices:{type:"DEVICE_MODIFY",reducer:(e,{payload:t})=>{const a=Object(i.a)(t,b).entities.devices,s=void 0===a?{}:a;return c()(e,{entities:{$merge:s},lastUpdated:{$set:o()()}})}},updateTags:{type:"DEVICE_UPDATE_TAGS",reducer:(e,{payload:t})=>{const a={};t.updatedTags.forEach(({name:e,value:t})=>a[e]=t);const s=t.deviceIds.map(s=>c()(e.entities[s],{tags:{$merge:a,$unset:t.deletedTags}})),n=Object(i.a)(s,b).entities.devices;return c()(e,{entities:{$merge:n}})}},updateProperties:{type:"DEVICE_UPDATE_PROPERTIES",reducer:(e,{payload:t})=>{const a={};t.updatedProperties.forEach(({name:e,value:t})=>a[e]=t);const s=t.deviceIds.map(s=>c()(e.entities[s],{desiredProperties:{$merge:a,$unset:t.deletedProperties}})),n=Object(i.a)(s,b).entities.devices;return c()(e,{entities:{$merge:n}})}},updateModuleStatus:{type:"DEVICE_MODULE_STATUS",reducer:(e,{payload:t,fromAction:a})=>{const n=t?{deviceModuleStatus:{$set:t}}:{$unset:["deviceModuleStatus"]};return c()(e,Object(s.a)({},n,{},Object(p.k)(a.type,!1)))}},resetPendingAndError:{type:"DEVICE_REDUCER_RESET_ERROR_PENDING",reducer:p.j}}),C={devices:O.getReducer(y)},j=e=>e.devices,N=e=>j(e).entities||{},D=e=>j(e).items||[],M=e=>j(e).lastUpdated,A=e=>Object(p.f)(j(e),f.actionTypes.fetchDevices),I=e=>Object(p.g)(j(e),f.actionTypes.fetchDevices),k=e=>j(e).deviceModelEntities,F=e=>j(e).deviceModelItems,w=e=>Object(p.f)(j(e),f.actionTypes.fetchDeviceModel),R=e=>j(e).deviceModelLastUpdated,T=e=>Object(p.g)(j(e),f.actionTypes.fetchDeviceModel),P=Object(d.a)(N,D,(e,t)=>t.map(t=>e[t])),x=(e,t)=>N(e)[t],U=e=>Object(p.g)(j(e),f.actionTypes.fetchEdgeAgent),L=Object(d.a)(k,F,(e,t)=>t.map(t=>e[t])),B=(Object(d.a)(N,D,(e,t)=>t.reduce((t,a)=>t.set(a,e[a].name),new Map)),Object(d.a)(k,F,(e,t)=>t.reduce((t,a)=>t.set(a,e[a].type),new Map)))},function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return m})),a.d(t,"j",(function(){return u})),a.d(t,"y",(function(){return h})),a.d(t,"x",(function(){return f})),a.d(t,"k",(function(){return g})),a.d(t,"t",(function(){return v})),a.d(t,"B",(function(){return E})),a.d(t,"A",(function(){return y})),a.d(t,"l",(function(){return S})),a.d(t,"D",(function(){return O})),a.d(t,"C",(function(){return C})),a.d(t,"n",(function(){return j})),a.d(t,"m",(function(){return N})),a.d(t,"u",(function(){return D})),a.d(t,"r",(function(){return M})),a.d(t,"z",(function(){return I})),a.d(t,"s",(function(){return k})),a.d(t,"p",(function(){return R})),a.d(t,"o",(function(){return P})),a.d(t,"q",(function(){return x})),a.d(t,"v",(function(){return U})),a.d(t,"d",(function(){return L})),a.d(t,"e",(function(){return _})),a.d(t,"c",(function(){return J})),a.d(t,"b",(function(){return z})),a.d(t,"a",(function(){return V})),a.d(t,"w",(function(){return q}));a(406);var s=a(2);const n=["GET","POST","PUT","PATCH","DELETE"],r=["Device","DeviceModel","Rule","Sensor","SensorModel","Job","JobType","Scene","SceneFile","Farm","RoleAssignment","RoleDefinition","Alert","ExtendedType","Telemetry","Partner"],o={readAll:r.map(e=>"Telemetry"===e?e+"_POST":e+"_GET"),createFarms:["Farm_POST"],editFarms:["Farm_PUT"],deleteFarms:["Farm_DELETE"],addDevices:["Device_POST"],deleteDevices:["Device_DELETE"],updateDevices:["Device_PUT"],deleteSensors:["Sensor_DELETE"],createMaps:["Job_POST"],createRules:["Rule_POST"],deleteRules:["Rule_DELETE"],updateRules:["Rule_PUT"],addUser:["RoleAssignment_POST"],deleteUser:["RoleAssignment_DELETE"],readRoleAssignments:["RoleAssignment_GET"]},i={id:"AuthIsDisabled",email:"authdisabled@iot.auth",name:"Disabled Auth",roles:["Admin"],permissions:Object.values(o)};function l(e){const t=[];return e.forEach(e=>{const a=e.actions.includes("All")?n:e.actions,s=e.notActions.includes("All")?n:e.notActions,o=e.resourceTypes.includes("All")?r:e.resourceTypes,i=a.filter(e=>!s.includes(e));o.forEach(e=>{i.forEach(a=>{t.push(e+"_"+a)})})}),t}var c=a(20),d=a.n(c);const m=["Average","Instant"],u=["Equals","GreaterThan","LessThan","GreaterThanOrEqual","LessThanOrEqual"],p=["EQ","GT","LT","GE","LE"],h=(e={})=>Object(s.B)(e).map(f),f=(e={})=>{const t=Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",farmId:"farmId",conditions:"conditions",severityLevel:"severityLevel",status:"status",name:"name",severity:"severity",description:"description",properties:"properties","action.type":"type",deleted:"deleted",actions:"actions"});let a;return void 0!==t.conditions&&(a=t.conditions.map(e=>({field:e.field,operator:u[p.indexOf(e.operator)],value:e.value}))),d()(t,{severityLevel:{$set:(t.severityLevel||"").toLowerCase()},status:{$set:t.deleted?"Deleted":t.status},conditions:{$set:a}})},g=(e={})=>Object(s.B)(e).map(b),b=(e={})=>{const t=Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",ruleDescription:"ruleDescription",ruleSeverity:"ruleSeverity",ruleId:"ruleId",ruleActions:"ruleActions",deviceId:"deviceId",deviceMsgReceived:"deviceMsgReceived",status:"status"});return d()(t,{ruleSeverity:{$set:(t.ruleSeverity||"").toLowerCase()},status:{$set:(t.status||"").toLowerCase()}})},v=(e={})=>Object(s.B)(e).map((e={})=>Object(s.f)(e,{data:"data",deviceId:"deviceId",time:"time"})),E=(e={})=>Object(s.f)(e,{timestamps:"timestamps",properties:"properties",continuationToken:"continuationToken"}),y=(e={})=>Object(s.f)(e,{properties:"properties"}),S=({name:e,farmId:t,description:a,conditions:s,Calculations:n,actions:r,severityLevel:o,status:i})=>{let l;void 0!==s&&(l=s.map(e=>({field:e.field,operator:p[u.indexOf(e.operator)],value:e.value})));let c;return void 0!==r&&(c=(r||[]).map(e=>({type:e.type,parameters:{notes:e.parameters.notes,recipients:e.parameters.recipients,subject:e.parameters.subject}}))),{name:e,farmId:t,description:a&&a.length>=3?a:void 0,severityLevel:o,status:i,Conditions:l,Calculations:n,actions:c}},O=(e={})=>Object(s.ab)(e,{from:"From",to:"To",order:"Order",limit:"Limit",devices:"Devices"}),C=(e={})=>Object(s.ab)(e,{sensorId:"sensorId",searchSpan:"searchSpan"}),j=(e={})=>Object(s.B)(e).map(N),N=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",geometry:"geometry",name:"name",properties:"properties",description:"description"}),D=({name:e,geometry:t,crops:a,address:s,description:n})=>({geometry:t,name:e,properties:{crops:a&&a.value?a.value:a,address:s},description:n}),M=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",type:"type",source:"source",farmId:"farmId",jobId:"jobId",date:"date",sequence:"sequence",name:"name",description:"description",properties:"properties"}),A=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",blobUrl:"blobUrl",sceneId:"sceneId",format:"format",type:"type",name:"name",downloadSasUrl:"downloadSASUrl",description:"description",properties:"properties",contentType:"contentType",imageUrlMaps:"imageUrlMaps"}),I=(e={})=>Object(s.B)(e).map(A),k=(e={})=>Object(s.B)(e).map(M);a(92);var F=a(15),w=a.n(F);const R=(e={})=>{const t=Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",stopRequested:"stopRequested",currentState:"currentState",error:"error",output:"output",type:"type",farmIds:"farmIds",arguments:"arguments",name:"name",description:"description",properties:"properties",typeId:"typeId"});return d()(t,{currentState:{$set:t.stopRequested?"StopRequested":t.currentState}})},T=(e={})=>Object(s.f)(e,{id:"id",name:"name"}),P=(e={})=>Object(s.B)(e).map(T),x=(e={})=>Object(s.B)(e).map(R),U=({startDate:e,endDate:t,farmId:a,sensorMeasureName:n,mapType:r,jobTypeId:o})=>{let i;return e=w()(new Date(e)),t=w()(new Date(t)),i=r===s.gb?{date:t.format(s.R),history:w.a.duration(t.diff(e)).asDays(),farm_id:a}:r===s.eb?{from:e.format(s.R),to:t.format(s.R),farm_ids:a,force:!1}:r===s.ib?{from:e.format(s.R),to:t.format(s.R),farm_id:a,measure_name:n}:{from:e.format(s.R),to:t.format(s.R),farm_id:a},{typeId:o,arguments:i,name:r}},L=(e=[])=>Object(s.B)(e).map(B),B=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",type:"type",manufacturer:"manufacturer",productCode:"productCode",sensorMeasures:"sensorMeasures",name:"name",description:"description",properties:"properties"}),_=(e=[])=>Object(s.B)(e).map(G),G=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",hardwareId:"hardwareId",sensorModelId:"sensorModelId",location:"location",port:"port",deviceId:"deviceId",name:"name",description:"description",properties:"properties"}),J=(e=[])=>Object(s.B)(e).map(z),z=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",permissions:"permissions",name:"name",description:"description"}),V=(e=[])=>Object(s.B)(e).map(H),H=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",roleDefinitionId:"roleDefinitionId",objectId:"objectId",objectIdType:"objectIdType",tenantId:"tenantId"}),q=e=>e},,function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"k",(function(){return S})),a.d(t,"j",(function(){return O})),a.d(t,"c",(function(){return j})),a.d(t,"b",(function(){return N})),a.d(t,"g",(function(){return D})),a.d(t,"h",(function(){return M})),a.d(t,"e",(function(){return A})),a.d(t,"d",(function(){return I})),a.d(t,"f",(function(){return k})),a.d(t,"i",(function(){return F}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11);const p=e=>t=>n.Observable.of(S.actions.registerError(e.type,{error:t,fromAction:e})),h=Object(u.b)({fetchSensors:{type:"SENSORS_FETCH",epic:e=>m.j.getSensors().map(Object(u.l)(S.actions.updateSensors,e)).catch(p(e))},fetchSensorModels:{type:"SENSOR_MODELS_FETCH",epic:e=>m.j.getSensorModels().map(Object(u.l)(S.actions.updateSensorModels,e)).catch(p(e))},deleteSensorsById:{type:"DELETE_SENSORS",epic:e=>{n.Observable.from(e.payload).flatMap(({id:e})=>m.j.deleteSensor(e).map(()=>e)).map(Object(u.l)(S.actions.deleteSensorsbyId,e)).catch(p(e))}}}),f=new i.b.Entity("sensors"),g=new i.b.Array(f),b=new i.b.Entity("sensorModel"),v=new i.b.Array(b),E=Object(s.a)({},u.d,{sensorEntities:{},sensorItems:[],sensorlastUpdated:void 0,sensorModelEntities:[],sensorModelItems:[]}),y=[h.actionTypes.fetchSensors,h.actionTypes.fetchSensorModels],S=Object(u.c)({updateSensors:{type:"SENSOR_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,g),r=n.entities.sensors,l=n.result;return c()(e,Object(s.a)({sensorEntities:{$set:r},sensorItems:{$set:l},sensorlastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},updateSensorModels:{type:"SENSOR_MODEL_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,v),r=n.entities.sensorModel,l=n.result;return c()(e,Object(s.a)({sensorModelEntities:{$set:r},sensorModelItems:{$set:l},sensorModelsLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},deleteSensorsbyId:{type:"SENSOR_DELETE_BY_ID",reducer:(e,{payload:t,fromAction:a})=>{const s=t.reduce((t,a)=>{const s=e.sensorItems.indexOf(a);return-1!==s&&t.push([s,1]),t},[]);return c()(e,{sensorEntities:{$unset:t},sensorItems:{$splice:s}})}},registerError:{type:"SENSOR_REDUCER_ERROR",reducer:u.e},isFetching:{multiType:y,reducer:u.h},resetPendingAndError:{type:"SENSOR_REDUCER_RESET_ERROR_PENDING",reducer:u.j}}),O={sensors:S.getReducer(E)},C=e=>e.sensors,j=e=>C(e).sensorlastUpdated,N=e=>Object(u.f)(C(e),h.actionTypes.fetchSensors),D=e=>Object(u.f)(C(e),h.actionTypes.fetchSensorModels),M=e=>Object(u.g)(C(e),h.actionTypes.fetchSensors),A=e=>Object(u.g)(C(e),h.actionTypes.fetchSensorModels),I=e=>C(e).sensorModelsLastUpdated,k=Object(d.a)(e=>C(e).sensorModelEntities||{},e=>C(e).sensorModelItems||[],(e,t)=>t.map(t=>e[t])),F=Object(d.a)(e=>C(e).sensorEntities||{},e=>C(e).sensorItems||[],(e,t)=>t.map(t=>e[t]))},function(e,t,a){"use strict";a.d(t,"b",(function(){return s.a})),a.d(t,"f",(function(){return u})),a.d(t,"h",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return y})),a.d(t,"e",(function(){return N})),a.d(t,"j",(function(){return D})),a.d(t,"a",(function(){return A})),a.d(t,"g",(function(){return I.a})),a.d(t,"i",(function(){return k}));var s=a(161),n=a(13),r=a(30),o=a(19),i=a(26),l=a(15),c=a.n(l);const d=n.a.serviceUrls.telemetry,m=n.a.serviceUrls.rules;class u{static getStatus(){return r.a.get("".concat(d,"status")).map(o.A)}static getRules(){return r.a.get("".concat(m,"?includes=Actions&includes=Conditions&includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.y)}static createRule(e){return r.a.post("".concat(m),e).map(o.x)}static updateRule(e,t){return r.a.put("".concat(m,"/").concat(e),t).map(o.x)}static getTelemetry(e={}){const t=Object(o.C)(e);return r.a.post("".concat(d),t).map(o.B)}static getTelemetryBySensorIdP1D(e){return u.getTelemetry({searchSpan:{from:c()().subtract(24,"hours").toISOString(),to:c()().toISOString()},sensorId:e})}static getTelemetryBySensorIdForDateRange(e,t,a){return u.getTelemetry({sensorId:e,searchSpan:{from:t,to:a}})}static getTelemetryByMessages(e={}){if(0===e.devices.length)return i.Observable.never();const t=Object(o.D)(e);return r.a.post("".concat(d,"messages"),t).map(o.t)}static getTelemetryByDeviceIdP2M(e=[]){return u.getTelemetryByMessages({from:"NOW-PT2M",to:"NOW",order:"desc",devices:e,limit:"10000"})}static getTelemetryByDeviceIdP15M(e=[]){return u.getTelemetryByMessages({from:"NOW-P1D",to:"NOW",order:"desc",devices:e,limit:"10000"})}static getTelemetryByDeviceIdForDateRange(e=[],t,a){return u.getTelemetryByMessages({from:t,to:a,order:"desc",devices:e,limit:"10000"})}static deleteRule(e){return r.a.delete("".concat(m,"/").concat(e)).map(()=>({deletedRuleId:e}))}}var p=a(92);const h=n.a.serviceUrls;class f{static getDevices(){return r.a.get("".concat(h.device,"?includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(p.c)}static getDeviceModels(){return r.a.get("".concat(h.deviceModel,"?includes=Ports&includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(p.a)}static updateDevice(e,t){return r.a.put("".concat(h.device,"/").concat(e),t).map(()=>({id:e}))}static getDeviceById(e){return r.a.get("".concat(h.device,"/").concat(e)).map(p.b)}static deleteDevice(e){return r.a.delete("".concat(h.device,"/").concat(e)).map(()=>({deletedDeviceId:e}))}}const g=n.a.serviceUrls.farms;class b{static createFarm(e){return r.a.post("".concat(g),e).map(o.m)}static getFarms(){return r.a.get("".concat(g,"?includes=Geometry&includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.n)}static getFarmById(e){return r.a.get("".concat(g,"/").concat(e)).map(o.m)}static deleteFarm(e){return r.a.delete("".concat(g,"/").concat(e))}static updateFarm(e,t){return r.a.put("".concat(g,"/").concat(e),t).map(()=>({id:e}))}}const v=n.a.serviceUrls.job,E=n.a.serviceUrls.jobType;class y{static getJobsItem(e){return r.a.get("".concat(v,"/").concat(e)).map(o.q)}static getJobTypesItems(){return r.a.get("".concat(E,"?includes=PipelineDetails&includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.o)}static getJobsItems(){return r.a.get("".concat(v,"?includes=Arguments&includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.q)}static submitJob(e){return r.a.post("".concat(v),e).map(o.p)}static abortJobs(e){return r.a.patch("".concat(v,"/").concat(e,"/stop"))}}var S=a(301);const O=n.a.serviceUrls.scene,C=n.a.serviceUrls.sceneFile,j=["sensor-placement","evi","ndvi","soil-moisture","ndwi","drone"];class N{static getMapsItems(){const e=Object(S.stringify)({types:j});return r.a.get("".concat(O,"?maxItems=").concat(n.a.apiGetAllMaxItems,"&").concat(e)).map(o.s)}static getLatestSensorPlacementMapByFarmId(e){return r.a.get("".concat(O,"?includes=Properties&maxItems=1&types=sensor-placement&farmId=").concat(e)).map(o.s)}static getLatestFarmMapFileById(e,t){return r.a.get("".concat(O,"?maxItems=").concat(n.a.apiGetAllMaxItems,"&types=").concat(e,"&farmId=").concat(t)).map(o.s)}static getSceneById(e){return r.a.get("".concat(O,"/").concat(e)).map(o.r)}static getMapFileByIdAndType(e,t,a){const s={contentType:t,sceneFileTypes:a,sceneId:e,generateDownloadSASUrl:!0},i=Object(S.stringify)(s);return r.a.get("".concat(C,"?maxItems=").concat(n.a.apiGetAllMaxItems,"&").concat(i)).map(o.z)}static updateMapsItems(){return this.getMapsItems().delay(2e3)}}class D{static deleteSensor(e){return r.a.delete("".concat(n.a.serviceUrls.sensors,"/").concat(e)).map(()=>({id:e}))}}D.getSensors=(e=[])=>r.a.get("".concat(n.a.serviceUrls.sensors,"?includes=Properties&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.e),D.getSensorModels=(e=[])=>r.a.get("".concat(n.a.serviceUrls.sensorModel,"?includes=Properties&includes=SensorMeasures&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.d);const M=n.a.serviceUrls.alerts;class A{static getAlerts(){return r.a.get("".concat(M,"?includes=RuleActions&maxItems=").concat(n.a.apiGetAllMaxItems)).map(o.k)}}var I=a(162);class k{static getRoleAssignments(){return r.a.get("".concat(n.a.serviceUrls.roleAssignment,"?maxItems=").concat(n.a.apiGetAllMaxItems),{},!0).map(o.a)}static getRoleAssignmentsByUserObjId(e){return r.a.get("".concat(n.a.serviceUrls.roleAssignment,"?maxItems=").concat(n.a.apiGetAllMaxItems,"&objectIds=").concat(e),{},!0).map(o.a)}static getRoleDefinitions(){return r.a.get("".concat(n.a.serviceUrls.roleDefinition,"?maxItems=").concat(n.a.apiGetAllMaxItems),{},!0).map(o.c)}static getRoleDefinitionById(e){return r.a.get("".concat(n.a.serviceUrls.roleDefinition,"/").concat(e),{},!0).map(o.b)}static deleteRoleAssignment(e){return r.a.delete("".concat(n.a.serviceUrls.roleAssignment,"/").concat(e),{},!0).map(()=>({id:e}))}static updateRoleAssignment(e,t){return r.a.put("".concat(n.a.serviceUrls.roleAssignment,"/").concat(e),t).map(()=>e)}static addRoleAssignment(e){return r.a.post("".concat(n.a.serviceUrls.roleAssignment),e)}}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"i",(function(){return S})),a.d(t,"h",(function(){return O})),a.d(t,"e",(function(){return D})),a.d(t,"d",(function(){return M})),a.d(t,"g",(function(){return A})),a.d(t,"c",(function(){return I})),a.d(t,"b",(function(){return k})),a.d(t,"f",(function(){return F}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(2),h=a(18);const f=e=>t=>n.Observable.of(S.actions.registerError(e.type,{error:t,fromAction:e})),g=Object(u.b)({fetchFarms:{type:"FARMS_FETCH",epic:e=>m.c.getFarms().map(Object(u.l)(S.actions.updateFarms,e)).catch(f(e))},deleteFarm:{type:"FARMS_DELETE",epic:e=>m.c.deleteFarm(e.payload).map(Object(u.l)(S.actions.deleteFarm,e)).catch(f(e))}}),b=new i.b.Entity("farms"),v=new i.b.Array(b),E=Object(s.a)({},u.d,{farmEntities:void 0,farmItems:[]}),y=[g.actionTypes.fetchFarms,g.actionTypes.deleteFarm],S=Object(u.c)({updateFarms:{type:"FARMS_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,v),r=n.entities.farms,l=n.result;return c()(e,Object(s.a)({farmEntities:{$set:r},farmItems:{$set:l},lastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},registerError:{type:"RULES_REDUCER_ERROR",reducer:u.e},insertFarm:{type:"FARMS_INSERT",reducer:(e,{payload:t})=>{const a=Object(i.a)(t,v),s=a.entities.farms,n=a.result;return e.farmEntities?c()(e,{farmEntities:{$merge:s},farmItems:{$splice:[[0,0,...n]]}}):c()(e,{farmEntities:{$set:s},farmItems:{$set:[n]}})}},deleteFarm:{type:"FARMS_DELETE",reducer:(e,{payload:t,fromAction:a})=>{const s=t.reduce((t,a)=>{const s=e.farmItems.indexOf(a);return-1!==s&&t.push([s,1]),t},[]);return c()(e,{farmEntities:{$unset:t},farmItems:{$splice:s}})}},modifyFarm:{type:"FARM_MODIFY",reducer:(e,{payload:t})=>{const a=Object(i.a)(t,v).entities.farms;return c()(e,{farmEntities:{$merge:a}})}},isFetching:{multiType:y,reducer:u.h}}),O={farms:S.getReducer(E)},C=e=>e.farms,j=e=>C(e).farmEntities||{},N=e=>C(e).farmItems||[],D=e=>C(e).lastUpdated,M=e=>Object(u.f)(C(e),g.actionTypes.fetchFarms),A=e=>Object(u.g)(C(e),g.actionTypes.fetchFarms),I=Object(d.a)(j,N,h.i,(e,t,a)=>t.map(t=>Object(s.a)({},e[t],{count:a.filter(e=>e.farmId===t).length}))),k=(e,t)=>void 0===t?null:j(e)[t],F=Object(d.a)(j,N,(e,t)=>t.reduce((t,a)=>t.set(a,e[a][p.V]),new Map))},,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h})),a.d(t,"v",(function(){return E})),a.d(t,"u",(function(){return y})),a.d(t,"s",(function(){return O})),a.d(t,"o",(function(){return C})),a.d(t,"q",(function(){return j})),a.d(t,"i",(function(){return N})),a.d(t,"k",(function(){return D})),a.d(t,"j",(function(){return M})),a.d(t,"m",(function(){return A})),a.d(t,"t",(function(){return I})),a.d(t,"n",(function(){return k})),a.d(t,"w",(function(){return F})),a.d(t,"x",(function(){return w})),a.d(t,"l",(function(){return R})),a.d(t,"p",(function(){return T})),a.d(t,"r",(function(){return P})),a.d(t,"e",(function(){return x})),a.d(t,"g",(function(){return U})),a.d(t,"f",(function(){return L})),a.d(t,"c",(function(){return B})),a.d(t,"b",(function(){return _})),a.d(t,"d",(function(){return G})),a.d(t,"h",(function(){return J}));var s=a(9),n=a(26),r=a(118),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(22),m=a(11),u=a(2),p=a(19);const h=Object(m.b)({initializeApp:{type:"APP_INITIALIZE",epic:()=>[h.actions.fetchUser(),h.actions.fetchCurrentUserPermissions()]},fetchUser:{type:"APP_USER_FETCH",epic:(e,t)=>n.Observable.of(d.b.getCurrentUser()).map(Object(m.l)(E.actions.updateUser,e))},fetchCurrentUserPermissions:{type:"APP_USER_PERMISSIONS_FETCH",epic:(e,t)=>n.Observable.of(d.b.getCurrentUser()).flatMap(e=>d.i.getRoleAssignmentsByUserObjId(e.accountIdentifier)).flatMap(e=>n.Observable.from(e)).map(e=>e.roleDefinitionId).flatMap(e=>d.i.getRoleDefinitionById(e)).map(e=>Object(p.g)(e.permissions)).map(Object(m.l)(E.actions.updateUserPermissions,e))},fetchTelemetryStatus:{type:"APP_FETCH_TELEMETRY_STATUS",epic:e=>d.f.getStatus().map(Object(m.l)(E.actions.updateTelemetryProperties,e)).catch((e=>t=>n.Observable.of(E.actions.registerError(e.type,{error:t,fromAction:e})))(e))},detectRouteChange:{type:"APP_ROUTE_EVENT",rawEpic:(e,t,a)=>e.ofType(a).map(({payload:e})=>e).distinctUntilChanged().map(Object(m.a)("EPIC_APP_ROUTE_CHANGE"))}}),f=new i.b.Entity("actionSettings"),g=new i.b.Array(f),b=Object(s.a)({},m.d,{deviceGroups:{},deviceGroupFilters:{},activeDeviceGroupId:void 0,theme:"light",version:void 0,releaseNotesUrl:void 0,timeSeriesExplorerUrl:void 0,logo:u.ob.farmbeats,name:"companyName",isDefaultLogo:!0,timeInterval:"PT1H",settings:{azureMapsKey:e.DeploymentConfig.azureMapsKey,description:"",name:""},user:{email:"",id:"",name:"",consentGranted:!0,roles:[],permissions:[]},actionSettings:void 0,applicationPermissionsAssigned:void 0,actionPollingTimeout:void 0});const v=[h.actionTypes.fetchDeviceGroups,h.actionTypes.fetchDeviceGroupFilters,h.actionTypes.updateLogo,h.actionTypes.fetchLogo,h.actionTypes.fetchActionSettings,h.actionTypes.pollActionSettings,h.actionTypes.fetchSolutionSettings,h.actionTypes.fetchTelemetryStatus],E=Object(m.c)({updateUser:{type:"APP_USER_UPDATE",reducer:(e,{payload:t,fromAction:a})=>c()(e,Object(s.a)({user:{email:{$set:t.userName},id:{$set:t.id},name:{$set:t.name},consentGranted:{$set:t.consentGranted},eTag:{$set:t.eTag}}},Object(m.k)(a.type,!1)))},updateUserPermissions:{type:"APP_USER_PERMISSION_UPDATE",reducer:function(e,{payload:t}){return c()(e,{user:{permissions:{$push:t}}})}},updateTelemetryProperties:{type:"APP_UPDATE_TELEMETRY_STATUS",reducer:(e,{payload:t,fromAction:a})=>c()(e,Object(s.a)({timeSeriesExplorerUrl:{$set:t.properties.tsiExplorerUrl}},Object(m.k)(a.type,!1)))},registerError:{type:"APP_REDUCER_ERROR",reducer:m.e},updateLogo:{type:"APP_UPDATE_LOGO",reducer:(e,{payload:t,fromAction:a})=>c()(e,Object(s.a)({logo:{$set:t.logo?t.logo:u.ob.farmbeats},name:{$set:t.name?t.name:"companyName"},isDefaultLogo:{$set:!t.logo}},Object(m.k)(a.type,!1)))},updateSolutionSettings:{type:"APP_UPDATE_SOLUTION_SETTINGS",reducer:(e,{payload:t,fromAction:a})=>c()(e,Object(s.a)({settings:{$merge:t}},Object(m.k)(a.type,!1)))},updateActionSettings:{type:"APP_UPDATE_ACTION_SETTINGS",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,g).entities.actionSettings,r=o.a.pick("Email.applicationPermissionsAssigned",n),l=c()(e,Object(s.a)({actionSettings:{$set:n},applicationPermissionsAssigned:{$set:r},$unset:["actionPollingTimeout"]},Object(m.k)(a.type,!1)));return c()(l,Object(m.k)(h.actionTypes.pollActionSettings,!1))}},updateActionPollingTimeout:{type:"APP_UPDATE_ACTION_POLLING_TIMEOUT",reducer:e=>c()(e,Object(s.a)({actionPollingTimeout:{$set:!0}},Object(m.k)(h.actionTypes.pollActionSettings,!1)))},getReleaseInformation:{type:"APP_GET_VERSION",reducer:(e,{payload:t})=>c()(e,{version:{$set:t.version},releaseNotesUrl:{$set:t.releaseNotesUrl}})},updateTimeInterval:{type:"APP_UPDATE_TIME_INTERVAL",reducer:(e,{payload:t})=>c()(e,{timeInterval:{$set:t}})},isFetching:{multiType:v,reducer:m.h}}),y={app:E.getReducer(b)},S=e=>e.app,O=e=>S(e).version,C=e=>S(e).theme,j=e=>S(e).timeSeriesExplorerUrl,N=e=>(e=>S(e).settings)(e).azureMapsKey,D=e=>S(e).logo,M=e=>S(e).user.email,A=e=>S(e).name,I=e=>S(e).isDefaultLogo,k=e=>S(e).releaseNotesUrl,F=e=>Object(m.f)(S(e),h.actionTypes.updateLogo),w=e=>Object(m.g)(S(e),h.actionTypes.updateLogo),R=e=>Object(m.g)(S(e),h.actionTypes.fetchLogo),T=e=>S(e).timeInterval,P=e=>S(e).user,x=e=>S(e).actionSettings,U=e=>Object(m.g)(S(e),h.actionTypes.fetchActionSettings),L=e=>Object(m.f)(S(e),h.actionTypes.fetchActionSettings),B=e=>Object(m.g)(S(e),h.actionTypes.pollActionSettings),_=e=>Object(m.f)(S(e),h.actionTypes.pollActionSettings),G=e=>S(e).actionPollingTimeout,J=e=>S(e).applicationPermissionsAssigned}).call(this,a(70))},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(56),n=a(9),r=a(26),o=a(161),i=a(13),l=a(139);class c{static get(e,t={},a=!0,s=!1){return c.ajax(e,Object(n.a)({},t,{method:"GET"}),a,s)}static post(e,t={},a={},s=!0,r=!1){return c.ajax(e,Object(n.a)({},a,{body:t,method:"POST"}),s,r)}static put(e,t={},a={},s=!0,r=!1){return c.ajax(e,Object(n.a)({},a,{body:t,method:"PUT"}),s,r)}static patch(e,t={},a={},s=!0,r=!1){return c.ajax(e,Object(n.a)({},a,{body:t,method:"PATCH"}),s,r)}static delete(e,t={},a={},s=!0,r=!1){return c.ajax(e,Object(n.a)({},a,{body:t,method:"DELETE"}),s,r)}static ajax(e,t={},a=!0,s){const o=i.a.retryWaitTime,m=i.a.maxRetryAttempts;return c.createAjaxRequest(Object(n.a)({},t,{url:e}),a,s).flatMap(r.Observable.ajax).map(e=>"json"===e.responseType?e.response:e).catch(e=>r.Observable.throw(function(e){if(i.a.retryableStatusCodes.has(e.status))return l.b.from(e);return l.a.from(e)}(e))).retryWhen(d(m,o))}static createAjaxRequest(e,t,a){return(t?!0===a?o.a.getAccessTokenGraph():o.a.getAccessTokenApi():r.Observable.of(null)).map(t=>Object(n.a)({},u,{},e.headers||{},{},t?p(t):{})).map(e=>{let t=e["Content-Type"],a=Object(s.a)(e,["Content-Type"]);return t?Object(n.a)({},a,{"Content-Type":t}):a}).map(t=>Object(n.a)({},e,{headers:t,timeout:e.timeout||i.a.defaultAjaxTimeout}))}}const d=(e,t)=>a=>a.zip(r.Observable.range(0,e+1)).flatMap(([t,a])=>m(t)&&a!==e?r.Observable.of(t):r.Observable.throw(t)).delay(t),m=e=>e instanceof l.b;const u={Accept:"application/json","Content-Type":"application/json","Request-Source":"Web UI"},p=e=>({"Csrf-Token":"nocheck",Authorization:"Bearer ".concat(e)})},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(56),n=a(0),r=a.n(n),o=a(540),i=a.n(o);a(924);const l=(e={})=>{let t=e.className,a=e.onClick,n=Object(s.a)(e,["className","onClick"]);const o=window&&window.SVGSVGElement;return r.a.createElement("div",{className:"svg-container ".concat(t||""),onClick:a},o&&r.a.createElement(i.a,Object.assign({},n,{className:n.svgClassName})))}},,,function(e,t,a){"use strict";a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return v})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return y})),a.d(t,"h",(function(){return O})),a.d(t,"b",(function(){return N})),a.d(t,"a",(function(){return D})),a.d(t,"i",(function(){return M}));var s=a(0),n=a.n(s),r=a(32),o=a(2);a(77);var i=a(41),l=a(4);s.Component;var c=a(15),d=a.n(c);const m=i.d.checkForEmpty,u=({value:e})=>{const t=(e=>{if(e){const t=d.a.utc(e).local();return m(t.unix()>0?t.format(o.m):"")}return e})(e);return n.a.createElement("div",{className:"pcs-renderer-cell"},n.a.createElement("div",{className:"pcs-renderer-time-text"},t||i.a))};s.Component;var p=a(1054);const h=({to:e,svgPath:t,onLinkClick:a})=>n.a.createElement("div",{className:"pcs-renderer-cell"},n.a.createElement(p.a,{to:e,className:"pcs-renderer-link"},n.a.createElement(r.a,{path:t||o.ob.ellipsis,onClick:a})));var f=a(13);a(975);const g=e=>e===f.a.ruleSeverity.warning?o.ob.warning:e===f.a.ruleSeverity.critical?o.ob.critical:o.ob.info;class b extends s.Component{render(){const e=this.props,t=e.value,a=e.iconOnly,s=e.context.t,o=(t||"").toLowerCase(),i="pcs-renderer-cell severity ".concat(o||""," ").concat(o?"highlight":"");return n.a.createElement("div",{className:i},n.a.createElement(r.a,{path:g(o),className:"pcs-renderer-icon"}),!a&&n.a.createElement("div",{className:"pcs-renderer-text"},s("rules.severity.".concat(o))))}}class v extends s.Component{constructor(...e){super(...e),this.onClick=e=>{e.preventDefault(),e.stopPropagation();const t=this.props,a=t.context,s=t.data;a.onSoftSelectChange(a.getSoftSelectId(s),s)}}render(){const e=this.props,t=e.value,a=e.context;return n.a.createElement("div",{className:"pcs-renderer-cell"},Object(o.L)(a.onSoftSelectChange)?n.a.createElement("button",{type:"button",className:"pcs-renderer-link soft-select-link",onClick:this.onClick},t):n.a.createElement("div",{className:"soft-select-text"},t))}}a(976);const E=e=>e===f.a.deviceModel.node?o.ob.node:e===f.a.deviceModel.gateway?o.ob.gateway:void 0,y=({value:e,context:{t:t},iconOnly:a})=>{const s=(e||"").toLowerCase(),o="pcs-renderer-cell deviceModelType ".concat(s||""," ").concat(s?"highlight":"");return n.a.createElement("div",{className:o},n.a.createElement(r.a,{path:E(s),className:"pcs-renderer-icon"}),n.a.createElement("div",{className:"pcs-renderer-text"},t(e)))};a(977);const S=e=>e===f.a.deviceModel.online?o.ob.online:e===f.a.deviceModel.offline?o.ob.offline:void 0,O=({value:e,context:{t:t},iconOnly:a})=>{const s=(e||"").toLowerCase(),o="pcs-renderer-cell status ".concat(s||""," ").concat(s?"highlight":"");return n.a.createElement("div",{className:o},n.a.createElement(r.a,{path:S(s),className:"pcs-renderer-icon"}),n.a.createElement("div",{className:"pcs-renderer-text"},t(e)))};a(978);var C=a(17);const j=e=>{switch(e){case f.a.jobModel.submitted:case f.a.jobModel.accepted:case f.a.jobModel.running:case f.a.jobModel.pendingRetry:return o.ob.waiting;case f.a.jobModel.failed:return o.ob.rejected;case f.a.jobModel.succeeded:return o.ob.online;case f.a.jobModel.stopped:case f.a.jobModel.stopRequested:return o.ob.rejected}},N=({data:{error:e},value:t,context:{t:a}})=>{const s=(t||"").toLowerCase(),i="pcs-renderer-cell status ".concat(s||""," ").concat(s?"highlight":"");return n.a.createElement("div",{className:i},n.a.createElement(r.a,{path:j(s),className:"pcs-renderer-icon"}),n.a.createElement("div",{className:"pcs-renderer-text"},a("jobs.status.".concat(s))),"failed"===a(s)&&n.a.createElement("div",null,n.a.createElement("div",{className:"tooltip",onMouseEnter:()=>C.a.trackEvent({name:"UiEvent:Hover: Job Failure Tooltip"})},n.a.createElement(r.a,{className:"fail-info tooltip",path:o.ob.infoBubble}),n.a.createElement("div",{className:"tooltip tooltiptext"},n.a.createElement("span",{className:"error-text"},e)))))};a(145),a(140),a(979);a(980);class D extends o.d{constructor(e){super(e),this.onFarmSelect=e=>{const t=this.props,a=t.context,s=t.data,n=e.target.value.value;a.onFarmSelectChange&&a.onFarmSelectChange(s,n)},this.toSelectOptions=({id:e,name:t})=>({label:t,value:e}),this.state={selectedFarm:void 0}}componentDidMount(){const e=this.props.value;e&&this.setState({selectedFarm:e})}refresh(){return!1}render(){const e=this.props.context,t=e.farms,a=e.t,s=t.map(this.toSelectOptions);return this.selectFarmLink=this.linkTo("selectedFarm").map(({value:e})=>e),n.a.createElement(l.p,{type:"select",options:s,className:"farm-select-renderer",onChange:this.onFarmSelect,clearable:!1,searchable:!0,placeholder:a("devices.flyouts.associateDevices.selectFarm"),link:this.selectFarmLink})}}const M=({value:e,context:{t:t}})=>n.a.createElement("div",{className:"pcs-renderer-cell ".concat("Enabled"===e?"highlight":"")},e?n.a.createElement("div",{className:"pcs-renderer-text"},e):n.a.createElement("div",{className:"pcs-renderer-text",style:{color:"red"}},t("alerts.grid.ruleDeleted")))},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"n",(function(){return N})),a.d(t,"m",(function(){return D})),a.d(t,"d",(function(){return I})),a.d(t,"c",(function(){return k})),a.d(t,"e",(function(){return F})),a.d(t,"b",(function(){return w})),a.d(t,"f",(function(){return R})),a.d(t,"g",(function(){return U})),a.d(t,"k",(function(){return L})),a.d(t,"j",(function(){return B})),a.d(t,"l",(function(){return _})),a.d(t,"i",(function(){return G})),a.d(t,"h",(function(){return J}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(2);const h=e=>t=>n.Observable.of(N.actions.rulesRegisterError(e.type,{error:t,fromAction:e})),f=Object(u.b)({fetchAlerts:{type:"ALERTS_FETCH",epic:e=>m.a.getAlerts().map(Object(u.l)(j.actions.updateAlerts,e)).catch((e=>t=>n.Observable.of(j.actions.alertsRegisterError(e.type,{error:t,fromAction:e})))(e))},fetchRules:{type:"RULES_FETCH",epic:e=>m.f.getRules().map(Object(u.l)(N.actions.updateRules,e)).catch(h(e))},deleteRule:{type:"RULES_DELETE",epic:e=>m.f.deleteRule(e.payload).map(Object(u.l)(N.actions.deleteRule,e)).catch(h(e))}}),g=new i.b.Entity("alerts"),b=new i.b.Array(g),v=new i.b.Entity("rules"),E=new i.b.Array(v),y=Object(s.a)({},u.d,{alertEntities:void 0,alertItems:[],alertLastUpdated:void 0}),S=Object(s.a)({},u.d,{ruleEntities:{},ruleItems:[],ruleLastUpdated:void 0}),O=[f.actionTypes.fetchAlerts],C=[f.actionTypes.fetchRules],j=Object(u.c)({updateAlerts:{type:"ALERTS_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,b),r=n.entities.alerts,l=n.result;return c()(e,Object(s.a)({alertEntities:{$set:r},alertItems:{$set:l},lastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},alertsRegisterError:{type:"ALERTS_REDUCER_ERROR",reducer:u.e},alertsIsFetching:{multiType:O,reducer:u.h}}),N=Object(u.c)({insertRules:{type:"RULE_INSERT",reducer:(e,{payload:t})=>{const a=t.map(e=>Object(s.a)({},e,{isNew:!0})),n=Object(i.a)(a,E),r=n.entities.rules,o=n.result;return e.ruleEntities?c()(e,{ruleEntities:{$merge:r},ruleItems:{$push:o}}):c()(e,{ruleEntities:{$set:r},ruleItems:{$set:[o]}})}},modifyRules:{type:"RULES_MODIFY",reducer:(e,{payload:t})=>{const a=Object(i.a)(t,E).entities.rules,s=void 0===a?{}:a;return c()(e,{ruleEntities:{$merge:s}})}},deleteRule:{type:"RULES_DELETE",reducer:(e,{payload:t,fromAction:a})=>{const s=t.reduce((t,a)=>{const s=e.ruleItems.indexOf(a);return-1!==s&&t.push([s,1]),t},[]);return c()(e,{ruleEntities:{$unset:t},ruleItems:{$splice:s}})}},updateRules:{type:"RULES_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,E),r=n.entities.rules,l=void 0===r?{}:r,d=n.result;return c()(e,Object(s.a)({ruleEntities:{$set:l},ruleItems:{$set:d},ruleLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},updateRuleCount:{type:"RULES_COUNT_UPDATE",reducer:(e,{payload:{id:t,count:a}})=>c()(e,{ruleEntities:{[t]:{count:{$set:a}}}})},updateRuleLastTrigger:{type:"RULES_LAST_TRIGGER_UPDATE",reducer:(e,{payload:{id:t,lastTrigger:a}})=>c()(e,{ruleEntities:{[t]:{lastTrigger:{$set:a}}}})},updateRuleWithFarmId:{type:"RULES_UPDATE_FARM_ID",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,E),r=n.entities.rules,l=void 0===r?{}:r,d=n.result;return c()(e,Object(s.a)({ruleEntities:{$set:l},ruleItems:{$set:d},ruleLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},rulesRegisterError:{type:"RULES_REDUCER_ERROR",reducer:u.e},rulesIsFetching:{multiType:C,reducer:u.h}}),D={alerts:j.getReducer(y),rules:N.getReducer(S)},M=e=>e.alerts,A=e=>M(e).alertEntities||{},I=e=>M(e).lastUpdated,k=e=>Object(u.f)(M(e),f.actionTypes.fetchAlerts),F=e=>Object(u.g)(M(e),f.actionTypes.fetchAlerts),w=Object(d.a)(A,e=>M(e).alertItems||[],(e,t)=>t.map(t=>e[t])),R=e=>{const t=w(e),a=G(e),n=[],r=[];return t.forEach(t=>{if(!n[t.ruleId]){n[t.ruleId]=!0;const o=a.find(e=>e.id===t.ruleId);r.push(Object(s.a)({},t,{ruleName:o?o.name:void 0,counts:T(e,t.ruleId),lastOccurrence:P(e,t.ruleId)}))}}),r},T=(e,t)=>{const a=w(e).filter(e=>e.ruleId===t);return{total:a.length,open:a.filter(e=>"open"===e.status).length,acknowledged:a.filter(e=>"acknowledged"===e.status).length,closed:a.filter(e=>"closed"===e.status).length}},P=(e,t)=>w(e).filter(e=>e.ruleId===t).map(e=>e.createdAt).reduce((e,t)=>(o()(t).isAfter(e)&&(e=t),e)),x=e=>e.rules,U=e=>x(e).ruleEntities||{},L=e=>x(e).ruleLastUpdated,B=e=>Object(u.f)(x(e),f.actionTypes.fetchRules),_=e=>Object(u.g)(x(e),f.actionTypes.fetchRules),G=Object(d.a)(U,e=>x(e).ruleItems||[],(e,t,a=!1)=>t.reduce((t,n)=>{const r=Object(s.a)({},e[n],{sortableConditions:Object(p.u)(e[n])});return!r.deleted||a?[...t,r]:t},[])),J=(e,t)=>void 0===t?null:U(e)[t]},,function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i}));var s=a(13);const n=48,r=s.a.emptyFieldValue,o={checkForEmpty:(e,t=r)=>e||t},i={lockPosition:!0,cellClass:"first-child-column",headerClass:"checkbox-column",suppressResize:!0,suppressSizeToFit:!0,resizable:!1,checkboxSelection:!0,headerCheckboxSelection:!1,headerCheckboxSelectionFilteredOnly:!0,suppressMovable:!0,width:35}},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"k",(function(){return j})),a.d(t,"j",(function(){return N})),a.d(t,"h",(function(){return M})),a.d(t,"g",(function(){return A})),a.d(t,"i",(function(){return I})),a.d(t,"d",(function(){return w})),a.d(t,"c",(function(){return R})),a.d(t,"e",(function(){return T})),a.d(t,"f",(function(){return x})),a.d(t,"b",(function(){return U}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(2),h=a(13),f=a(24);const g=e=>t=>n.Observable.of(j.actions.registerError(e.type,{error:t,fromAction:e})),b=Object(u.b)({fetchJobs:{type:"JOBS_FETCH",epic:e=>m.d.getJobsItems().map(Object(u.l)(j.actions.updateJobs,e)).catch(g(e))},fetchJobTypes:{type:"JOBS_TYPES_FETCH",epic:e=>m.d.getJobTypesItems().map(Object(u.l)(j.actions.updateJobTypes,e)).catch(g(e))},abortJob:{type:"ABORT_JOB",epic:e=>m.d.abortJobs(e.payload).map(Object(u.l)(j.actions.abortJob,e)).catch(g(e))}}),v=new i.b.Entity("jobs"),E=new i.b.Array(v),y=new i.b.Entity("jobTypes"),S=new i.b.Array(y),O=Object(s.a)({},u.d,{jobEntities:{},jobTypesEntities:{},jobItems:[],jobTypesItems:[],jobLastUpdated:"",jobtypeLastUpdated:""}),C=[b.actionTypes.fetchJobs,b.actionTypes.fetchJobTypes],j=Object(u.c)({updateJobs:{type:"JOBS_UPDATE",reducer:(e,{payload:t,fromAction:a,store:n})=>{const r=Object(i.a)(t,E),l=r.entities.jobs,d=r.result;return c()(e,Object(s.a)({jobEntities:{$set:l},jobItems:{$set:d},jobLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},insertJob:{type:"JOBS_INSERT",reducer:(e,{payload:t})=>{const a=Object(i.a)(t,E),s=a.entities.jobs,n=a.result;return e.jobEntities?c()(e,{jobEntities:{$merge:s},jobItems:{$splice:[[0,0,...n]]}}):c()(e,{jobEntities:{$set:s},jobItems:{$set:[n]}})}},abortJob:{type:"ABORT_JOB",reducer:(e,{payload:t,fromAction:a})=>{const s=Object(i.a)(t,E).entities.jobs,n=void 0===s?{}:s;return c()(e,{jobEntities:{$merge:n}})}},updateJobTypes:{type:"JOB_TYPES_UPDATE",reducer:(e,{payload:t,fromAction:a,store:n})=>{const r=Object(i.a)(t,S),l=r.entities.jobTypes,d=r.result;return c()(e,Object(s.a)({jobTypesEntities:{$set:l},jobTypesItems:{$set:d},jobTypeLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},registerError:{type:"JOBS_REDUCER_ERROR",reducer:u.e},isFetching:{multiType:C,reducer:u.h}}),N={jobs:j.getReducer(O)},D=e=>e.jobs,M=e=>D(e).jobLastUpdated,A=e=>Object(u.f)(D(e),b.actionTypes.fetchJobs),I=e=>Object(u.g)(D(e),b.actionTypes.fetchJobs),k=e=>D(e).jobTypesEntities||{},F=e=>D(e).jobTypesItems||[],w=e=>D(e).jobTypeLastUpdated,R=e=>Object(u.f)(D(e),b.actionTypes.fetchJobTypes),T=e=>Object(u.g)(D(e),b.actionTypes.fetchJobTypes),P=Object(d.a)(k,F,(e,t)=>t.reduce((t,a)=>t.set(a,e[a][p.V]),new Map)),x=Object(d.a)(e=>D(e).jobEntities||{},e=>D(e).jobItems||[],f.f,P,(e,t,a,n)=>t.map(t=>{const r=e[t].arguments.farm_ids?e[t].arguments.farm_ids:e[t].arguments.farm_id?e[t].arguments.farm_id:void 0,i=[];let l=void 0;return r&&-1!==r.indexOf(",")?(r.split(", ").forEach(e=>{i.push(a.get(e))}),l=i.length>0?i.join(", "):void 0):l=a.get(r),Object(s.a)({},e[t],{farmName:l,jobTypeName:n.get(e[t].typeId),startDate:Object(p.J)(e[t].arguments.from)?e[t].arguments.from:Object(p.J)(e[t].arguments.start_date)?e[t].arguments.start_date:Object(p.J)(e[t].arguments.date)?o()(e[t].arguments.date,p.R).subtract("days",e[t].arguments.history).format(p.R):h.a.emptyValue,endDate:Object(p.J)(e[t].arguments.to)?e[t].arguments.to:Object(p.J)(e[t].arguments.start_date)?e[t].arguments.start_date:Object(p.Z)(e[t].arguments.date)})})),U=Object(d.a)(k,F,(e,t)=>t.map(t=>e[t]))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"o",(function(){return O})),a.d(t,"n",(function(){return C})),a.d(t,"h",(function(){return N})),a.d(t,"f",(function(){return D})),a.d(t,"b",(function(){return M})),a.d(t,"d",(function(){return A})),a.d(t,"g",(function(){return I})),a.d(t,"c",(function(){return k})),a.d(t,"e",(function(){return F})),a.d(t,"k",(function(){return w})),a.d(t,"j",(function(){return R})),a.d(t,"l",(function(){return T})),a.d(t,"i",(function(){return P})),a.d(t,"m",(function(){return x}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(19);const h=e=>t=>n.Observable.of(O.actions.registerError(e.type,{error:t,fromAction:e})),f=Object(u.b)({fetchRoleAssignments:{type:"ROLEASSIGNMENTS_FETCH",epic:e=>m.i.getRoleAssignments().map(Object(u.l)(O.actions.updateRoleAssignments,e)).catch(h(e))},fetchRoleDefinitions:{type:"ROLEDEFINITIONS_FETCH",epic:e=>m.i.getRoleDefinitions().map(Object(u.l)(O.actions.updateRoleDefinitions,e)).catch(h(e))},deleteRoleAssignmentById:{type:"ROLEASSIGNMENT_DELETE",epic:e=>n.Observable.of(e.payload.id).flatMap(e=>m.i.deleteRoleAssignment(e).map(()=>e)).map(Object(u.l)(O.actions.deleteRoleAssignmentById,e)).do(()=>e.payload.callbacks.success()).catch(t=>(e.payload.callbacks.error(),h(e)(t)))},addRoleAssignment:{type:"ROLEASSIGNMENT_ADD",epic:e=>n.Observable.of(e.payload).flatMap(e=>m.i.addRoleAssignment(Object(p.w)(e))).map(Object(u.l)(O.actions.mergeRoleAssignment,e)).catch(h(e))}}),g=new i.b.Entity("roleAssignments"),b=new i.b.Array(g),v=new i.b.Entity("roleDefinitions"),E=new i.b.Array(v),y=Object(s.a)({},u.d,{roleAssignmentEntities:{},roleAssignmentItems:[],roleAssignmentLastUpdated:"",roleDefinitionEntities:[],roleDefinitionItems:[],roleDefinitionLastUpdated:""}),S=[f.actionTypes.fetchRoleAssignments,f.actionTypes.fetchRoleDefinitions,f.actionTypes.addRoleAssignment,f.actionTypes.deleteRoleAssignmentById],O=Object(u.c)({updateRoleAssignments:{type:"ROLEASSIGNMENT_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,b),r=n.entities.roleAssignments,l=n.result;return c()(e,Object(s.a)({roleAssignmentEntities:{$set:r},roleAssignmentItems:{$set:l},roleAssignmentLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},updateRoleDefinitions:{type:"ROLEDEFINITION_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,E),r=n.entities.roleDefinitions,l=n.result;return c()(e,Object(s.a)({roleDefinitionEntities:{$set:r},roleDefinitionItems:{$set:l},roleDefinitionLastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},deleteRoleAssignmentById:{type:"ROLEASSIGNMENT_DELETE_BY_ID",reducer:(e,{payload:t,fromAction:a})=>c()(e,Object(s.a)({roleAssignmentEntities:{$unset:[t]},roleAssignmentItems:e=>e.filter(e=>e!==t)},Object(u.k)(a.type,!1)))},mergeRoleAssignment:{type:"ROLEASSIGNMENT_ADD",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,g),r=n.entities.roleAssignments,o=n.result;return c()(e,Object(s.a)({roleAssignmentEntities:{$merge:r},roleAssignmentItems:{$push:[o]}},Object(u.k)(a.type,!1)))}},registerError:{type:"ROLES_REDUCER_ERROR",reducer:u.e},clearError:{type:"ROLES_RESET_ALL_ERRORS",reducer:u.i},isFetching:{multiType:S,reducer:u.h},resetPendingAndError:{type:"ROLE_REDUCER_RESET_ERROR_PENDING",reducer:u.j}}),C={role:O.getReducer(y)},j=e=>e.role,N=e=>j(e).roleAssignmentLastUpdated;function D(e){return Object(u.f)(j(e),f.actionTypes.fetchRoleAssignments)}function M(e){return Object(u.f)(j(e),f.actionTypes.addRoleAssignment)}function A(e){return Object(u.f)(j(e),f.actionTypes.deleteRoleAssignmentById)}function I(e){return Object(u.g)(j(e),f.actionTypes.fetchRoleAssignments)}function k(e){return Object(u.g)(j(e),f.actionTypes.addRoleAssignment)}function F(e){return Object(u.g)(j(e),f.actionTypes.deleteRoleAssignmentById)}const w=e=>j(e).roleDefinitionLastUpdated,R=e=>Object(u.f)(j(e),f.actionTypes.fetchRoleDefinitions),T=e=>Object(u.g)(j(e),f.actionTypes.fetchRoleDefinitions),P=Object(d.a)(e=>j(e).roleAssignmentEntities||{},e=>j(e).roleAssignmentItems||[],(e,t)=>t.map(t=>e[t])),x=Object(d.a)(e=>j(e).roleDefinitionEntities||{},e=>j(e).roleDefinitionItems||[],(e,t)=>t.map(t=>e[t]))},,,,,,function(e,t,a){"use strict";var s=a(305),n=a(460),r=a.n(n),o=a(461),i=a.n(o),l=a(27);s.a.use(r.a).use(i.a).use(l.b).init({fallbackLng:"en",ns:["translations"],defaultNS:"translations",debug:!1,interpolation:{escapeValue:!1},react:{wait:!0}}),t.a=s.a},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"i",(function(){return S})),a.d(t,"h",(function(){return O})),a.d(t,"g",(function(){return N})),a.d(t,"e",(function(){return M})),a.d(t,"d",(function(){return A})),a.d(t,"f",(function(){return I})),a.d(t,"c",(function(){return k})),a.d(t,"b",(function(){return F}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(2),h=a(24);const f=(e,t)=>({response:e,error:t}),g=Object(u.b)({fetchMapFiles:{type:"MAPS_FILES_FETCH",epic:(e,t)=>m.e.getMapFileByIdAndType(e.payload.id).map(t=>S.actions.updateMapsFiles({id:e.payload.id,mapFiles:f(t)})).catch(t=>n.Observable.of(S.actions.updateMapsFiles({id:e.payload.id,mapFiles:f(void 0,t)})))},fetchMaps:{type:"MAPS_FARMS_DETAILS_FETCH",epic:e=>m.e.getMapsItems().map(Object(u.l)(S.actions.updateMaps,e)).catch((e=>t=>n.Observable.of(S.actions.registerError(e.type,{error:t,fromAction:e})))(e))}}),b=new i.b.Entity("maps"),v=new i.b.Array(b),E=Object(s.a)({},u.d,{mapEntities:{},mapItems:[],lastUpdated:"",isTooltipVisible:!0}),y=[g.actionTypes.fetchMaps,g.actionTypes.fetchMapFiles],S=Object(u.c)({updateMaps:{type:"MAPS_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,v),r=n.entities.maps,l=n.result;return c()(e,Object(s.a)({mapEntities:{$set:r},mapItems:{$set:l},lastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},updateTooltip:{type:"TOOLTIP_UPDATE",reducer:e=>(console.log("update tool tip reducer"),c()(e,{isTooltipVisible:{$set:!1}}))},updateMapsFiles:{type:"MAPS_FILES_UPDATE",reducer:(e,{payload:{id:t,mapFiles:a}})=>{const s=new Map;let n,r,o,i;if(void 0!==a.response)for(let l=0;l<a.response.length;l++)void 0!==a.response[l].contentType&&(o=a.response[l].contentType.indexOf("image/")+"image/".length,i=a.response[l].contentType.length,n=a.response[l].contentType.substring(o,i).toUpperCase(),r=a.response[l].downloadSASUrl,s.set(n,r));return c()(e,{mapEntities:{[t]:{imageUrlMaps:{$set:s}}}})}},registerError:{type:"MAPS_REDUCER_ERROR",reducer:u.e},isFetching:{multiType:y,reducer:u.h}}),O={maps:S.getReducer(E)},C=e=>e.maps,j=e=>C(e).mapEntities||{},N=e=>C(e).isTooltipVisible,D=e=>C(e).mapItems||[],M=e=>C(e).lastUpdated,A=e=>Object(u.f)(C(e),g.actionTypes.fetchMaps),I=e=>Object(u.g)(C(e),g.actionTypes.fetchMaps),k=Object(d.a)(j,D,h.f,(e,t,a)=>t.map(t=>Object(s.a)({},e[t],{farmName:a.get(e[t].farmId),mapName:String(e[t].type)+"_"+a.get(e[t].farmId)+"_"+String(o()(e[t].date).format(p.R))}))),F=Object(d.a)(j,D,(e,t)=>[...new Set(Object.keys(e).map(t=>e[t].type))])},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return Z})),a.d(t,"g",(function(){return Be})),a.d(t,"d",(function(){return et})),a.d(t,"c",(function(){return xt})),a.d(t,"f",(function(){return Qt})),a.d(t,"e",(function(){return la})),a.d(t,"h",(function(){return Ca})),a.d(t,"a",(function(){return Fa}));var s=a(23),n=a(27),r=a(9),o=a(0),i=a.n(o),l=a(13),c=a(41),d=a(35),m=a(2);const u=c.d.checkForEmpty,p={id:{headerName:"devices.grid.id",field:"id",sort:"asc",cellRendererFramework:d.e,comparator:m.g},name:{headerName:"devices.grid.name",field:"name",sort:"asc",cellRendererFramework:d.e},deviceModelType:{headerName:"devices.grid.deviceModelType",field:"deviceModelType",filter:"text",cellRendererFramework:d.g},status:{headerName:"devices.grid.status",field:"status",filter:"text",cellRendererFramework:d.h},warnings:{headerName:"devices.grid.warnings",field:"warnings",valueFormatter:({value:e})=>u(e)},hardwareId:{headerName:"devices.grid.hardwareid",field:"hardwareId",valueFormatter:({value:e})=>u(e)},farmId:{headerName:"devices.grid.farm",field:"farmName",valueFormatter:({value:e})=>u(e)},parentDevice:{headerName:"devices.grid.parentDevice",field:"parentDevice",valueFormatter:({value:e})=>u(e)},lastUpdated:{headerName:"devices.grid.lastUpdated",field:"lastModifiedAt",valueFormatter:({value:e})=>u(e),cellRendererFramework:d.f}},h={name:{headerName:"devices.grid.name",field:"name",sort:"asc"},deviceModelType:{headerName:"devices.grid.deviceModelType",field:"deviceModelType",filter:"text",cellRendererFramework:d.g},status:{headerName:"devices.grid.status",field:"status",filter:"text",cellRendererFramework:d.h}},f={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"multiple"},g={enableColResize:!0,multiSelect:!1,pagination:!0,paginationPageSize:5,rowSelection:"single"};var b=a(19),v=a(4),E=a(82),y=a(16),S=a(242),O=a(6),C=a.n(O),j=a(29),N=a(18),D=a(21);const M=Object(n.c)()(Object(s.b)((e,t)=>({theme:Object(j.o)(e),devices:Object(N.i)(e),devicesError:Object(N.j)(e),devicesLastUpdated:Object(N.k)(e),isDevicesPending:Object(N.l)(e),sensors:Object(D.i)(e),sensorsError:Object(D.b)(e),sensorsLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),sensorModels:Object(D.f)(e),sensorModelsError:Object(D.g)(e),sensorModelsLastUpdated:Object(D.d)(e),isSensorModelsPending:Object(D.e)(e)}),e=>({fetchDevices:()=>e(N.a.actions.fetchDevices()),fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchSensorModels:()=>e(D.a.actions.fetchSensorModels())}))(S.a));M.propTypes={showHeader:C.a.bool.isRequired};a(243),a(164);var A=a(303),I=a(15),k=a.n(I);class F extends i.a.Component{render(){const e=this.props,t=e.device,a=e.t,s={[a("devices.grid.description")]:t.description,[a("devices.grid.deviceModelName")]:t.deviceModelName,[a("devices.grid.location")]:Object(m.J)(t.latitude)&&Object(m.J)(t.longitude)?t.latitude+", "+t.longitude:null,[a("devices.flyouts.details.deviceProperties.reportingInterval")]:[t.reportingInterval,"(",a("devices.reportingIntervalType"),")"].join(" "),[a("devices.grid.status")]:t.status,[a("devices.grid.parentDevice")]:t.parentDevice},n={[a("devices.grid.deviceId")]:t.id,[a("devices.grid.addedOn")]:k()(new Date(t.createdAt)).format(m.m),[a("devices.grid.lastUpdated")]:k()(new Date(t.lastModifiedAt)).format(m.m),[a("devices.grid.farm")]:Object(m.J)(t.farmName)?i.a.createElement(A.a,{to:{pathname:"/farms/".concat(t.farmId),state:{id:t.farmId,farmName:t.farmName}}},t.farmName):null};return i.a.createElement(v.M,{leftTableData:s,rightTableData:n})}}var w=a(260),R=a(17),T=a(1055);const P=y.f.Section,x=Object(w.a)((e,t)=>e.filter(e=>e.parentDeviceId===t)),U=[h.name,h.deviceModelType,h.status];class L extends i.a.Component{componentDidMount(){R.a.trackEvent({name:"UiEvent:FlyOpen: Device Details"})}componentDidUpdate(e){e.deviceId!==this.props.deviceId&&R.a.trackEvent({name:"UiEvent:FlyChange: Device Details"})}componentWillUnmount(){R.a.trackEvent({name:"UiEvent:FlyClose: Device Details"})}render(){const e=this.props,t=e.fetchSensors,a=e.sensorLastUpdated,s=e.sensorsError,n=e.sensors,o=e.devices,l=e.deviceId,c=e.device,d=e.t,u=e.onClose,p=e.theme;a||s||t();const h=Object(r.a)({t:d,rowData:x(o,l),domLayout:"autoHeight"},g,{columnDefs:Object(m.qb)(d,U),suppressFlyouts:!0}),f=n.filter(e=>e.deviceId===l).map(e=>e.id);return i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null),i.a.createElement(y.f.CloseBtn,{onClick:u})),i.a.createElement(y.f.Content,{className:"device-details-container"},!!c&&i.a.createElement("div",{className:"device-details-container"},i.a.createElement("div",null,i.a.createElement("table",{className:"header-table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"deviceType"},i.a.createElement(v.bb,{path:"Node"===c.deviceModelType?m.ob.nodeBig:m.ob.gatewayBig})),i.a.createElement("td",{className:"deviceName"},i.a.createElement("div",{className:"device-title"}," ",c.name)),i.a.createElement("td",{className:"deviceStatus"},i.a.createElement(v.bb,{path:"Offline"===c.status?m.ob.offline:m.ob.onlineBig})),i.a.createElement("td",{className:"callspan-td"}))))),i.a.createElement(P.Container,{className:"device-property-container"},i.a.createElement(P.Header,null,d("devices.flyouts.details.deviceProperties.title")),i.a.createElement(P.Content,null,i.a.createElement("div",null,i.a.createElement(F,{device:c,t:d})))),i.a.createElement(P.Container,{className:"device-telemetry-panel",collapsable:!1},i.a.createElement(P.Header,null,d("devices.flyouts.details.telemetry.title")),i.a.createElement(P.Content,null,i.a.createElement(M,{theme:p,t:d,sensorIds:f,showHeader:!1}))),i.a.createElement(P.Container,null,i.a.createElement(P.Header,null,d("devices.flyouts.details.childDevices.title").concat(" (",String(h.rowData.length),")")),i.a.createElement(P.Content,null,h.rowData.length>0?i.a.createElement(V,h):i.a.createElement("p",null," ",d("devices.flyouts.details.childDevices.noDevices")," "))))))}}var B=Object(T.a)(R.c,L,"Device Details");const _=Object(n.c)()(Object(s.b)((e,t)=>({devices:Object(N.i)(e),devicesError:Object(N.j)(e),deviceLastUpdated:Object(N.k)(e),isDevicesPending:Object(N.l)(e),sensors:Object(D.i)(e),sensorsError:Object(D.b)(e),sensorLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),device:Object(N.b)(e,t.deviceId),theme:Object(j.o)(e)}),e=>({fetchSensors:()=>e(D.a.actions.fetchSensors())}))(B));var G=a(553);const J={openFlyoutName:void 0,softSelectedDeviceId:void 0},z={softSelectedId:void 0,closedFlyoutState:J};class V extends o.Component{constructor(e){super(e),this.onGridReady=e=>{this.deviceGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.openAssociateDevicesFlyout=()=>{this.setState({openFlyoutName:"associateDevices"})},this.openModel=e=>()=>this.setState({openModelName:e}),this.closeModel=()=>this.setState({openModelName:void 0}),this.deleteDevices=()=>{this.props.deleteDevicesById(this.state.selectedDeviceList)},this.openFlyout=e=>()=>this.setState({openFlyoutName:e,softSelectedDeviceId:void 0}),this.openDelePopup=()=>{this.setState({openPopup:"deleteDevicePopup"})},this.getOpenFlyout=()=>{const e=this.state,t=e.selectedDeviceList,a=e.softSelectedDeviceId;switch(e.openFlyoutName){case"details":return i.a.createElement(_,{key:"details-device-key",onClose:this.closeFlyout,deviceId:a});case"associateDevices":return i.a.createElement(G.AssociateDevicesContainer,{key:"associate-device-key",onClose:this.closeFlyout,rowData:t});default:return null}},this.getDeleteModel=()=>{switch(this.state.openModelName){case"delete":return i.a.createElement(E.a,{type:"deleteDevice",icon:m.ob.trash,deleteConfirmation:this.props.t("devices.deleteModal.deleteConfirmation",{returnObjects:!0}),title:this.props.t("devices.deleteModal.title"),deleteItem:this.deleteDevices,onClose:this.closeModel,deleteBtn:this.props.t("modal.delete"),t:this.props.t,isPending:this.props.deleteDevicePending,deleteModalError:this.props.deleteModalError,deleteModalSuccess:this.props.deleteModalSuccess,successMsg:this.props.t("devices.deleteSuccess")});default:return null}},this.closeFlyout=()=>this.setState(J),this.onSoftSelectChange=(e,t)=>{const a=this.props.onSoftSelectChange;e?this.setState({openFlyoutName:"details",softSelectedDeviceId:e}):this.closeFlyout(),Object(m.L)(a)&&a(e,t)},this.setSelectedDevices=e=>this.setState({selectedDeviceList:e}),this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;Object(m.L)(a)&&(e.length>1?(this.setSelectedDevices(e),a(this.contextBtns.associateDevices)):1===e.length?(this.setSelectedDevices(e),a([this.contextBtns.associateDevices,this.contextBtns.delete])):(this.setSelectedDevices(e),a(null))),Object(m.L)(s)&&s(e)},this.getSoftSelectId=({id:e}="")=>e,this.state=z,this.state={selectedDeviceList:[]},this.columnDefs=[Object(r.a)({},c.c,{headerCheckboxSelection:!0}),p.name,p.deviceModelType,p.status,p.farmId,p.parentDevice,p.lastUpdated],this.contextBtns={associateDevices:i.a.createElement(v.R,{key:"associateDevices",permissions:b.h.updateDevices},i.a.createElement(v.b,{svg:m.ob.links,onClick:e=>{this.openAssociateDevicesFlyout(e),R.a.trackEvent({name:"UiEvent:Click: Open Associate Devices Flyout Btn"})}},e.t("devices.flyouts.associateDevices.title"))),delete:i.a.createElement(v.R,{key:"delete",permissions:b.h.deleteDevices},i.a.createElement(v.b,{svg:m.ob.trash,onClick:this.openModel("delete")},e.t("devices.flyouts.delete.title")))}}componentDidMount(){this.props.devices&&this.populateDevicesState(this.props.devices)}render(){const e=Object(r.a)({},f,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:this.state.softSelectedDeviceId||{}},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:this.props.t},onRowClicked:({node:e})=>e.setSelected(!e.isSelected()),onGridReady:this.onGridReady,onSoftSelectChange:this.onSoftSelectChange,onHardSelectChange:this.onHardSelectChange});return[i.a.createElement(v.K,Object.assign({key:"device-grid-key"},e)),this.getOpenFlyout(),this.getDeleteModel()]}}Object(s.b)(null,e=>({fetchDevices:()=>e(N.a.actions.fetchDevices())}))(V);var H=a(22);a(1010);const q={openFlyoutName:void 0},K={openDeleteDevicePopup:void 0};class W extends o.Component{constructor(e){super(e),this.closeFlyout=()=>this.setState(q),this.closeDeletePopup=()=>this.setState(K),this.onContextMenuChange=e=>this.setState({contextBtns:e,openFlyoutName:void 0}),this.onGridReady=e=>this.deviceGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.deviceGridApi&&this.deviceGridApi.setQuickFilter(e)},this.deleteDevicesById=e=>{this.setState({deleteModalSuccess:!1,deleteModalError:void 0,deleteDevicePending:!0}),this.subscription=H.h.deleteDevice(e[0].id).subscribe(()=>{this.props.deleteDevicesById([e[0].id]),this.setState({deleteModalError:void 0,deleteModalSuccess:!0,deleteDevicePending:!1})},e=>{this.setState({deleteModalError:e,deleteModalSuccess:!1,isPending:!1,changesApplied:!0,deleteDevicePending:!1})},()=>this.setState({isPending:!1,changesApplied:!0,ruleDeleted:!0}))},this.state=Object(r.a)({},q,{deviceList:void 0,contextBtns:null},K,{deleteModalSuccess:!1,deleteModalError:void 0,deleteDevicePending:!1});const t=this.props,a=t.deviceLastUpdated,s=t.deviceError,n=t.fetchDevices,o=t.farmLastUpdated,i=t.farmError,l=t.fetchFarms;a||s||n(),o||i||l()}render(){const e=this.props,t=e.t,a=e.deviceError,s=e.isDevicesPending,n=e.devices,r=e.isFarmsPending,o=this.state,l=o.deleteModalSuccess,c=o.deleteModalError,d=o.deleteDevicePending,m={deleteDevicesById:this.deleteDevicesById,onGridReady:this.onGridReady,rowData:s||r?void 0:n||[],onContextMenuChange:this.onContextMenuChange,t:t,deleteModalSuccess:l,deleteModalError:c,deleteDevicePending:d},u=a;return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:t("devices.searchPlaceholder")}),this.state.contextBtns)),i.a.createElement(v.z,{className:"devices-container"},i.a.createElement(v.A,{titleValue:t("devices.title").concat("(",String(n.length),")")}),!!u&&i.a.createElement(v.a,{t:t,error:u}),!u&&i.a.createElement(V,m)))}}var $=Object(T.a)(R.c,W,"Device Grid"),Q=a(24);const Z=Object(n.c)()(Object(s.b)(e=>({farms:Object(Q.c)(e),farmError:Object(Q.d)(e),farmLastUpdated:Object(Q.e)(e),isFarmsPending:Object(Q.g)(e),devices:Object(N.i)(e),deviceModels:Object(N.e)(e),deviceError:Object(N.j)(e),isDevicesPending:Object(N.l)(e),deviceLastUpdated:Object(N.k)(e)}),e=>({fetchDevices:()=>e(N.a.actions.fetchDevices()),fetchFarms:()=>e(Q.a.actions.fetchFarms()),fetchDeviceModel:()=>e(N.a.actions.fetchDeviceModel()),deleteDevicesById:t=>e(N.n.actions.deleteDevices(t))}))($)),Y=c.d.checkForEmpty,X={ruleName:{headerName:"rules.grid.ruleName",field:"name",sort:"asc",cellRendererFramework:d.e,comparator:m.g},description:{headerName:"rules.grid.description",field:"description",valueFormatter:({value:e})=>Y(e),comparator:m.g},severity:{headerName:"rules.grid.severity",field:"severityLevel",cellRendererFramework:d.d},severityIconOnly:{headerName:"rules.grid.severity",field:"severity",cellRendererFramework:e=>()=>i.a.createElement(d.d,Object.assign({},e,{iconOnly:!0}))},filter:{headerName:"rules.grid.farm",field:"farmName",valueFormatter:({value:e})=>Y(e),comparator:m.g},trigger:{headerName:"rules.grid.trigger",field:"sortableConditions",cellClass:"capitalize-cell"},status:{headerName:"rules.grid.status",field:"status",comparator:m.g},alertStatus:{headerName:"rules.grid.status",field:"status",cellClass:"capitalize-cell"},explore:{headerName:"rules.grid.explore",field:"ruleId",cellRendererFramework:e=>i.a.createElement(d.c,Object.assign({},e,{to:"/maintenance/rule/".concat(e.value)}))}},ee={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"single"};var te=a(20),ae=a.n(te),se=a(118),ne=a.n(se);a(1011);class re extends o.Component{constructor(e){super(e),this.clickedSetup=()=>{this.setState({clickedSetup:!0})},this.state={clickedSetup:!1}}render(){const e=this.props,t=e.t,a=e.actionSettings,s=void 0===a?{}:a,r=e.actionSettingsIsPending,o=e.actionSettingsError,l=e.actionIsPolling,c=e.actionPollingTimeout,d=e.applicationPermissionsAssigned,u=this.state.clickedSetup,p=ne.a.pick("Email.isEnabled",s),h=ne.a.pick("Email.settings.office365ConnectorUrl",s),f=u&&(r||l),g=!f&&!!o,b=!f&&!g&&!p&&!c,E=!f&&!g&&!p&&c,y=u&&!f&&!g&&p;return d?i.a.createElement("div",{className:"action-email-setup-container"},f&&i.a.createElement("div",{className:"action-email-setup"},i.a.createElement(v.w,{className:"action-indicator",size:"small"}),i.a.createElement("div",{className:"info-message"},t("rules.flyouts.ruleEditor.actions.checkingEmailSetup"))),g&&i.a.createElement("div",{className:"action-email-setup"},i.a.createElement(v.h,null,i.a.createElement(n.a,{i18nKey:"rules.flyouts.ruleEditor.actions.setupEmailError"},"An error occurred.",i.a.createElement(v.v,{href:h,onClick:this.clickedSetup,target:"_blank"},t("rules.flyouts.ruleEditor.actions.tryAgain"))))),b&&i.a.createElement("div",{className:"action-email-setup"},i.a.createElement(v.cb,{className:"icon",paths:m.pb.infoBubble}),i.a.createElement("div",{className:"info-message"},i.a.createElement(n.a,{i18nKey:"rules.flyouts.ruleEditor.actions.setupEmail"},"To send email alerts,",i.a.createElement(v.v,{href:h,onClick:this.clickedSetup,target:"_blank"},t("rules.flyouts.ruleEditor.actions.outlookLogin")),"is required."))),E&&i.a.createElement("div",{className:"action-email-setup"},i.a.createElement(v.cb,{className:"icon",paths:m.pb.infoBubble}),i.a.createElement("div",{className:"info-message"},i.a.createElement(n.a,{i18nKey:"rules.flyouts.ruleEditor.actions.setupEmailTimeout"},"Polling timed out.",i.a.createElement(v.v,{href:h,onClick:this.clickedSetup,target:"_blank"},t("rules.flyouts.ruleEditor.actions.tryAgain"))))),y&&i.a.createElement("div",{className:"action-email-setup"},i.a.createElement(v.cb,{className:"icon",paths:m.pb.checkmarkBubble}),i.a.createElement("div",{className:"info-message"},t("rules.flyouts.ruleEditor.actions.emailSetupConfirmed")))):null}}const oe=Object(n.c)()(Object(s.b)(e=>({actionSettings:Object(j.e)(e),actionSettingsIsPending:Object(j.g)(e),actionSettingsError:Object(j.f)(e),actionIsPolling:Object(j.c)(e),actionPollingError:Object(j.b)(e),actionPollingTimeout:Object(j.d)(e),applicationPermissionsAssigned:Object(j.h)(e)}))(re));a(1012),a(1013);class ie extends i.a.Component{render(){const e=this.props,t=e.devicesAffected,a=e.t;return i.a.createElement(v.ab,null,i.a.createElement(v.Y,null,i.a.createElement(v.Z,null,Object(m.o)(t)),i.a.createElement(v.V,null,a("rules.flyouts.ruleEditor.devicesAffected"))))}}class le extends i.a.Component{render(){return i.a.createElement(ie,{devicesAffected:m.w.call(this,this.props.rule.farmId,this.props.rule.conditions),t:this.props.t})}}const ce=Object(n.c)()(Object(s.b)(e=>({devices:Object(N.i)(e),sensors:Object(D.i)(e),sensorModels:Object(D.f)(e)}))(le));ce.propTypes={rule:C.a.object,farmId:C.a.string};const de=y.f.Section;let me=0,ue=0;const pe=()=>({field:void 0,operator:void 0,value:void 0,key:me++}),he=()=>({type:"Email",parameters:{recipients:[],notes:"",subject:""},key:ue++});let fe=!1;const ge=/^[a-zA-Z0-9_]*$/,be=e=>!e.match(ge);class ve extends m.d{constructor(e){super(e),this.fetchApiData=()=>{const e=this.props,t=e.fetchSensors,a=e.fetchSensorModels,s=e.fetchDevices,n=e.isSensorsPending,r=e.sensorLastUpdated,o=e.sensorModelsLastUpdated,i=e.sensorModelsIsPending,l=e.devicesLastUpdated,c=e.isDevicesPending;r||n||t(),o||i||a(),c||l||s()},this.setFormState=e=>this.setState({formData:Object(r.a)({},e,{conditions:(e.conditions||[]).map(e=>Object(r.a)({},e,{key:me++})),actions:e.actions&&0!==e.actions.length?e.actions.map(e=>Object(r.a)({},e,{key:ue++})):[he()],actionEnabled:void 0!==e.actions&&(e.actions||[]).length>0,enabled:e.status===m.bb.enabled}),editableRule:e}),this.toSelectOption=({id:e,name:t})=>({label:t,value:e}),this.addCondition=()=>{this.conditionsLink.set([...this.conditionsLink.value,pe()])},this.filteredModelMeasures=({name:e})=>({label:e,value:e}),this.deleteCondition=e=>()=>this.conditionsLink.set(this.conditionsLink.value.filter((t,a)=>e!==a)),this.apply=e=>{e.preventDefault();const t=this.props,a=t.insertRules,s=t.modifyRules,n=t.t,o=Object(r.a)({},this.state.formData),i=this.state.newEmail;if(o.calculation=b.i[1],o.calculation===b.i[1]&&(o.timePeriod=""),!1===this.state.formData.actionEnabled&&(o.actions=[]),this.formIsValid()){if(this.setState({isPending:!0,error:null}),this.subscription&&this.subscription.unsubscribe(),this.state.formData.actionEnabled){const e=o.actions[0];if(""!==i&&(e.parameters.recipients.push(i),this.setState({newEmail:""})),""===e.parameters.subject){const t=o.name;e.parameters.subject=n("rules.flyouts.ruleEditor.actions.defaultEmailSubject",{ruleName:t})}}this.props.rule?this.subscription=H.f.updateRule(this.props.rule.id,Object(b.l)(o)).subscribe(e=>{const t=Object(r.a)({},this.state.editableRule,{},o);s([Object(r.a)({},t)]),this.setState({isPending:!1,changesApplied:!0,isEditedRuleSucceeded:!0})},e=>{this.setState({error:e,isPending:!1,changesApplied:!0,isEditedRuleSucceeded:!1})}):this.subscription=H.f.createRule(Object(b.l)(o)).subscribe(e=>{a([e]),this.setState({isPending:!1,changesApplied:!0,isNewRuleSucceeded:!0})},e=>this.setState({error:e,isPending:!1,changesApplied:!0,isNewRuleSucceeded:!1}))}},this.onGroupIdChange=({target:{value:{value:e={}}}})=>{this.setState(e=>({sensorMeasuresForCurrentFarm:[],fieldQueryPending:!0,isPending:!0,formData:Object(r.a)({},e.formData,{conditions:[pe()]})})),this.getDeviceCountAndFields(e),this.formControlChange()},this.onAddEmail=e=>t=>{if("Enter"===t.key&&(t.preventDefault(),!this.newEmailLink.error&&""!==this.newEmailLink.value)){const t=ae()(this.state,Object(r.a)({},e.setter({$set:[...e.value,this.newEmailLink.value]}),{},this.newEmailLink.setter({$set:""})));this.setState(t)}this.formControlChange()},this.deleteEmail=e=>t=>()=>t.set(t.value.filter((t,a)=>e!==a)),this.onStatusToggle=({target:{value:e}})=>{this.setState({formData:Object(r.a)({},this.state.formData,{status:e?m.q:m.n})}),this.formControlChange()},this.onCalculationChange=({target:{value:{value:e={}}}})=>{this.formControlChange()},this.onFieldChange=(e,{target:{value:{value:t={}}}})=>{this.formControlChange()},this.onOperatorChange=(e,{target:{value:{value:t={}}}})=>{this.formControlChange()},this.onSeverityChange=({target:{value:e}})=>{this.formControlChange()},this.onCloseClick=()=>{(0,this.props.onClose)()},this.formControlChange=()=>{this.state.changesApplied&&this.setState({changesApplied:!1})},this.deletePill=e=>t=>()=>{e.set(e.value.filter((e,a)=>t!==a)),this.formControlChange()},this.onActionToggle=({target:{value:e}})=>{this.setState({formData:Object(r.a)({},this.state.formData,{actionEnabled:e})}),this.formControlChange()},this.props.sensorLastUpdated||this.props.sensorError||this.props.fetchSensorModels(),this.state={error:void 0,fieldOptions:[],sensorMeasuresForCurrentFarm:[],fieldQueryPending:!0,formData:{name:"",description:"",groupId:"",calculation:"",timePeriod:"",farmId:"",conditions:[pe()],actions:[he()],severityLevel:l.a.ruleSeverity.critical,status:m.bb.enabled,actionEnabled:!1},newEmail:"",isPending:!1,changesApplied:!1,isNewRuleSucceeded:void 0,isEditedRuleSucceeded:void 0,editableRule:void 0};const t=this.props,a=t.fetchFarms,s=t.farmsLastUpdated,n=t.farmsError;s||n||a(),this.newEmailLink=this.linkTo("newEmail").check(e=>Object(m.P)(e),()=>this.props.t("rules.flyouts.ruleEditor.actions.syntaxError")),this.affectedDevicesCount=Object(w.a)((e,t)=>m.w.call(this,e,t))}componentWillMount(){this.fetchApiData()}componentDidMount(){const e=this.props.rule;e&&(this.getDeviceCountAndFields(e.farmId),this.setFormState(e))}componentWillReceiveProps(e){this.setState({changesApplied:!1,isNewRuleSucceeded:void 0,isEditedRuleSucceeded:void 0,editableRule:void 0});const t=e.rule;t&&(this.getDeviceCountAndFields(t.farmId),this.setFormState(t))}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}formIsValid(){const e=[this.ruleNameLink,this.deviceGroupLink,this.actionsLink];return fe||e.push(this.conditionsLink),e.every(e=>!e.error)}getDeviceCountAndFields(e){const t=this.props.devices.filter(t=>t.farmId===e).map(e=>e.id),a=this.props.sensors.filter(e=>t.includes(e.deviceId)).map(e=>e.sensorModelId),s=this.props.sensorModels.filter(e=>a.includes(e.id)),n=new Set,r=s.flatMap(e=>e.sensorMeasures).map(e=>{if(!n.has(e.name))return n.add(e.name),e}).filter(e=>void 0!==e);this.setState({sensorMeasuresForCurrentFarm:r,fieldQueryPending:!1,isPending:!1}),this.formControlChange()}getConditionFields(e,t){const a=[];e.filter(e=>void 0!==e.farmId&&null!==e.farmId).forEach(e=>{const t=this.props.sensor.filter(t=>t.hardwareId===e.id),s=this.props.sensortype;"undefined"!==s&&t.forEach((function(e){s.forEach((function(t){if(e.sensorTypeId===t.id&&(void 0!==t.sensorMeasures||null!==t.sensorMeasures))for(let e=0;e<t.sensorMeasures.length;e++)a.push(t.sensorMeasures[e].name)}))}))});const s=new Set;return a.forEach(e=>{s.add(e)}),t.forEach(({moduleFields:e={}})=>{Object.keys(e).forEach(e=>{s.add(e)})}),[...s.values()].map(e=>({label:e,value:e}))}render(){const e=this.props,t=e.t,a=e.rule,s=this.state,n=s.changesApplied,r=s.error,o=s.fieldQueryPending,c=s.formData,u=s.isPending,p=s.isNewRuleSucceeded,h=s.isEditedRuleSucceeded,f=(a||{}).id;fe="default_Health_Monitor"===f;const g=this.affectedDevicesCount(c.farmId,c.conditions),E=this.props.farms.map(this.toSelectOption),y=this.state.sensorMeasuresForCurrentFarm.map(this.filteredModelMeasures),S=(new m.e).check(m.e.notEmpty,t("rules.flyouts.ruleEditor.validation.required"));this.formDataLink=this.linkTo("formData"),this.ruleNameLink=this.formDataLink.forkTo("name").withValidator(S).reject(be).check(m.e.notEmpty,()=>this.props.t("rules.flyouts.ruleEditor.errorMsg.fieldCantBeEmpty")).check(m.e.noSpaces,()=>this.props.t("rules.flyouts.ruleEditor.errorMsg.spaceNotAllowed")).check(m.e.charlength,()=>this.props.t("rules.flyouts.ruleEditor.errorMsg.maxlength")).check(m.e.notEmpty,()=>t("farms.errorMsg.required")).check(e=>!this.props||m.e.maxlength(e,1e3),()=>t("farms.errorMsg.maxLengthAddress")).check(m.e.minlength,()=>t("farms.errorMsg.minLength")),this.descriptionLink=this.formDataLink.forkTo("description"),this.deviceGroupLink=this.formDataLink.forkTo("farmId").map(({value:e})=>e).withValidator(S),this.conditionsLink=this.formDataLink.forkTo("conditions").withValidator(S),this.actionsLink=this.formDataLink.forkTo("actions").withValidator(S),this.severityLink=this.formDataLink.forkTo("severityLevel"),this.enabledLink=this.formDataLink.forkTo("enabled");const O=this.conditionsLink.getLinkedChildren(e=>{const a=e.forkTo("field").map(({value:e})=>e).withValidator(S),s=e.forkTo("operator").map(({value:e})=>e).withValidator(S),n=e.forkTo("value").check(m.e.notEmpty,()=>this.props.t("rules.flyouts.ruleEditor.validation.required")).check(e=>!isNaN(e),t("rules.flyouts.ruleEditor.validation.nan"));return{fieldLink:a,operatorLink:s,valueLink:n,error:a.error||s.error||n.error}}),C=this.actionsLink.getLinkedChildren(e=>{const t=e.forkTo("parameters"),a=t.forkTo("recipients").check(e=>""!==this.state.newEmail&&Object(m.P)(this.state.newEmail)||e.length>0&&Object(m.P)(this.state.newEmail),this.props.t("rules.flyouts.ruleEditor.validation.required"));return{recipientsLink:a,notesLink:t.forkTo("notes"),subjectLink:t.forkTo("subject"),error:!!c.actionEnabled&&a.error}}),j=O.some(({error:e})=>e),N=C.some(({error:e})=>e),D=b.j.map(e=>({label:t("rules.flyouts.ruleEditor.condition.operatorOptions.".concat(e)),value:e}));return i.a.createElement("form",{onSubmit:this.apply,className:"new-rule-flyout-container"},i.a.createElement(de.Container,{className:"rule-property-container"},i.a.createElement(de.Content,null,i.a.createElement(v.q,null,i.a.createElement(v.r,{isRequired:"true"},t("rules.flyouts.ruleEditor.ruleName")),i.a.createElement(v.p,{type:"text",className:"long",maxLength:26,placeholder:t("rules.flyouts.ruleEditor.namePlaceholder"),onChange:this.formControlChange,link:this.ruleNameLink,disabled:fe})),i.a.createElement(v.q,null,i.a.createElement(v.r,null,t("rules.flyouts.ruleEditor.description")),i.a.createElement(v.p,{type:"textarea",placeholder:t("rules.flyouts.ruleEditor.descriptionPlaceholder"),onChange:this.formControlChange,link:this.descriptionLink,disabled:fe})),i.a.createElement(v.q,{className:"farm-dropdown"},i.a.createElement(v.r,{isRequired:"true"},t("rules.flyouts.ruleEditor.deviceGroup")),i.a.createElement(v.p,{type:"select",className:"long",options:E,onChange:this.onGroupIdChange,clearable:!1,searchable:!0,matchProp:"label",placeholder:t("rules.flyouts.ruleEditor.deviceGroupPlaceholder"),link:this.deviceGroupLink,disabled:fe})))),!o&&i.a.createElement("div",null,!fe&&O.map((e,a)=>i.a.createElement(de.Container,{key:c.conditions[a].key},i.a.createElement(de.Header,null,t("rules.flyouts.ruleEditor.condition.condition")," ",a+1),i.a.createElement(de.Content,null,i.a.createElement(v.q,{className:"farm-dropdown"},i.a.createElement(v.r,{isRequired:"true"},t("rules.flyouts.ruleEditor.condition.field")),i.a.createElement(v.p,{type:"select",className:"long",placeholder:t("rules.flyouts.ruleEditor.condition.fieldPlaceholder"),onChange:e=>this.onFieldChange(a+1,e),link:e.fieldLink,options:y,clearable:!1,searchable:!0,matchProp:"label"})),i.a.createElement(v.q,{className:"farm-dropdown"},i.a.createElement(v.r,{isRequired:"true"},t("rules.flyouts.ruleEditor.condition.operator")),i.a.createElement(v.p,{type:"select",className:"long",placeholder:t("rules.flyouts.ruleEditor.condition.operatorPlaceholder"),onChange:e=>this.onOperatorChange(a+1,e),link:e.operatorLink,options:D,clearable:!1,searchable:!0,matchProp:"label"})),i.a.createElement(v.q,null,i.a.createElement(v.r,{isRequired:"true"},t("rules.flyouts.ruleEditor.condition.value")),i.a.createElement(v.p,{type:"text",placeholder:t("rules.flyouts.ruleEditor.condition.valuePlaceholder"),onChange:this.formControlChange,link:e.valueLink})),O.length>1&&i.a.createElement(v.b,{className:"padded-top",svg:m.ob.trash,onClick:this.deleteCondition(a)},t("rules.flyouts.ruleEditor.delete"))))),!fe&&i.a.createElement(de.Container,{collapsable:!1},i.a.createElement(de.Header,null,i.a.createElement(v.b,{svg:m.ob.plus,className:"add-condition",onClick:this.addCondition},t("rules.flyouts.ruleEditor.addCondition")))),i.a.createElement(de.Container,{collapsable:!1},i.a.createElement(de.Header,null,t("rules.flyouts.ruleEditor.severityLevel")),i.a.createElement(de.Content,null,i.a.createElement(v.q,null,i.a.createElement(v.T,{onChange:this.onSeverityChange,link:this.severityLink,value:l.a.ruleSeverity.critical},i.a.createElement(v.r,null,i.a.createElement(d.d,{value:l.a.ruleSeverity.critical,context:{t:t}}))),i.a.createElement(v.T,{onChange:this.onSeverityChange,link:this.severityLink,value:l.a.ruleSeverity.warning},i.a.createElement(v.r,null,i.a.createElement(d.d,{value:l.a.ruleSeverity.warning,context:{t:t}}))),i.a.createElement(v.T,{onChange:this.onSeverityChange,link:this.severityLink,value:l.a.ruleSeverity.info},i.a.createElement(v.r,null,i.a.createElement(d.d,{value:l.a.ruleSeverity.info,context:{t:t}}))))),i.a.createElement(de.Container,{collapsable:!1},i.a.createElement(de.Header,null,t("rules.flyouts.ruleEditor.actions.action")),i.a.createElement("div",{className:"email-toggle-container"},i.a.createElement(v.eb,{value:c.actionEnabled,onChange:this.onActionToggle},c.actionEnabled?t("rules.flyouts.ruleEditor.actions.on"):t("rules.flyouts.ruleEditor.actions.off"))),c.actionEnabled&&i.a.createElement(oe,null),i.a.createElement(de.Content,null,c.actionEnabled&&C.map((e,a)=>i.a.createElement(de.Content,{key:c.actions[a].key},i.a.createElement("p",{className:"padded-top"},t("rules.flyouts.ruleEditor.actions.emailAddresses")),i.a.createElement(v.q,null,i.a.createElement(v.p,{type:"text",className:"long",onKeyPress:this.onAddEmail(e.recipientsLink),link:this.newEmailLink,placeholder:t("rules.flyouts.ruleEditor.actions.enterEmail")})),i.a.createElement(v.L,{pills:e.recipientsLink.value,svg:m.ob.cancelX,onSvgClick:this.deletePill(e.recipientsLink),altSvgText:t("rules.flyouts.ruleEditor.actions.deleteEmail")}),i.a.createElement("p",{className:"padded-top"},t("rules.flyouts.ruleEditor.actions.emailSubject")),i.a.createElement(v.q,null,i.a.createElement(v.p,{type:"textarea",link:e.subjectLink,placeholder:t("rules.flyouts.ruleEditor.actions.enterEmailSubject"),onChange:this.formControlChange})),i.a.createElement("p",{className:"padded-top"},t("rules.flyouts.ruleEditor.actions.emailComments")),i.a.createElement(v.q,null,i.a.createElement(v.p,{type:"textarea",link:e.notesLink,placeholder:t("rules.flyouts.ruleEditor.actions.enterEmailComments"),onChange:this.formControlChange})))))),i.a.createElement(de.Container,null,i.a.createElement(de.Header,null,t("rules.flyouts.ruleEditor.ruleStatus")),i.a.createElement(de.Content,null,i.a.createElement(v.q,null,i.a.createElement(v.eb,{value:c.status===m.q,onChange:this.onStatusToggle},c.status===m.q?t("rules.flyouts.ruleEditor.ruleEnabled"):t("rules.flyouts.ruleEditor.ruleDisabled"))))))),i.a.createElement(ie,{devicesAffected:g,t:t}),!0===p&&i.a.createElement(v.X,{className:"rule-editor-success",t:t,successMsg:t("rules.flyouts.ruleEditor.newRuleSuccess")}),!0===h&&i.a.createElement(v.X,{className:"rule-editor-success",t:t,successMsg:t("rules.flyouts.ruleEditor.editRuleSucceess")}),r&&i.a.createElement(v.a,{className:"rule-editor-error",t:t,error:r}),i.a.createElement(v.c,null,!n&&i.a.createElement(v.b,{primary:!0,disabled:u||!this.formIsValid()||j||N,type:"submit",onClick:()=>{R.a.trackEvent({name:"UiEvent:Click: "+(this.props.rule?"Edit":"New")+" Rule Btn"},{context:{conditions:this.state.formData.conditions,actionsLength:this.state.formData.actions.length}})},id:u||!this.formIsValid()||j||N?"applyRuleBtnDisabled":"applyRuleBtn"},t("rules.flyouts.ruleEditor.apply"))))}}var Ee=a(39);const ye=Object(n.c)()(Object(s.b)((e,t)=>({rules:Object(Ee.i)(e),rule:Object(Ee.h)(e,t.ruleId),sensorError:Object(D.g)(e),farms:Object(Q.c)(e),farmsError:Object(Q.d)(e),isFarmsPending:Object(Q.g)(e),farmsLastUpdated:Object(Q.e)(e),devices:Object(N.i)(e),sensors:Object(D.i)(e),sensorModels:Object(D.f)(e),sensorsLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),sensorModelsLastUpdated:Object(D.d)(e),sensorModelsIsPending:Object(D.e)(e),devicesLastUpdated:Object(N.k)(e),isDevicesPending:Object(N.l)(e)}),e=>({fetchFarms:()=>e(Q.a.actions.fetchFarms()),insertRules:t=>e(Ee.n.actions.insertRules(t)),modifyRules:t=>e(Ee.n.actions.modifyRules(t)),fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchSensorModels:()=>e(D.a.actions.fetchSensorModels()),fetchDevices:()=>e(N.a.actions.fetchDevices())}))(ve));class Se extends o.Component{constructor(...e){super(...e),this.onTopXClose=()=>{(0,this.props.onClose)()}}componentDidMount(){R.a.trackEvent({name:"UiEvent:FlyOpen: Rule Edit"})}componentWillUnmount(){R.a.trackEvent({name:"UiEvent:FlyClose: Rule Edit"})}componentDidUpdate(e){e.ruleId!==this.props.ruleId&&R.a.trackEvent({name:"UiEvent:FlyChange: Rule Edit"})}render(){const e=this.props,t=e.onClose,a=e.t,s=e.ruleId;return i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null,a("rules.flyouts.editRule")),i.a.createElement(y.f.CloseBtn,{onClick:this.onTopXClose})),i.a.createElement(y.f.Content,null,i.a.createElement(v.R,{permissions:b.h.updateRules},(e,n)=>e?i.a.createElement(ye,{onClose:t,ruleId:s}):i.a.createElement("div",null,i.a.createElement(v.S,{t:a,permissions:n}),i.a.createElement("p",null,"A read-only view will be added soon as part of another PBI.")))))}}var Oe=Object(T.a)(R.c,Se,"Edit Rule Flyout");class Ce extends o.Component{constructor(...e){super(...e),this.onTopXClose=()=>{(0,this.props.onClose)()}}render(){const e=this.props,t=e.onClose,a=e.t;return i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null,a("rules.flyouts.newRule")),i.a.createElement(y.f.CloseBtn,{onClick:this.onTopXClose})),i.a.createElement(y.f.Content,null,i.a.createElement(v.R,{permissions:b.h.createRules},i.a.createElement(ye,{onClose:t}))))}}var je=Object(T.a)(R.c,Ce,"New Rule Flyout");a(1014);const Ne=y.f.Section;class De extends o.Component{constructor(e){super(e),this.fetchApiData=()=>{const e=this.props,t=e.fetchSensors,a=e.fetchSensorModels,s=e.isSensorsPending,n=e.sensorLastUpdated,r=e.sensorModelsLastUpdated,o=e.sensorModelsIsPending;n||s||t(),r||o||a()},this.state={devicesAffected:null}}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidMount(){this.fetchApiData()}render(){const e=this.props,t=e.rule,a=e.t,s=e=>void 0===e?": "+l.a.emptyValue:": "+e;return i.a.createElement("div",{className:"view-rule-flyout-container"},i.a.createElement(Ne.Container,null,i.a.createElement(Ne.Content,{className:"ruleviewer-table"},i.a.createElement("table",{className:"rule-description"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.Description")),i.a.createElement("td",null,s(t.description))))),i.a.createElement(v.O,null,i.a.createElement(v.Q,{className:"ruledetails-table"},i.a.createElement(v.N,{className:"col-5"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.RuleName")),i.a.createElement("td",null,s(t.name))),i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.CreatedAt")),i.a.createElement("td",null,s(k()(t.createdAt).format(m.m)))),i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.SeverityLevel")),i.a.createElement("td",null,s(t.severityLevel)))))),i.a.createElement(v.N,{className:"col-5"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.Farm")),i.a.createElement("td",null,Object(m.J)(t.farmId)?i.a.createElement(A.a,{className:"farmLink",to:{pathname:"/farms/".concat(t.farmId),state:{id:t.farmId,farmName:this.props.farm.name}}},s(this.props.farm.name)):i.a.createElement("div",null,s(a("rules.flyouts.ruleViewer.farmDoesNotExist"))))),i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.LastModifiedAt")),i.a.createElement("td",null,s(k()(t.lastModifiedAt).format(m.m)))),i.a.createElement("tr",null,i.a.createElement("th",null,a("rules.flyouts.ruleViewer.Status")),i.a.createElement("td",null,s(t.status)))))))))),t.conditions.length>0&&i.a.createElement(Ne.Container,{collapsable:!1},i.a.createElement(Ne.Header,{className:"ruleflyout-section-header"},a("rules.flyouts.ruleEditor.conditions")),i.a.createElement(Ne.Content,null,i.a.createElement(v.O,{className:"row-grid"},i.a.createElement(v.P,null,i.a.createElement(v.Q,null,i.a.createElement(v.N,{className:"col-4"},a("rules.flyouts.ruleEditor.condition.field")),i.a.createElement(v.N,{className:"col-3"},a("rules.flyouts.ruleEditor.condition.operator")),i.a.createElement(v.N,{className:"col-3"},a("rules.flyouts.ruleEditor.condition.value")))),t.conditions.map((e,t)=>i.a.createElement(v.Q,{key:t},i.a.createElement(v.N,{className:"col-4"},e.field),i.a.createElement(v.N,{className:"col-3"},Object(m.z)(a,"rules.flyouts.ruleEditor.condition.operatorOptions",e.operator)),i.a.createElement(v.N,{className:"col-3"},e.value)))))),t.actions&&t.actions.length>0&&i.a.createElement(Ne.Container,{collapsable:!1},i.a.createElement(Ne.Header,{className:"ruleflyout-section-header"},a("rules.flyouts.ruleEditor.actions.action")),i.a.createElement(Ne.Content,{className:"rule-action"},i.a.createElement("div",{className:"rule-prop-label"},a("rules.flyouts.ruleEditor.actions.emailAddresses")),i.a.createElement("div",{className:"rule-prop-value"},t.actions[0].parameters.recipients.join(", ")),i.a.createElement("div",{className:"rule-prop-label"},a("rules.flyouts.ruleEditor.actions.emailSubject")),i.a.createElement("div",{className:"rule-prop-value"},t.actions[0].parameters.subject),i.a.createElement("div",{className:"rule-prop-label"},a("rules.flyouts.ruleEditor.actions.emailComments")),i.a.createElement("div",{className:"rule-prop-value"},t.actions[0].parameters.notes))),i.a.createElement(ce,{rule:t,t:a}))}}const Me=Object(n.c)()(Object(s.b)((e,t)=>({rule:Object(Ee.h)(e,t.ruleId),devices:Object(N.i)(e),sensors:Object(D.i)(e),sensorModels:Object(D.f)(e),sensorsLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),sensorModelsLastUpdated:Object(D.d)(e),sensorModelsIsPending:Object(D.e)(e),farm:Object(Q.b)(e,Object(Ee.h)(e,t.ruleId).farmId)}),e=>({fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchSensorModels:()=>e(D.a.actions.fetchSensorModels())}),null)(De));a(1015);class Ae extends o.Component{constructor(e){super(e),this.goToEditMode=()=>{this.setState({isEditable:!0})},this.state={isEditable:!1}}componentDidMount(){R.a.trackEvent({name:"UiEvent:FlyOpen: Rule Details"})}componentWillUnmount(){R.a.trackEvent({name:"UiEvent:FlyClose: Rule Details"})}componentDidUpdate(e){e.ruleId!==this.props.ruleId&&(R.a.trackEvent({name:"UiEvent:FlyChange: Rule Details"}),this.setState({isEditable:!1}))}render(){const e=this.props,t=e.t,a=e.onClose,s=e.ruleId,n=this.state.isEditable;return i.a.createElement("div",{className:this.props.className?this.props.className:""},i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null,t(n?"rules.flyouts.editRule":"rules.flyouts.viewRule")),i.a.createElement(y.f.CloseBtn,{onClick:()=>this.props.onClose()})),i.a.createElement(y.f.Content,{className:"rule-details"},n?i.a.createElement(v.R,{id:"rule-details-edit",permission:b.h.updateRules},(e,n)=>e?i.a.createElement(ye,{onClose:a,ruleId:s}):i.a.createElement(v.S,{t:t,permissions:n})):i.a.createElement(v.e,null,i.a.createElement(Me,{onClose:a,ruleId:s}),i.a.createElement(v.R,{permissions:b.h.updateRules},i.a.createElement(v.b,{className:"edit-mode-btn",svg:m.ob.edit,onClick:this.goToEditMode},t("rules.flyouts.edit")))))))}}var Ie=Object(T.a)(R.c,Ae,"Rule Details Flyout"),ke=a(26);a(1016);class Fe extends o.Component{constructor(e){super(e),this.onToggle=({target:{value:e}})=>{this.setState({status:e,changesApplied:!1})},this.changeRuleStatus=e=>{e.preventDefault();const t=this.state,a=t.rules,s=t.status;if(this.setState({isPending:!0,error:null}),void 0!==a){const e=a.map(e=>Object(r.a)({},e,{status:s?m.q:m.n}));this.subscription=ke.Observable.from(e).flatMap(e=>H.f.updateRule(e.id,Object(b.l)(e)).map(t=>Object(r.a)({},e,{eTag:t.eTag}))).subscribe(e=>{this.props.modifyRules([e])},e=>this.setState({isPending:!1,changesApplied:!0,isRuleStatusChanged:!1,ruleStatusError:e}),()=>this.setState({isPending:!1,changesApplied:!0,isRuleStatusChanged:!0}))}},this.state={isPending:!1,error:void 0,changesApplied:void 0,isRuleStatusChanged:void 0,ruleStatusError:void 0}}componentDidMount(){const e=this.props.rules;this.setState({rules:e,status:1===e.length&&e[0].status!==m.q})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const e=this.props,t=e.onClose,a=e.t,s=e.rules,n=this.state,r=n.isPending,o=n.status,l=n.changesApplied,c=n.isRuleStatusChanged,d=n.ruleStatusError;return i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null,a("rules.flyouts.statusTitle")),i.a.createElement(y.f.CloseBtn,{onClick:t})),i.a.createElement(y.f.Content,null,i.a.createElement(v.R,{permissions:b.h.updateRules},i.a.createElement("form",{onSubmit:this.changeRuleStatus,className:"disable-rule-flyout-container"},i.a.createElement("div",{className:"padded-top-bottom"},i.a.createElement(v.eb,{value:o,onChange:this.onToggle},a(o?"rules.flyouts.enable":"rules.flyouts.disable"))),s&&s.map((e,t)=>i.a.createElement(ce,{key:e.id,rule:e})),r&&i.a.createElement(v.w,null),!0===c&&i.a.createElement(v.X,{className:"rule-status-success",t:a,successMsg:s.length>1?a("rules.flyouts.ruleStatusSuccess.plural"):a("rules.flyouts.ruleStatusSuccess.singular")}),d&&i.a.createElement(v.a,{className:"rule-status-error",t:a,error:d}),i.a.createElement(v.c,null,!l&&!r&&i.a.createElement(v.b,{primary:!0,type:"submit",id:"applyRuleBtn"},a("rules.flyouts.ruleEditor.apply")))))))}}const we=Object(n.c)()(Object(s.b)(null,e=>({modifyRules:t=>e(Ee.n.actions.modifyRules(t))}))(Fe));a(1017);class Re extends o.Component{constructor(e){super(e),this.deleteRule=()=>{const e=this.props.rule;this.setState({isPending:!0,error:null}),this.subscription=H.f.deleteRule(e.id).subscribe(()=>{this.props.deleteRule([e.id]),this.setState({isPending:!1,isRuleDeleted:!0})},e=>this.setState({ruleDeletionError:e,isPending:!1}),()=>this.setState({isPending:!1,isRuleDeleted:!0}))},this.state={isPending:!1,isRuleDeleted:void 0,ruleDeletionError:void 0}}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const e=this.props,t=e.onClose,a=e.t;return i.a.createElement(E.a,{onClose:t,deleteItem:this.deleteRule,title:a("rules.flyouts.deleteRule.title"),deleteConfirmation:a("rules.flyouts.deleteRule.preDeleteText"),deleteBtn:a("modal.delete"),icon:m.ob.trash,t:a,isPending:this.state.isPending,deleteModalError:this.state.ruleDeletionError,deleteModalSuccess:this.state.isRuleDeleted,successMsg:a("rules.flyouts.deleteRule.deleteConfirmation")})}}const Te=Object(n.c)()(Object(s.b)(null,e=>({modifyRules:t=>e(Ee.n.actions.modifyRules(t)),deleteRule:t=>e(Ee.n.actions.deleteRule(t)),fetchRules:()=>e(Ee.a.actions.fetchRules())}))(Re));a(1018);const Pe={openFlyoutName:void 0,softSelectedRuleId:void 0};class xe extends o.Component{constructor(e){super(e),this.openEditRuleFlyout=()=>{this.setState({openFlyoutName:"edit"})},this.openStatusFlyout=()=>this.setState({openFlyoutName:"status"}),this.openDeleteFlyout=()=>this.setState({openFlyoutName:"delete"}),this.openNewRuleFlyout=()=>this.setState({openFlyoutName:"newRule"}),this.setSelectedRules=e=>this.setState({selectedRules:e}),this.getOpenFlyout=()=>{switch(this.state.openFlyoutName){case"view":return i.a.createElement(Ie,{onClose:this.closeFlyout,className:"rulesview-flyout",t:this.props.t,ruleId:this.state.softSelectedRuleId||this.state.selectedRules[0].id,key:"view-rule-flyout"});case"edit":return i.a.createElement(Oe,{onClose:this.closeFlyout,t:this.props.t,ruleId:this.state.softSelectedRuleId||this.state.selectedRules[0]&&this.state.selectedRules[0].id,key:"edit-rule-flyout"});case"status":return i.a.createElement(we,{onClose:this.closeFlyout,t:this.props.t,rules:this.state.selectedRules,key:"edit-rule-flyout"});case"delete":return i.a.createElement(Te,{onClose:this.closeFlyout,t:this.props.t,rule:this.state.selectedRules[0],key:"delete-rule-flyout",refresh:this.props.refresh});case"newRule":return i.a.createElement(je,{t:this.props.t,onClose:this.closeFlyout});default:return null}},this.onHardSelectChange=e=>{this.setState({selectedRules:e});const t=this.props.onContextMenuChange;1===e.length?t([this.contextBtns.delete,this.contextBtns.changeStatus,this.contextBtns.edit]):t([this.contextBtns.addNewRule])},this.onSoftSelectChange=e=>{e&&this.setState({openFlyoutName:"view",softSelectedRuleId:e})},this.getSoftSelectId=({id:e}="")=>e,this.closeFlyout=()=>this.setState(Pe),this.state=Object(r.a)({},Pe,{selectedRules:void 0}),this.columnDefs=[c.c,X.ruleName,X.description,X.severity,X.filter,X.trigger,X.status],this.contextBtns={changeStatus:i.a.createElement(v.R,{key:"changeStatus",permissions:b.h.updateRules},i.a.createElement(v.b,{className:"rule-status-btn",svg:m.ob.changeStatus,onClick:()=>{this.openStatusFlyout(),R.a.trackEvent({name:"UiEvent:Click: Chg Rule Status Fly Open Btn"})}},i.a.createElement(n.a,{i18nKey:"rules.flyouts.changeStatus"},"Change status"))),edit:i.a.createElement(v.R,{key:"edit",permissions:b.h.updateRules},i.a.createElement(v.b,{svg:m.ob.edit,onClick:()=>{this.openEditRuleFlyout(),R.a.trackEvent({name:"UiEvent:Click: Edit Rule Fly Open Btn"})},className:"edit-rule"},e.t("rules.flyouts.edit"))),delete:i.a.createElement(v.R,{key:"delete",permissions:b.h.deleteRules},i.a.createElement(v.b,{svg:m.ob.trash,onClick:()=>{this.openDeleteFlyout(),R.a.trackEvent({name:"UiEvent:Click: Del Rule Btn"})}},i.a.createElement(n.a,{i18nKey:"rules.flyouts.delete"},"Delete"))),addNewRule:i.a.createElement(v.R,{key:"newRule",permissions:b.h.createRules},i.a.createElement(v.b,{svg:m.ob.plus,onClick:()=>{this.openNewRuleFlyout(),R.a.trackEvent({name:"UiEvent:Click: New Rule Fly Open Btn"})}},e.t("rules.flyouts.newRule")))},this.props.onContextMenuChange([this.contextBtns.addNewRule])}render(){const e=Object(r.a)({},ee,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:this.state.softSelectedRuleId||{},deltaRowDataMode:!0},this.props,{getRowNodeId:({id:e})=>e,enableSorting:!0,unSortIcon:!0,context:{t:this.props.t},onRowClicked:({node:e})=>e.setSelected(!e.isSelected()),onHardSelectChange:this.onHardSelectChange,onSoftSelectChange:this.onSoftSelectChange});return i.a.createElement(v.e,null,i.a.createElement(v.K,e),this.getOpenFlyout())}}a(1019);class Ue extends o.Component{constructor(e){super(e),this.onGridReady=e=>this.rulesGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.rulesGridApi&&this.rulesGridApi.setQuickFilter(e)},this.onContextMenuChange=e=>this.setState({contextBtns:e}),this.state={contextBtns:null},this.props.lastUpdated||this.props.error||this.props.fetchRules(),this.props.farmsLastUpdated||this.props.farmsError||this.props.fetchFarms(),this.props.devicesLastUpdated||this.props.devicesError||this.props.fetchDevices(),this.props.sensorsLastUpdated||this.props.sensorsError||this.props.fetchSensors(),this.props.sensorModelsLastUpdated||this.props.isSensorModelsPending||this.props.fetchSensorModels()}getRulesList(e,t){let a;const s=t.map(e=>Object(r.a)({},e));return s.forEach(t=>{a=e.find(e=>e.id===t.farmId),t.farmName=void 0===a?void 0:a.name}),s}render(){const e=this.getRulesList(this.props.farms,this.props.rules),t=this.props,a=t.t,s=t.error,n=t.isRulesPending,r=t.isFarmsPending,o=n||r,l={onGridReady:this.onGridReady,rowData:o?void 0:e||[],onContextMenuChange:this.onContextMenuChange,t:this.props.t,refresh:this.refreshRulesData};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0,className:"rule-menus"},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:a("rules.searchPlaceholder")}),this.state.contextBtns)),i.a.createElement(v.z,{className:"rules-container"},i.a.createElement(v.A,{titleValue:a("rules.title").concat("(",String(e.length),")")}),!!s&&i.a.createElement(v.a,{t:a,error:s}),!s&&i.a.createElement(xe,l)))}}var Le=Object(T.a)(R.c,Ue,"Rules Grid");const Be=Object(n.c)()(Object(s.b)(e=>({farms:Object(Q.c)(e),isFarmsPending:Object(Q.g)(e),farmsError:Object(Q.d)(e),farmsLastUpdated:Object(Q.e)(e),rules:Object(Ee.i)(e),error:Object(Ee.j)(e),isRulesPending:Object(Ee.l)(e),lastUpdated:Object(Ee.k)(e),devicesLastUpdated:Object(N.k)(e),devicesError:Object(N.j)(e),sensorModels:Object(D.f)(e),sensorsError:Object(D.b)(e),sensorsLastUpdated:Object(D.c)(e),sensorModelsLastUpdated:Object(D.d)(e),isSensorModelsPending:Object(D.e)(e)}),e=>({fetchFarms:()=>e(Q.a.actions.fetchFarms()),fetchRules:()=>e(Ee.a.actions.fetchRules()),fetchDevices:()=>e(N.a.actions.fetchDevices()),fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchSensorModels:()=>e(D.a.actions.fetchSensorModels())}))(Le));var _e=a(1058),Ge=a(545),Je=a(1056);a(449);const ze=c.d.checkForEmpty,Ve={name:{headerName:"farms.grid.farmName",field:"name",sort:"asc",cellRendererFramework:d.e,comparator:m.g},address:{headerName:"farms.grid.address",field:"properties.address",valueFormatter:({value:e})=>ze(e),comparator:m.g},crop:{headerName:"farms.grid.crop",field:"properties.crops",valueFormatter:({value:e})=>ze(e),comparator:m.g},devices:{headerName:"farms.grid.device",field:"count"},createdOn:{headerName:"farms.grid.createdOn",field:"createdAt",cellRendererFramework:d.f},lastUpdated:{headerName:"farms.grid.lastUpdated",field:"lastModifiedAt",cellRendererFramework:d.f}},He={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"multiple"},qe={softSelectedId:void 0,eviBlobUrl:void 0,eviBlobUrlError:void 0};class Ke extends o.Component{constructor(e){super(e),this.onGridReady=e=>{this.farmGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.onSoftSelectChange=(e,t)=>{const a=this.props,s=a.onSoftSelectChange,n=a.history,r=t.name;n.push("/farms/".concat(e),{id:e,farmName:r}),e&&this.setState({softSelectedId:e}),Object(m.L)(s)&&s(e,t)},this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;Object(m.L)(a)&&a(e.length>0?this.contextBtns:null),Object(m.L)(s)&&s(e)},this.getSoftSelectId=({id:e}="")=>e,this.onRowClicked=()=>{},this.state=qe,this.columnDefs=[Ve.name,Ve.address,Ve.crop,Ve.devices,Ve.createdOn,Ve.lastUpdated],this.onRowClicked=this.onRowClicked.bind(this)}render(){const e=Object(r.a)({},He,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,deviceCount:this.props.deviceCount,getSoftSelectId:this.getSoftSelectId,softSelectId:(this.state.softSelectedDevice||{}).id},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:this.props.t},onRowClicked:this.onRowClicked,onGridReady:this.onGridReady,onSoftSelectChange:this.onSoftSelectChange,onHardSelectChange:this.onHardSelectChange});return i.a.createElement(v.K,Object.assign({key:"farm-grid-key"},e))}}a(1020);class We extends o.Component{render(){const e=this.props,t=e.t,a=e.openFlyout;return i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement("img",{className:" image-empty",src:"./image.png",alt:t("farms.emptyFarm")})),i.a.createElement("div",{className:"center-align"},t("farms.emptyFarm")),i.a.createElement("center",null,i.a.createElement(v.R,{permissions:b.h.createFarms},i.a.createElement(v.b,{className:" button-empty",primary:!0,type:"submit",onClick:a,style:{backgroundColor:"lightblue"}},t("farms.createFarm")))))}}var $e=a(166);class Qe extends o.Component{render(){const e=this.props,t=e.t,a=e.farms,s=e.farmsError,n=e.isFarmsPending,r=e.history,o=e.openFlyoutName,l=e.onCloseFlyout,c=e.openFlyout,d=e.onGridReady,u=e.rowData,p=e.onContextMenuChange,h=e.searchOnChange,f={onGridReady:d,rowData:u,onContextMenuChange:p,t:t,history:r};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:h,placeholder:t("farms.searchPlaceholder")}),i.a.createElement(v.R,{permissions:b.h.createFarms},i.a.createElement(v.b,{svg:m.ob.plus,className:"create-farm",onClick:c("create")},t("farms.flyouts.create.open"))))),i.a.createElement(v.z,{className:"farms-container"},i.a.createElement(v.A,{titleValue:t("farms.title").concat("(",String(a.length),")")}),!n&&0===a.length&&!s&&i.a.createElement(We,{openFlyout:c("create"),t:t}),!!s&&i.a.createElement(v.a,{t:t,error:s}),(n||0!==a.length)&&!s&&i.a.createElement(Ke,f),"create"===o&&i.a.createElement($e.NewFarmFlyout,{onClose:l,t:t})))}}var Ze=Object(T.a)(R.c,Qe,"Farms Grid");const Ye={openFlyoutName:void 0};class Xe extends o.Component{constructor(e){super(e),this.onGridReady=e=>this.farmGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.farmGridApi&&this.farmGridApi.setQuickFilter(e)},this.closeFlyout=()=>this.setState(Ye),this.openFlyout=e=>()=>this.setState({openFlyoutName:e}),this.state={openFlyoutName:void 0,farmsLength:void 0};const t=this.props,a=t.fetchFarms,s=t.farmsLastUpdated,n=t.farmsError,r=t.devicesLastUpdated,o=t.devicesError,i=t.fetchDevices;s||n||a(),r||o||i()}render(){const e=this.props,t=e.t,a=e.farms,s=e.farmsError,n=e.isFarmsPending,r=e.farmsLastUpdated,o=e.fetchFarms,l={t:t,farms:a,farmsError:s,isFarmsPending:n,farmsLastUpdated:r,fetchFarms:o,devices:e.devices,history:e.history,openFlyoutName:this.state.openFlyoutName,onCloseFlyout:this.closeFlyout,openFlyout:this.openFlyout,onGridReady:this.onGridReady,rowData:n?void 0:a||[],onContextMenuChange:this.onContextMenuChange,searchOnChange:this.searchOnChange,refresh:o};return i.a.createElement(_e.a,null,i.a.createElement(Ge.a,{exact:!0,path:"/farms",render:()=>i.a.createElement(Ze,l)}),i.a.createElement(Ge.a,{exact:!0,path:"/farms/:name",render:()=>i.a.createElement(xt,l)}),i.a.createElement(Je.a,{to:"/farms"}))}}const et=Object(n.c)()(Object(s.b)(e=>({farms:Object(Q.c)(e),devices:Object(N.i)(e),farmsError:Object(Q.d)(e),isFarmsPending:Object(Q.g)(e),farmsLastUpdated:Object(Q.e)(e),devicesError:Object(N.j)(e),isDevicesPending:Object(N.l)(e),devicesLastUpdated:Object(N.k)(e)}),e=>({fetchFarms:()=>e(Q.a.actions.fetchFarms()),fetchDevices:()=>e(N.a.actions.fetchDevices())}))(Xe));var tt=a(46),at=a(32);a(1026);class st extends o.Component{constructor(e){super(e),this.state={isPending:!0}}render(){const e=this.props,t=e.t,a=e.error,s=e.isPending,n=e.onlineDeviceCount,r=e.offlineDeviceCount,o=e.nodesCount,l=e.gatewaysCount,c=Object(m.J)(n)&&Object(m.J)(r),d=s&&(!o||!l||!c),u=c?o+l:void 0;return i.a.createElement(v.B,null,i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("dashboard.panels.overview.headerDeviceCount")),!d&&s&&i.a.createElement(v.w,{size:"small"})),i.a.createElement(v.C,{className:"device-stats-container"},i.a.createElement("div",{className:"stat-container"},i.a.createElement("div",{className:"stat-cell col-third"},i.a.createElement("div",{className:"stat-value"},Object(m.Z)(l)),i.a.createElement("span",{className:"icon-margin-left spacing-text"},i.a.createElement(at.a,{path:m.ob.gateway})),i.a.createElement("div",{className:"stat-label spacing-text"},t("dashboard.panels.overview.gateway"))),i.a.createElement("div",{className:"stat-cell col-third"},i.a.createElement("div",{className:"stat-value"},Object(m.Z)(o)),i.a.createElement("span",{className:"icon-margin-left spacing-text"},i.a.createElement(at.a,{path:m.ob.node})),i.a.createElement("div",{className:"stat-label spacing-text"},t("dashboard.panels.overview.nodes"))),i.a.createElement("div",{className:"stat-cell col-third"},i.a.createElement("div",{className:"stat-value"},Object(m.Z)(u)),i.a.createElement("div",{className:"stat-label spacing-text"},t("dashboard.panels.overview.total"))))),i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("dashboard.panels.overview.headerDeviceStatus"))),i.a.createElement(v.C,{className:"device-stats-container"},i.a.createElement("div",{className:"stat-container"},i.a.createElement("div",{className:"stat-cell col-third"},i.a.createElement("div",{className:"stat-value online-color"},Object(m.Z)(n)),i.a.createElement("span",{className:"icon-margin-left spacing-text"},i.a.createElement(at.a,{path:m.ob.onlineBig})),i.a.createElement("div",{className:"stat-label spacing-text"},t("dashboard.panels.overview.online"))),i.a.createElement("div",{className:"stat-cell col-third"},i.a.createElement("div",{className:"stat-value"},Object(m.Z)(r)),i.a.createElement("span",{className:"icon-margin-left spacing-text"},i.a.createElement(at.a,{path:m.ob.offline})),i.a.createElement("div",{className:"stat-label spacing-text"},t("dashboard.panels.overview.notConnected"))))),d&&i.a.createElement(v.I,null,i.a.createElement(v.w,null)),a&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:a})))}}a(1027);a(1028);const nt=({children:e,className:t,modalClose:a,mapDownload:s})=>i.a.createElement("div",{className:Object(m.S)("map-modal-header",t)},i.a.createElement("b",{className:"header-modal"},e.toUpperCase()),i.a.createElement("div",{className:"empty-container"}),i.a.createElement(v.bb,{path:m.ob.cancelX,className:"cancel-btn",onClick:a}));a(1029);class rt{constructor(e){this._options={style:"light",hideIfUnsupported:!0},this._darkColor="#011c2c",this._fullscreenCss="{elm}:-webkit-full-screen{width:100%;height:100%;}{elm}:-moz-full-screen{width:100%;height:100%;}{elm}:-ms-fullscreen{width:100%;height:100%;}{elm}:-o-full-screen{width:100%;height:100%;}{elm}:-full-screen{width:100%;height:100%;}.fullscreenMapBtn{margin:0;padding:0;border:none;border-collapse:collapse;width:32px;height:32px;text-align:center;cursor:pointer;line-height:32px;background-repeat:no-repeat;background-size:20px;background-position:center center;z-index:200;box-shadow:0px 0px 4px rgba(0,0,0,0.16);}.fullscreenMapExpand{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAF6ePCOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURQAAAJacn5ean5idopicopicoZicoZbVOdIAAAAGdFJOUwBQYI+fucOe/hkAAAAJcEhZcwAAFxEAABcRAcom8z8AAADMSURBVDhPzZSNDoIwDITn397/kV27il9Rzmwq4Qux194VRmIombqqDzCvtV236LvRJos28rD6RlPGs5jpvHaZVTLWe0nEbCkxbnKkU4zcMw7xpvTqeHrho2WzzDfWHHPPmraCmAXWzRDrtZ7ZpCeNOe03c3xnL2bOdginc2Iz6/yYuDGxP+WG1Q8Qmvxxx6UGQUgNgpAaBCE1CEJqEITUIHhxXGquTjTHBa+mQRBSgyCkBkFIDYKQGgQhNQhCahDsMmGfoA1r351BSrkDTQQSzEhW2qYAAAAASUVORK5CYII=);}.fullscreenMapExpand:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAF6ePCOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAVUExURQAAADCszDCqzTKtzzKszzCszzGszvdFYikAAAAGdFJOUwBQYI+fucOe/hkAAAAJcEhZcwAAFxEAABcRAcom8z8AAADMSURBVDhPzZSNDoIwDITn397/kV27il9Rzmwq4Qux194VRmIombqqDzCvtV236LvRJos28rD6RlPGs5jpvHaZVTLWe0nEbCkxbnKkU4zcMw7xpvTqeHrho2WzzDfWHHPPmraCmAXWzRDrtZ7ZpCeNOe03c3xnL2bOdginc2Iz6/yYuDGxP+WG1Q8Qmvxxx6UGQUgNgpAaBCE1CEJqEITUIHhxXGquTjTHBa+mQRBSgyCkBkFIDYKQGgQhNQhCahDsMmGfoA1r351BSrkDTQQSzEhW2qYAAAAASUVORK5CYII=);}.fullscreenMapCollapse{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEWWnJ+Xmp+YnKKYnKKYnKHcteq5AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAHdElNRQfiCw8VGzLD58rvAAAANUlEQVQ4y2NgIB+wuLg4IKhRGUpkXGAAKgMFg0JmuIHBH9ajuYTaMszGxgZAiklJSYFg+gAAKrRnAIqOPxgAAAAASUVORK5CYII=);}.fullscreenMapCollapse:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEUwrMwwqs0yrM8yrM8xrM6kUFC0AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAHdElNRQfiCw8VGSuVugCtAAAANUlEQVQ4y2NgIB+wuLg4IKhRGUpkXGAAKgMFg0JmuIHBH9ajuYTaMszGxgZAiklJSYFg+gAAKrRnAIqOPxgAAAAASUVORK5CYII=);}",this._options=Object.assign({},this._options,e)}onAdd(e,t){this._map=e;const a=rt.isSupported();if(a||!a&&!this._options.hideIfUnsupported){this._resource=rt._getTranslations(this._map.getStyle().language);let e=this._options.style||"light";"light"===e?e="white":"dark"===e?e=this._darkColor:"auto"===e&&(this._map.events.add("styledata",()=>{this._mapStyleChanged()}),e=this._getColorFromMapStyle());const t=this._map.getMapContainer(),a=this._fullscreenCss.replace(/{elm}/g,"#"+t.id),s=document.createElement("style");let n;return s.innerHTML=a,document.body.appendChild(s),this._container=document.createElement("div"),this._container.classList.add("azure-maps-control-container"),this._container.setAttribute("aria-label",this._resource.title),this._container.style.flexDirection="column",this._button=document.createElement("button"),this._button.classList.add("fullscreenMapBtn"),this._button.classList.add("fullscreenMapExpand"),this._button.style.backgroundColor=e,this._button.setAttribute("title",this._resource.view),this._button.setAttribute("alt",this._resource.view),this._button.setAttribute("type","button"),this._button.addEventListener("click",()=>{if(this.isFullscreen()){(document.webkitCancelFullScreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.exitFullscreen).call(document)}else{(t.webkitRequestFullScreen||t.requestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.requestFullscreen).call(t)}}),this._updateBtn(),this._container.appendChild(this._button),document.fullscreenchange?n="fullscreenchange":document.webkitCancelFullScreen?n="webkitfullscreenchange":document.mozCancelFullScreen?n="mozfullscreenchange":document.msExitFullscreen&&(n="MSFullscreenChange"),n&&document.addEventListener(n,()=>{this._updateBtn()}),this._container}return null}onRemove(){this._container&&this._container.remove(),"auto"===this._options.style&&this._map.events.remove("styledata",()=>{this._mapStyleChanged()})}isFullscreen(){return!(!document.fullscreenElement&&!document.msFullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement)}static isSupported(){return document.fullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled}_mapStyleChanged(){this._button&&(this._button.style.backgroundColor=this._getColorFromMapStyle())}_getColorFromMapStyle(){let e="white";switch(this._map.getStyle().style){case"satellite":case"satellite_road_labels":case"grayscale_dark":case"night":e=this._darkColor}return e}_updateBtn(){let e,t,a=this._resource.view;this.isFullscreen()?(a=this._resource.exit,e="fullscreenMapExpand",t="fullscreenMapCollapse"):(a=this._resource.view,e="fullscreenMapCollapse",t="fullscreenMapExpand"),this._button.setAttribute("title",a),this._button.setAttribute("alt",a),this._button.classList.remove(e),this._button.classList.add(t)}static _getTranslations(e){switch(e&&e.indexOf("-")>0&&(e=e.substring(0,e.indexOf("-"))),e){case"af":return{exit:"Verlaat volskerm",view:"Vertoon volskerm",title:"Volskerm beheer"};case"ar":return{exit:"\u0627\u0644\u062e\u0631\u0648\u062c \u0645\u0646 \u0648\u0636\u0639 \u0645\u0644\u0626 \u0644\u0644\u0634\u0627\u0634\u0629",view:"\u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0629 \u0628\u062d\u062c\u0645 \u0627\u0644\u0634\u0627\u0634\u0629",title:"\u062a\u062d\u0643\u0645 \u0645\u0644\u0621 \u0627\u0644\u0634\u0627\u0634\u0629"};case"eu":return{exit:"Irten pantaila osoko",view:"ikusi pantaila osoan",title:"Pantaila osoa kontrol"};case"bg":return{exit:"\u0418\u0437\u0445\u043e\u0434 \u043d\u0430 \u0446\u044f\u043b \u0435\u043a\u0440\u0430\u043d",view:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u0446\u044f\u043b \u0435\u043a\u0440\u0430\u043d",title:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b \u043d\u0430 \u0446\u044f\u043b \u0435\u043a\u0440\u0430\u043d"};case"zh":return{exit:"\u9000\u51fa\u5168\u5c4f",view:"\u5168\u5c4f\u67e5\u770b",title:"\u5168\u5c4f\u63a7\u5236"};case"hr":return{exit:"Izlaz na cijelom zaslonu",view:"Prikaz na cijelom zaslonu",title:"Puni zaslon kontrola"};case"cs":return{exit:"Ukon\u010dit celou obrazovku",view:"pohled na celou obrazovku",title:"fullscreen kontrola"};case"da":return{exit:"Afslut fuld sk\xe6rm",view:"Se fuld sk\xe6rm",title:"fullscreen kontrol"};case"nl":return{exit:"Verlaat volledig scherm",view:"Bekijk fullscreen",title:"fullscreen controle"};case"et":return{exit:"V\xe4lja t\xe4isekraani",view:"Vaata t\xe4isekraani",title:"T\xe4isekraan kontrolli"};case"fi":return{exit:"Poistu koko n\xe4yt\xf6st\xe4",view:"Koko n\xe4ytt\xf6",title:"fullscreen ohjaus"};case"fr":return{exit:"Quitter le mode plein \xe9cran",view:"Voir en plein \xe9cran",title:"Contr\xf4le plein \xe9cran"};case"gl":return{exit:"Saia da pantalla completa",view:"Ver a pantalla completa",title:"Control de pantalla completa"};case"de":return{exit:"Beenden Vollbild",view:"Ansicht Vollbild",title:"Vollbild-Steuerung"};case"el":return{exit:"\u0388\u03be\u03bf\u03b4\u03bf\u03c2 \u03b1\u03c0\u03cc \u03c0\u03bb\u03ae\u03c1\u03b7 \u03bf\u03b8\u03cc\u03bd\u03b7",view:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03c3\u03b5 \u03c0\u03bb\u03ae\u03c1\u03b7 \u03bf\u03b8\u03cc\u03bd\u03b7",title:"\u03a0\u03bb\u03ae\u03c1\u03b7\u03c2 \u03bf\u03b8\u03cc\u03bd\u03b7 \u03b5\u03bb\u03ad\u03b3\u03c7\u03bf\u03c5"};case"hi":return{exit:"\u092a\u0942\u0930\u094d\u0923 \u0938\u094d\u0915\u094d\u0930\u0940\u0928 \u0938\u0947 \u092c\u093e\u0939\u0930 \u0928\u093f\u0915\u0932\u0947\u0902",view:"\u092a\u0942\u0930\u094d\u0923\u0938\u094d\u0915\u094d\u0930\u0940\u0928 \u0926\u0947\u0916\u0947\u0902",title:"\u092a\u0942\u0930\u094d\u0923 \u0938\u094d\u0915\u094d\u0930\u0940\u0928 \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0923"};case"hu":return{exit:"Kil\xe9p\xe9s a teljes k\xe9perny\u0151s",view:"Megtekint\xe9s teljes k\xe9perny\u0151n",title:"Nagy\xedt\xe1s ellen\u0151rz\xe9s"};case"id":return{exit:"Keluar layar penuh",view:"Lihat fullscreen",title:"Kontrol layar penuh"};case"it":return{exit:"Esci da schermo intero",view:"Visualizza schermo intero",title:"controllo a tutto schermo"};case"ja":return{exit:"\u51fa\u53e3\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3",view:"\u8868\u793a\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3",title:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb"};case"kk":return{exit:"\u0422\u043e\u043b\u044b\u049b \u044d\u043a\u0440\u0430\u043d\u043d\u0430\u043d \u0448\u044b\u0493\u0443",view:"View \u0442\u043e\u043b\u044b\u049b \u044d\u043a\u0440\u0430\u043d",title:"Fullscreen \u0431\u0430\u049b\u044b\u043b\u0430\u0443"};case"ko":return{exit:"\uc804\uccb4 \ud654\uba74 \uc885\ub8cc",view:"\uc804\uccb4 \ud654\uba74\ubcf4\uae30",title:"\uc804\uccb4 \ud654\uba74 \uc81c\uc5b4"};case"es":return{exit:"Salir de pantalla completa",view:"Ver en pantalla completa",title:"control de pantalla completa"};case"lv":return{exit:"Iziet no pilnekr\u0101na",view:"Skat\u012bt pilnekr\u0101na re\u017e\u012bm\u0101",title:"Pilnekr\u0101na kontrole"};case"lt":return{exit:"I\u0161jungti viso ekrano re\u017eim\u0105",view:"Per\u017ei\u016br\u0117ti per vis\u0105 ekran\u0105",title:"Fullscreen kontrol\u0117"};case"ms":return{exit:"keluar skrin penuh",view:"paparan skrin penuh",title:"kawalan skrin penuh"};case"nb":return{exit:"Avslutt full skjerm",view:"Vis fullskjerm",title:"Full skjermkontroll"};case"pl":return{exit:"Wy\u0142\u0105czy\u0107 tryb pe\u0142noekranowy",view:"Zobacz na pe\u0142nym ekranie",title:"kontrola na pe\u0142nym ekranie"};case"pt":return{exit:"Sair em tela cheia",view:"Ver tela cheia",title:"controle de tela cheia"};case"ro":return{exit:"Ie\u0219ire ecran complet",view:"Vezi tot ecranul",title:"controlul pe tot ecranul"};case"ru":return{exit:"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430",view:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d",title:"\u041f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c"};case"sr":return{exit:"\u0418\u0437\u043b\u0430\u0437 \u0438\u0437 \u0446\u0435\u043b\u043e\u0433 \u0435\u043a\u0440\u0430\u043d\u0430",view:"\u041f\u043e\u0433\u043b\u0435\u0434\u0430\u0458 \u043f\u0440\u0435\u043a\u043e \u0446\u0435\u043b\u043e\u0433 \u0435\u043a\u0440\u0430\u043d\u0430",title:"\u0444\u0443\u043b\u043b\u0441\u0446\u0440\u0435\u0435\u043d \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0430"};case"sk":return{exit:"Skon\u010di\u0165 cel\xfa obrazovku",view:"poh\u013ead na cel\xfa obrazovku",title:"fullscreen kontrola"};case"sl":return{exit:"Izhod celozaslonski",view:"Poglej celozaslonski",title:"celozaslonski nadzor"};case"sv":return{exit:"Avsluta helsk\xe4rm",view:"Visa helsk\xe4rm",title:"Full sk\xe4rms kontroll"};case"th":return{exit:"\u0e41\u0e1a\u0e1a\u0e40\u0e15\u0e47\u0e21\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01",view:"\u0e14\u0e39\u0e41\u0e1a\u0e1a\u0e40\u0e15\u0e47\u0e21\u0e08\u0e2d",title:"\u0e01\u0e32\u0e23\u0e04\u0e27\u0e1a\u0e04\u0e38\u0e21\u0e41\u0e1a\u0e1a\u0e40\u0e15\u0e47\u0e21\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d"};case"tr":return{exit:"Tam ekrandan \xe7\u0131k",view:"Tam ekran g\xf6r\xfcnt\xfcle",title:"Tam Ekran kontrol\xfc"};case"uk":return{exit:"\u0412\u0438\u0445\u0456\u0434 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443",view:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u043d\u0443\u0442\u0438 \u0432\u0435\u0441\u044c \u0435\u043a\u0440\u0430\u043d",title:"\u0420\u0435\u0434\u0430\u043a\u0446\u0456\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c"};case"vi":return{exit:"Tho\xe1t to\xe0n m\xe0n h\xecnh",view:"Xem to\xe0n m\xe0n h\xecnh",title:"ki\u1ec3m so\xe1t to\xe0n m\xe0n h\xecnh"};case"en":default:return{exit:"Exit Fullscreen",view:"View Fullscreen",title:"Fullscreen Control"}}}}const ot=window.atlas;class it extends o.Component{componentDidMount(){!this.map&&this.props.azureMapsKey&&this.initializeMap(this.props.azureMapsKey)}componentDidUpdate(){!this.map&&this.props.azureMapsKey&&this.initializeMap(this.props.azureMapsKey)}componentWillUnmount(){this.map&&this.map.remove()}shouldComponentUpdate(e){return!1}initializeMap(e){this.map=new ot.Map(this.props.mapDivId,{"subscription-key":e,center:l.a.mapCenterPosition,zoom:10,style:"satellite_road_labels"}),this.map.addEventListener("load",()=>{Object(m.L)(this.props.onMapReady)&&this.props.onMapReady(this.map)}),this.map.events.add("ready",()=>{this.map.controls.add([new ot.control.StyleControl,new rt({style:"auto"})],{position:"top-left"}),this.map.controls.add([new ot.control.ZoomControl({style:"light"})],{position:"top-right"})})}render(){return i.a.createElement("div",{id:this.props.mapDivId})}}a(1030);const lt=window.atlas;class ct extends o.Component{constructor(e){super(e),this.onMapReady=e=>{this.popup=new lt.Popup,this.map=e,this.calculatePins(this.props,!0)},this.openDeviceDetails=e=>this.setState({selectedDeviceId:e}),this.closeDeviceDetails=()=>this.setState({selectedDeviceId:void 0}),this.state={selectedDeviceId:void 0}}componentDidUpdate(){this.calculatePins(this.props)}calculatePins(e,t=!1){if(this.map){if(this.props.farm&&this.props.farm.geometry){const e=this.props.farm.geometry;let t;Object(m.rb)(this.map,e),"Polygon"===e.type?t=new lt.data.Polygon(e.coordinates):"MultiPolygon"===e.type&&(t=new lt.data.MultiPolygon(e.coordinates)),this.map.addPolygons([t],{name:"farm-boundary",color:"#1e90ff",opacity:.5,overwrite:!0})}if(e.sensorPlacementLatLong){const t=this.devicesToPins(e.sensorPlacementLatLong).normal;this.map.addPins(t,{name:"sensor-placement",fillColor:"blue",overwrite:!0})}}}extractGeoLocatedDevices(e,t){return Object.keys(e).map(t=>e[t]).filter(e=>e.latitude&&e.longitude&&e.farmId===t)}devicesToPins(e){return e.reduce((e,t)=>{const a=(s=t,new lt.data.Feature(new lt.data.Point(s)));var s;return ae()(e,{normal:{$push:[a]}})},{normal:[]})}zoomToPins(e){const t=[],a=[];e.forEach(({geometry:{coordinates:[e,s]}})=>{t.push(e),a.push(s)});const s=Math.min.apply(null,t),n=Math.min.apply(null,a),r=Math.max.apply(null,t),o=Math.max.apply(null,a);this.map.setCameraBounds({bounds:[s,n,r,o],padding:50})}render(){const e=this.props,t=e.t,a=e.isPending,s=e.mapKeyIsPending,n=e.azureMapsKey,r=e.error,o=e.latestMapDate,l=e.sensorPlacementLatLong,c=!r&&a&&s;return"Maps"===e.page?i.a.createElement("div",{className:"modal-sensor-placement"},i.a.createElement("div",null,l?i.a.createElement(i.a.Fragment,null,i.a.createElement(it,{azureMapsKey:n,onMapReady:this.onMapReady,mapDivId:"sensor-placement-map"})):null)):i.a.createElement(v.B,{className:"sensor-map-panel-container"},i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("farms.panel.sensorPlacement")," "),i.a.createElement(v.g,{right:!0},o),!c&&a&&i.a.createElement(v.w,{size:"small"})),i.a.createElement(v.C,null,i.a.createElement("div",{className:"map-panel-container"},l?i.a.createElement(i.a.Fragment,null,i.a.createElement(it,{azureMapsKey:n,onMapReady:this.onMapReady,mapDivId:"sensor-placement-map"})):i.a.createElement(v.y,{msg:t("maps.modal.noMapYet"),className:"no-map",t:t}))),c&&i.a.createElement(v.I,null,i.a.createElement(v.w,null)),!s&&!this.props.azureMapsKey&&i.a.createElement(v.D,null,t("dashboard.panels.map.notSupportedError")),r&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:r})))}}const dt=Object(s.b)(e=>({azureMapsKey:Object(j.i)(e)}))(ct),mt=m.ob.NoMapImage;class ut extends o.Component{constructor(e){super(e),this.state={isPending:!0,sensorPlacementLatLong:void 0,isModalOpen:!1,mapName:void 0,sensorPlacementUrl:void 0,mapFound:void 0},this.onSensorPlacementClick=this.onSensorPlacementClick.bind(this),this.onModalclose=this.onModalclose.bind(this),this.generateSensorPlacementUrl=this.generateSensorPlacementUrl.bind(this),this.generateSensorPlacementUrl()}onSensorPlacementClick(){const e=this.props.t;this.setState({isModalOpen:!0,mapName:e("farms.panel.sensorPlacement")})}onModalclose(){this.setState({isModalOpen:!1,modalName:void 0})}generateSensorPlacementUrl(){let e;H.e.getLatestSensorPlacementMapByFarmId(this.props.farmId).subscribe(t=>{0!==t.length?(e=t[m.T],this.setState({sensorPlacementLatLong:e.properties.sensor_placements,latestMapDate:k()(e.date).format(m.m)})):this.setState({noMapUrl:mt})},e=>this.setState({sceneError:e}))}render(){const e=this.props,t=e.t,a=e.azureMapsKey,s=e.farmId,n=e.farm,r=e.mapKeyIsPending,o=e.isPending,l=e.farmsError,c=this.state,d=c.sensorPlacementLatLong,m=c.latestMapDate,u=c.sceneError,p=c.noMapUrl,h=u||l;return i.a.createElement(v.B,{className:"map-panel-container"},!h&&i.a.createElement(dt,{azureMapsKey:a,farmId:s,farm:n,sensorPlacementLatLong:d,mapKeyIsPending:r,isPending:o,t:t,noMapUrl:p,latestMapDate:m}),h&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:h})))}}a(1031);const pt=e=>i.a.createElement("div",{className:"inline"},i.a.createElement("div",{className:"fileName"},e.label),i.a.createElement(v.bb,{className:"right-icon",path:m.ob.downloadButton}));class ht extends o.Component{constructor(e){super(e),this.listenKeyboard=e=>{"Escape"!==e.key&&27!==e.keyCode||this.props.onClose()},this.onOverlayClick=()=>{this.props.modalClose()},this.onClickDisagree=()=>{this.setState({disagree:!0})},this.downloadMapFile=e=>{const t=this.props.mapName,a=e.target.value.contentType,s=new XMLHttpRequest;s.open(m.y,e.target.value.value,!0),s.responseType="blob",s.onload=function(){const e=(window.URL||window.webkitURL).createObjectURL(this.response),s=document.createElement("a");s.href=e,s.download=t+(m.h.get(a)||""),document.body.appendChild(s),s.click(),document.body.removeChild(s)},s.send()},this.state={disagree:!1}}componentDidMount(){this.props.onClose&&window.addEventListener("keydown",this.listenKeyboard,!0)}componentWillUnmount(){this.props.onClose&&window.removeEventListener("keydown",this.listenKeyboard,!0)}render(){const e=this.props,t=e.farmName,a=e.name,s=e.type,n=e.blobUrl,r=e.t,o=e.mapDate,l=e.className,c=e.latestCreatedAt,d=e.mapFileDownloadSelectObject,u=e.isPending,p=e.noMapImage,h=e.noMaps,f=e.isMapFound,g=e.noPngMaps,b=e.sensorPlacementLatLong,E=e.farm;if(s===m.U)return i.a.createElement("div",{className:Object(m.S)("modal-map","open-map",l)},i.a.createElement("article",{className:"content-wrapper-map"},i.a.createElement(nt,{modalClose:this.props.modalClose},a),i.a.createElement(v.O,null,i.a.createElement(v.Q,{className:"properties"},i.a.createElement(v.N,{className:"col-3"},i.a.createElement(v.Q,{className:"name-section"},i.a.createElement(v.N,{className:"col-2 text"},i.a.createElement("span",null,r("maps.modal.farm"))),i.a.createElement(v.N,{className:"col-7 modalfarm-name"},Object(m.Z)(t)))),i.a.createElement(v.N,{className:"col-3"},i.a.createElement("span",null,r("maps.modal.mapDate")+Object(m.Z)(o)," ")),i.a.createElement(v.N,{className:"col-3"},i.a.createElement("span",null,r("maps.modal.generatedDate")+Object(m.Z)(c))),i.a.createElement(v.N,{className:"col-2 download-map"},i.a.createElement(v.W,{className:"download-dropdown",closeMenuOnSelect:!1,options:d,clearable:!1,searchable:!1,onChange:this.downloadMapFile,placeholder:i.a.createElement("div",{className:"Select-placeholder"},i.a.createElement(v.bb,{path:m.ob.downloadButton}),r("maps.modal.downloadMap")),defaultValue:d[0],optionRenderer:pt})))),i.a.createElement("div",{className:"line"}),u&&i.a.createElement(v.w,{className:"no-map-loader"}),!u&&(h||!n)&&!("sensor-placement"===a&&Object(m.J)(b))&&i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement("div",{className:"no-preview",id:"no-preview"},i.a.createElement("img",{src:m.ob.NoMapImage,alt:""}),i.a.createElement("div",{className:"no-maps"},i.a.createElement("p",{className:"nomap-text",id:"nomap-text"},r("maps.modal.noMapYet")))))),"sensor-placement"===a&&b?i.a.createElement(dt,{farm:E,sensorPlacementLatLong:b,page:"Maps",t:r}):!u&&!h&&!g&&i.a.createElement("div",null,i.a.createElement("center",null,f?i.a.createElement("div",{className:"modal-image"},i.a.createElement("img",{src:n,alt:"Map"}),i.a.createElement("p",null,r("maps.modal.Disclaimer"))):"",i.a.createElement("div",{className:p?"no-preview modal-image":"mapModal-image"},n&&!f&&i.a.createElement("img",{src:n,alt:r("maps.modal.noMap")}),!p&&i.a.createElement("p",null,r("maps.modal.Disclaimer")),n===p&&i.a.createElement("div",{className:"no-maps"},i.a.createElement("p",null,i.a.createElement("b",null,r("maps.modal.noMapYet"))),i.a.createElement("p",{className:"nomap-text"},r("maps.modal.noGeneratedYet"))))))))}}a(1032);const ft=m.ob.NoMapImage;class gt extends o.Component{constructor(e){super(e),this.eviSceneDataCallback=(e,t,a)=>{if(a)this.setState({sceneError:a});else if(t.mapFound){const a=Object(m.D)(e);this.setState({eviUrl:a,mapFound:t.mapFound,latestMapDate:t.latestMapDate,latestCreatedAt:t.latestCreatedAt,isEviMapFound:t.mapFound,eviMapFileDownloadSelectObject:e.mapFileDownloadSelectObject})}else this.setState({eviUrl:t.url,mapFound:t.mapFound,isEviMapFound:t.mapFound})},this.ndwiSceneDataCallback=(e,t,a)=>{if(a)this.setState({sceneError:a});else if(t.mapFound){const a=Object(m.D)(e);this.setState({ndwiUrl:a,mapFound:t.mapFound,latestMapDate:t.latestMapDate,latestCreatedAt:t.latestCreatedAt,isNdwiMapFound:t.mapFound,ndwiMapFileDownloadSelectObject:e.mapFileDownloadSelectObject})}else this.setState({ndwiUrl:t.url,mapFound:t.mapFound,isNdwiMapFound:t.mapFound})},this.onError=(e,t)=>{this.setState({[e]:t})};const t=this.props.farmId,a=this.props.maps;this.state={isPending:!0,isModalopen:!1,modalName:void 0,mapName:void 0,eviUrl:void 0,ndwiUrl:void 0,isEviMapFound:void 0,isNdwiMapFound:void 0,eviMapFileDownloadSelectObject:[],ndwiMapFileDownloadSelectObject:[],isEviMapBroken:void 0,isNdwiMapBroken:void 0,farmName:e.farmName?e.farmName:m.s},this.onMapImageClick=this.onMapImageClick.bind(this),this.onModalclose=this.onModalclose.bind(this),this.getEviSceneData=this.getEviSceneData.bind(this),this.getNdwiSceneData=this.getNdwiSceneData.bind(this),this.getEviSceneData("evi",t,a),this.getNdwiSceneData("ndwi",t,a)}onMapImageClick(e,t){this.setState({isModalopen:!0,mapName:e,modalName:t}),R.a.trackEvent({name:"UiEvent:ModalOpen: Satellite Indices "+t})}onModalclose(){R.a.trackEvent({name:"UiEvent:ModalClose: Satellite Indices "+this.state.modalMapName}),this.setState(Object(r.a)({},this.state,{isModalopen:!1,modalName:void 0}))}getEviSceneData(e,t,a){Object(m.E)(e,t,a,this.eviSceneDataCallback)}getNdwiSceneData(e,t,a){Object(m.E)(e,t,a,this.ndwiSceneDataCallback)}render(){const e=this.props,t=e.t,a=e.farmsError,s=this.state,n=s.sceneError,r=s.mapName,o=s.eviUrl,l=s.ndwiUrl,c=s.latestMapDate,d=s.isEviMapFound,u=s.isNdwiMapFound,p=s.eviMapFileDownloadSelectObject,h=s.ndwiMapFileDownloadSelectObject,f=s.modalName,g=s.latestCreatedAt,b=s.farmName,E=s.isEviMapBroken,y=s.isNdwiMapBroken,S=n||a;return i.a.createElement(v.B,{className:!0},i.a.createElement(v.F,{className:"ph"},i.a.createElement(v.G,null,t("farms.panel.satelliteindices")),i.a.createElement(v.g,{right:!0},c)),i.a.createElement(v.C,null,void 0===d?i.a.createElement("div",{className:"shimmer-panel"}," "):i.a.createElement("img",{className:d&&!E?"image-map":"image",src:o,onClick:d&&(()=>this.onMapImageClick(t("farms.panel.eviMaps"),"evi")),alt:t(E?"dashboard.panels.map.corruptImageError":"farms.panel.noEvi"),onError:()=>{this.onError("isEviMapBroken",!0)}}),void 0===u?i.a.createElement("div",{className:"shimmer-panel"}," "):i.a.createElement("img",{className:u&&!y?"image-map":"image",src:l,onClick:u&&(()=>this.onMapImageClick(t("farms.panel.ndwiMaps"),"ndwi")),alt:t(y?"dashboard.panels.map.corruptImageError":"farms.panel.noNdwi"),onError:()=>{this.onError("isNdwiMapBroken",!0)}}),!1===d?i.a.createElement("div",{className:"col-one"},t("maps.modal.noMapYet")):"",!1===u?i.a.createElement("div",{className:"col-one"},t("maps.modal.noMapYet")):"",i.a.createElement("div",{className:"col-one"},t("farms.panel.evi")),i.a.createElement("div",{className:"col-one"},t("farms.panel.ndwi")),"evi"===f&&i.a.createElement(ht,{type:"MAP-MODAL",name:r,farmName:b,mapName:"evi_"+b+"_"+k()(c).format(m.R),modalClose:this.onModalclose,mapFileDownloadSelectObject:p,mapDate:c,latestCreatedAt:g,blobUrl:o,noMapImage:ft,isMapFound:d,t:t}),"ndwi"===f&&i.a.createElement(ht,{type:"MAP-MODAL",name:r,farmName:b,mapName:"ndwi_"+b+"_"+k()(c).format(m.R),modalClose:this.onModalclose,mapFileDownloadSelectObject:h,mapDate:c,latestCreatedAt:g,blobUrl:l,noMapImage:ft,isMapFound:u,t:t})),S&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:S})))}}a(1033);let bt=[];const vt=m.ob.NoMapImage;class Et extends o.Component{constructor(e){super(e),this.sceneDataCallback=(e,t,a)=>{if(a)this.setState({sceneError:a});else if(t.mapFound){const a=Object(m.D)(e);this.setState({url:a,mapFound:t.mapFound,latestMapDate:t.latestMapDate,latestCreatedAt:t.latestCreatedAt}),bt=e.mapFileDownloadSelectObject}else this.setState({url:t.url,mapFound:t.mapFound})},this.onImgError=(e,t)=>{this.setState({[e]:t})};const t=this.props.farmId,a=this.props.maps;this.state={isPending:!0,isModalOpen:!1,mapName:void 0,url:void 0,mapFound:void 0,farmName:m.s},this.onSoilMoistureClick=this.onSoilMoistureClick.bind(this),this.onModalclose=this.onModalclose.bind(this),this.getSoilMoistureSceneData=this.getSoilMoistureSceneData.bind(this),this.getSoilMoistureSceneData("soil-moisture",t,a)}onSoilMoistureClick(){const e=this.props.t;this.setState({isModalOpen:!0,mapName:e("farms.panel.soilMoisture")}),R.a.trackEvent({name:"UiEvent:ModalOpen: Soil Moisture"})}onModalclose(){R.a.trackEvent({name:"UiEvent:ModalClose: Soil Moisture"}),this.setState({isModalOpen:!1,modalName:void 0})}componentDidUpdate(e){this.props.farmNameLoading||e.farmName===this.props.farmName||this.setState({farmName:this.props.farmName})}getSoilMoistureSceneData(e,t,a){Object(m.E)(e,t,a,this.sceneDataCallback)}render(){const e=this.props,t=e.t,a=e.farmsError,s=this.state,n=s.sceneError,r=s.isModalOpen,o=s.mapName,l=s.url,c=s.mapFound,d=s.latestMapDate,u=s.latestCreatedAt,p=s.farmName,h=s.isSoilMoistureImageBroken,f=n||a;return i.a.createElement(v.B,null,i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("farms.panel.soilMoisture")),i.a.createElement(v.g,{right:!0},i.a.createElement("div",{id:"date"},d))),i.a.createElement(v.C,null,void 0===c?i.a.createElement("div",{className:"shimmer-soil-panel"}," "):i.a.createElement("div",{className:"no-maping"},i.a.createElement("img",{className:c?"map-img":"no-map-img",src:l,onClick:c&&this.onSoilMoistureClick,alt:t(h?"dashboard.panels.map.corruptImageError":"farms.panel.noSoilMoisture"),onError:()=>this.onImgError("isSoilMoistureImageBroken",!0)}),!1===c&&i.a.createElement("div",{className:"soil-col-one"},t("maps.modal.noMapYet"))),r&&i.a.createElement(ht,{type:m.U,name:o,farmName:p,modalClose:this.onModalclose,mapDate:d,latestCreatedAt:u,blobUrl:l,noMapImage:vt,isMapFound:c,mapFileDownloadSelectObject:bt,t:t})),f&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:f})))}}class yt extends o.Component{constructor(e){super(e),this.columnDefs=[Object(r.a)({},X.ruleName,{cellRendererFramework:void 0,minWidth:200}),X.severity,{headerName:"rules.grid.count",field:"count"},Object(r.a)({},X.explore,{cellRendererFramework:e=>i.a.createElement(d.c,Object.assign({},e,{to:"/maintenance/rule/".concat(e.value)}))})]}render(){const e=this.props,t=e.t,a=e.alerts,s=e.isPending,n=e.error,r={columnDefs:Object(m.qb)(t,this.columnDefs),rowData:a,suppressFlyouts:!0,domLayout:"autoHeight",deltaRowDataMode:!1,t:t},o=s&&!a.length;return i.a.createElement(v.B,{className:"alerts-panel-container"},i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("dashboard.panels.alerts.header")),!o&&s&&i.a.createElement(v.w,{size:"small"})),i.a.createElement(v.C,null,i.a.createElement(xe,r),!o&&0===a.length&&i.a.createElement(v.H,null,t("dashboard.noData"))),o&&i.a.createElement(v.I,null,i.a.createElement(v.w,null)),n&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:n})))}}Object(s.b)(null)(yt);var St=a(145);a(1034);const Ot=window.atlas,Ct="devices-nominal-layer",jt="devices-warning-layer",Nt="devices-critical-layer";class Dt extends o.Component{constructor(e){super(e),this.onMapReady=e=>{this.popup=new Ot.Popup,[[Ct,"nominal","pin-blue"],[jt,"warning","pin-darkblue"],[Nt,"alert","pin-red"]].forEach(([t,a,s])=>{e.addPins([],{name:t,icon:s,cluster:!0}),e.addEventListener("click",t,t=>{const s=Object(St.a)(t.features,1)[0];this.popup.setPopupOptions({position:s.geometry.coordinates,content:this.buildDevicePopup(s.properties,a)}),this.popup.open(e)})}),this.map=e,this.calculatePins(this.props,!0)},this.buildDevicePopup=(e,t)=>{const a=document.createElement("div");a.classList.add("popup-content-box"),a.classList.add(t);const s=document.createElement("div");s.classList.add("popup-type"),s.innerText=e.farmName;const n=document.createElement("div");return n.classList.add("popup-device-name"),n.innerText=e.name,a.appendChild(s),a.appendChild(n),a.onclick=()=>{this&&this.openDeviceDetails(e.id)},a},this.openDeviceDetails=e=>this.setState({selectedDeviceId:e}),this.closeDeviceDetails=()=>this.setState({selectedDeviceId:void 0}),this.state={selectedDeviceId:void 0}}componentDidUpdate(){this.calculatePins(this.props)}calculatePins(e,t=!1){if(this.map){if(this.props.farm&&this.props.farm.geometry){const e=this.props.farm.geometry;let t;Object(m.rb)(this.map,e),"Polygon"===e.type?t=new Ot.data.Polygon(e.coordinates):"MultiPolygon"===e.type&&(t=new Ot.data.MultiPolygon(e.coordinates)),this.map.addPolygons([t],{name:"farm-azure-map",color:"#1e90ff",opacity:.5,overwrite:!0})}const t=this.extractGeoLocatedDevices(e.devices||[],e.farmId);{const e=this.devicesToPins(t),a=e.normal,s=e.warning,n=e.critical;this.map.addPins(a,{name:Ct,fillColor:"blue",overwrite:!0}),this.map.addPins(s,{name:jt,overwrite:!0}),this.map.addPins(n,{name:Nt,overwrite:!0})}}}extractGeoLocatedDevices(e,t){return Object.keys(e).map(t=>e[t]).filter(e=>e.latitude&&e.longitude&&e.farmId===t)}devicesToPins(e){return e.reduce((e,t)=>{const a=(({farmName:e,latitude:t,longitude:a,name:s})=>new Ot.data.Feature(new Ot.data.Point([a,t]),{farmName:e,name:s}))(t);return ae()(e,{normal:{$push:[a]}})},{normal:[],warning:[],critical:[]})}zoomToPins(e){const t=[],a=[];e.forEach(({geometry:{coordinates:[e,s]}})=>{t.push(e),a.push(s)});const s=Math.min.apply(null,t),n=Math.min.apply(null,a),r=Math.max.apply(null,t),o=Math.max.apply(null,a);this.map.setCameraBounds({bounds:[s,n,r,o],padding:50})}render(){const e=this.props,t=e.t,a=e.isPending,s=e.mapKeyIsPending,n=e.azureMapsKey,r=e.error,o=!r&&a&&s;return i.a.createElement(v.B,{className:"map-panel-container"},i.a.createElement(v.F,{className:"mappanel-header"},i.a.createElement(v.G,null,t("dashboard.panels.map.header"))),i.a.createElement(v.C,{className:"map-panel-container"},!r&&i.a.createElement(it,{azureMapsKey:n,onMapReady:this.onMapReady,mapDivId:"farm-boundary-map"})),o&&i.a.createElement(v.I,null,i.a.createElement(v.w,null)),!s&&!this.props.azureMapsKey&&i.a.createElement(v.D,null,t("dashboard.panels.map.notSupportedError")),r&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:r})),this.state.selectedDeviceId&&i.a.createElement(_,{onClose:this.closeDeviceDetails,deviceId:this.state.selectedDeviceId}))}}const Mt=Object(s.b)(null)(Dt);a(1035);let At=[];const It=m.ob.NoMapImage;class kt extends o.Component{constructor(e){super(e),this.sceneDataCallback=(e,t,a)=>{if(a)this.setState({sceneError:a});else if(t.mapFound){const a=Object(m.D)(e);this.setState({url:a,mapFound:t.mapFound,latestMapDate:t.latestMapDate,latestCreatedAt:t.latestCreatedAt}),At=e.mapFileDownloadSelectObject}else this.setState({url:t.url,mapFound:t.mapFound})},this.onImgError=(e,t)=>{this.setState({[e]:t})};const t=this.props.farmId,a=this.props.maps;this.state={isPending:!0,isModalOpen:!1,mapName:void 0,url:void 0,mapFound:void 0,farmName:m.s},this.onDroneClick=this.onDroneClick.bind(this),this.onModalclose=this.onModalclose.bind(this),this.getDroneSceneData=this.getDroneSceneData.bind(this),this.getDroneSceneData("drone",t,a)}onDroneClick(){const e=this.props.t;this.setState({isModalOpen:!0,mapName:e("farms.panel.Orthomosaic")}),R.a.trackEvent({name:"UiEvent:ModalOpen: Drone Imagery"})}onModalclose(){this.setState({isModalOpen:!1,modalName:void 0}),R.a.trackEvent({name:"UiEvent:ModalClose: Drone Imagery"})}getDroneSceneData(e,t,a){Object(m.E)(e,t,a,this.sceneDataCallback)}render(){const e=this.props,t=e.t,a=e.farmsError,s=this.state,n=s.sceneError,r=s.isModalOpen,o=s.mapName,l=s.url,c=s.mapFound,d=s.latestMapDate,u=s.latestCreatedAt,p=s.isDroneImageBroken,h=n||a,f=this.props.farmName;return i.a.createElement(v.B,null,i.a.createElement(v.F,null,i.a.createElement(v.G,null,t("farms.panel.Drone")),i.a.createElement(v.g,{right:!0},i.a.createElement("div",{id:"date"},d))),i.a.createElement(v.C,null,void 0===c?i.a.createElement("div",{className:"shimmer-soil-panel"}," "):i.a.createElement("div",{className:l!==It?"drone-image":"nodrone-image"},i.a.createElement("center",null,i.a.createElement("img",{src:l,onClick:c&&this.onDroneClick,alt:t(p?"dashboard.panels.map.corruptImageError":"farms.panel.nodrone-image"),onError:()=>this.onImgError("isDroneImageBroken",!0)}),l!==It?i.a.createElement("p",null,t("farms.panel.Orthomosaic")):i.a.createElement("p",null,t("maps.modal.noMapYet")))),r&&i.a.createElement(ht,{type:m.U,name:o,farmName:f,modalClose:this.onModalclose,mapDate:d,latestCreatedAt:u,blobUrl:l,noMapImage:It,mapFileDownloadSelectObject:At,t:t})),h&&i.a.createElement(v.D,null,i.a.createElement(v.a,{t:t,error:h})))}}a(1036);const Ft=window.atlas,wt={deleteModalSuccess:!1,deleteModalError:void 0,deleteFarmPending:!1,openModalName:void 0,currentActiveAlerts:[],topAlerts:[],alertsPerDeviceId:{},eviBlobUrl:void 0,soilMoistureUrl:void 0,openWarningCount:void 0,openCriticalCount:void 0,countMaxAlerts:0,devicesInAlert:{},lastRefreshed:void 0,devices:[]};class Rt extends o.Component{constructor(e){super(e),this.refreshRules=()=>{this.props.rulesError||this.props.isRulesPending||this.props.fetchRules()},this.openFlyout=e=>this.setState({openFlyoutName:e}),this.onCloseFlyout=()=>this.setState({openFlyoutName:void 0}),this.deleteFarm=()=>{this.setState({deleteModalSuccess:!1,deleteModalError:void 0,deleteFarmPending:!0}),this.subscription=H.c.deleteFarm(this.state.farmId).subscribe(()=>{this.props.deleteFarm([this.state.farmId]),this.setState({deleteModalError:void 0,deleteModalSuccess:!0,deleteFarmPending:!1})},e=>{this.setState({deleteModalError:e,deleteModalSuccess:!1,isPending:!1,changesApplied:!0,deleteFarmPending:!1})},()=>this.setState({isPending:!1,changesApplied:!0,ruleDeleted:!0}))},this.getOpenModal=()=>"delete-farm"===this.state.openModalName?i.a.createElement(E.a,{type:"deleteFarm",itemId:this.state.farmId,onClose:this.closeModal,onDelete:this.onDelete,deleteItem:this.deleteFarm,title:this.props.t("farms.modals.delete.title"),deleteConfirmation:this.props.t("farms.modals.delete.deleteConfirmation",{returnObjects:!0}),deleteBtn:this.props.t("modal.delete"),icon:m.ob.trash,t:this.props.t,isPending:this.state.deleteFarmPending,deleteModalError:this.state.deleteModalError,deleteModalSuccess:this.state.deleteModalSuccess,successMsg:this.props.t("farms.modals.delete.deleteSuccess")}):null,this.openDeleteFarm=()=>{this.setState(Object(r.a)({},this.state,{openModalName:"delete-farm"}))},this.closeModal=()=>{const e=this.props.history;this.state.deleteModalSuccess&&e.replace("/farms"),this.setState(Object(r.a)({},this.state,{openModalName:void 0}))},this.onDelete=()=>{const e=this.props,t=e.history;(0,e.fetchFarms)(),t.goBack(),this.setState(Object(r.a)({},this.state,{openModalName:void 0}))},this.getDeviceStatus=e=>{let t=0,a=0,s=0,n=0;e.length>0?(e.filter(e=>e.farmId===this.state.farmId).map(e=>("Offline"===e.status?a+=1:"Online"===e.status&&(t+=1),"Node"===e.deviceModelType?n+=1:"Gateway"===e.deviceModelType&&(s+=1),null)),this.setState({DeviceCount:[t,a,n,s]})):this.setState({DeviceCount:[]})};const t=this.props.location.pathname.indexOf("/farms/")+"/farms/".length,a=this.props.location.pathname.length,s=this.props.location.pathname.substring(t,a);this.state=Object(r.a)({DeviceCount:[]},wt,{farmId:this.props&&this.props.location&&this.props.location.state?this.props.location.state.id:s,farmName:this.props&&this.props.location&&this.props.location.state&&this.props.location.state.farmName,farmNameLoading:!(this.props&&this.props.location&&this.props.location.state&&this.props.location.state.farmName)}),!(this.props&&this.props.location&&this.props.location.state)&&H.c.getFarmById(this.state.farmId).subscribe(e=>{this.setState({farmNameLoading:!1,farmName:e.name})},e=>this.setState({farmNameError:e,farmNameLoading:!1}),()=>{}),this.subscriptions=[],this.createMaps=this.createMaps.bind(this),this.openDeleteFarm=this.openDeleteFarm.bind(this),this.onDelete=this.onDelete.bind(this),this.closeModal=this.closeModal.bind(this),this.getSensorIds=this.getSensorIds.bind(this);const n=this.props,o=n.fetchFarms,l=n.farmsLastUpdated,c=n.farmsError,d=n.fetchDevices,u=n.devicesLastUpdated,p=n.devicesError,h=n.deviceModelsLastUpdated,f=n.deviceModelsError,g=n.fetchDeviceModel,b=n.fetchSensors,v=n.sensorsLastUpdated,y=n.sensorsError,S=n.mapsError,O=n.mapsLastUpdated,C=n.fetchMaps;l||c||o(),u||p||d(),v||y||b(),O||S||C(),h||f||g()}getSensorIds(){const e=this.state.farmId,t=this.props,a=t.devices,s=t.sensors;return a.filter(t=>t.farmId===e).reduce((e,t)=>e.concat(s.filter(e=>e.deviceId===t.id)),[]).map(e=>e.id)}componentDidMount(){this.getDeviceStatus(this.props.devices)}componentDidUpdate(e){e.devices!==this.props.devices&&this.getDeviceStatus(this.props.devices)}componentWillUnmount(){this.subscriptions.forEach(e=>e.unsubscribe())}extractfarmNames(){const e=this.props.farms,t=[];for(let a=0;a<e.length;a++)t.push({label:e[a].name,value:e[a].id})}createMaps(e){switch(this.extractfarmNames(),e.target.value.value){case"Satellite Indices":this.setState({openFlyoutName:"Satellite Indices",jobTypeName:m.db});break;case"Soil Moisture":this.setState({openFlyoutName:"Soil Moisture",jobTypeName:m.hb});break;case"Sensor Placement":this.setState({openFlyoutName:"Sensor Placement",jobTypeName:m.fb})}}render(){const e=this.props,t=e.theme,a=e.azureMapsKey,s=e.devices,n=e.devicesError,r=e.isDevicesPending,o=e.isDeviceModelsPending,l=e.deviceModelsError,c=e.rules,d=e.t,u=e.maps,p=e.farms,h=e.farmsError,f=this.state,g=f.openFlyoutName,E=f.farmId,y=f.currentActiveAlerts,S=f.topAlerts,O=f.farmName,C=f.jobTypeName,j=f.farmNameLoading,N=f.DeviceCount;S.filter(e=>!c[e.ruleId]).length+y.filter(e=>!c[e.ruleId]).length>0&&this.refreshRules();const D=[{label:d("maps.satelliteIndices"),value:"Satellite Indices"},{label:d("maps.soilMoisture"),value:"Soil Moisture"},{label:d("maps.sensorPlacement"),value:"Sensor Placement"}],I=p.find(e=>e.id===E),k="Satellite Indices"===g||"Soil Moisture"===g||"Sensor Placement"===g,F=!Ft;return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0,className:"farmdetail-menus"},i.a.createElement(v.R,{permissions:b.h.editFarms},i.a.createElement(v.b,{svg:m.ob.edit,className:"farm-details-menu-buttons",onClick:()=>{this.openFlyout("edit"),R.a.trackEvent({name:"UiEvent:Click: Edit Farm Btn"})}},d("farms.flyouts.edit.open"))),i.a.createElement(v.R,{permissions:b.h.deleteFarms},i.a.createElement(v.b,{svg:m.ob.trash,className:"farm-details-menu-buttons",onClick:()=>{this.openDeleteFarm(),R.a.trackEvent({name:"UiEvent:Click: Delete Farm Btn"})}},d("farms.delete"))),i.a.createElement(v.R,{permissions:b.h.addDevices},i.a.createElement(v.b,{svg:m.ob.addDevice,className:"farm-details-menu-buttons",onClick:()=>{this.openFlyout("addDevices"),R.a.trackEvent({name:"UiEvent:Click: Add Devices Fly Open Btn"})}},d("farms.addDevices"))),i.a.createElement(v.R,{permissions:b.h.createMaps},i.a.createElement(v.W,{className:"precision-maps-group-dropdown",placeholder:"Generate Precision Maps",options:D,value:"CREATE MAPS",clearable:!1,searchable:!1,onChange:e=>{this.createMaps(e),R.a.trackEvent({name:"UiEvent:Click: Generate "+e.target.value.value+" Fly Open"},{codeSource:{component:"FarmDetails"}})},icon:m.ob.plus}))),i.a.createElement(v.g,null)),i.a.createElement(v.z,{className:"farmDetails-container"},"edit"===g&&i.a.createElement($e.EditFarmFlyout,{farmId:E,onClose:this.onCloseFlyout,t:d}),"addDevices"===g&&i.a.createElement($e.AddDevicesContainer,{farmId:E,onClose:this.onCloseFlyout,t:d}),i.a.createElement("div",null,i.a.createElement(v.u,{className:"grid-farm-container"},i.a.createElement(v.d,{className:"grid-farm-cell col-1"},i.a.createElement(st,{onlineDeviceCount:N&&N.length>0?N[0]:void 0,offlineDeviceCount:N&&N.length>0?N[1]:void 0,nodesCount:N&&N.length>0?N[2]:void 0,gatewaysCount:N&&N.length>0?N[3]:void 0,isPending:r||o,error:h||n||l,t:d})),i.a.createElement(v.d,{className:"grid-farm-cell col-5"},i.a.createElement(v.E,{msg:d("farms.farmDetails.panels.map.runtimeError")},i.a.createElement(Mt,{azureMapsKey:!F&&a,farmId:E,farm:I,devices:s,mapKeyIsPending:!1,isPending:r,error:h||n,t:d}))),i.a.createElement(v.d,{className:"grid-farm-cell col-9"},i.a.createElement(M,{theme:t,sensorIds:this.getSensorIds(),showHeader:!0,t:d})),i.a.createElement("div",{className:"grid-farm-maps"},d("maps.flyouts.latestPrecisionMaps")),i.a.createElement(v.d,{className:"grid-farm-cell col-3"},i.a.createElement(Et,{t:d,farmName:O,farmId:E,maps:u,noMapImage:d("dashboard.noData"),farmsError:h,farmNameLoading:j})),i.a.createElement(v.d,{className:"grid-farm-cell col-7"},i.a.createElement(v.E,{msg:d("farms.farmDetails.panels.map.runtimeError")},i.a.createElement(ut,{t:d,farmName:O,farmId:E,maps:u,noMapImage:m.W,azureMapsKey:!F&&a,farm:I,mapKeyIsPending:!1,farmNameLoading:j,farmsError:h}))),i.a.createElement(v.d,{className:"col-5"},i.a.createElement(gt,{t:d,farmName:O,farmId:E,maps:u,noMapImage:d("dashboard.noData"),farmsError:h,farmNameLoading:j})),i.a.createElement(v.d,{className:"grid-farm-cell col-5"},i.a.createElement(kt,{farmName:O,farmId:E,maps:u,noMapImage:d("dashboard.noData"),farmsError:h,farmNameLoading:j,t:d}))),i.a.createElement("div",{className:"farm-details-link"},i.a.createElement(A.a,{to:{pathname:"/maps",state:{farmId:E,farmName:O}}},d("maps.flyouts.viewAllMaps")))),k&&i.a.createElement(v.t,{farmId:E,flyoutName:g,onClose:this.onCloseFlyout,jobTypeName:C,farmsError:h,t:d})),this.getOpenModal())}}var Tt=Object(T.a)(R.c,Rt,"Farm Details"),Pt=a(58);const xt=Object(n.c)()(Object(s.b)((e,t)=>({farms:Object(Q.c)(e),farmsError:Object(Q.d)(e),farmsLastUpdated:Object(Q.e)(e),isFarmsPending:Object(Q.g)(e),devices:Object(N.i)(e),devicesError:Object(N.j)(e),devicesLastUpdated:Object(N.k)(e),isDevicesPending:Object(N.l)(e),deviceModelsError:Object(N.c)(e),isDeviceModelsPending:Object(N.g)(e),deviceModelsLastUpdated:Object(N.d)(e),maps:Object(Pt.c)(e),sensors:Object(D.i)(e),sensorsError:Object(D.b)(e),sensorsLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),azureMapsKey:Object(j.i)(e),rules:Object(Ee.g)(e),rulesError:Object(Ee.j)(e),isRulesPending:Object(Ee.l)(e),theme:Object(j.o)(e),timeInterval:Object(j.p)(e),timeSeriesExplorerUrl:Object(j.q)(e),mapsError:Object(Pt.d)(e),isMapsPending:Object(Pt.f)(e),mapsLastUpdated:Object(Pt.e)(e),jobTypes:Object(tt.b)(e),jobTypesError:Object(tt.c)(e),isJobTypesPending:Object(tt.e)(e),jobTypeslastUpdated:Object(tt.d)(e)}),e=>({fetchJobTypes:()=>e(tt.a.actions.fetchJobTypes()),fetchDeviceModel:()=>e(N.a.actions.fetchDeviceModel()),fetchFarms:()=>e(Q.a.actions.fetchFarms()),fetchDevices:()=>e(N.a.actions.fetchDevices()),fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchMaps:()=>e(Pt.a.actions.fetchMaps()),fetchRules:()=>e(Ee.a.actions.fetchRules()),updateTimeInterval:t=>e(j.v.actions.updateTimeInterval(t)),deleteFarm:t=>e(Q.i.actions.deleteFarm(t))}))(Tt));a(160),a(1037);const Ut=e=>{const t=e.closeTooltip,a=e.title,s=e.content;return i.a.createElement("div",{className:"arrow_box"},i.a.createElement("span",null," ",i.a.createElement(v.bb,{onClick:t,path:m.ob.cancelX})),i.a.createElement("p",{className:"title"},i.a.createElement("b",null,a," ")," "),i.a.createElement("p",null,s))},Lt=c.d.checkForEmpty,Bt={name:{headerName:"maps.grid.name",field:"mapName",sort:"asc",valueFormatter:({value:e})=>Lt(e),cellRendererFramework:d.e,comparator:m.g},farm:{headerName:"maps.grid.farm",field:"farmName",valueFormatter:({value:e})=>Lt(e),comparator:m.g},type:{headerName:"maps.grid.type",field:"type",comparator:m.g},date:{headerName:"maps.grid.date",field:"date",cellRendererFramework:d.f},createdOn:{headerName:"maps.grid.createdon",field:"createdAt",cellRendererFramework:d.f}},_t={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"multiple"},Gt={softSelectedId:void 0,isModalOpen:!1,rowData:void 0,blobUrlError:void 0,isMapFilesPending:!1,noMaps:!1,mapFileDownloadSelectObject:[],sensorPlacementLatLong:null};class Jt extends o.Component{constructor(e){super(e),this.onGridReady=e=>{this.mapsGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.getFarmByID=e=>this.props.farms.filter(t=>t.id===e),this.onSoftSelectChange=(e,t)=>{const a=this.props.onSoftSelectChange;R.a.trackEvent({name:"UiEvent:ModalOpen: Map Modal "+t.type}),this.setState({softSelectedId:t.id,eachRowData:t,isModalOpen:!0,isMapFilesPending:!0}),"sensor-placement"===t.type&&H.e.getSceneById(t.id).subscribe(e=>this.setState({sensorPlacementLatLong:e.properties.sensor_placements,isMapFilesPending:!1})),Object(m.F)(t.id,null,this.sceneDataCallback),Object(m.L)(a)&&a(e,t)},this.sceneDataCallback=(e,t,a)=>{if(a)this.setState({isMapFilesPending:!1,noPngMaps:!0,noMaps:!0});else if(t.mapFound){const a=Object(m.D)(e);this.setState({mapFound:t.mapFound,isMapFilesPending:t.isMapFilesPending,blobUrl:a,noPngMaps:t.noPngMaps,noMaps:t.noMaps,mapFileDownloadSelectObject:e.mapFileDownloadSelectObject})}else this.setState({url:t.url,mapFound:t.mapFound})},this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;Object(m.L)(a)&&a(e.length>0?this.contextBtns:null),Object(m.L)(s)&&s(e)},this.getSoftSelectId=({id:e}="")=>e,this.onRowClicked=({data:e})=>{},this.state=Gt,this.columnDefs=[Bt.name,Bt.farm,Bt.date,Bt.createdOn,Bt.type],this.onModalClose=this.onModalClose.bind(this)}onModalClose(){R.a.trackEvent({name:"UiEvent:ModalClose: Map Modal "+this.state.eachRowData.type}),this.setState({isModalOpen:!1})}render(){const e=Object(r.a)({},_t,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:(this.state.softSelectedDevice||{}).id},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:this.props.t},onGridReady:this.onGridReady,onRowClicked:this.onRowClicked,onSoftSelectChange:this.onSoftSelectChange,onHardSelectChange:this.onHardSelectChange}),t=this.state,a=t.eachRowData,s=t.isModalOpen,n=t.blobUrlError,o=t.blobUrl,l=t.isMapFilesPending,c=t.noMaps,d=t.noPngMaps,u=t.mapFileDownloadSelectObject,p=t.sensorPlacementLatLong,h=this.props.t;let f=void 0;return a&&a.farmId&&(f=this.getFarmByID(a.farmId)[0]),[i.a.createElement(v.K,Object.assign({key:"farm-grid-key"},e)),s&&i.a.createElement(ht,{key:"modal",type:m.U,name:a.type,t:h,blobUrlError:n,blobUrl:o,farm:f,farmName:a.farmName,mapName:a.mapName,modalClose:this.onModalClose,mapFileDownloadSelectObject:u,sensorPlacementLatLong:p,mapDate:k()(a.date).format(m.m),latestCreatedAt:k()(a.createdAt).format(m.m),isPending:l,noMaps:c,noPngMaps:d})]}}a(1038),a(1039);var zt=a(255);class Vt extends o.Component{constructor(e){super(e),this.handleOnChange=(e,t,a)=>{if(a){const e=t.startDate.format(m.R),s=t.endDate.format(m.R);this.setState({[a]:{from:e,to:s}})}else e.target.value?this.setState({[t]:e.target.value}):this.setState({[t]:void 0})},this.getElementByFilterContent=(e,t,a)=>{switch(e.type){case m.a.select:return i.a.createElement(i.a.Fragment,{key:e.filterKey},e.label&&i.a.createElement("div",{className:"heading"},e.label),e.List&&e.typeProps&&i.a.createElement(v.p,{type:"select",options:e.List,className:"flyouts-select-list  ".concat(e.className?e.className:""),placeholder:e.typeProps.placeholder,onChange:e=>this.handleOnChange(e,a),matchProp:"label",clearable:e.typeProps.clearable?e.typeProps.clearable:this.props.clearable,searchable:e.typeProps.searchable?e.typeProps.searchable:this.props.searchable,value:this.state[e.filterKey]}));case m.a.datePicker:return i.a.createElement(i.a.Fragment,{key:e.filterKey},e.label&&i.a.createElement("div",{className:"heading"},e.label),i.a.createElement("div",{className:"date-picker-container"},i.a.createElement(zt.a,{startDate:e.typeProps.selectedValue&&e.typeProps.selectedValue.from?k()(e.typeProps.selectedValue.from):void 0,endDate:e.typeProps.selectedValue&&e.typeProps.selectedValue.to?k()(e.typeProps.selectedValue.to):void 0,singleDatePicker:e.typeProps.singleDatePicker,className:e.typeProps.className,inputValue:e.typeProps.inputValue,IconClass:e.typeProps.IconClass,onChange:(e,t)=>this.handleOnChange(e,t),containerType:e.typeProps.containerType,containerIcon:e.typeProps.containerIcon,containerPlaceHolder:e.typeProps.containerPlaceHolder,containerValue:this.state[e.filterKey]&&this.state[e.filterKey].from&&this.state[e.filterKey].to?"".concat(this.state[e.filterKey].from," to ").concat(this.state[e.filterKey].to," "):void 0,onApplyEvent:(t,a)=>this.handleOnChange(t,a,e.filterKey),t:t})));default:return i.a.createElement(i.a.Fragment,null,e.label&&i.a.createElement("div",{className:"heading"},e.label),i.a.createElement(v.h,null,t("maps.filterFlyout.invalidFilter")))}},this.getFilterCount=()=>{let e=0;return Object.keys(this.state).map(t=>(void 0!==this.state[t]&&0!==Object.getOwnPropertyNames(this.state[t]).length&&(e+=1),null)),e},this.onFilterClick=()=>{const e=this.getFilterCount(),t=Object(r.a)({},this.state,{isFilterOn:!0,appliedFilters:e});this.props.filterConfig.applyCallback(t)},this.onResetClick=()=>{const e={};Object.keys(this.state).map(t=>e[t]=void 0),this.setState(e),this.props.filterConfig.applyCallback({})},this.state={}}componentDidMount(){const e={};this.props.filterConfig.FilterList.map(t=>(t.typeProps&&t.typeProps.selectedValue&&(e[t.filterKey]=t.typeProps.selectedValue),t)),this.setState(e)}render(){const e=this.props,t=e.t,a=e.onCloseFlyout,s=e.filterConfig;return i.a.createElement(v.k,null,i.a.createElement(v.n,null,i.a.createElement(v.o,null,i.a.createElement("div",{className:"title ".concat(s.header&&s.header.className?s.header.className:"")},s.header&&s.header.content?s.header.content:"")),i.a.createElement(v.l,{onClick:a})),i.a.createElement(v.m,null,i.a.createElement("form",null,i.a.createElement(v.s,null,s.FilterList.map(e=>this.getElementByFilterContent(e,t,e.filterKey)))),i.a.createElement(v.c,{className:"wrapper-button-container"},i.a.createElement(v.b,{primary:!0,onClick:this.onResetClick,className:"reset-btn"},t("jobs.flyouts.reset")),i.a.createElement(v.b,{primary:!0,type:"submit",onClick:this.onFilterClick,className:"apply-btn"},t("jobs.flyouts.apply")))))}}Vt.defaultProps={t:null,onCloseFlyout:void 0,filterConfig:[],clearable:!0,searchable:!0};let Ht=[],qt=[],Kt=[];class Wt extends o.Component{constructor(e){super(e),this.openFlyout=e=>()=>{this.setState({openFlyoutName:e})},this.closeFlyout=()=>this.setState({openFlyoutName:void 0}),this.onContextMenuChange=e=>this.setState({contextBtns:e}),this.onGridReady=e=>this.mapGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.mapGridApi&&this.mapGridApi.setQuickFilter(e)},this.toSelectOptionFromArray=e=>({label:e,value:e}),this.toSelectOption=({name:e,id:t})=>({label:e,value:t}),this.closeTooltip=()=>{(0,this.props.updateToolTipPendingStatus)()},this.filterMapsFlyout=()=>{this.setState({openFilterFlyout:!0})},this.onCloseFlyout=()=>this.setState({openFilterFlyout:!1}),this.handleChangeMapType=e=>{this.setState({selectedMapType:e.target.value.label})},this.handleChangeFarmName=e=>{this.setState({selectedFarmName:e.target.value.label})},this.onFilterClick=e=>{R.a.trackEvent({name:"UiEvent:Click: Maps Filter Flyout Apply Btn"});const t={filterState:{filterMapType:e.map_type?e.map_type:void 0,selectedMapType:e.map_type?e.map_type:void 0,selectedDate:e.date?e.date:void 0,selectedFarmName:e.farm_name?e.farm_name:void 0,isFilterOn:e.isFilterOn,appliedFilters:e.appliedFilters}};this.setState(t),Kt=Object(m.J)(e.map_type)||Object(m.J)(e.farm_name)||Object(m.J)(e.date)&&(Object(m.J)(e.date.from)||Object(m.J)(e.date.to))?this.props.maps.filter(t=>(Object(m.J)(e.map_type)?t.type===e.map_type.label:{})&&(Object(m.J)(e.farm_name)?t.farmId===e.farm_name.value:{})&&(Object(m.J)(e.date)&&Object(m.J)(e.date.from)?Object(m.J)(e.date)&&Object(m.J)(e.date.to)?k()(k()(t.date).format(m.R)).isBetween(e.date.from,e.date.to,null,[]):k()(t.date).format(m.R)===e.date.from:{})):this.props.maps},this.state={contextBtns:null,modalIsOpen:!1,farmsNameObject:[],openFilterFlyout:!1,filterState:{isFilterOn:!1,filterMapType:void 0,selectedMapType:void 0,selectedDate:void 0,selectedFarmName:void 0,appliedFilters:0}},this.createMaps=this.createMaps.bind(this),this.modalclose=this.modalclose.bind(this),this.modalopen=this.modalopen.bind(this);const t=this.props,a=t.mapsLastUpdated,s=t.fetchMaps,n=t.mapsError,r=t.fetchFarms,o=t.farmsLastUpdated,i=t.farmsError;a||n||s(),o||i||r()}componentDidMount(){Kt=this.props.maps}modalopen(){this.setState({openModalName:m.ib})}modalclose(){this.isModalopentrue=!1}createMaps(e){switch(e.target.value.value){case m.eb:this.setState({openFlyoutName:m.eb,jobTypeName:m.db});break;case m.ib:this.setState({openFlyoutName:m.ib,jobTypeName:m.hb});break;case m.gb:this.setState({openFlyoutName:m.gb,jobTypeName:m.fb})}}render(){const e=this.state,t=e.openFlyoutName,a=e.jobTypeName,s=e.openFilterFlyout,n=e.filterState,r=this.props,o=r.t,l=r.maps,c=r.mapsError,d=r.isMapsPending,u=r.fetchMaps,p=r.isFarmsPending,h=r.farms,f=r.farmsError,g=r.isTooltipPending,E=r.mapTypes;Ht=h.map(this.toSelectOption),qt=E.filter(e=>Object(m.J)(e)).map(this.toSelectOptionFromArray);const y=t===m.eb||t===m.ib||t===m.gb,S={onGridReady:this.onGridReady,rowData:d||p?void 0:n&&n.isFilterOn?Kt:l||[],onContextMenuChange:this.onContextMenuChange,t:o,refresh:u,farms:h},O=[{label:o("maps.satelliteIndices"),value:m.eb},{label:o("maps.soilMoisture"),value:m.ib},{label:o("maps.sensorPlacement"),value:m.gb}],C={FilterList:[{List:qt,type:m.a.select,typeProps:{selectedValue:n.selectedMapType,placeholder:o("maps.filterFlyout.selectMapType")},label:"Type",filterKey:"map_type",className:""},{type:m.a.datePicker,label:"Date",filterKey:"date",typeProps:{className:"datepicker-textbox",singleDatePicker:!1,inputValue:n.selectedDate,IconClass:"datepicker-icon",containerType:"input",containerIcon:m.ob.datePicker,containerPlaceHolder:"Enter Date Range",containerValue:n.selectedDate,selectedValue:n.selectedDate}},{List:Ht,type:m.a.select,typeProps:{selectedValue:n.selectedFarmName?n.selectedFarmName:void 0,placeholder:o("maps.filterFlyout.selectFarm")},label:"Name",filterKey:"farm_name",className:""}],applyCallback:this.onFilterClick,resetCallback:this.onResetClick,header:{className:"",content:o("jobs.flyouts.filter")}};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:o("maps.searchPlaceholder")}),!0===g&&i.a.createElement(Ut,{t:o,closeTooltip:this.closeTooltip,title:o("maps.searchMap"),content:o("maps.searchMapName")}),i.a.createElement(v.R,{permissions:b.h.createMaps},i.a.createElement(v.W,{className:"maps-group-dropdown",placeholder:"Create Maps",options:O,clearable:!1,searchable:!1,onChange:e=>{this.createMaps(e),R.a.trackEvent({name:"UiEvent:Click: Generate "+e.target.value.value+" Fly Open"},{codeSource:{component:"Maps Page"}})},icon:m.ob.plus})),i.a.createElement(v.g,{right:!0},i.a.createElement(v.b,{svg:n.appliedFilters>0?m.ob.appliedFilter:m.ob.filter,className:"filter-maps",onClick:e=>{this.filterMapsFlyout(e),R.a.trackEvent({name:"UiEvent:Click: Maps Filter Flyout Open Btn"})}},o("jobs.filter")," ",n.appliedFilters>0&&i.a.createElement("span",null,"(".concat(n.appliedFilters,")")))))),i.a.createElement(v.z,{className:"maps-container",key:"page-content"},i.a.createElement(v.A,{titleValue:o("maps.title")}),y&&i.a.createElement(v.t,{farmsSelectObject:Ht,t:o,flyoutName:this.state.openFlyoutName,onClose:this.closeFlyout,jobTypeName:a,isFarmsPending:p,farmsError:f}),!!c&&i.a.createElement(v.a,{t:o,error:c}),!c&&i.a.createElement(Jt,S),s&&i.a.createElement(Vt,{t:o,onCloseFlyout:this.onCloseFlyout,isPending:p,filterConfig:C})))}}var $t=Object(T.a)(R.c,Wt,"Maps Grid");const Qt=Object(n.c)()(Object(s.b)((e,t)=>({maps:t&&t.location&&t.location.state&&t.location.state.farmName?Object(Pt.c)(e).filter(e=>e.farmName===t.location.state.farmName):Object(Pt.c)(e),farms:Object(Q.c)(e),mapTypes:Object(Pt.b)(e),mapsError:Object(Pt.d)(e),isMapsPending:Object(Pt.f)(e),isTooltipPending:Object(Pt.g)(e),mapsLastUpdated:Object(Pt.e)(e),farmsError:Object(Q.d)(e),isFarmsPending:Object(Q.g)(e),farmsLastUpdated:Object(Q.e)(e)}),e=>({fetchMaps:()=>e(Pt.a.actions.fetchMaps()),fetchFarms:()=>e(Q.a.actions.fetchFarms()),updateToolTipPendingStatus:()=>e(Pt.i.actions.updateTooltip())}))($t)),Zt=c.d.checkForEmpty,Yt={id:{headerName:"jobs.grid.id",field:"id"},name:{headerName:"jobs.grid.name",field:"name",sort:"asc",cellRendererFramework:d.e,comparator:m.g},typeOfJob:{headerName:"jobs.grid.typeOfJob",field:"jobTypeName"},farmName:{headerName:"jobs.grid.farmName",field:"farmName",valueFormatter:({value:e})=>Zt(e),comparator:m.g},status:{headerName:"jobs.grid.status",field:"currentState",cellRendererFramework:d.b,cellStyle:{overflow:"visible",opacity:1}},startTime:{headerName:"jobs.grid.startDate",field:"startDate",valueFormatter:({value:e})=>Zt(e)},endTime:{headerName:"jobs.grid.endDate",field:"endDate",valueFormatter:({value:e})=>Zt(e)},createdAt:{headerName:"jobs.grid.createdAt",field:"createdAt",cellRendererFramework:d.f}},Xt={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"single"},ea={softSelectedId:void 0,rowData:void 0,selectedJobs:void 0,deleteModalSuccess:!1,deleteModalError:void 0,abortJobPending:!1};class ta extends o.Component{constructor(e){super(e),this.openModal=e=>()=>this.setState({openModalName:e}),this.closeModal=()=>this.setState({openModalName:void 0}),this.abortJobsClick=()=>{this.abortJob()},this.onGridReady=e=>{this.jobsGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.setselectedJobs=e=>this.setState({selectedJobs:e}),this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;if(Object(m.L)(a)){this.setselectedJobs(e);let t=!0;for(let a=0;a<e.length;a++)e[a].currentState!==m.r&&e[a].currentState!==m.nb&&e[a].currentState!==m.mb&&e[a].currentState!==m.lb||(t=!1);t&&e.length>=1?a(this.contextBtns.abort):a(null)}Object(m.L)(s)&&(a(this.contextBtns.abort),s(e))},this.getSoftSelectId=({id:e}="")=>e,this.state=ea,this.columnDefs=[c.c,Yt.id,Yt.name,Yt.typeOfJob,Yt.farmName,Yt.status,Yt.startTime,Yt.endTime,Yt.createdAt],this.abortJob=this.abortJob.bind(this),this.contextBtns={abort:i.a.createElement(v.R,{key:"abort",permissions:b.h.deleteRules},i.a.createElement(v.b,{svg:m.ob.abort,className:"abort-job",onClick:this.openModal("abort")},this.props.t("jobs.abort")))}}abortJob(){this.setState({deleteModalSuccess:!1,deleteModalError:void 0,abortJobPending:!0});const e=this.state.selectedJobs;for(let t=0;t<e.length;t++)this.subscription=H.d.abortJobs(e[t].id).subscribe(e=>{this.props.abortJob([Object(b.p)(e)]),this.props.refresh(),this.setState({deleteModalError:void 0,deleteModalSuccess:!0,abortJobPending:!1,changesApplied:!0})},e=>this.setState({deleteModalError:e,deleteModalSuccess:!1,changesApplied:!0,abortJobPending:!1}))}render(){const e=Object(r.a)({},Xt,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:(this.state.softSelectedDevice||{}).id},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:this.props.t},onGridReady:this.onGridReady,onHardSelectChange:this.onHardSelectChange}),t="abort"===this.state.openModalName;return[i.a.createElement(v.K,Object.assign({key:"farm-grid-key"},e)),t&&i.a.createElement(E.a,{key:"abort-job",type:"abortJob",deleteItem:this.abortJobsClick,title:this.props.t("jobs.abortJobModal.title"),deleteConfirmation:this.props.t("jobs.abortJobModal.deleteInfo"),onClose:this.closeModal,deleteBtn:this.props.t("jobs.abort"),t:this.props.t,icon:m.ob.abort,isPending:this.state.abortJobPending,deleteModalError:this.state.deleteModalError,deleteModalSuccess:this.state.deleteModalSuccess,successMsg:this.props.t("jobs.abortJobModal.success")})]}}a(1040);var aa=a(141);let sa=[],na=[],ra=[];class oa extends o.Component{constructor(e){super(e),this.onContextMenuChange=e=>this.setState({contextBtns:e}),this.onGridReady=e=>this.jobGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.jobGridApi&&this.jobGridApi.setQuickFilter(e)},this.toSelectOption=({name:e,id:t})=>({label:e,value:t}),this.onCloseFlyout=()=>this.setState({openFlyout:!1}),this.state={contextBtns:null,farmsNameObject:[],isCalculating:!0,openFlyout:!1,filterState:{selectedStatus:void 0,selectedFarmName:void 0,selectedJobType:void 0,isFilterOn:!1,filtersApplied:0}};const t=this.props,a=t.fetchJobs,s=t.fetchFarms,n=t.jobsLastUpdated,r=t.jobsError,o=t.farmsLastUpdated,i=t.farmsError,l=t.fetchJobTypes,c=t.jobTypeslastUpdated,d=t.jobTypesError;o||i||s(),n||r||a(),c||d||l(),this.filterJobsFlyout=this.filterJobsFlyout.bind(this),this.filterJobsGrid=this.filterJobsGrid.bind(this),this.onCloseFlyout=this.onCloseFlyout.bind(this)}componentDidMount(){ra=this.props.jobs}filterJobsFlyout(){this.setState({openFlyout:!0})}filterJobsGrid(e){const t={filterState:{selectedStatus:e.status?e.status:void 0,selectedFarmName:e.farm_name?e.farm_name:void 0,selectedJobType:e.job_type?e.job_type:void 0,isFilterOn:e.isFilterOn,filtersApplied:e.appliedFilters}};this.setState(t),ra=this.props.jobs.filter(t=>(Object(m.J)(e.farm_name)?t.arguments&&t.arguments.farm_id?t.arguments.farm_id.includes(e.farm_name.value):t.arguments&&t.arguments.farm_ids?t.arguments.farm_ids.includes(e.farm_name.value):null:{})&&(Object(m.J)(e.status)?t.currentState===e.status.value:{})&&(Object(m.J)(e.job_type)?t.typeId===e.job_type.value:{}))}render(){const e=this.props,t=e.t,a=e.jobs,s=e.jobsError,n=e.isJobsPending,r=e.farms,o=e.isFarmsPending,l=e.fetchJobs,c=e.abortJob,d=e.jobTypes,u=this.state,p=u.openFlyout,h=u.filterState;sa=r.map(this.toSelectOption),na=d.filter(e=>void 0!==e.name).map(this.toSelectOption);const f={onGridReady:this.onGridReady,rowData:n?void 0:h&&h.isFilterOn?ra:a||[],onContextMenuChange:this.onContextMenuChange,t:this.props.t,refresh:l,abortJob:c,onRowClicked:({node:e})=>e.setSelected(!e.isSelected())},g={FilterList:[{List:sa,type:aa.a.select,typeProps:{selectedValue:h.selectedFarmName?h.selectedFarmName:void 0,placeholder:t("jobs.flyouts.selectFarms")},label:t("jobs.flyouts.selectFarms"),filterKey:"farm_name",className:""},{List:na,type:aa.a.select,typeProps:{selectedValue:h.selectedJobType?h.selectedJobType:void 0,placeholder:t("jobs.flyouts.jobSelect")},label:t("jobs.flyouts.selectJobs"),filterKey:"job_type",className:""},{List:Object(m.C)(),type:aa.a.select,typeProps:{selectedValue:h.selectedStatus?h.selectedStatus:void 0,placeholder:t("jobs.flyouts.statusSelect")},label:t("jobs.flyouts.status"),filterKey:"status",className:""}],applyCallback:this.filterJobsGrid,resetCallback:this.onResetClick,header:{className:"",content:t("jobs.flyouts.filter")}};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:t("jobs.searchPlaceholder")}),this.state.contextBtns,i.a.createElement(v.g,{right:!0},i.a.createElement(v.b,{svg:h.filtersApplied>0?m.ob.appliedFilter:m.ob.filter,className:"filter-job",onClick:this.filterJobsFlyout},this.props.t("jobs.filter")," ",h.filtersApplied>0&&i.a.createElement("span",null,"(".concat(h.filtersApplied,")")))))),i.a.createElement(v.z,{className:"jobs-container",key:"page-content"},i.a.createElement(v.A,{titleValue:t("jobs.title")}),!!s&&i.a.createElement(v.a,{t:t,error:s}),!s&&i.a.createElement(ta,f),p&&i.a.createElement(Vt,{t:t,onCloseFlyout:this.onCloseFlyout,isPending:o,filterConfig:g})))}}var ia=Object(T.a)(R.c,oa,"Jobs Grid");const la=Object(n.c)()(Object(s.b)(e=>({farms:Object(Q.c)(e),farmsError:Object(Q.d)(e),isFarmsPending:Object(Q.g)(e),farmsLastUpdated:Object(Q.e)(e),jobs:Object(tt.f)(e),jobTypes:Object(tt.b)(e),jobTypesError:Object(tt.c)(e),isJobTypesPending:Object(tt.e)(e),jobTypeslastUpdated:Object(tt.d)(e),jobsError:Object(tt.g)(e),isJobsPending:Object(tt.i)(e),jobsLastUpdated:Object(tt.h)(e),farmsMap:Object(Q.f)(e)}),e=>({fetchJobs:()=>e(tt.a.actions.fetchJobs()),abortJob:t=>e(tt.k.actions.abortJob(t)),fetchJobTypes:()=>e(tt.a.actions.fetchJobTypes()),fetchFarms:()=>e(Q.a.actions.fetchFarms())}))(ia)),ca=c.d.checkForEmpty,da={id:{headerName:"sensors.grid.id",field:"id",sort:"asc",cellRendererFramework:d.e},name:{headerName:"sensors.grid.name",field:"name",sort:"asc",cellRendererFramework:d.e,valueFormatter:({value:e})=>ca(e),comparator:m.g},sensorType:{headerName:"sensors.grid.type",field:"modelName",valueFormatter:({value:e})=>ca(e),comparator:m.g},farm:{headerName:"sensors.grid.farm",field:"farmName",valueFormatter:({value:e})=>ca(e),comparator:m.g},portType:{headerName:"sensors.grid.portType",field:"port.type",valueFormatter:({value:e})=>ca(e)},parentDevice:{headerName:"sensors.grid.parentDevice",field:"parentDevice",valueFormatter:({value:e})=>ca(e),comparator:m.g},portName:{headerName:"sensors.grid.portName",field:"port.name",valueFormatter:({value:e})=>ca(e)},lastUpdated:{headerName:"sensors.grid.lastUpdated",field:"lastModifiedAt",cellRendererFramework:d.f}},ma={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"single"};class ua extends i.a.Component{render(){const e=this.props,t=e.sensorData,a=e.t,s=[];let n=void 0;void 0!==t.SensorMeasuresList&&(t.SensorMeasuresList.map(e=>s.push(e.name)),n=s.join(" , "));const r={[a("sensors.flyouts.details.property.sensorName")]:t.name,[a("sensors.flyouts.details.property.hardwareID")]:t.hardwareId,[a("sensors.flyouts.details.property.sensorType")]:t.modelName,[a("sensors.flyouts.details.property.location")]:t.locationCordinate,[a("sensors.flyouts.details.property.parentDevice")]:t.parentDevice,[a("sensors.flyouts.details.property.portType")]:(t.port||{}).type},o={[a("sensors.flyouts.details.property.sensorId")]:i.a.createElement("span",{className:"sensorid"},t.id),[a("sensors.flyouts.details.property.portName")]:(t.port||{}).name,[a("sensors.flyouts.details.property.addedOn")]:k()(t.createdAt).format(m.m),[a("sensors.flyouts.details.property.lastUpdated")]:k()(t.lastModifiedAt).format(m.m),[a("sensors.flyouts.details.property.farm")]:Object(m.J)(t.farmName)?i.a.createElement(A.a,{to:{pathname:"/farms/".concat(t.farmId),state:{id:t.farmId,farmName:t.farmName}}},t.farmName):null,[a("sensors.flyouts.details.property.measures")]:n};return i.a.createElement(v.M,{leftTableData:r,rightTableData:o})}}const pa=y.f.Section;class ha extends o.Component{componentDidMount(){R.a.trackEvent({name:"UiEvent:FlyOpen: Sensor Details"})}componentDidUpdate(e){e.sensorData.id!==this.props.sensorData.id&&R.a.trackEvent({name:"UiEvent:FlyChange: Sensor Details"})}componentWillUnmount(){R.a.trackEvent({name:"UiEvent:FlyClose: Sensor Details"})}render(){const e=this.props,t=e.t,a=e.onClose,s=e.sensorData,n=e.theme;return i.a.createElement(y.f.Container,null,i.a.createElement(y.f.Header,null,i.a.createElement(y.f.Title,null),i.a.createElement(y.f.CloseBtn,{onClick:a})),i.a.createElement(y.f.Content,{className:"sensor-details-container"},i.a.createElement("div",{className:"sensor-details-container"},i.a.createElement("div",null,i.a.createElement("table",{className:"header-table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"sensorType"},i.a.createElement(at.a,{path:"Node"===s.deviceModelType?m.ob.nodeBig:m.ob.gatewayBig})),i.a.createElement("td",{className:"sensorName"},i.a.createElement("div",{className:"sensor-title"}," ",s.name)),i.a.createElement("td",{className:"callspan-td"}))))),i.a.createElement(pa.Container,{className:"sensor-property-container"},i.a.createElement(pa.Header,null,t("sensors.flyouts.details.property.title")),i.a.createElement(pa.Content,null,i.a.createElement("div",null,i.a.createElement(ua,{sensorData:s,t:t})))),i.a.createElement(pa.Container,{className:"sensor-telemetry-panel",collapsable:!1},i.a.createElement(pa.Header,null,t("sensors.flyouts.details.telemetry.title")),i.a.createElement(pa.Content,null,i.a.createElement(M,{theme:n,t:t,showHeader:!1,sensorIds:[this.props.sensorData.id]}))))))}}var fa=Object(T.a)(R.c,ha,"Sensor Details Flyout");const ga=Object(n.c)()(Object(s.b)(e=>({sensors:Object(D.i)(e),sensorsError:Object(D.b)(e),sensorLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),theme:Object(j.o)(e),timeSeriesExplorerUrl:Object(j.q)(e),timeInterval:Object(j.p)(e)}),null)(fa)),ba={openFlyoutName:void 0,softSelectedSensorId:void 0,softSelectedSensorData:void 0},va={openFlyoutName:void 0,softSelectedId:void 0,selectedSensorList:void 0};class Ea extends o.Component{constructor(e){super(e),this.onGridReady=e=>{this.sensorGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.openModal=e=>()=>this.setState({openModalName:e}),this.closeModal=()=>this.setState({openModalName:void 0}),this.clickContextBtn=e=>()=>{},this.openFlyout=e=>()=>this.setState({openFlyoutName:e,softSelectedSensorId:void 0,softSelectedSensorData:void 0}),this.getOpenFlyout=()=>{switch(this.state.openFlyoutName){case"details":return i.a.createElement(ga,{key:"sensor-device-key",onClose:this.closeFlyout,sensorId:this.state.softSelectedSensorId,sensorData:this.state.softSelectedSensorData});default:return null}},this.closeFlyout=()=>this.setState(ba),this.onSoftSelectChange=(e,t)=>{const a=this.props.onSoftSelectChange;e?this.setState({openFlyoutName:"details",softSelectedSensorId:e,softSelectedSensorData:this.props.rowData.find(t=>t.id===e)}):this.closeFlyout(),Object(m.L)(a)&&a(e,t)},this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;Object(m.L)(a)&&(a(1===e.length?this.contextBtns:null),this.setState({selectedSensorList:e[0]})),Object(m.L)(s)&&s(e)},this.deleteDevices=()=>{this.props.sensorListUpdate(this.state.selectedSensorList)},this.getModel=()=>{switch(this.state.openModalName){case"delete":return i.a.createElement(E.a,{key:"delete-modal",type:"deleteDevice",t:this.props.t,deleteConfirmation:this.props.t("sensors.deleteModal.deleteConfirmation",{returnObjects:!0}),title:this.props.t("sensors.deleteModal.title"),deleteItem:this.deleteDevices,onClose:this.closeModal,deleteBtn:this.props.t("modal.delete"),icon:m.ob.trash,isPending:this.props.deleteSensorPending,deleteModalError:this.props.deleteModalError,deleteModalSuccess:this.props.deleteModalSuccess,successMsg:this.props.t("sensors.deleteSuccess")});default:return null}},this.getSoftSelectId=({id:e}="")=>e,this.state=va,this.columnDefs=[c.c,da.name,da.sensorType,da.farm,da.portType,da.parentDevice,da.portName,da.lastUpdated],this.contextBtns=i.a.createElement(v.e,null,i.a.createElement(v.R,{permissions:b.h.deleteSensors},i.a.createElement(v.b,{svg:m.ob.trash,onClick:this.openModal("delete")},e.t("sensors.modal.delete"))))}render(){const e=Object(r.a)({},ma,{columnDefs:Object(m.qb)(this.props.t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:(this.state.softSelectedSensorId||{}).id},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:this.props.t},onRowClicked:({node:e})=>e.setSelected(!e.isSelected()),onGridReady:this.onGridReady,onSoftSelectChange:this.onSoftSelectChange,onHardSelectChange:this.onHardSelectChange,onColumnMoved:this.onColumnMoved,onSortChanged:this.onSortChanged});return[i.a.createElement(v.K,Object.assign({key:"sensor-grid-key"},e)),this.getOpenFlyout(),this.getModel()]}}a(1041);const ya={openDeleteDevicePopup:void 0};class Sa extends o.Component{constructor(e){super(e),this.fetchApiData=()=>{const e=this.props,t=e.fetchSensors,a=e.fetchSensorModels,s=e.fetchDevices,n=e.sensorsLastUpdated,r=e.isSensorsPending,o=e.sensorModelsLastUpdated,i=e.isSensorModelsPending,l=e.devicesLastUpdated,c=e.isDevicesPending;n||r||t(),o||i||a(),c||l||s()},this.locFunc=(e,t)=>{let a=void 0;return Object(m.J)(e&&t)&&(a=e+" , "+t),a},this.refreshSensorData=()=>{const e=this.props,t=e.fetchSensors,a=e.fetchSensorModels,s=e.fetchDevices;t(),a(),s()},this.onContextMenuChange=e=>this.setState({contextBtns:e,openFlyoutName:void 0}),this.onGridReady=e=>this.sensorGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.sensorGridApi&&this.sensorGridApi.setQuickFilter(e)},this.sensorDataMappingFromProp=()=>{const e=this.props,t=e.sensors,a=e.sensorModels,s=e.devices;let n,o;const i=t.map(e=>Object(r.a)({},e));i.forEach(e=>{o=a.find(t=>t.id===e.sensorModelId),e.modelType=void 0===o?void 0:o.type,e.modelName=void 0===o?void 0:o.name,n=s.find(t=>t.id===e.deviceId),e.parentDevice=void 0===n?void 0:n.name,e.SensorMeasuresList=void 0===o?void 0:o.sensorMeasures,e.farmName=void 0===n?void 0:n.farmName,e.farmId=void 0===n?void 0:n.farmId,e.deviceModelType=void 0===n?void 0:n.deviceModelType,e.locationCordinate=void 0===e.location?void 0:this.locFunc(e.location.latitude,e.location.longitude)}),this.setState({sensorsList:i})},this.sensorListUpdate=e=>{this.setState({deleteModalSuccess:!1,deleteModalError:void 0,deleteSensorPending:!0}),this.subscription=H.j.deleteSensor(e.id).subscribe(()=>{this.props.deleteSensorsById([e.id]),this.setState({deleteModalError:void 0,deleteModalSuccess:!0,deleteSensorPending:!1})},e=>this.setState({deleteModalError:e,deleteModalSuccess:!1,isPending:!1,changesApplied:!0,deleteSensorPending:!1}),()=>this.setState({isPending:!1,changesApplied:!0,ruleDeleted:!0}))},this.closeDeletePopup=()=>this.setState(ya),this.state=Object(r.a)({sensorsList:[]},ya,{deleteModalSuccess:!1,deleteModalError:void 0,deleteSensorPending:!1})}componentDidMount(){this.props.sensorsLastUpdated||this.props.isSensorsPending?this.sensorDataMappingFromProp():this.fetchApiData()}componentDidUpdate(e,t){e.sensors===this.props.sensors&&e.sensorModels===this.props.sensorModels&&e.devices===this.props.devices||this.sensorDataMappingFromProp()}render(){const e=this.props,t=e.t,a=e.isSensorsPending,s=e.sensorsError,n=this.state,r=n.deleteModalSuccess,o=n.deleteModalError,l=n.deleteSensorPending,c={sensorListUpdate:this.sensorListUpdate,sensorList:this.state.sensorsList,onGridReady:this.onGridReady,rowData:a?void 0:this.state.sensorsList||[],onContextMenuChange:this.onContextMenuChange,t:this.props.t,deleteModalSuccess:r,deleteModalError:o,deleteSensorPending:l};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:t("sensors.searchPlaceholder")}),this.state.contextBtns)),i.a.createElement(v.z,{className:"sensors-container"},i.a.createElement(v.A,{titleValue:t("sensors.title").concat("(",String(this.state.sensorsList.length),")")}),!!s&&i.a.createElement(v.a,{t:t,error:s}),!s&&i.a.createElement(Ea,c)))}}var Oa=Object(T.a)(R.c,Sa,"Sensors Grid");const Ca=Object(n.c)()(Object(s.b)(e=>({sensors:Object(D.i)(e),sensorModels:Object(D.f)(e),devices:Object(N.i)(e),sensorsError:Object(D.b)(e),sensorsLastUpdated:Object(D.c)(e),isSensorsPending:Object(D.h)(e),sensorModelsLastUpdated:Object(D.d)(e),isSensorModelsPending:Object(D.e)(e),devicesLastUpdated:Object(N.k)(e),isDevicesPending:Object(N.l)(e)}),e=>({fetchSensors:()=>e(D.a.actions.fetchSensors()),fetchSensorModels:()=>e(D.a.actions.fetchSensorModels()),deleteSensorsById:t=>e(D.k.actions.deleteSensorsbyId(t)),fetchDevices:()=>e(N.a.actions.fetchDevices())}))(Oa)),ja=c.d.checkForEmpty,Na={ruleName:{headerName:"alerts.grid.ruleName",field:"ruleName",sort:"asc",filter:"text",cellRendererFramework:d.i,comparator:m.g},description:{headerName:"alerts.grid.description",field:"ruleDescription",filter:"text",valueFormatter:({value:e})=>ja(e)},severity:{headerName:"alerts.grid.ruleSeverity",field:"ruleSeverity",filter:"text",cellRendererFramework:d.d},totalCount:{headerName:"alerts.grid.totalCount",field:"counts.total"},open:{headerName:"alerts.grid.open",field:"counts.open"},acknowledged:{headerName:"alerts.grid.acknowledged",field:"counts.acknowledged"},closed:{headerName:"alerts.grid.closed",field:"counts.closed"},lastOccurrence:{headerName:"alerts.grid.lastOccurrence",field:"lastOccurrence",cellRendererFramework:d.f,valueFormatter:({value:e})=>ja(e)}},Da={enableColResize:!0,multiSelect:!0,pagination:!0,paginationPageSize:l.a.paginationPageSize,rowSelection:"multiple"},Ma={softSelectedId:void 0,softSelectedAlert:void 0};class Aa extends o.Component{constructor(e){super(e),this.onGridReady=e=>{this.alertsGridApi=e.api,Object(m.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.onSoftSelectChange=(e,t)=>{const a=this.props.onSoftSelectChange;e&&this.setState({softSelectedId:e,softSelectedAlert:t}),Object(m.L)(a)&&a(e,t)},this.onHardSelectChange=e=>{const t=this.props,a=t.onContextMenuChange,s=t.onHardSelectChange;Object(m.L)(a)&&a(e.length>0?this.contextBtns:null),Object(m.L)(s)&&s(e)},this.getSoftSelectId=({id:e}="")=>e,this.state=Ma,this.columnDefs=[Na.ruleName,Na.description,Na.severity,Na.totalCount,Na.open,Na.acknowledged,Na.closed,Na.lastOccurrence]}render(){const e=this.state.softSelectedAlert,t=this.props.t,a=Object(r.a)({},Da,{columnDefs:Object(m.qb)(t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:(e||{}).id},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:t},onGridReady:this.onGridReady,onSoftSelectChange:this.onSoftSelectChange,onHardSelectChange:this.onHardSelectChange});return i.a.createElement(v.K,Object.assign({key:"alert-grid-key"},a))}}a(1042);class Ia extends o.Component{constructor(e){super(e),this.onContextMenuChange=e=>this.setState({contextBtns:e}),this.onGridReady=e=>this.alertsGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.alertsGridApi&&this.alertsGridApi.setQuickFilter(e)},this.state={contextBtns:null};const t=this.props,a=t.rulesLastUpdated,s=t.rulesError,n=t.fetchRules,r=t.alertsLastUpdated,o=t.alertsError,i=t.fetchAlerts;a||s||n(),r||o||i()}onRefresh(){const e=this.props,t=e.fetchAlerts,a=e.fetchRules;t(),a()}render(){const e=this.props,t=e.t,a=e.alertsError,s=e.isAlertsPending,n=e.alertsByRule,r={onGridReady:this.onGridReady,rowData:s?void 0:n||[],onContextMenuChange:this.onContextMenuChange,t:t,refresh:this.onRefresh};return i.a.createElement(v.e,null,i.a.createElement(v.f,null,i.a.createElement(v.g,{left:!0},i.a.createElement(v.U,{onChange:this.searchOnChange,placeholder:t("alerts.searchPlaceholder")}))),i.a.createElement(v.z,{className:"alerts-container",key:"page-content"},i.a.createElement(v.A,{titleValue:t("alerts.title").concat("(",String(n.length),")")}),!!a&&i.a.createElement(v.a,{t:t,error:a}),!a&&i.a.createElement(Aa,r)))}}var ka=Object(T.a)(R.c,Ia,"Alerts Grid");const Fa=Object(n.c)()(Object(s.b)(e=>({rules:Object(Ee.i)(e),rulesError:Object(Ee.j)(e),rulesLastUpdated:Object(Ee.k)(e),alerts:Object(Ee.b)(e),alertsByRule:Object(Ee.f)(e),alertsError:Object(Ee.c)(e),isAlertsPending:Object(Ee.e)(e),alertsLastUpdated:Object(Ee.d)(e)}),e=>({fetchAlerts:()=>e(Ee.a.actions.fetchAlerts()),fetchRules:()=>e(Ee.a.actions.fetchRules())}))(ka))},,,,,,,,function(e,t,a){},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(0),n=a.n(s),r=a(4),o=a(2);a(944);class i extends s.Component{constructor(e){super(e),this.apply=()=>{(0,this.props.deleteItem)(),this.setState({changesApplied:!0})},this.genericCloseClick=e=>{(0,this.props.onClose)()},this.state={changesApplied:!1}}render(){const e=this.props,t=e.t,a=e.isPending,s=e.deleteModalError,i=e.title,l=e.deleteConfirmation,c=e.deleteBtn,d=e.icon,m=e.deleteModalSuccess,u=e.successMsg,p=this.state.changesApplied;return n.a.createElement(r.x,{onClose:()=>this.genericCloseClick("DeleteModal_ModalClose"),className:"delete-modal-container"},n.a.createElement(r.b,{className:"delete-close-btn",onClick:()=>this.genericCloseClick("DeleteModal_CloseClick"),svg:o.ob.x}),n.a.createElement("div",{className:"delete-header-container"},i),!p&&n.a.createElement("div",{className:"delete-info"},Array.isArray(l)?n.a.createElement("div",null,l.map((e,t)=>n.a.createElement("p",{key:t},e))):n.a.createElement("p",null," ",l)),n.a.createElement("div",{className:"delete-summary"},!p&&n.a.createElement(r.c,null,n.a.createElement(r.b,{svg:d,className:"btn-delete",primary:!0,onClick:this.apply},c)),a&&n.a.createElement(r.w,null),!a&&p&&m&&n.a.createElement(r.X,{className:"delete-modal-success",t:t,key:"delete-modal-success",successMsg:u}),!a&&p&&void 0!==s&&n.a.createElement(r.a,{className:"delete-modal-error",t:t,key:"delete-modal-error",error:s})))}}},,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return S})),a.d(t,"f",(function(){return g})),a.d(t,"g",(function(){return h})),a.d(t,"h",(function(){return O})),a.d(t,"i",(function(){return C})),a.d(t,"j",(function(){return N})),a.d(t,"k",(function(){return M})),a.d(t,"l",(function(){return A})),a.d(t,"m",(function(){return y})),a.d(t,"o",(function(){return I})),a.d(t,"p",(function(){return k})),a.d(t,"q",(function(){return F})),a.d(t,"r",(function(){return w})),a.d(t,"s",(function(){return R})),a.d(t,"n",(function(){return T}));var s=a(56),n=a(0),r=a.n(n),o=a(32),i=a(2);a(925);const l=e=>{const t=e.svg,a=e.children,n=e.className,l=e.primary,c=Object(s.a)(e,["svg","children","className","primary"]);return r.a.createElement("button",Object.assign({type:"button"},c,{className:Object(i.S)("btn",n,l?"btn-primary":"btn-secondary")}),t&&r.a.createElement(o.a,{path:e.svg,className:"btn-icon"}),a&&r.a.createElement("div",{className:"btn-text"},e.children))};a(926);const c=e=>r.a.createElement("div",{className:Object(i.S)("btn-toolbar",e.className)},e.children);a(927);const d=e=>{const t=e.children,a=e.className;return r.a.createElement("div",{className:Object(i.S)("error-message",a)},r.a.createElement(o.a,{path:i.ob.error,className:"error-icon"}),t)};var m=a(4);a(928);class u extends n.Component{constructor(e){super(e),this.setFileInputRef=e=>this.fileInput=e,this.clickFileInput=()=>{this.fileInput&&this.fileInput.click()},this.fileInput=void 0}render(){const e=this.props,t=e.t,a=e.className,s=e.accept,n=e.onChange;return r.a.createElement("div",{className:Object(i.S)(a,"file-upload")},r.a.createElement(m.b,{primary:!0,className:"upload-btn",svg:i.ob.upload,onClick:this.clickFileInput},t("fileInput.upload")),r.a.createElement("input",{className:"input-file",ref:this.setFileInputRef,type:"file",accept:s,onChange:n}))}}a(929);var p=a(9);const h=e=>{const t=e.formGroupId,a=e.className,n=e.children,o=e.htmlFor,l=e.isRequired,c=Object(s.a)(e,["formGroupId","className","children","htmlFor","isRequired"]),d=Object(p.a)({},c,{className:Object(i.S)("form-group-label",a),htmlFor:o||t});return r.a.createElement("label",d,n,r.a.createElement("span",{className:"field-required"},l?" *":""))};a(930);let f=0;class g extends n.Component{constructor(e){super(e),this.formGroupId="formGroupId".concat(f++)}render(){const e=r.a.Children.map(this.props.children,e=>r.a.isValidElement(e)&&Object(i.L)(e.type)?r.a.cloneElement(e):e);return r.a.createElement("div",{className:Object(i.S)("form-group",this.props.className)},e)}}a(931);class b extends n.Component{constructor(e){super(e),this.onChange=({target:e})=>{const t=e.name,a=e.value,s=this.createValueObject(Object(p.a)({},this.state,{[t]:Object(i.I)(a)}));this.liftChange(s)},this.onBlur=e=>{this.props.onBlur&&this.props.onBlur(e)},this.state={hours:0,minutes:0,seconds:0}}componentDidMount(){const e=this.props.value&&this.props.value.ms||0;this.setState(this.convertMsToUnits(e))}componentDidUpdate(){const e=this.props.value&&this.props.value.ms||0;this.setState(this.convertMsToUnits(e))}convertMsToUnits(e){let t=Math.min(e||0,359999e3)/1e3;const a=Math.floor(t%60);t/=60;const s=Math.floor(t%60);return{hours:Math.floor(t/60),minutes:s,seconds:a}}convertUnitsToMs({hours:e,minutes:t,seconds:a}){return 1e3*(60*(60*e+t)+a)}createValueObject(e){const t=this.convertUnitsToMs(e);return Object(p.a)({},this.convertMsToUnits(t),{ms:t})}liftChange(e){const t=this.props,a=t.onChange,s=t.name;Object(i.L)(a)&&a({target:{name:s,value:e}})}format(e){return"".concat(e).padStart(2,"0")}render(){const e=this.props,t=e.disabled,a=e.className,s=Object(p.a)({},b.defaultProps,{onChange:this.onChange,onFocus:({target:e})=>{setTimeout(()=>e.select(),10)},disabled:t,onBlur:this.onBlur}),n=this.state,l=n.hours,c=n.minutes,d=n.seconds;return r.a.createElement("div",{className:Object(i.S)("duration-control-container",a)},r.a.createElement(g,null,r.a.createElement(h,null,"HH"),r.a.createElement(S,Object.assign({},s,{name:"hours",value:this.format(l)}))),r.a.createElement(o.a,{path:i.ob.colon,className:"duration-colon-icon"}),r.a.createElement(g,null,r.a.createElement(h,null,"MM"),r.a.createElement(S,Object.assign({},s,{name:"minutes",value:this.format(c)}))),r.a.createElement(o.a,{path:i.ob.colon,className:"duration-colon-icon"}),r.a.createElement(g,null,r.a.createElement(h,null,"SS"),r.a.createElement(S,Object.assign({},s,{name:"seconds",value:this.format(d)}))))}}b.defaultProps={type:"text"};var v=a(541);a(932);const E=(e,t)=>a=>e({target:{name:t,value:a}}),y=e=>{let t=e.className,a=e.onChange,n=e.name,o=Object(s.a)(e,["className","onChange","name"]);return r.a.createElement(v.a,Object.assign({className:Object(i.S)("select-container",t)},o,{onChange:E(a,n)}))};a(933);class S extends n.Component{constructor(e){super(e),this.onChange=e=>{const t=this.props,a=t.onChange,s=t.link;s&&Object(i.L)(s.onChange)&&s.onChange(e),Object(i.L)(a)&&a(e),!this.state.edited&&this.setState({edited:!0})},this.onBlur=e=>{this.props.onBlur&&this.props.onBlur(e),!this.state.edited&&this.setState({edited:!0})},this.state={edited:!1}}selectControl(e,t){switch(e){case"text":return r.a.createElement("input",Object.assign({type:"text"},t));case"password":return r.a.createElement("input",Object.assign({type:"password"},t));case"number":return r.a.createElement("input",Object.assign({type:"number"},t));case"textarea":return r.a.createElement("textarea",Object.assign({type:"text"},t));case"duration":return r.a.createElement(b,t);case"select":return r.a.createElement(y,t);default:return null}}getErrorMsg(e,t=""){return e?e.error:t}render(){const e=this.props,t=e.type,a=e.formGroupId,n=e.className,o=e.link,l=e.error,c=e.errorState,m=Object(s.a)(e,["type","formGroupId","className","link","error","errorState"]),u=o?{value:o.value}:{},h="undefined"===typeof c&&this.state.edited&&!m.disabled?this.getErrorMsg(o,l):"",f=Object(p.a)({},m,{id:m.id||a,className:Object(i.S)("form-control",n,c||h?"error":""),onChange:this.onChange,onBlur:this.onBlur},u);return r.a.createElement("div",{className:"form-control-container"},this.selectControl(t,f),h&&r.a.createElement(d,null,h))}}a(934);const O=e=>r.a.createElement("div",{className:Object(i.S)("form-section",e.className)},e.children),C=e=>{const t=e.children,a=e.className;return e.href?r.a.createElement("a",Object.assign({},e,{className:Object(i.S)("link",a)}),t):null};a(935);const j=({svg:e,label:t,onSvgClick:a,altSvgText:s})=>r.a.createElement("div",{className:"pill"},t,e&&r.a.createElement(m.b,{onClick:a,svg:e,className:"pill-icon",alt:s}));a(936);const N=({pills:e,onSvgClick:t,svg:a,altSvgText:s})=>r.a.createElement("div",{className:"pill-group"},e.map((e,n)=>r.a.createElement(j,{key:n,label:e,svg:a,onSvgClick:t(n),altSvgText:s})));a(937);let D=0;class M extends n.Component{constructor(e){super(e),this.onChange=e=>{const t=this.props,a=t.onChange,s=t.link;s&&Object(i.L)(s.onChange)&&s.onChange(e),Object(i.L)(a)&&a(e)},this.formGroupId="radioInputId".concat(D++),this.radioInputElement=r.a.createRef()}render(){const e=this.props,t=e.className,a=e.children,n=e.id,l=e.disabled,c=e.link,d=Object(s.a)(e,["className","children","id","disabled","link"]),m=c?{checked:c.value===d.value,onChange:this.onChange}:{},u=Object(p.a)({},d,{},m);let f=a;"string"===typeof f&&(f=r.a.createElement(h,null,f));const g=r.a.Children.map(f,e=>r.a.isValidElement(e)&&Object(i.L)(e.type)?r.a.cloneElement(e,{formGroupId:this.formGroupId,disabled:l||void 0!==u.checked&&!u.checked}):e);return r.a.createElement("div",{className:Object(i.S)("radio-container",t)},r.a.createElement("div",{className:"radio-input-container"},r.a.createElement("input",Object.assign({},u,m,{type:"radio",disabled:l,id:n||this.formGroupId,ref:this.radioInputElement})),r.a.createElement(o.a,{path:i.ob.radioSelected,className:Object(i.S)("radio-icon",l?"disabled":""),onClick:()=>this.radioInputElement.current.click()})),r.a.createElement("div",{className:"input-contents"},g))}}const A=e=>r.a.createElement("div",{className:Object(i.S)("section-desc",e.className)},e.children),I=e=>r.a.createElement("div",{className:Object(i.S)("summary-body",e.className)},e.children),k=e=>r.a.createElement("div",{className:Object(i.S)("summary-count",e.className)},e.children);a(938);const F=e=>r.a.createElement("div",{className:Object(i.S)("summary-section",e.className)},e.children);a(939);class w extends n.Component{constructor(...e){super(...e),this.onChange=()=>{const e=this.props,t=e.onChange,a=e.name,s=e.value;if(Object(i.L)(t)){t({target:{name:a,value:!s}})}}}render(){const e=this.props,t=e.value,a=e.disabled,s=e.className,n=e.children,o={path:i.ob.loadingToggle,className:Object(i.S)("pcs-toggle",s||"")};let l=n;"string"===typeof l&&(l=r.a.createElement(h,null,l));const c=r.a.Children.map(l,e=>r.a.isValidElement(e)?r.a.cloneElement(e,{formGroupId:"".concat(this.formGroupId,"_child"),disabled:a||void 0!==t&&!t}):e);return a?o.className=Object(i.S)(o.className," disabled"):(o.path=t?i.ob.enableToggle:i.ob.disableToggle,o.onClick=this.onChange,o.className=Object(i.S)(o.className,t?" enable-toggle":" disable-toggle")),r.a.createElement("div",{className:"toggle-btn-div"},r.a.createElement(m.bb,Object.assign({},o,{alt:""})),r.a.createElement("div",{className:"input-contents"},c))}}a(940);const R=e=>{const t=e.content,a=e.children,s=e.position;return r.a.createElement("div",{className:"tooltip-container"},r.a.createElement("div",{className:Object(i.S)("tooltip",s)},r.a.createElement("div",{className:"tooltip-content"},t),r.a.createElement("div",{className:"tooltip-arrow"})),a)};a(941);const T=e=>{const t=e.children,a=e.className;return r.a.createElement("div",{className:Object(i.S)("success-message",a)},r.a.createElement(o.a,{path:i.ob.online,className:"success-icon"}),t)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l}));var s=a(2);const n=(e=[])=>Object(s.B)(e).map(r),r=(e={})=>Object(s.f)(e,{id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",type:"type",manufacturer:"manufacturer","ports.name":"name","ports.type":"type",name:"name",description:"description"}),o=(e={})=>Object(s.f)(e,{status:"status",id:"id",createdAt:"createdAt",lastModifiedAt:"lastModifiedAt",deviceModelId:"deviceModelId",hardwareId:"hardwareId",createIoTHubDevice:"createIoTHubDevice",farmId:"farmId",reportingInterval:"reportingInterval","location.latitude":"latitude","location.longitude":"longitude","location.elevation":"elevation",parentDeviceId:"parentDeviceId",name:"name",description:"description",properties:"properties"}),i=(e=[])=>Object(s.B)(e).map(o),l=(e={})=>({deviceModelId:e.deviceModelId,hardwareId:e.hardwareId,createIoTHubDevice:e.createIoTHubDevice,farmId:e.farmId,reportingInterval:e.reportingInterval,location:{latitude:e.latitude,longitude:e.longitude,elevation:e.elevation},parentDeviceId:e.parentDeviceId,name:e.name,description:e.description,properties:e.properties})},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"f",(function(){return y})),a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return C})),a.d(t,"d",(function(){return j})),a.d(t,"e",(function(){return N}));var s=a(9),n=a(26),r=a(15),o=a.n(r),i=a(28),l=a(20),c=a.n(l),d=a(50),m=a(22),u=a(11),p=a(13);const h=Object(u.b)({fetchUsers:{type:"USER_FETCH",epic:e=>n.Observable.from(e.payload).bufferCount(p.a.graphApiUserBufferSize).map(e=>m.g.getUsersByIds(e)).mergeAll().map(Object(u.l)(E.actions.mergeUsers,e)).catch((e=>t=>n.Observable.of(E.actions.registerError(e.type,{error:t,fromAction:e})))(e))}}),f=new i.b.Entity("users"),g=new i.b.Array(f),b=Object(s.a)({},u.d,{userEntities:{},userItems:[],userlastUpdated:""}),v=[h.actionTypes.fetchUsers],E=Object(u.c)({updateUsers:{type:"USER_UPDATE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,g),r=n.entities.users,l=n.result;return c()(e,Object(s.a)({userEntities:{$set:r},userItems:{$set:l},userlastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},mergeUsers:{type:"USER_MERGE",reducer:(e,{payload:t,fromAction:a})=>{const n=Object(i.a)(t,g),r=n.entities.users,l=n.result;return c()(e,Object(s.a)({userEntities:{$merge:r},userItems:{$push:l},userlastUpdated:{$set:o()()}},Object(u.k)(a.type,!1)))}},registerError:{type:"USER_REDUCER_ERROR",reducer:u.e},isFetching:{multiType:v,reducer:u.h},resetPendingAndError:{type:"USER_REDUCER_RESET_ERROR_PENDING",reducer:u.j}}),y={users:E.getReducer(b)},S=e=>e.users,O=e=>S(e).userlastUpdated,C=e=>Object(u.f)(S(e),h.actionTypes.fetchUsers),j=e=>Object(u.g)(S(e),h.actionTypes.fetchUsers),N=Object(d.a)(e=>S(e).userEntities||{},e=>S(e).userItems||[],(e,t)=>t.map(t=>e[t]))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var s=a(23),n=a(27),r=a(9),o=a(0),i=a.n(o),l=a(2),c=a(4),d=a(22),m=a(19),u=a(13);const p=window.atlas;class h extends o.Component{componentDidMount(){!this.map&&this.props.azureMapsKey&&this.initializeMap(this.props.azureMapsKey)}componentDidUpdate(){!this.map&&this.props.azureMapsKey&&this.initializeMap(this.props.azureMapsKey)}componentWillUnmount(){this.map&&this.map.remove()}shouldComponentUpdate(e){return!1}initializeMap(e){const t=new p.Map("map",{"subscription-key":e,center:u.a.mapCenterPosition,zoom:10,style:"satellite"});t.addEventListener("load",()=>{Object(l.L)(this.props.onMapReady)&&this.props.onMapReady(this.map)}),t.events.add("ready",()=>{t.controls.add([new p.control.StyleControl],{position:"bottom-right"}),t.controls.add([new p.control.ZoomControl({style:"light"})],{position:"top-right"})}),this.map=t}render(){return i.a.createElement("div",{id:"map"})}}const f=function(e,t,a){const s=this,n=new window.atlas.source.DataSource;let r;e.sources.add(n);const o=new window.atlas.layer.PolygonLayer(n,null,{fillColor:"rgba(255,165,0,0.2)"});e.layers.add(o,t),e.layers.add(new window.atlas.layer.LineLayer(n,null,{strokeColor:"orange",strokeWidth:2}),t);const i=new window.atlas.layer.BubbleLayer(n,null,{color:"orange",radius:5,strokeColor:"white",strokeWidth:2});function l(e){if(r){const t=r.getCoordinates()[0];t.pop(),t.push(e.position),t.push(e.position),r.setCoordinates([t])}}function c(t){if(r){const a=r.getCoordinates()[0];if(a.length>0){(function(t,a){const s=(a[1]-t[1])*(Math.PI/180),n=(a[0]-t[0])*(Math.PI/180),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t[1]*(Math.PI/180))*Math.cos(a[1]*(Math.PI/180))*Math.sin(n/2)*Math.sin(n/2),o=Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),i=Math.cos(a[1]*Math.PI/180)*Math.PI/(256*Math.pow(2,e.getCamera().zoom));return o/i})(a[0],t.position)<=6&&(a.pop(),a.pop(),a.length>=1&&a.push([a[0][0],a[0][1]]),r.setCoordinates([a]),s.endDrawing())}}}function d(e){if(r){const t=r.getCoordinates()[0];t.length>1&&(t[t.length-1]=e.position,r.setCoordinates([t]))}}e.layers.add(i,t),document.addEventListener("keydown",(function(e){if(27===e.keyCode&&r){const e=r.getCoordinates()[0];e.pop(),e.length>=1&&e.push([e[0][0],e[0][1]]),r.setCoordinates([e]),s.endDrawing()}}),!1),this.clear=function(){r=null,n.clear(),s.endDrawing()},this.startDrawing=function(){s.clear(),e.getCanvasContainer().style.cursor="pointer",r=new window.atlas.Shape(new window.atlas.data.Polygon([[[]]])),n.add(r),i.setOptions({visible:!0}),e.events.add("mousemove",d),e.events.add("mouseup",l),e.events.add("mouseup",i,c)},this.endDrawing=function(){e.getCanvasContainer().style.cursor="",i.setOptions({visible:!1}),e.events.remove("mousemove",d),e.events.remove("mouseup",l),e.events.remove("mouseup",i,c),a&&a(r)}};a(1021);const g=window.atlas;let b,v;class E extends o.Component{constructor(e){super(e),this.onMapReady=e=>{this.popup=new g.Popup;const t=this.props,a=t.getGeoJSON,s=t.geometry,n=t.address,r=t.azureMapsKey,o=t.setGeoJSONInvalidStatus;let i=this.state.centerSet;const c=this.state.currentGeoJSON;e.addEventListener("load",(function(t){if(b=new g.source.DataSource,e.sources.add(b),!Object(l.N)(s)&&!Object(l.K)(s)&&Object(l.M)(s)&&l.v.isPolygon(JSON.parse(s))){const t=JSON.parse(s);if(!i){const a=Object(l.x)(t.coordinates);e.setCamera({center:a,zoom:14}),i=!0}const a=new g.data.Polygon(t.coordinates);b.add(a);const n=new g.layer.PolygonLayer(b);e.layers.add(n,"abcde")}i||Object(l.N)(n)||Object(l.K)(n)||fetch("https://atlas.microsoft.com/search/fuzzy/json?typeahead=true&api-version=1.0&subscription-key=".concat(r,"&query=").concat(n)).then(e=>e.json()).then(t=>{if(0!==t.results.length){const a=t.results[0].position;e.setCamera({center:[a.lon,a.lat],zoom:14}),i=!0}}),v=new f(e,null,(function(e){if(e){const t=JSON.stringify(e.data.geometry);a(t),o(!1)}else a(c)})),document.getElementById("drawPolygon").addEventListener("click",(function(){v.startDrawing()})),document.getElementById("clearPolygon").addEventListener("click",(function(){v.clear()}))})),this.setState({centerSet:i}),this.map=e},this.style=e=>{this.map&&this.map.setStyle({style:e})},this.searchAddress=e=>{const t=Object(l.K)(this.state.searchQuery)?e:this.state.searchQuery;fetch("https://atlas.microsoft.com/search/fuzzy/json?typeahead=true&api-version=1.0&subscription-key=".concat(this.props.azureMapsKey,"&query=").concat(t)).then(e=>e.json()).then(e=>{if(e.results){const t=e.results;if(0===t.length)this.setState(Object(r.a)({},this.state,{searchUnsuccessful:!0}));else{const e=t[0].position;this.map.setCamera({center:[e.lon,e.lat],zoom:13}),this.setState(Object(r.a)({},this.state,{searchUnsuccessful:!1}))}}})},this.state={searchQuery:"",showList:!1,address:"",searchUnsuccessful:!1,centerSet:!1,currentGeoJSON:e.geometry},this.searchAddress=this.searchAddress.bind(this),this.handleSearchInputChange=this.handleSearchInputChange.bind(this),this.onMapReady=this.onMapReady.bind(this)}handleSearchInputChange(e){const t=e.target.value;this.setState(Object(r.a)({},this.state,{searchQuery:t}))}render(){const e=this.props,t=e.t,a=e.isPending,s=e.mapKeyIsPending,n=e.azureMapsKey,r=e.error,o=this.state,d=o.searchQuery,m=o.searchUnsuccessful,u=!r&&a&&s;return i.a.createElement(c.B,{className:"map-panel-container"},i.a.createElement(c.F,null,i.a.createElement("div",{className:"address-container"},i.a.createElement("input",{type:"textarea",name:"queryBox",className:"address",value:d,onChange:this.handleSearchInputChange,onKeyPress:e=>Object(l.G)(e,this.searchAddress,l.c.Enter)}),i.a.createElement(c.b,{onClick:this.searchAddress,className:"address-button"},t("farms.panels.map.submit")))),i.a.createElement(c.C,{className:"map-panel-container"},i.a.createElement("div",{className:"map-panel-container"},i.a.createElement(h,{azureMapsKey:n,onMapReady:this.onMapReady,drawingTools:this.drawingTools}),m&&i.a.createElement(c.D,{className:"search-results"},"location not found"),i.a.createElement("button",{type:"button",className:"control-btn draw-polygon",id:"drawPolygon"},i.a.createElement(c.bb,{path:l.ob.edit,className:"icon-btn"})),i.a.createElement("button",{type:"button",className:"control-btn delete-polygon",id:"clearPolygon"},i.a.createElement(c.bb,{path:l.ob.cancelX,className:"icon-btn"})))),u&&i.a.createElement(c.I,null,i.a.createElement(c.w,null)),!s&&!this.props.azureMapsKey&&i.a.createElement(c.D,null,t("farms.panels.map.notSupportedError")),r&&i.a.createElement(c.D,null,i.a.createElement(c.a,{t:t,error:r})))}}const y=Object(s.b)(null)(E);var S=a(32),O=a(91);a(1022);class C extends o.Component{constructor(e){super(e),this.state={selectedPanel:this.props.geoSelect},this.toggleGeoJSONInput=this.toggleGeoJSONInput.bind(this)}toggleGeoJSONInput(e){const t=e.target.value,a=Object(r.a)({},this.state,{selectedPanel:t});this.setState(a),this.props.toggleGeoJSONInput(t)}render(){const e=this.props,t=e.t,a=e.isGeometryEmpty,s=this.state.selectedPanel;return i.a.createElement(c.B,{className:"description-panel-content"},i.a.createElement(c.F,{className:"description-panel-header-container"},i.a.createElement(c.G,null,i.a.createElement("div",{className:"description-panel-header"},t("farms.panels.descriptionPanel.header"),i.a.createElement("div",{className:"tooltip"},i.a.createElement(S.a,{className:"summary-icon tooltip",path:l.ob.infoBubble}),i.a.createElement("span",{className:"tooltip tooltiptext"},t("farms.panels.descriptionPanel.panelBody"))),a&&i.a.createElement(O.c,{className:"create-farm-error-panel"},i.a.createElement("div",{className:"farm-error-message"},t("farms.errorMsg.required")))))),i.a.createElement(c.C,{className:"description-panel-content"},this.props.disableMarkOnMap?i.a.createElement("div",{className:"markOnMapDisabled"},t("farms.panels.descriptionPanel.markOnMapDisabled")):i.a.createElement(c.T,{checked:"Azure-Maps"===s,value:"Azure-Maps",onChange:this.toggleGeoJSONInput},t("farms.panels.descriptionPanel.azuremaps")),i.a.createElement(c.T,{checked:"GeoJSON"===s,value:"GeoJSON",onChange:this.toggleGeoJSONInput},i.a.createElement("div",{className:"form-group-label"},t("farms.panels.descriptionPanel.geoJSON"),i.a.createElement("div",{className:"description-panel-header tooltip"},i.a.createElement(S.a,{className:"summary-icon tooltip",path:l.ob.infoBubble}),i.a.createElement("span",{className:"tooltip tooltiptext"},i.a.createElement("div",null,t("farms.panels.descriptionPanel.geoJSONInstructions"))))),"GeoJSON"===s&&i.a.createElement("p",{className:"geo-JSON-panel-header"}," ",t("farms.panels.geoJSON.panelBody")))))}}a(1023);let j=void 0;class N extends o.Component{constructor(e){super(e),j=!1,this.state={geoString:Object(l.N)(this.props.GeoJSON)||Object(l.K)(this.props.GeoJSON)||!Object(l.M)(this.props.GeoJSON)||!l.v.isPolygon(JSON.parse(this.props.GeoJSON))&&!l.v.isMultiPolygon(JSON.parse(this.props.GeoJSON))?this.props.GeoJSON:JSON.stringify(JSON.parse(this.props.GeoJSON),null,4)},this.handleGeoJSONInput=this.handleGeoJSONInput.bind(this)}componentDidMount(){const e=this.props.GeoJSON;if(e){const t=Object(l.N)(e)||Object(l.K)(e)||!Object(l.M)(e)||!l.v.isPolygon(JSON.parse(e))&&!l.v.isMultiPolygon(JSON.parse(e))?e:JSON.stringify(JSON.parse(e),null,4);this.setState({geoString:t})}}componentDidUpdate(e){const t=this.props.GeoJSON;t&&t!==e.GeoJSON&&this.setState({geoString:Object(l.N)(t)||Object(l.K)(t)||!Object(l.M)(t)||!l.v.isPolygon(JSON.parse(t))&&!l.v.isMultiPolygon(JSON.parse(t))?t:JSON.stringify(JSON.parse(t),null,4)})}handleGeoJSONInput(e){let t=e.target.value,a=!1;if(Object(l.M)(t))if(0===t.length)a=!1,t="";else{const e=JSON.parse(t);a=!(l.v.valid(e,this.callback)&&(l.v.isPolygon(e,this.callback)||l.v.isMultiPolygon(e,this.callback))&&t.length>0)}else a=!0;j=a,this.props.getGeoJSON(t),this.props.setGeoJSONInvalidStatus(a),this.setState(Object(r.a)({},this.state,{geoString:t}))}render(){const e=this.props.t,t=this.state.geoString;return i.a.createElement(c.B,{className:"no-box-shadow"},i.a.createElement(c.C,{className:"geo-json"},i.a.createElement(c.p,{type:"textarea",name:"geoJSON",value:t||"",onChange:this.handleGeoJSONInput,id:j?"invalid-input":"geo-string",placeholder:JSON.stringify(l.cb,null,4)}),j&&i.a.createElement(c.J,{className:"warning-text"},e("farms.panels.geoJSON.geoJSONError"))))}}a(1024);var D=a(17),M=a(120),A=a.n(M);const I=window.atlas;class k extends l.d{constructor(e){super(e),this.setFormState=e=>{this.setState(Object(r.a)({},this.state,{editableFarm:e,formData:{name:e.name,geometry:e.geometry,address:e.properties.address,crops:l.k.find(t=>t.value===e.properties.crops)}}))},this.apply=e=>{e.preventDefault();const t=this.props,a=t.insertFarm,s=t.modifyFarm,n=t.farm;this.setState({isPending:!0,error:null});const o=this.state.formData,i=o.geometry;Object(l.O)(i)&&Object(l.M)(JSON.stringify(i))&&(A.a.isPolygon(i)||A.a.isMultiPolygon(i))||(o.geometry=void 0);const c=JSON.parse(JSON.stringify(o));this.subscription=n?d.c.updateFarm(n.id,Object(m.u)(c)).mergeMap(e=>d.c.getFarmById(e.id)).subscribe(e=>{s([Object(r.a)({},e)]),this.setState({isPending:!1,changesApplied:!0,isEditFarmSuccess:!0}),this.props.history.push("/farms/".concat(n.id),{id:n.id,farmName:o.name})},e=>this.setState({error:e,isPending:!1,changesApplied:!0}),()=>this.setState({isPending:!1,changesApplied:!0,confirmStatus:!1})):d.c.createFarm(Object(m.u)(c)).subscribe(e=>{a({farm:e}),this.setState({isPending:!1,changesApplied:!0,isCreateFarmSuccess:!0})},e=>this.setState({error:e,isPending:!1,changesApplied:!0}),()=>this.setState({isPending:!1,changesApplied:!0,confirmStatus:!1}))},this.formControlChange=()=>{this.state.changesApplied&&this.setState({changesApplied:!1})},this.setGeoJSONInvalidStatus=e=>{this.setState({isGeoJSONInvalid:e})},this.state={error:void 0,isPending:!1,changesApplied:void 0,formData:{name:"",address:"",geometry:"",crops:""},farms:this.props.farms,geoSelect:"GeoJSON",isGeoJSONInvalid:!1,editableFarm:void 0,isCreateFarmSuccess:void 0,isEditFarmSuccess:void 0},this.toggleGeoJSONInput=this.toggleGeoJSONInput.bind(this),this.getGeoJSON=this.getGeoJSON.bind(this)}isFormValid(){return[this.farmNameLink,this.farmAddressLink,this.farmCropLink].every(e=>!e.error)}componentDidMount(){const e=this.props.farm;e&&this.setFormState(e),D.a.trackEvent({name:"UiEvent:FlyOpen: "+(e?"Edit":"New")+" Farm"})}componentWillReceiveProps(e){const t=e.farm;t&&this.setFormState(t)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),D.a.trackEvent({name:"UiEvent:FlyClose: Edit/New Farm"})}getGeoJSON(e){let t;t=!Object(l.K)(e)&&Object(l.M)(e)&&(A.a.isPolygon(JSON.parse(e))||A.a.isMultiPolygon(JSON.parse(e)))?JSON.parse(e):e;const a=Object(r.a)({},this.state.formData,{geometry:t});this.setState(Object(r.a)({},this.state,{formData:a,changesApplied:!1}))}toggleGeoJSONInput(e){const t=Object(r.a)({},this.state,{geoSelect:e});this.setState(t)}render(){const e=this.props,t=e.t,a=e.azureMapsKey,s=e.azureMapsKeyError,n=e.farm,r=this.state,o=r.isPending,d=r.error,m=r.changesApplied,u=r.geoSelect,p=r.formData,h=r.isGeoJSONInvalid,f=r.isCreateFarmSuccess,g=r.isEditFarmSuccess,b=(new l.e).check(l.e.notEmpty,t("farms.errorMsg.required"));this.formDataLink=this.linkTo("formData");const v=!I;this.farmNameLink=this.formDataLink.forkTo("name").withValidator(b).reject(l.X).check(l.e.noSpaces,()=>t("farms.errorMsg.spaceNotAllowed")).check(e=>!this.props||l.e.maxlength(e,25),()=>t("farms.errorMsg.maxLengthName")).check(l.e.minlength,()=>t("farms.errorMsg.minLength")),this.farmAddressLink=this.formDataLink.forkTo("address").check(e=>!this.props||l.e.maxlength(e,200),()=>t("farms.errorMsg.maxLengthAddress")).check(e=>!e||l.e.minlength(e),()=>t("farms.errorMsg.minLength")),this.farmCropLink=this.formDataLink.forkTo("crops").map(({value:e})=>e);const E=""===p.geometry||void 0===p.geometry,S=!this.isFormValid()||o||h||E||f;return i.a.createElement("form",{onSubmit:e=>e.preventDefault(),className:"farms-editor-form"},i.a.createElement("div",{className:"form-control-inputs"},i.a.createElement(c.q,{className:"form-control-group"},i.a.createElement(c.r,{className:"input-label"},t("farms.flyouts.editor.name")),i.a.createElement(c.bb,{className:"svg-mandatory",path:l.ob.error}),i.a.createElement("div",{className:"tooltip"},i.a.createElement(c.bb,{className:"summary-icon tooltip",path:l.ob.infoBubble}),i.a.createElement("span",{className:"tooltip tooltiptext"},t("farms.flyouts.editor.toolTips.farmName"))),i.a.createElement(c.p,{className:"farms-editor-input",type:"text",maxLength:26,name:"name",placeholder:t("farms.flyouts.editor.farmName"),onChange:this.formControlChange.bind(this),link:this.farmNameLink,value:p.name})),i.a.createElement(c.q,{className:"form-control-group"},i.a.createElement(c.r,{className:"input-label"},t("farms.flyouts.editor.crops")),i.a.createElement("div",{className:"tooltip"},i.a.createElement(c.bb,{className:"summary-icon tooltip",path:l.ob.infoBubble}),i.a.createElement("span",{className:"tooltip tooltiptext"},t("farms.flyouts.editor.toolTips.crops"))),i.a.createElement(c.p,{type:"select",className:"farms-editor-input",options:l.k,link:this.farmCropLink,clearable:!1,searchable:!0,matchProp:"label",onChange:this.formControlChange.bind(this),name:"crops",value:p.crops,placeholder:t("farms.flyouts.editor.selectCrops")})),i.a.createElement(c.q,{className:"form-control-group"},i.a.createElement(c.r,{className:"input-label"},t("farms.flyouts.editor.address")),i.a.createElement("div",{className:"tooltip"},i.a.createElement(c.bb,{className:"summary-icon tooltip",path:l.ob.infoBubble}),i.a.createElement("span",{className:"tooltip tooltiptext"},t("farms.flyouts.editor.toolTips.farmAddress"))),i.a.createElement(c.p,{className:"farms-editor-input",type:"text",maxLength:201,onChange:this.formControlChange.bind(this),name:"address",placeholder:t("farms.flyouts.editor.farmAddress"),link:this.farmAddressLink,value:p.address}))),i.a.createElement("div",{className:"form-placeholder"},i.a.createElement(c.u,null,i.a.createElement(c.d,{className:"col-2"},i.a.createElement(C,{t:t,toggleGeoJSONInput:this.toggleGeoJSONInput,geoSelect:u,isGeometryEmpty:E,disableMarkOnMap:A.a.isMultiPolygon(p.geometry)})),i.a.createElement(c.d,{className:"col-8"},"Azure-Maps"===u&&i.a.createElement(y,{azureMapsKey:!v&&a,mapKeyIsPending:!1,setGeoJSONInvalidStatus:this.setGeoJSONInvalidStatus,error:s,t:t,getGeoJSON:this.getGeoJSON,address:p.address,geometry:Object(l.O)(p.geometry)?JSON.stringify(p.geometry):p.geometry}),"GeoJSON"===u&&i.a.createElement(N,{t:t,getGeoJSON:this.getGeoJSON,setGeoJSONInvalidStatus:this.setGeoJSONInvalidStatus,GeoJSON:Object(l.O)(p.geometry)?JSON.stringify(p.geometry):p.geometry})))),!0===f&&i.a.createElement(c.X,{className:"farms-editor-success",t:t,successMsg:t("farms.flyouts.editor.createFarmSuccess")}),!0===g&&i.a.createElement(c.X,{className:"farms-editor-success",t:t,successMsg:t("farms.flyouts.editor.editFarmSuccess")}),d&&i.a.createElement(c.a,{className:"farms-editor-error",t:t,error:d}),!m&&!o&&!f&&i.a.createElement(c.c,{className:"button-box"},i.a.createElement(c.b,{primary:!0,disabled:S,type:"button",id:S?"applyBtnDisabled":"applyBtn",name:"apply",onClick:e=>{D.a.trackEvent({name:"UiEvent:Click: "+(n?"Edit":"Create")+" Farm Btn"},{context:{createFarmMode:{geoSelect:u}}}),this.apply(e)}},t("farms.flyouts.editor.apply"))),o&&i.a.createElement(c.c,{className:"button-box"},i.a.createElement(c.w,null)),!!m&&i.a.createElement(c.c,{className:"button-box"}))}}var F=a(1059),w=a(24),R=a(29);const T=Object(F.a)(Object(n.c)()(Object(s.b)((e,t)=>({farms:Object(w.c)(e),farm:t.farmId?Object(w.b)(e,t.farmId):void 0,azureMapsKey:Object(R.i)(e)}),e=>({insertFarm:t=>e(w.i.actions.insertFarm(t)),modifyFarm:t=>e(w.i.actions.modifyFarm(t)),deleteFarm:t=>e(w.i.actions.deleteFarm(t))}))(k)))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var s=a(13),n=a(54);class r{constructor(e){this.ajaxError=e;const t=e.response||{};this.errorMessage=t.InnerExceptionMessage||t.ExceptionMessage||t.Message||t.Error||e.message||"An unknown error occurred",this.status=e.status,console.error(e),this.status>=500&&this.errorMessage&&(this.errorMessage=(JSON.parse(this.errorMessage)||{}).Message||this.errorMessage)}get message(){return 0===this.status?n.a.t("errorCode.noResponse"):401===this.status?n.a.t("errorCode.notLoggedIn"):403===this.status?n.a.t("errorCode.notAuthorized"):404===this.status?n.a.t("errorCode.notFound"):this.status>=300&&this.status<400?n.a.t("errorCode.redirection"):s.a.retryableStatusCodes.has(this.status)?n.a.t("errorCode.retryFailure"):this.status>=500&&this.errorCode?n.a.t("errorCode.".concat(this.errorCode)):400===this.status?this.ajaxError.response.message||this.ajaxError.response.error.message:n.a.t("errorCode.unknown")}}r.from=e=>new r(e);class o extends r{}o.from=e=>new o(e)},,function(e,t,a){"use strict";a.d(t,"w",(function(){return n})),a.d(t,"g",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"z",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"y",(function(){return d})),a.d(t,"H",(function(){return m})),a.d(t,"i",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"q",(function(){return h})),a.d(t,"k",(function(){return f})),a.d(t,"o",(function(){return g})),a.d(t,"s",(function(){return b})),a.d(t,"u",(function(){return v})),a.d(t,"K",(function(){return E})),a.d(t,"m",(function(){return y})),a.d(t,"J",(function(){return S})),a.d(t,"I",(function(){return O})),a.d(t,"r",(function(){return C})),a.d(t,"B",(function(){return j})),a.d(t,"F",(function(){return N})),a.d(t,"D",(function(){return D})),a.d(t,"G",(function(){return M})),a.d(t,"t",(function(){return A})),a.d(t,"x",(function(){return I})),a.d(t,"A",(function(){return k})),a.d(t,"C",(function(){return F})),a.d(t,"E",(function(){return w})),a.d(t,"v",(function(){return R})),a.d(t,"p",(function(){return T})),a.d(t,"f",(function(){return P})),a.d(t,"l",(function(){return x})),a.d(t,"j",(function(){return U})),a.d(t,"n",(function(){return L})),a.d(t,"b",(function(){return B})),a.d(t,"a",(function(){return _}));const s=/^[a-zA-Z0-9_]*$/,n=e=>!e.match(s),r=[{value:"Corn",label:"Corn"},{value:"Cotton",label:"Cotton"},{value:"Maize",label:"Maize"},{value:"Rice",label:"Rice"},{value:"Soybean",label:"Soybean"},{value:"Wheat",label:"Wheat"},{value:"Others",label:"Others"}],o=new Map([["image/tiff",".tiff"],["image/png",".png"],["image/jpeg",".jpeg"],["image/bmp",".bmp"],["image/webp",".webp"],["text/csv",".csv"],["text/plain",".txt"],["text/tab-separated-values",".tsv"],["application/octet-stream",".bin"],["application/json",".json"]]),i=new Map([["image/tiff","TIFF"],["image/png","PNG"],["image/jpeg","JPEG"],["image/bmp","BMP"],["image/webp","WEBP"],["text/csv","CSV"],["text/plain","TEXT"],["text/tab-separated-values","TSV"],["application/octet-stream","BIN"],["application/json","JSON"]]),l={type:"Polygon",coordinates:[[[74.00390625,17.07778960654538],[74.99267578125,15.496032414238634],[79.1455078125,19.973348786110602],[74.00390625,17.07778960654538]]]},c={Enter:13},d={enabled:"Enabled",disabled:"Disabled"},m=["asc","desc"],u="YYYY-MM-DD HH:mm:ss",p="date",h="id",f="downloadSASUrl",g="image/png",b=0,v="name",E="Succeeded",y="Failed",S="Stopped",O="StopRequested",C="YYYY-MM-DD",j="Satellite Indices",N="Soil Moisture",D="Sensor Placement",M="SoilMoisture",A="MAP-MODAL",I="PNG",k="get_farm_imagery",F="sensor_placement_model",w="soil_moisture_heatmap",R="./noMap.png",T="GET",P="createdAt",x="Enabled",U="Disabled",L="Loading...",B={submittedStatus:"Submitted",acceptedStatus:"Accepted",runningStatus:"Running",pendingRetryStatus:"PendingRetry",failedStatus:"Failed",succeededStatus:"Succeeded",stoppedStatus:"Stopped"},_={select:"select",input:"input",datePicker:"datepicker"}},,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var s=a(26),n=a(19),r=a(554);class o{static initialize(){if("undefined"===typeof e.DeploymentConfig)throw alert("The dashboard configuration is missing.\n\nVerify the content of webui-config.js."),new Error("The global configuration is missing. Verify the content of webui-config.js.");"undefined"!==typeof e.DeploymentConfig.authEnabled&&(o.authEnabled=e.DeploymentConfig.authEnabled,o.authEnabled||console.warn("Auth is disabled! (see webui-config.js)"));const t={auth:{clientId:e.DeploymentConfig.aad.appId,authority:e.DeploymentConfig.aad.instance+e.DeploymentConfig.aad.tenant,redirectUri:window.location.origin}};o.msalInstance=new r.a(t),o.msalInstance.handleRedirectCallback((e,t)=>{}),o.getCurrentUser()}static isDisabled(){return!1===o.authEnabled}static isEnabled(){return!o.isDisabled()}static onLoad(e){if(o.initialize(),o.isDisabled())return console.debug("Skipping Auth onLoad because Auth is disabled"),void(e&&e());o.doLoginIfNotLoggedInOrLoggingIn(),o.getCurrentUser()&&e()}static doLoginIfNotLoggedInOrLoggingIn(){console.log("Was told to login... Fould already logged in user ",o.msalInstance.getAccount()," and login_in_progress is ",o.msalInstance.getLoginInProgress()),o.msalInstance.getAccount()||o.msalInstance.getLoginInProgress()||(console.log("Hence, initiating login with redirect"),o.msalInstance.loginRedirect({scopes:["".concat(e.DeploymentConfig.backendEndpoint,"/user_impersonation"),"https://graph.microsoft.com/User.ReadBasic.All"]}))}static getCurrentUser(){return o.isDisabled()?s.Observable.of(n.f):o.msalInstance.getAccount()}static logout(){o.isDisabled()||o.msalInstance.logout()}static getAccessTokenApi(){return s.Observable.create(t=>{const a={scopes:["".concat(e.DeploymentConfig.backendEndpoint,"/user_impersonation")]};return o.msalInstance.acquireTokenSilent(a).then(e=>{t.next(e.accessToken),t.complete()}).catch(e=>{console.log("acquireTokenSilent failed with Authentication Error: ".concat(e)),console.log("Trying acquireTokenRedirect..."),o.msalInstance.acquireTokenRedirect(a),t.error(e)})})}static getAccessTokenGraph(){return s.Observable.create(e=>{const t={scopes:["User.ReadBasic.All"]};return o.msalInstance.acquireTokenSilent(t).then(t=>{e.next(t.accessToken),e.complete()}).catch(a=>{console.log("acquireTokenSilent failed with Authentication Error: ".concat(a)),o.msalInstance.acquireTokenRedirect(t),e.error(a)})})}}o.authEnabled=!1}).call(this,a(70))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(13),n=a(30);class r{static getUsers(){return n.a.get(s.a.serviceUrls.graphApiUsers,{},!0,!0).map(e=>e.value)}static getUsersByIds(e){const t="?$filter="+e.map(e=>"id eq '"+e+"'").join(" or ");return n.a.get("".concat(s.a.serviceUrls.graphApiUsers).concat(t),{},!0,!0).map(e=>e.value)}static getUserByEmailOrUpn(e){const t="?$filter=mail eq '".concat(e,"' or userPrincipalName eq '").concat(e,"'");return n.a.get("".concat(s.a.serviceUrls.graphApiUsers).concat(t),{},!0,!0).map(e=>e.value)}static getUserSuggestions(e){const t="?$filter=startswith(displayName,'".concat(e,"') or startswith(givenName,'").concat(e,"') or startswith(surname,'").concat(e,"') or startswith(mail,'").concat(e,"') or startswith(userPrincipalName,'").concat(e,"')");return n.a.get("".concat(s.a.serviceUrls.graphApiUsers).concat(t),{},!0,!0).map(e=>e.value)}}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(2),n=a(26);const r=e=>t=>n.Observable.from(t).flatMap(({properties:e,timestamps:t})=>{const a=0!==e.length?e.find(e=>"Id"===e.name).values[0]:void 0,s=0!==e.length?e.filter(e=>"Id"!==e.name&&"timestamp"!==e.name):void 0,n=s?s.reduce((e,s)=>{const n=s.name,r=s.values.map((e,s)=>({metric:n,deviceId:a,data:e,time:t[s]}));return e.concat(r)},[]):void 0;return n||[]}).reduce((e,{metric:t,deviceId:a,time:n,data:r})=>Object(s.A)(e,{metric:t,deviceId:a,time:n,data:r}),e())},,function(e,t,a){"use strict";var s=a(450);a.d(t,"EditFarmFlyout",(function(){return s.a}));var n=a(452);a.d(t,"NewFarmFlyout",(function(){return n.a}));a(138);var r=a(453);a.o(r,"AddDevicesContainer")&&a.d(t,"AddDevicesContainer",(function(){return r.AddDevicesContainer}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return u}));var s=a(0),n=a.n(s),r=a(16),o=a(13),i=a(2),l=a(250),c=a(4),d=a(19);a(1002);const m=r.f.Section;class u extends i.d{constructor(e){super(e),this.openManageUsers=()=>this.setState({openFlyout:"manageUsers"}),this.closeFlyout=()=>this.setState({openFlyout:""}),this.onChange=({target:e})=>{const t=e.name,a=e.value;this.setState({[t]:a})},this.onFlyoutClose=e=>this.props.onClose(),this.toggleDiagnostics=()=>{const e=this.state.diagnosticsOptIn;this.setState({diagnosticsOptIn:!e},()=>{this.props.updateDiagnosticsOptIn(!e)})},this.state={desiredSimulationState:this.props.isSimulationEnabled,diagnosticsOptIn:this.props.diagnosticsOptIn,logoFile:void 0,applicationName:"",loading:!1,toggledSimulation:!1,madeLogoUpdate:!1,username:void 0,openFlyout:""},this.applicationName=this.linkTo("applicationName").map(e=>0===e.length?void 0:e)}componentWillReceiveProps({setLogoPending:e,setLogoError:t,diagnosticsOptIn:a}){const s=this.state.madeLogoUpdate;this.setState({diagnosticsOptIn:a}),!s||e||t||this.props.onClose()}render(){const t=this.props.t,a=this.state.openFlyout;return n.a.createElement(c.e,null,n.a.createElement(r.f.Container,null,n.a.createElement(r.f.Header,null,n.a.createElement(r.f.Title,null,t("settingsFlyout.title")),n.a.createElement(r.f.CloseBtn,{onClick:this.onFlyoutClose.bind(this,"Settings_TopXClose_Click")})),n.a.createElement(r.f.Content,{className:"settings-workflow-container"},n.a.createElement(c.R,{key:"edit",permissions:d.h.readRoleAssignments},n.a.createElement(m.Container,{collapsable:!1},n.a.createElement(m.Header,null,n.a.createElement("div",{onClick:this.openManageUsers,className:"cursor-pointer"},this.props.t("users.manageUsersFlyout.title"))))),n.a.createElement(m.Container,{collapsable:!1},n.a.createElement(m.Header,null,t("settingsFlyout.sendDiagnosticsHeader")),n.a.createElement(m.Content,{className:"diagnostics-content"},this.props.t("settingsFlyout.sendDiagnosticsText"),n.a.createElement("a",{href:o.a.serviceUrls.privacy,className:"privacy-link",target:"_blank",rel:"noopener noreferrer"},this.props.t("settingsFlyout.sendDiagnosticsMicrosoftPrivacyUrl")))),n.a.createElement("span",{className:"version"},t("settingsFlyout.version"),":"," v "+e.DeploymentConfig.farmbeatsVersion))),"manageUsers"===a&&n.a.createElement(l.a,{onClose:this.closeFlyout}))}}}).call(this,a(70))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return u}));var s=a(9),n=a(0),r=a.n(n),o=a(4),i=a(2),l=a(16),c=(a(990),a(548)),d=a(551),m=a(17);class u extends n.Component{constructor(e){super(e),this.onFlyoutClose=e=>{this.props.clearRolesError(),this.props.onClose()},this.getSoftSelectId=({id:e}="")=>e,this.state={requestedUserIds:[],error:null,success:null},this.setSuccess=this.setSuccess.bind(this),this.setError=this.setError.bind(this),this.getGridData=this.getGridData.bind(this)}componentDidMount(){const e=this.props,t=e.roleAssignmentLastUpdated,a=e.roleAssignmentFetchPending,s=e.fetchRoleAssignments,n=e.roleDefinitionLastUpdated,r=e.roleDefinitionPending,o=e.fetchRoleDefinitions;t||a||s(),n||r||o(),m.a.trackEvent({name:"UiEvent:FlyOpen: Access Control"})}componentWillUnmount(){m.a.trackEvent({name:"UiEvent:FlyClose: Access Control"})}componentDidUpdate(t){const a=this.props,s=a.userPending,n=a.roleAssignments,r=a.fetchUsers,o=a.users;if(!s&&n.length>0){const t=n.filter(e=>"UserId"===e.objectIdType).filter(t=>t.tenantId===e.DeploymentConfig.aad.tenant).map(e=>e.objectId).filter(e=>!o.map(e=>e.id).includes(e)&&!this.state.requestedUserIds.includes(e));t.length>0&&(r(t),this.setState({requestedUserIds:this.state.requestedUserIds.concat(t)}))}}setSuccess(e){this.setState({success:e,error:null})}setError(e){this.setState({error:e,success:null})}getGridData(){const t=this.props,a=t.users,s=t.userError,n=t.userPending,r=t.roleAssignments,o=t.roleAssignmentFetchError,i=t.roleAssignmentFetchPending,l=t.roleDefinitions,c=t.roleDefinitionError,d=t.roleDefinitionPending;if(!s&&!c&&!o&&!n&&!i&&!d&&a&&a.length>0&&r&&r.length>0&&l&&l.length>0){const t=r.filter(e=>"UserId"===e.objectIdType).filter(t=>t.tenantId===e.DeploymentConfig.aad.tenant),s=t.map(e=>{const t=a.find(t=>t.id===e.objectId);if(!t)return null;const s=l.find(t=>t.id===e.roleDefinitionId);return{emailOrUpn:t.mail?t.mail:t.userPrincipalName,role:s.name,roleAssignment:e}}).filter(e=>null!==e),n=t.length-s.length;return n>0&&console.warn("User role assignments skipped: ",n),s}}render(){const e=this.props,t=e.t,a=e.deleteRoleAssignmentsById,n=e.userError,m=e.roleAssignmentFetchError,u=e.roleAssignmentAddError,p=e.roleAssignmentDeleteError,h=e.roleDefinitionError,f=e.clearRolesError,g=e.roleAssignmentAddPending,b=e.roleAssignmentDeletePending,v=this.state,E=v.success,y=v.error;this.columnDefs=[{headerName:"users.manageUsersFlyout.rolesGridSection.colHeaders.email",field:"emailOrUpn",width:150,sort:"asc",comparator:i.g},{field:"role",headerName:"users.manageUsersFlyout.rolesGridSection.colHeaders.role",width:50},{cellRendererFramework:d.a,width:45,cellRendererParams:{deleteRoleAssignmentsById:a,clearRolesError:f,successCallback:this.setSuccess,errorCallback:this.setError},suppressSorting:!0}];const S=this.getGridData(),O=Object(s.a)({},this.defaulGridProps,{columnDefs:Object(i.qb)(t,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,rowData:S},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:e=>e.roleAssignment.id,context:{t:t}}),C=n||h||m,j=y||u||p,N=g||b;return r.a.createElement(l.f.Container,null,r.a.createElement(l.f.Header,null,r.a.createElement(l.f.Title,null,t("users.manageUsersFlyout.title")),r.a.createElement(l.f.CloseBtn,{onClick:this.onFlyoutClose.bind(this,"Users_TopXClose_Click")})),!C&&r.a.createElement("div",{className:"manage-users"},r.a.createElement(c.a,{successCallback:this.setSuccess,errorCallback:this.setError}),r.a.createElement(l.f.Section.Container,{collapsable:!1},r.a.createElement(l.f.Section.Header,null,t("users.manageUsersFlyout.rolesGridSection.header"))),r.a.createElement("div",{className:"add-device-grid"},r.a.createElement(o.K,Object.assign({key:"farm-grid-key"},O))),!N&&(E||j)&&r.a.createElement(l.f.Section.Container,{collapsable:!1,className:"error-section"},r.a.createElement(l.f.Section.Content,null,!j&&r.a.createElement(o.X,{className:"add-role-assignment-success",t:t,successMsg:E}),j&&r.a.createElement(o.a,{t:t,error:j})))),!!C&&r.a.createElement("div",{className:"manage-error-section"},r.a.createElement(o.a,{error:C,t:t})))}}}).call(this,a(70))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return E}));var s=a(9),n=a(0),r=a.n(n),o=a(4),i=a(552),l=a(557),c=a(164),d=a(243),m=a(26),u=a(2),p=a(15),h=a.n(p),f=a(22),g=(a(1006),a(17));const b={telemetryLive:{},isTelemetryPending:!0,telemetryError:null,isRealTimeTelemetry:!0,telemetryCustom:{},telemetryCustomDateRange:{start:null,end:null},buttonActive:"live",measureNameTypeMap:new Map,selectedMeasureType:"",selectedMeasureName:""},v=(e=[],t=[],a=[])=>({devices:e,sensors:t,sensorModels:a});class E extends n.Component{constructor(e){super(e),this.state=Object(s.a)({},b,{},this.getSensorMeasureData(e.sensors,e.sensorModels)),this.subscriptions=[],this.telemetryPanelRefresh$=new m.Subject,this.filterSensorIds=this.filterSensorIds.bind(this),this.onApplyEvent=this.onApplyEvent.bind(this),this.onLiveButtonClick=this.onLiveButtonClick.bind(this),this.getSensorMeasureNameUnitMap=this.getSensorMeasureNameUnitMap.bind(this),this.getCustomTelemetryStream=this.getCustomTelemetryStream.bind(this);const t=this.props,a=t.fetchDevices,n=t.devicesLastUpdated,r=t.devicesError,o=t.fetchSensors,i=t.sensorsLastUpdated,l=t.sensorsError,c=t.fetchSensorModels,d=t.sensorModelsLastUpdated,u=t.sensorModelsError;n||r||a(),i||l||o(),d||u||c()}componentDidMount(){this.subscriptions.push(this.telemetryPanelRefresh$.subscribe(()=>this.setState({telemetryLive:{},isTelemetryPending:!0}))),this.subscriptions.push(this.telemetryPanelRefresh$.switchMap(({devices:e=[],sensors:t=[],sensorModels:a={}})=>m.Observable.from(this.filterSensorIds(a,t)).mergeMap(e=>f.f.getTelemetryBySensorIdP1D(e)).toArray().flatMap(Object(c.a)(()=>this.state.telemetryLive)).map(a=>(this.getTelemetryByDisplayName(a,e,t),{telemetryLive:a}))).subscribe(e=>{this.setState(Object(s.a)({},e,{lastRefreshed:h()(),isTelemetryPending:!1}))},e=>{this.setState({telemetryError:e,isTelemetryPending:!1})})),this.props.devicesLastUpdated&&this.props.sensorsLastUpdated&&this.props.sensorModelsLastUpdated&&this.telemetryPanelRefresh$.next(v(this.props.devices,this.props.sensors,this.props.sensorModels))}componentWillUnmount(){this.subscriptions.forEach(e=>e.unsubscribe())}componentDidUpdate(e){this.props.devicesLastUpdated&&this.props.sensorsLastUpdated&&this.props.sensorModelsLastUpdated&&!(e.devicesLastUpdated&&e.sensorsLastUpdated&&e.sensorModelsLastUpdated)&&this.setState(Object(s.a)({},this.getSensorMeasureData(this.props.sensors,this.props.sensorModels)),()=>{this.state.isRealTimeTelemetry?this.telemetryPanelRefresh$.next(v(this.props.devices,this.props.sensors,this.props.sensorModels)):this.getCustomTelemetryStream()})}getSensorMeasureData(e,t){const a=this.props.sensorIds,s=e.filter(e=>a.includes(e.id)).map(e=>e.sensorModelId),n=t.filter(e=>s.includes(e.id)).reduce((e,t)=>e.concat(t.sensorMeasures),[]).map(e=>[e.name,e.type]);return{measureNameTypeMap:new Map(n),selectedMeasureType:n.length>0?n[0][1]:"",selectedMeasureName:n.length>0?n[0][0]:""}}filterSensorIds(e,t){const a=this.state.selectedMeasureName,s=this.props.sensorIds,n=e.filter(e=>e.sensorMeasures.map(e=>e.name).includes(a)).map(e=>e.id);return t.filter(e=>n.includes(e.sensorModelId)).map(e=>e.id).filter(e=>s.includes(e))}getTelemetryByDisplayName(e,t,a){const s=t.map(e=>[e.id,e.name]),n=new Map(s),r=t.reduce((e,t)=>e.concat(a.filter(e=>e.deviceId===t.id)),[]).map(e=>[e.id,[n.get(e.deviceId),e.name,e.id].join("_")]),o=new Map(r);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i))for(const t in e[i])Object.prototype.hasOwnProperty.call(e[i],t)&&(e[i][o.get(t)]=e[i][t],delete e[i][t])}getSensorMeasureNameUnitMap(){const e=this.props,t=e.devices,a=e.sensors,s=e.sensorModels,n=t.reduce((e,t)=>e.concat(a.filter(e=>e.deviceId===t.id)),[]).reduce((e,t)=>e.concat(s.filter(e=>e.id===t.sensorModelId)),[]).reduce((e,t)=>e.concat(t.sensorMeasures),[]).map(e=>[e.name,e.unit]);return new Map(n)}onApplyEvent(e,t){const a=h()(t.startDate).toISOString(),s=h()(t.endDate).toISOString();this.setState({telemetryCustom:{},telemetryCustomDateRange:{start:a,end:s},buttonActive:"custom",isTelemetryPending:!0}),this.getCustomTelemetryStream()}getCustomTelemetryStream(){const e=this.state.telemetryCustomDateRange,t=this.props,a=t.devices,n=t.sensors,r=t.sensorModels,o={};m.Observable.from(this.filterSensorIds(r,n)).mergeMap(t=>f.f.getTelemetryBySensorIdForDateRange(t,e.start,e.end)).toArray().flatMap(Object(c.a)(()=>o)).map(e=>(this.getTelemetryByDisplayName(e,a,n),{telemetryCustom:e,isTelemetryPending:!1})).subscribe(e=>this.setState(Object(s.a)({},e,{lastRefreshed:h()(),isRealTimeTelemetry:!1})),e=>this.setState({telemetryError:e,isTelemetryPending:!1}))}refreshTelemetryData(){const e=this.state.buttonActive,t=this.props,a=t.devices,s=t.sensors,n=t.sensorModels;"live"===e?this.setState({telemetryLive:{},isTelemetryPending:!0},()=>{this.telemetryPanelRefresh$.next(v(a,s,n))}):"custom"===e&&this.setState({telemetryCustom:{},isTelemetryPending:!0},()=>{this.getCustomTelemetryStream()})}onLiveButtonClick(){this.setState({istelemetryPending:!1,isRealTimeTelemetry:!0,buttonActive:"live"})}render(){const t=this.props,a=t.t,s=t.theme,n=t.isDevicesPending,c=t.isSensorsPending,m=t.isSensorModelsPending,p=t.devicesError,h=t.sensorsError,f=t.sensorModelsError,b=this.state,v=b.buttonActive,E=b.isTelemetryPending,y=b.telemetryError,S=b.isRealTimeTelemetry,O=b.telemetryLive,C=b.telemetryCustom,j=b.measureNameTypeMap,N=b.selectedMeasureType,D=b.selectedMeasureName,M=e.DeploymentConfig.tsiEndpoint,A=n||c||E||m,I=p||h||y||f,k=S?O:C,F=this.getSensorMeasureNameUnitMap(),w="live"===v?"live-button live-button-active":"live-button",R="custom"===v?"date-picker-button date-picker-button-active":"date-picker-button";return r.a.createElement(o.B,{className:"telemetry-panel"},r.a.createElement(o.F,null,this.props.showHeader&&r.a.createElement(o.G,null,a("dashboard.panels.telemetry.header")),r.a.createElement(o.g,null,r.a.createElement(i.a,{className:R,onApplyEvent:this.onApplyEvent,t:a}),r.a.createElement("button",{className:w,onClick:this.onLiveButtonClick},a("dashboard.liveButton")))),r.a.createElement(o.C,{className:"telemetry-panel-container"},r.a.createElement("div",{className:"options-container bold-measure-type"},Array.from(new Set(j.values())).map((e,t)=>r.a.createElement("button",{key:t,onClick:()=>this.setState({selectedMeasureType:e}),className:Object(u.S)("telemetry-option",N===e?"active":"")},e))),r.a.createElement("div",{className:"options-container"},Array.from(j.keys()).filter(e=>j.get(e)===N).map((e,t)=>r.a.createElement("button",{key:t,onClick:()=>this.setState({selectedMeasureName:e},()=>{this.refreshTelemetryData()}),className:Object(u.S)("telemetry-option",D===e?"active":"")},e))),r.a.createElement(l.a,{telemetry:k,telemetryKey:D,theme:s,colors:d.a}),0!==Object.keys(k).length&&r.a.createElement("div",{className:"measure-unit-container"},"Measure Unit: "+F.get(D)),!A&&0===Object.keys(k).length&&r.a.createElement(o.H,{className:"no-data"},a("dashboard.noData")),!0===A&&r.a.createElement(o.H,null,a("dashboard.wait")),M&&r.a.createElement(o.db,{href:M,onClick:()=>{g.a.trackEvent({name:"UiEvent:Click: Explore in TSI Link"},{type:"External Link Click",toUrl:M})}})),A&&r.a.createElement(o.I,null,r.a.createElement(o.w,null)),I&&r.a.createElement(o.D,null,r.a.createElement(o.a,{t:a,error:I})))}}}).call(this,a(70))},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=["#01B8AA","#F2C80F","#E81123","#3599B8","#33669A","#26FFDE","#E0E7EE","#FDA954","#FD625E","#FF4EC2","#FFEE91"].map(e=>({color:e}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var s=a(145),n=a(140),r=a(9),o=a(0),i=a.n(o),l=a(16),c=a(26),d=a(15),m=a.n(d),u=a(2),p=a(247),h=a(4),f=a(22),g=a(92),b=(a(447),a(160)),v=a(17);const E={selectedTab:"manualAssociate",associateDeviceError:void 0,changesApplied:void 0,isAssociateDevicePending:void 0,deviceFarmMapping:void 0,isAssociateDevicesSuccessful:void 0};class y extends u.d{constructor(e){super(e),this.apply=e=>{v.a.trackEvent({name:"UiEvent:Click: Associate Devices Btn"}),e.preventDefault();const t=this.props,a=t.modifyDevices,s=t.devices,n=this.state.deviceFarmMapping;this.setState({isAssociateDevicePending:!0,associateDeviceError:null}),c.Observable.from(n).mergeMap(e=>{const t=s.find(t=>t.id===e.deviceId);t.farmId=e.farmId;const a=JSON.parse(JSON.stringify(t));return f.h.updateDevice(t.id,Object(g.d)(a))}).mergeMap(e=>f.h.getDeviceById(e.id)).subscribe(e=>{const t=this.props,s=t.farmsMap,n=t.devices,o=t.deviceModelsMap;e.deviceModelType=o.get(e.deviceModelId),e.deviceModelName=o.get(e.deviceModelId);const i=n.find(t=>t.id===e.parentDeviceId);e.parentDevice=void 0===i?void 0:i.name,e.lastModifiedAt=m()(e.lastModifiedAt).format(u.m),e.farmName=e.farmId?s.get(e.farmId):void 0,a([Object(r.a)({},e)]),this.setState({isAssociateDevicePending:!1,changesApplied:!0,isAssociateDevicesSuccessful:!0})},e=>this.setState({associateDeviceError:e,isAssociateDevicePending:!1,changesApplied:!0}),()=>this.setState({isAssociateDevicePending:!1,changesApplied:!0,confirmStatus:!1}))},this.onDeviceFarmMappingChange=e=>{const t=[];var a,o=Object(n.a)(e);try{for(o.s();!(a=o.n()).done;){const e=Object(s.a)(a.value,2),n=e[0],r=e[1];t.push({deviceId:n,farmId:r})}}catch(i){o.e(i)}finally{o.f()}this.setState(Object(r.a)({},this.state,{deviceFarmMapping:t}))},this.areDevicesAssigned=()=>{const e=this.state.deviceFarmMapping;let t=!1;return Object(b.isArray)(e)&&0!==e.length&&(t=!0,e.forEach(e=>{e.farmId||(t=!1)})),t},this.state=E;const t=this.props,a=t.deviceLastUpdated,o=t.deviceError,i=t.fetchDevices,l=t.deviceModelLastUpdated,d=t.deviceModelError,p=t.fetchDeviceModel,h=t.farmLastUpdated,y=t.farmsError,S=t.fetchFarms;a||o||i(),h||y||S(),l||d||p(),this.onClickTabChange=this.onClickTabChange.bind(this)}componentWillReceiveProps(e){this.props.rowData!==e.rowData&&this.setState({isAssociateDevicesSuccessful:void 0,isAssociateDevicePending:void 0,associateDeviceError:void 0,changesApplied:void 0})}componentWillUnmount(){}onClickTabChange(e){this.setState({selectedTab:e})}render(){const e=this.props,t=e.onClose,a=e.t,s=e.farms,n=e.rowData,r=this.state,o=r.selectedTab,c=r.associateDeviceError,d=r.changesApplied,m=r.isAssociateDevicesSuccessful,u=r.isAssociateDevicePending,f={t:a,rowData:n,farms:s,onDeviceFarmMappingChange:this.onDeviceFarmMappingChange};return i.a.createElement("div",{className:"associate-device-container"},i.a.createElement(l.a,null,i.a.createElement(l.d,null,i.a.createElement(l.e,null,a("devices.flyouts.associateDevices.title")),i.a.createElement(l.b,{onClick:t})),i.a.createElement(l.c,{className:"associate-device-content "},"manualAssociate"===o&&i.a.createElement(p.a,f),c&&i.a.createElement(h.a,{className:"associate-devices-error",t:a,error:c}),!0===d&&!0===m&&i.a.createElement(h.X,{className:"associate-devices-success",t:a,successMsg:a("devices.flyouts.associateDevices.success")}),!d&&!u&&i.a.createElement(h.c,{className:"button-box"},i.a.createElement(h.b,{onClick:t,id:"cancelBtn"},a("devices.flyouts.associateDevices.cancel")),i.a.createElement(h.b,{primary:!0,disabled:!this.areDevicesAssigned(),type:"submit",onClick:this.apply,id:this.areDevicesAssigned()?"applyBtn":"applyBtnDisabled"},a("devices.flyouts.associateDevices.assign"))),u&&i.a.createElement(h.c,{className:"button-box"},i.a.createElement(h.w,null)),!!d&&i.a.createElement(h.c,null))))}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(9),n=a(0),r=a.n(n),o=a(16),i=a(26),l=a(15),c=a.n(l),d=a(2),m=a(246),u=(a(455),a(4)),p=a(22),h=a(92),f=a(17);const g={selectedTab:"selectDevices",addDeviceError:void 0,changesApplied:void 0,isAddDevicePending:void 0,selectedDevices:void 0,isAddDeviceSuccessful:void 0};class b extends d.d{constructor(e){super(e),this.apply=e=>{const t=this.props,a=t.modifyDevices,n=t.devices,r=t.farmId,o=this.state.selectedDevices;e.preventDefault(),f.a.trackEvent({name:"UiEvent:Click: Add Devices Btn"},{context:{deviceCount:o&&o.length?o.length:0}}),this.setState({isAddDevicePending:!0,addDeviceError:null}),i.Observable.from(o).mergeMap(e=>{const t=n.find(t=>t.id===e.deviceId);t.farmId=r;const a=JSON.parse(JSON.stringify(t));return p.h.updateDevice(t.id,Object(h.d)(a))}).mergeMap(e=>p.h.getDeviceById(e.id)).subscribe(e=>{const t=this.props,n=t.farmsMap,r=t.devices,o=t.deviceModelsMap;e.deviceModelType=o.get(e.deviceModelId),e.deviceModelName=o.get(e.deviceModelId);const i=r.find(t=>t.id===e.parentDeviceId);e.parentDevice=void 0===i?void 0:i.name,e.lastModifiedAt=c()(e.lastModifiedAt).format(d.m),e.farmName=e.farmId?n.get(e.farmId):void 0,a([Object(s.a)({},e)]),this.setState({isAddDevicePending:!1,changesApplied:!0,isAddDeviceSuccessful:!0})},e=>this.setState({addDeviceError:e,isAddDevicePending:!1,changesApplied:!0}),()=>this.setState({isAddDevicePending:!1,changesApplied:!0,confirmStatus:!1}))},this.onHardSelectChange=e=>{this.setState({selectedDevices:e})},this.state=g;const t=this.props,a=t.deviceLastUpdated,n=t.deviceError,r=t.fetchDevices,o=t.deviceModelLastUpdated,l=t.deviceModelError,m=t.fetchDeviceModel,u=t.farmLastUpdated,b=t.farmsError,v=t.fetchFarms;a||n||r(),u||b||v(),o||l||m(),this.onClickTabChange=this.onClickTabChange.bind(this)}componentWillReceiveProps(e){this.props.rowData!==e.rowData&&this.setState(Object(s.a)({},g))}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}onClickTabChange(e){this.setState({selectedTab:e})}render(){const e=this.props,t=e.onClose,a=e.t,s=e.farms,n=e.devices,i=this.state,l=i.selectedTab,c=i.addDeviceError,p=i.changesApplied,h=i.isAddDeviceSuccessful,f=i.selectedDevices,g=i.isAddDevicePending,b={t:a,farms:s,devices:n,onHardSelectChange:this.onHardSelectChange};return r.a.createElement("div",{className:"add-device-container"},r.a.createElement(o.a,null,r.a.createElement(o.d,null,r.a.createElement(o.e,null,a("farms.flyouts.addDevices.header")),r.a.createElement(o.b,{onClick:t})),r.a.createElement(o.c,{className:"add-device-content "},"selectDevices"===l&&r.a.createElement(m.a,b),r.a.createElement(u.ab,null,r.a.createElement(u.Y,null,r.a.createElement(u.Z,null,f?f.length:0),r.a.createElement(u.V,null,a("farms.flyouts.addDevices.selectedDevices")))),c&&r.a.createElement(u.a,{className:"add-devices-error",t:a,error:c}),!0===p&&!0===h&&r.a.createElement(u.X,{className:"add-devices-success",t:a,successMsg:a("farms.flyouts.addDevices.success")}),!p&&!g&&r.a.createElement(u.c,{className:"button-box"},r.a.createElement(u.b,{id:"cancelBtn",svg:d.ob.cancelX,onClick:t},a("farms.flyouts.addDevices.cancel")),r.a.createElement(u.b,{primary:!0,disabled:!f||0===f.length,type:"submit",onClick:this.apply,id:f&&0!==f.length?"applyBtn":"applyBtnDisabled"},a("farms.flyouts.addDevices.apply"))),g&&r.a.createElement(u.c,{className:"button-box"},r.a.createElement(u.w,null)),!!p&&r.a.createElement(u.c,null))))}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var s=a(0),n=a.n(s),r=a(4),o=a(9),i=a(2),l=a(41);const c=l.d.checkForEmpty,d={deviceName:{headerName:"farms.flyouts.addDevices.deviceName",field:"deviceName",sort:"asc",comparator:i.g},farmName:{headerName:"farms.flyouts.addDevices.farmName",field:"farmName",valueFormatter:({value:e})=>c(e)}},m={enableColResize:!0,multiSelect:!0,rowSelection:"multiple"};a(1025);const u={softSelectedId:void 0,selectedDevices:void 0};class p extends s.Component{constructor(e){super(e),this.getSoftSelectId=({id:e}="")=>e,this.onGridReady=e=>{this.addDeviceGridApi=e.api,Object(i.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.onHardSelectChange=e=>{const t=this.props.onHardSelectChange;Object(i.L)(t)&&(t(e),this.setState({selectedDevices:e}))},this.onSoftSelectChange=(e,t)=>{const a=this.props.onSoftSelectChange;e&&this.setState({softSelectedId:e}),Object(i.L)(a)&&a(e,t)},this.state=u,this.columnDefs=[l.c,d.deviceName,d.farmName],this.defaulGridProps=Object(o.a)({},m)}render(){const e=this.props.t,t=this.state.softSelectedId,a=Object(o.a)({},this.defaulGridProps,{columnDefs:Object(i.qb)(e,this.columnDefs),sizeColumnsToFit:!0,getSoftSelectId:this.getSoftSelectId,softSelectId:t},this.props,{deltaRowDataMode:!0,enableSorting:!0,unSortIcon:!0,getRowNodeId:({id:e})=>e,context:{t:e},onGridReady:this.onGridReady,onRowClicked:({node:e})=>e.setSelected(!e.isSelected()),onHardSelectChange:this.onHardSelectChange,onSoftSelectChange:this.onSoftSelectChange});return n.a.createElement("div",{className:"add-device-grid"},n.a.createElement(r.K,a))}}a(455);const h={selectedDevices:void 0};class f extends s.Component{constructor(e){super(e),this.onGridReady=e=>this.addDeviceGridApi=e.api,this.searchOnChange=({target:{value:e}})=>{this.addDeviceGridApi&&this.addDeviceGridApi.setQuickFilter(e)},this.mapDevicesToFarm=()=>{const e=this.props,t=e.farms;return e.devices.map((e,a)=>{const s=t.find(t=>e.farmId&&t.id===e.farmId);return{farmId:s?s.id:null,id:a,deviceId:e.id,farmName:s?s.name:void 0,deviceName:e.name}})},this.state=h}render(){const e=this.mapDevicesToFarm(),t=this.props,a=t.t,s=t.onHardSelectChange,o={t:a,onGridReady:this.onGridReady,rowData:e,onHardSelectChange:s};return n.a.createElement(r.e,null,n.a.createElement(r.g,{left:!0},n.a.createElement(r.U,{className:"search-Devices",onChange:this.searchOnChange,placeholder:a("farms.flyouts.addDevices.searchPlaceholder")})),n.a.createElement(r.z,null,n.a.createElement(p,o)))}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var s=a(9),n=a(0),r=a.n(n),o=a(4),i=a(2);const l=a(41).d.checkForEmpty,c={deviceName:{headerName:"devices.flyouts.associateDevices.deviceName",field:"deviceName",sort:"asc",comparator:i.g},currentFarm:{headerName:"devices.flyouts.associateDevices.currentFarm",field:"farmName",valueFormatter:({value:e})=>l(e),comparator:i.g},assignToFarm:{headerName:"devices.flyouts.associateDevices.assignToFarm",field:"assignToFarm",cellRendererFramework:o.i,suppressSorting:!0}},d={enableColResize:!0,multiSelect:!0,rowSelection:"multiple"};a(1007);const m={softSelectedId:void 0,selectedDevices:void 0};class u extends n.Component{constructor(e){super(e),this.onGridReady=e=>{this.associateDeviceGridApi=e.api,Object(i.L)(this.props.onGridReady)&&this.props.onGridReady(e)},this.onFarmSelectChange=(e,t)=>{const a=this.props.onFarmSelectChange;Object(i.L)(a)&&a(e,t)},this.state=m,this.columnDefs=[c.deviceName,c.currentFarm,c.assignToFarm],this.defaulGridProps=Object(s.a)({},d)}render(){const e=this.props,t=e.t,a=e.farms,n=this.state.softSelectedId,l=Object(s.a)({},this.defaulGridProps,{columnDefs:Object(i.qb)(t,this.columnDefs),sizeColumnsToFit:!0,softSelectId:n},this.props,{deltaRowDataMode:!0,enableSorting:!0,getRowNodeId:({id:e})=>e,unSortIcon:!0,context:{t:t,farms:a,onFarmSelectChange:this.onFarmSelectChange},onGridReady:this.onGridReady});return r.a.createElement("div",{className:"associate-device-grid"},r.a.createElement(o.K,l))}}a(447);const p={farmApplyToAll:void 0,deviceMapping:void 0};class h extends i.d{constructor(e){super(e),this.onGridReady=e=>this.associateDeviceGridApi=e.api,this.toSelectOptions=({id:e,name:t})=>({label:t,value:e}),this.mapDevicesToFarm=()=>{const e=this.props.rowData,t=this.state.deviceMapping;return e.map((e,a)=>({farmId:e.farmId,id:a,deviceId:e.id,farmName:e.farmName?e.farmName:void 0,deviceName:e.name,assignToFarm:t?t.get(e.id):void 0}))},this.onApplyFarmToAll=()=>{const e=this.state.farmApplyToAll,t=this.props,a=t.rowData,n=t.onDeviceFarmMappingChange,r=new Map;a.forEach(t=>{r.set(t.id,e)}),Object(i.L)(n)&&n(r),this.setState(Object(s.a)({},this.state,{deviceMapping:r}))},this.onFarmSelectChange=(e,t)=>{if(t){const a=this.state.deviceMapping,n=this.props.onDeviceFarmMappingChange,r=this.mapDevicesToFarm().find(t=>t.id===e.id);e.deviceId===r.deviceId?a.set(e.deviceId,t):a.set(r.deviceId,t),Object(i.L)(n)&&n(a),this.setState(Object(s.a)({},this.state,{farmApplyToAll:void 0,deviceMapping:a}))}};const t=e.rowData,a=new Map;t.forEach(e=>{a.set(e.id,void 0)}),this.state=Object(s.a)({},p,{deviceMapping:a})}componentWillReceiveProps(e){if(this.props.rowData!==e.rowData){const t=e.rowData,a=e.onDeviceFarmMappingChange,n=this.state.deviceMapping,r=new Map;t.forEach(e=>{n.get(e.id)?r.set(e.id,n.get(e.id)):r.set(e.id,void 0)}),Object(i.L)(a)&&a(r),this.setState(Object(s.a)({},p,{deviceMapping:r}))}}render(){const e=this.props,t=e.t,a=e.farms,s={t:t,rowData:this.mapDevicesToFarm(),farms:a,onGridReady:this.onGridReady,onFarmSelectChange:this.onFarmSelectChange},n=a.map(this.toSelectOptions);return this.applyToAllLink=this.linkTo("farmApplyToAll").map(({value:e})=>e),r.a.createElement(o.e,null,r.a.createElement(o.g,{left:!0},r.a.createElement("div",{className:"farm-applytoall-group"},r.a.createElement(o.p,{type:"select",options:n,className:"farm-apply-to-all-select",clearable:!1,searchable:!0,placeholder:t("devices.flyouts.associateDevices.selectFarm"),link:this.applyToAllLink}),r.a.createElement(o.b,{className:"farm-apply-to-all-btn",onClick:()=>this.onApplyFarmToAll()},t("devices.flyouts.associateDevices.applyToAll")))),r.a.createElement(o.z,null,r.a.createElement(u,s)))}}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(241),n=a(23),r=a(27),o=a(95),i=a(48);const l=Object(r.c)()(Object(n.b)(e=>({users:Object(o.e)(e),userError:Object(o.b)(e),userLastUpdated:Object(o.c)(e),userPending:Object(o.d)(e),roleAssignments:Object(i.i)(e),roleAssignmentFetchError:Object(i.f)(e),roleAssignmentAddError:Object(i.b)(e),roleAssignmentDeleteError:Object(i.d)(e),roleAssignmentLastUpdated:Object(i.h)(e),roleAssignmentFetchPending:Object(i.g)(e),roleAssignmentAddPending:Object(i.c)(e),roleAssignmentDeletePending:Object(i.e)(e),roleDefinitions:Object(i.m)(e),roleDefinitionError:Object(i.j)(e),roleDefinitionLastUpdated:Object(i.k)(e),roleDefinitionPending:Object(i.l)(e)}),e=>({fetchUsers:t=>e(o.a.actions.fetchUsers(t)),fetchRoleAssignments:()=>e(i.a.actions.fetchRoleAssignments()),updateRoleAssignment:(t,a)=>e(i.a.actions.updateRoleAssignment({id:t,payload:a})),deleteRoleAssignmentsById:(t,a)=>e(i.a.actions.deleteRoleAssignmentById({id:t,callbacks:a})),fetchRoleDefinitions:()=>e(i.a.actions.fetchRoleDefinitions()),clearRolesError:()=>e(i.o.actions.clearError())}))(s.a))},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var s=a(0),n=a.n(s),r=a(15),o=a.n(r),i=(a(442),a(2)),l=a(256),c=a.n(l),d=a(4);class m extends s.Component{render(){const e=this.props,t=e.inputValue,a=e.onApplyEvent,s=e.containerType,r=e.containerPlaceHolder,l=e.containerValue,m=e.containerIcon,u=e.className,p=e.IconClass,h=e.t,f=e.minDate,g=e.startDate,b=e.endDate;return n.a.createElement(c.a,{singleDatePicker:this.props.singleDatePicker,showDropdowns:!0,maxDate:o()(),minDate:f,startDate:g,endDate:b,opens:"left",onApply:a},s?n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{className:u,type:"text",placeholder:r,defaultValue:l,onChange:this.props.onChange}),m&&n.a.createElement("span",{className:p},n.a.createElement("img",{src:m,alt:h("maps.filterFlyout.datePickerIcon")}))):n.a.createElement(d.b,{primary:!0,svg:i.ob.calendar,className:"date-picker-btn"},t))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/gatewayBig.75fd713f.svg"},function(e,t,a){e.exports=a.p+"static/media/nodeBig.3275de77.svg"},function(e,t,a){e.exports=a.p+"static/media/onlineStatus.f90b7d37.svg"},function(e,t,a){e.exports=a.p+"static/media/offlineStatus.6c2b4151.svg"},function(e,t,a){e.exports=a.p+"static/media/onlineStatusBig.b5a2d95d.svg"},function(e,t,a){e.exports=a.p+"static/media/infoBubble.256850bd.svg"},function(e,t,a){e.exports=a.p+"static/media/GatewayBlack.a4154c82.svg"},function(e,t,a){e.exports=a.p+"static/media/gateway.6a9c2364.svg"},function(e,t,a){e.exports=a.p+"static/media/node.f2d7a65c.svg"},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var s=a(0),n=a.n(s);function r(e,t){return(e.mail||"").startsWith(t)?e.mail:e.userPrincipalName.startsWith(t)?e.userPrincipalName:e.mail||e.userPrincipalName}function o(e,{query:t}){const a=r(e,t);return n.a.createElement("div",null,n.a.createElement("div",null,e.displayName),n.a.createElement("div",null,a))}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return h}));var s=a(0),n=a.n(s),r=a(4),o=a(16);a(989);var i=a(1059),l=a(23),c=a(27),d=a(22),m=a(29);const u=Object(i.a)(Object(c.c)()(Object(l.b)(e=>({user:Object(m.r)(e)}),()=>({logout:()=>d.b.logout()}))(e=>{const t=e.t,a=e.user,s=e.logout,i=e.onClose;return n.a.createElement(o.f.Container,null,n.a.createElement(o.f.Header,null,n.a.createElement(o.f.Title,null,t("profileFlyout.title")),n.a.createElement(o.f.CloseBtn,{onClick:i})),n.a.createElement(o.f.Content,{className:"profile-container"},!a&&n.a.createElement("div",{className:"profile-container"},n.a.createElement(r.h,{className:"profile-error"},t("profileFlyout.noUser"))),a&&n.a.createElement("div",{className:"profile-container"},n.a.createElement("div",{className:"profile-header"},n.a.createElement(r.O,{className:"profile-header-grid"},n.a.createElement(r.Q,null,n.a.createElement(r.N,{className:"col-7"},n.a.createElement("h2",null,a.email)),n.a.createElement(r.N,{className:"col-3"},n.a.createElement(r.b,{primary:!0,onClick:s},t("profileFlyout.logout")))))))))})));var p=a(240);const h=Object(c.c)()(Object(l.b)(e=>({theme:Object(m.o)(e),version:Object(m.s)(e),logo:Object(m.k)(e),name:Object(m.m)(e),isDefaultLogo:Object(m.t)(e),releaseNotesUrl:Object(m.n)(e),setLogoPending:Object(m.x)(e),setLogoError:Object(m.w)(e)}),e=>({updateDiagnosticsOptIn:t=>e(m.a.actions.updateDiagnosticsOptIn(t)),updateLogo:(t,a)=>e(m.a.actions.updateLogo({logo:t,headers:a}))}))(p.a));var f=a(2),g=a(13);a(1003);const b=o.f.Section;class v extends s.Component{constructor(e){super(e),this.renderSvgLogo=e=>n.a.createElement(r.bb,{path:e,className:"logo-svg"}),this.renderUploadContainer=()=>{const e=this.props,t=e.t,a=e.applicationNameLink,s=this.state,o=s.isDefaultLogo,i=s.isValidFile,l=s.currentLogo,c=s.previewLogo,d=s.newLogoName,m=s.currentApplicationName,u=i?"file-name-valid":"file-name-invalid";return n.a.createElement("div",{className:"upload-logo-name-container"},n.a.createElement("div",{className:"upload-logo-container"},n.a.createElement("div",{className:"image-preview"},o?this.renderSvgLogo(l):n.a.createElement("img",{className:"logo-img",src:c,alt:t("applicationSettings.previewLogo")})),n.a.createElement("div",{className:"replace-logo"},t("applicationSettings.replaceLogo")),n.a.createElement("div",{className:"upload-btn-container"},n.a.createElement(r.j,{className:"upload-button",onChange:this.onUpload,accept:g.a.validExtensions,label:t("applicationSettings.upload"),t:t}),n.a.createElement("div",{className:"file-upload-feedback"},i?n.a.createElement(r.bb,{className:"checkmark",path:f.ob.checkmark,alt:t("applicationSettings.checkmark")}):d&&n.a.createElement(r.bb,{className:"invalid-file-x",path:f.ob.x,alt:t("applicationSettings.error")})),n.a.createElement("div",{className:u},d)),!i&&d&&n.a.createElement("div",{className:"upload-error-message"},n.a.createElement(r.bb,{className:"upload-error-asterisk",path:f.ob.error,alt:t("applicationSettings.error")}),t("applicationSettings.uploadError")),n.a.createElement(b.Content,{className:"platform-section-description show-line-breaks"},t("applicationSettings.logoDescription"))),n.a.createElement(r.q,{className:"name-input-container"},n.a.createElement(r.r,{className:"section-subtitle"},t("applicationSettings.applicationName")),n.a.createElement(r.p,{type:"text",className:"name-input long",placeholder:t(m),link:a})))},this.enableEdit=()=>this.setState({edit:!0}),this.onUpload=e=>{let t=e.target.files[0];this.setState({validating:!0,validFile:!1}),t.size<=g.a.maxLogoFileSizeInBytes&&Object(f.Q)(t)?this.setState({newLogoName:t.name,previewLogo:URL.createObjectURL(t),isDefaultLogo:!1,validating:!1,isValidFile:!0}):(this.setState({previewLogo:this.state.currentLogo,newLogoName:void 0!==t?t.name:void 0,isDefaultLogo:this.props.isDefaultLogo,validating:!1,isValidFile:!1}),t=void 0),this.props.onUpload(t)},this.state={currentLogo:this.props.logo,currentApplicationName:this.props.name,edit:!1,previewLogo:this.props.logo,newLogoName:void 0,isDefaultLogo:this.props.isDefaultLogo,validating:!1,isValidFile:!1}}render(){const e=this.props.t,t=this.state,a=t.isDefaultLogo,s=t.validating,o=t.currentLogo,i=t.currentApplicationName,l=t.edit;return n.a.createElement(b.Container,{className:"setting-section"},n.a.createElement(b.Header,null,e("applicationSettings.nameAndLogo")),n.a.createElement(b.Content,null,e("applicationSettings.nameLogoDescription")),n.a.createElement(b.Content,null,l?s?n.a.createElement("div",{className:"upload-logo-name-container"},n.a.createElement(r.w,{size:"small"})):this.renderUploadContainer():n.a.createElement("div",null,n.a.createElement("div",{className:"current-logo-container"},n.a.createElement("div",{className:"current-logo-name"},n.a.createElement("div",{className:"current-logo"},a?this.renderSvgLogo(o):n.a.createElement("img",{className:"current-logo",src:o,alt:e("applicationSettings.currentLogo")})),n.a.createElement("div",{className:"name-container"},e(i))),n.a.createElement("div",{className:"edit-button-div"},n.a.createElement(r.b,{svg:f.ob.edit,onClick:this.enableEdit,className:"edit-button"},e("applicationSettings.edit")))))))}}Object(l.b)(null)(v);a(250)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(857),a(878);String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),s=a.length>>>0;if(0===s)return!1;var n,r,o=0|t,i=Math.max(o>=0?o:s-Math.abs(o),0);for(;i<s;){if((n=a[i])===(r=e)||"number"===typeof n&&"number"===typeof r&&isNaN(n)&&isNaN(r))return!0;i++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!==typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return t<this.length?t|=0:t=this.length,this.substr(t-e.length,e.length)===e}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),a=t.length,s=new Array(a);a--;)s[a]=[t[a],e[t[a]]];return s}),Object.values||(Object.values=e=>Object.keys(e).map(t=>e[t])),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var s=arguments[1],n=0;n<a;){var r=t[n];if(e.call(s,r,n,t))return r;n++}},configurable:!0,writable:!0})},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(23),n=a(27),r=a(244),o=a(24),i=a(18);const l=Object(n.c)()(Object(s.b)(e=>({farms:Object(o.c)(e),farmsMap:Object(o.f)(e),farmsError:Object(o.d)(e),isFarmPending:Object(o.g)(e),farmLastUpdated:Object(o.e)(e),devices:Object(i.i)(e),deviceError:Object(i.j)(e),isDevicePending:Object(i.l)(e),deviceLastUpdated:Object(i.k)(e),deviceModelsMap:Object(i.f)(e),deviceModelError:Object(i.c)(e),isDeviceModelPending:Object(i.h)(e),deviceModelLastUpdated:Object(i.d)(e)}),e=>({fetchDevices:()=>e(i.a.actions.fetchDevices()),fetchFarms:()=>e(o.a.actions.fetchFarms()),fetchDeviceModel:()=>e(i.a.actions.fetchDeviceModel()),modifyDevices:t=>e(i.n.actions.modifyDevices(t))}))(r.a))},function(e,t,a){},function(e,t){},function(e,t,a){},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(0),n=a.n(s),r=a(138),o=a(16);a(451);class i extends s.Component{render(){const e=this.props,t=e.onClose,a=e.t,s=e.farmId;return n.a.createElement("div",{className:"farms-container editfarm-Details"},n.a.createElement(o.a,null,n.a.createElement(o.d,null,n.a.createElement(o.e,null,a("farms.flyouts.edit.header")),n.a.createElement(o.b,{onClick:t})),n.a.createElement(o.c,null,n.a.createElement(r.a,{onClose:t,farmId:s}))))}}},function(e,t,a){},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(0),n=a.n(s),r=a(138),o=a(16);a(451);class i extends s.Component{render(){const e=this.props,t=e.onClose,a=e.t;return n.a.createElement("div",{className:"farms-container"},n.a.createElement(o.a,null,n.a.createElement(o.d,null,n.a.createElement(o.e,null,a("farms.flyouts.create.header")),n.a.createElement(o.b,{onClick:t})),n.a.createElement(o.c,null,n.a.createElement(r.a,{onClose:t}))))}}},function(e,t,a){"use strict";var s=a(454);a.d(t,"AddDevicesContainer",(function(){return s.a}));a(245),a(246),a(456)},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(23),n=a(27),r=a(245),o=a(24),i=a(18);const l=Object(n.c)()(Object(s.b)(e=>({farms:Object(o.c)(e),farmsMap:Object(o.f)(e),farmsError:Object(o.d)(e),isFarmPending:Object(o.g)(e),farmLastUpdated:Object(o.e)(e),devices:Object(i.i)(e),deviceError:Object(i.j)(e),isDevicePending:Object(i.l)(e),deviceLastUpdated:Object(i.k)(e),deviceModelsMap:Object(i.f)(e),deviceModelError:Object(i.c)(e),isDeviceModelPending:Object(i.h)(e),deviceModelLastUpdated:Object(i.d)(e)}),e=>({fetchDevices:()=>e(i.a.actions.fetchDevices()),fetchFarms:()=>e(o.a.actions.fetchFarms()),fetchDeviceModel:()=>e(i.a.actions.fetchDeviceModel()),modifyDevices:t=>e(i.n.actions.modifyDevices(t))}))(r.a))},function(e,t,a){},function(e,t){},,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/ackAlert.dd3f029e.svg"},function(e,t,a){e.exports=a.p+"static/media/apply.c12e5a4b.svg"},function(e,t,a){e.exports=a.p+"static/media/cancelX.7fa679fa.svg"},function(e,t,a){e.exports=a.p+"static/media/carat.37d66c39.svg"},function(e,t,a){e.exports=a.p+"static/media/changeStatus.70bfc514.svg"},function(e,t,a){e.exports=a.p+"static/media/checkmark.87f2c5eb.svg"},function(e,t,a){e.exports=a.p+"static/media/chevron.b14cee41.svg"},function(e,t,a){e.exports=a.p+"static/media/chevronRight.308efd88.svg"},function(e,t,a){e.exports=a.p+"static/media/closeAlert.9526f3f7.svg"},function(e,t,a){e.exports=a.p+"static/media/colon.e1e07d6f.svg"},function(e,t,a){e.exports=a.p+"static/media/farmbeats.33a3ea60.svg"},function(e,t,a){e.exports=a.p+"static/media/copy.e7d786c1.svg"},function(e,t,a){e.exports=a.p+"static/media/critical.5998f9be.svg"},function(e,t,a){e.exports=a.p+"static/media/alerts.c1a43727.svg"},function(e,t,a){e.exports=a.p+"static/media/download.4c2460a6.svg"},function(e,t,a){e.exports=a.p+"static/media/addDevice.cfb25557.svg"},function(e,t,a){e.exports=a.p+"static/media/deviceIcon.23f2bfd8.svg"},function(e,t,a){e.exports=a.p+"static/media/disableToggle.e52634de.svg"},function(e,t,a){e.exports=a.p+"static/media/disabled.f09e9a89.svg"},function(e,t,a){e.exports=a.p+"static/media/edit.e24b9585.svg"},function(e,t,a){e.exports=a.p+"static/media/ellipsis.065dbc25.svg"},function(e,t,a){e.exports=a.p+"static/media/enableToggle.21b69aaa.svg"},function(e,t,a){e.exports=a.p+"static/media/errorAsterisk.d87f9c79.svg"},function(e,t,a){e.exports=a.p+"static/media/failed.a8b1ba60.svg"},function(e,t,a){e.exports=a.p+"static/media/glimmer.a5da9107.svg"},function(e,t,a){e.exports=a.p+"static/media/hamburger.37af7b5c.svg"},function(e,t,a){e.exports=a.p+"static/media/info.a9c9160f.svg"},function(e,t,a){e.exports=a.p+"static/media/linkTo.eda9e28b.svg"},function(e,t,a){e.exports=a.p+"static/media/loadingToggle.727b1cdd.svg"},function(e,t,a){e.exports=a.p+"static/media/manageFilters.d66159d9.svg"},function(e,t,a){e.exports=a.p+"static/media/packages.239be8c9.svg"},function(e,t,a){e.exports=a.p+"static/media/physicalDevice.7ac0e2ec.svg"},function(e,t,a){e.exports=a.p+"static/media/plus.56b72310.svg"},function(e,t,a){e.exports=a.p+"static/media/questionMark.afe20a3f.svg"},function(e,t,a){e.exports=a.p+"static/media/radioSelected.e357cef2.svg"},function(e,t,a){e.exports=a.p+"static/media/radioUnselected.7ce04025.svg"},function(e,t,a){e.exports=a.p+"static/media/reconfigure.9ee9d920.svg"},function(e,t,a){e.exports=a.p+"static/media/refresh.e4b8b71f.svg"},function(e,t,a){e.exports=a.p+"static/media/ruleDisabled.4d48d382.svg"},function(e,t,a){e.exports=a.p+"static/media/ruleEnabled.6ffb434b.svg"},function(e,t,a){e.exports=a.p+"static/media/SIMManagement.8a538a0d.svg"},function(e,t,a){e.exports=a.p+"static/media/searchIcon.0afbe391.svg"},function(e,t,a){e.exports=a.p+"static/media/SensorHubBlack.a5f04abb.svg"},function(e,t,a){e.exports=a.p+"static/media/settings.b2e0ae57.svg"},function(e,t,a){e.exports=a.p+"static/media/simulatedDevice.943be8d5.svg"},function(e,t,a){e.exports=a.p+"static/media/tabDashboard.f40e12ba.svg"},function(e,t,a){e.exports=a.p+"static/media/calendar.f7d4ea35.svg"},function(e,t,a){e.exports=a.p+"static/media/tabDeployments.dfe3bb5f.svg"},function(e,t,a){e.exports=a.p+"static/media/tabMaintenance.60268ace.svg"},function(e,t,a){e.exports=a.p+"static/media/tabLayouts.dfe3bb5f.svg"},function(e,t,a){e.exports=a.p+"static/media/trash.508696d1.svg"},function(e,t,a){e.exports=a.p+"static/media/upload.d861357c.svg"},function(e,t,a){e.exports=a.p+"static/media/warning.0271b0a4.svg"},function(e,t,a){e.exports=a.p+"static/media/x.59ea468d.svg"},function(e,t,a){e.exports=a.p+"static/media/abort.efea15a3.svg"},function(e,t,a){e.exports=a.p+"static/media/rejected.14edc9e1.svg"},function(e,t,a){e.exports=a.p+"static/media/waiting.b30fb041.svg"},function(e,t,a){e.exports=a.p+"static/media/filter.4967e135.svg"},function(e,t,a){e.exports=a.p+"static/media/filterApplied.5e8cb381.svg"},function(e,t,a){e.exports=a.p+"static/media/jobs.b5a539bb.svg"},function(e,t,a){e.exports=a.p+"static/media/rules.fca274bd.svg"},function(e,t,a){e.exports=a.p+"static/media/sensors.e6d83381.svg"},function(e,t,a){e.exports=a.p+"static/media/farms.57389647.svg"},function(e,t,a){e.exports=a.p+"static/media/devices.07277f4f.svg"},function(e,t,a){e.exports=a.p+"static/media/maps.a7e1fa6a.svg"},function(e,t,a){e.exports=a.p+"static/media/links.33e0027d.svg"},function(e,t,a){e.exports=a.p+"static/media/noMapImage.38a7f9c9.svg"},function(e,t,a){e.exports=a.p+"static/media/datePicker.34c77213.svg"},function(e,t,a){e.exports=a.p+"static/media/IconDarkCheckmarkBubble.7e5011bc.svg"},function(e,t,a){e.exports=a.p+"static/media/IconDarkInfoBubble.4759a5ab.svg"},function(e,t,a){e.exports=a.p+"static/media/IconDarkQuestionBubble.b924b496.svg"},function(e,t,a){e.exports=a.p+"static/media/IconLightCheckmarkBubble.d7771d32.svg"},function(e,t,a){e.exports=a.p+"static/media/IconLightInfoBubble.b74368ec.svg"},function(e,t,a){e.exports=a.p+"static/media/IconLightQuestionBubble.546baaf9.svg"},function(e,t,a){"use strict";(function(e){var s=a(9),n=a(0),r=a.n(n),o=a(2),i=a(556),l=a(306),c=a(69),d=a(17);class m extends n.Component{constructor(t){super(t),this.closeFlyout=()=>this.setState({openFlyout:""}),this.openSystemSettings=()=>this.setState({openFlyout:"settings"}),this.openUserProfile=()=>this.setState({openFlyout:"profile"}),this.state={openFlyout:""},Object(d.b)(e.DeploymentConfig.appInsightsInstrumentationKey,t.history)}render(){const e=this.state.openFlyout,t=[{to:"/farms",exact:!0,svg:o.ob.tabs.farms,labelId:"tabs.farms",component:c.d},{to:"/devices",exact:!0,svg:o.ob.tabs.devices,labelId:"tabs.devices",component:c.b},{to:"/sensors",exact:!0,svg:o.ob.tabs.sensors,labelId:"tabs.sensors",component:c.h},{to:"/maps",exact:!0,svg:o.ob.tabs.maps,labelId:"tabs.maps",component:c.f},{to:"/rules",exact:!0,svg:o.ob.tabs.rules,labelId:"tabs.rules",component:c.g},{to:"/alerts",exact:!0,svg:o.ob.tabs.alerts,labelId:"tabs.alerts",component:c.a},{to:"/jobs",exact:!1,svg:o.ob.tabs.jobs,labelId:"tabs.jobs",component:c.e}],a=[{to:"/farms",exact:!0,component:c.d},{to:"/sensors",exact:!0,component:c.h},{to:"/devices",exact:!0,component:c.b},{to:"/maps",exact:!0,component:c.f},{to:"/farms/:name",exact:!0,component:c.c},{to:"/jobs",exact:!0,component:c.e},{to:"/rules",exact:!0,component:c.g},{to:"/alerts",exact:!0,component:c.a}],n=[{path:"/devices",crumbs:[{to:"/devices",labelId:"tabs.devices"}]},{path:"/sensors",crumbs:[{to:"/sensors",labelId:"tabs.sensors"}]},{path:"/maps",crumbs:[{to:"/maps",labelId:"tabs.maps"}]},{path:"/farms",crumbs:[{to:"/farms",labelId:"tabs.farms"}]},{path:"/farms/:name",crumbs:[{to:"/farms",labelId:"tabs.farms"},{to:"/farms/:name",matchParam:"name",state:this.props.location.state}]},{path:"/rules",crumbs:[{to:"/rules",labelId:"tabs.rules"}]},{path:"/alerts",crumbs:[{to:"/alerts",labelId:"tabs.alerts"}]},{path:"/jobs",crumbs:[{to:"/jobs",labelId:"tabs.jobs"}]}],d=Object(s.a)({tabsConfig:t,pagesConfig:a,crumbsConfig:n,openSystemSettings:this.openSystemSettings,openUserProfile:this.openUserProfile},this.props);return r.a.createElement(i.a,Object.assign({denyAccess:!1},d),"settings"===e&&r.a.createElement(l.b,{onClose:this.closeFlyout}),"profile"===e&&r.a.createElement(l.a,{onClose:this.closeFlyout}))}}t.a=m}).call(this,a(70))},,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABhCAYAAADGBs+jAAAACXBIWXMAACxKAAAsSgF3enRNAAAIZUlEQVR42u2dXWwU1xXH/2yAWZrgXdrahgTsDQZDQcjGwjiWLGazROMHS/ZGiFRCUbIkUqP0gZqHtor6gROKaFq1IXmo1KcYHpASFMUm4sGjZDMTISUuCNtCoECgeI1JsF1sj70hHj7kPvhuu6x317O7c898eI9kWbKsuTP3N/9zz7kfZ5bMzs7CKSaGpKUAnljg3x6oUTkOB9kSO0IQQ1IAQBBA8u/KPC6lAhhkP4oalZUihMyd7gcQZh0ezLPDcwGjAOhSo3L/ooaQ1PFhAG0WPX8MQBeATiuBkENgrqaDdb7PRl5BZTA6XQshqfNftvk4GQPQQQmDOwQHdb5lMLhBYD6/HcAhONsGALTzjKy4QBBDUhBAJ+coh9reZcqYtDUE9vZ3APgV3GkxABGzVeExEUAti7/dCgBM2Z+LIanDdkoQQ1KYuR8fFo91M1VMWg5BDEkRAO9jcdoAgGChIDwFAji2iAEAQA2AfuaK6ZUghqROB8b+vExjiugnU0IRwDzzAVDyVYQnDwAdRQAZQXSxMJ2fO1rkgzC3wdqTA4DaIgDDg3Wn6e6ISUwp9q9ha8sloTOqhK5FloiZYYfYHFrhEMSQ1A5ALPZpXtZpZKBeugCAAOYm5GxlgteL0rLyR/42pWmY0ibtdquVrP/a846OxJCk2EEFVdWbsK4igNKycqytyD47PqVpGBu9jeGhGK5dvWIXMM9mm3nNCMHqcLTE50dj0y5UVW+GIAh5X2d4KIbLFwdw6eKApWGrGpVr84EwCAsWZRKdv2VbjanXndI0fHVWtRLG/kxLpWkhsPCKfFmysUnEM027uLYxPBSD8pmMsZHb1I+nAQikS+LmQWCj+SBlSFri86N1zwvzBltepus61E97rFDFm2pU7jASokYoAZSWr8aLr/yCDAAACIIAqaUVzS2t1BDajeYJ7ZRRz959LxU08BZiW7bVUIPwsYAnMwS2TFlJpYDmljbLAFgIon0hJUSoxgArFZAORF19A1VzNanrDp6U7JhkY25zS6ttAPzv+XdLKC1fTdVcJJMSwlRh6EJZr1VG6JasgyB4vdhOJ/vcx6mycjQ2kczS+JJnWD1JuQH31oO7Jdu5oVTbXt8AweulaCqcqoQghQrMnorglUPU7SBRa5AcAtGDmRYtEUVJ/mQItS55MJNCaB9V8FCbDIHreFBavholPmetjm6o3kzmkjyFbuEzYusqnHdMgVoJAYrQz2lGdM+BBATuSijx+eFEI1BDTQKC3yXSdqSJIWkpiRKcausqAhTNPOEpdrX1VoRQhGBv0/UZMgi1/B9GdySEUaIdGR7M7azgahZsL3GcO+K+T9CGe0QN2fBQzD1jAtXDmKre0RF3Dcw3HQiB8sUhgTClTZK+WWYY4e68Bx4QHYO6bO2u6BxfGo0smFCjctzjwjerYOs730vVlJZwRyRK0GdmHKEGXdcpX5h+sjwhYcpnsu0Tt6/OqtBnZqiaGwQAjxqVBxOyoFBD37le2wIYGx3BBdr760+OjhSqVr88q9o2Uuo5c5q6SSUZAmlh1tMffWg7tySfOU09vaIlqsIkIHTRhoCTOHXyhG0AWHSwUHkkWWNENMo7GBu5DZle/mkB9FhzH0q6jLmL+i4uXRzAqZMnLHNNFgJ4pL8thQDMzdGcOnmCfLCWz5y2EsAAi0oBpJzeFEPSJCwqJCJ4vWhsErF9x07uYWgP/SCcagfVqHwsnRKAHOv0mJ1DXDjXi+vfXOGaDfed67XDItMj/ZyqhACAG9R3tLaiEnX1DajauIlsaqLvXC8unO+lzI4TdlyNypGMEBgIBURFRUp8fgSfk8g63yYw5hUbSQchCOBz3ndCUULBeN6ioedMN8VCjqpG5WDqHzPVtuCmhrnzy6223CTcd/5fUD7tIVVBNghc1LB1Ww3E55ptfW5tbHRkLncx3z2lVUG66Agsg1Yw940ZU92PZMPzy/OUWlaOV18/wONMc8ZyFdlW1iJmtd7c0mob/28oZxEE7N33kpkgjmcr4ZwRAsvo3jQDgJPOq3EAoWGBoi1Z15hZbZ68pxfr6hscCSAVRIGHXBb8xoKRhf683FJV9SaIuyU43QRBQOueF/I9YN6tRuUF5+QWhMB82cFck7Dmlja4xfIstxAz+gIb2vLCJpu6cxkH7B4F5Wrbd+zM9dhX2GjR8lz2HUWMjA919Q2uPaPW3NJm1C3tz+WDFoYhMKphZFmBE7xePNPk3orOJT6fkfIQ7+b6lcKcduCxsDWYCUTdjgbXuaF5bil7FZjjalTOuYZgztsgmczmgZhTwS643bJUgZk3Rc0NQiYQTqriwkENeQPIG0I6EHau6MVDDRv+vwZSEICCICSBqH26auN1t48F6dSAubXiSKHXKnhrvBqVB31+/65bN4cWzenAe7o++92t4T8nL9YXYqZ+hfboO//4+Gdbt4XdDGBi/M4P165ekY788bdnzbqm6d9j/sOf/vrz9Rs2vr/qxz9Z4TYAV7++rP7mwGtBs6/L7cvkf3nvn0r15i2iW97+f1/7Zv/h3//6Ax7X5wYBAH731ttNlYGnPylbvcaRBY/u6frs9WtXu984+MvnebbDFULCOo7+vf3Jp9YecgqMe7o+O3jj+hcT4+MvH+14g/sWDBIIToFB3fmWQEgevH9aWnZkzZNPrV8uCEvs4PO/Hb55Mh6PH6bsfEshJNtbbx876vOv2ksNZGL8zg+3v/u2Jz49/Tczw01HQkh1Vz96/PGw37+qxmyXFZ+efnDnP2Ox+PSUcvfu3U6rO962ENK5rWXLltV6V6xofOyxpb6VK1cGAGDZ8uVCah5yT9dnJyfGNQC4f//+zPffx688fPhwQp+ZUXVd/9gKN2PU/gtq3ZHtg/bBUwAAAABJRU5ErkJggg=="},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(23),n=a(27),r=a(48),o=a(549);const i=Object(n.c)()(Object(s.b)(e=>({roleAssignments:Object(r.i)(e),roleDefinitions:Object(r.m)(e),roleAssignmentAddPending:Object(r.c)(e)}),e=>({addRoleAssignment:t=>e(r.a.actions.addRoleAssignment(t)),clearError:()=>e(r.o.actions.clearError())}))(o.a))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return f}));var s=a(0),n=a.n(s),r=a(26),o=a(550),i=a.n(o),l=a(19),c=a(162),d=a(4),m=a(2),u=a(16),p=a(304),h=a(17);class f extends n.a.Component{constructor(e){super(e),this.toSelectOption=({id:e,name:t})=>({label:t,value:e}),this.formValid=()=>this.state.roleDefinitionOption&&!this.props.roleAssignmentAddPending&&""!==this.state.email,this.state={email:"",roleDefinitionOption:null,suggestions:[]},this.suggestionsFetchSubscription=null,this.roleChangeHandler=this.roleChangeHandler.bind(this),this.inputChangeHandler=this.inputChangeHandler.bind(this),this.addUser=this.addUser.bind(this),this.onSuggestionsFetchRequested=this.onSuggestionsFetchRequested.bind(this),this.onSuggestionsClearRequested=this.onSuggestionsClearRequested.bind(this),this.getSuggestionValue=this.getSuggestionValue.bind(this)}inputChangeHandler(e,{newValue:t}){this.setState({email:t,error:null})}getSuggestionValue(e){return Object(p.a)(e,this.state.email)}roleChangeHandler(e){this.setState({roleDefinitionOption:e.target.value})}onSuggestionsFetchRequested({value:e}){this.suggestionsFetchSubscription&&this.suggestionsFetchSubscription.unsubscribe(),this.suggestionsFetchSubscription=r.Observable.of(e).map(e=>c.a.getUserSuggestions(e)).mergeAll().subscribe(e=>this.setState({suggestions:e}))}onSuggestionsClearRequested(){this.setState({suggestions:[]})}addUser(){const t=this.state,a=t.email,s=t.roleDefinitionOption,n=this.props,o=n.successCallback,i=n.errorCallback,l=n.t;(0,n.clearError)(),i(null),r.Observable.of(a).map(e=>c.a.getUserByEmailOrUpn(e)).mergeAll().subscribe(t=>{if(t.length>1)i({message:l("users.manageUsersFlyout.addRoleSection.roleAddError.multipleUsersFound")});else if(0===t.length)i({message:l("users.manageUsersFlyout.addRoleSection.roleAddError.noUserFound")});else{const a=t[0].id;r.Observable.of(a).map(t=>this.props.addRoleAssignment({objectId:t,roleDefinitionId:s.value,objectIdType:"UserId",tenantId:e.DeploymentConfig.aad.tenant})).subscribe(()=>{},e=>{i(e)},()=>{o(l("users.manageUsersFlyout.addRoleSection.roleAddSuccess"))})}},e=>{i(e)})}render(){const e=this.state,t=e.roleDefinitionOption,a=e.email,s=e.suggestions,r=this.props,o=r.t,c=r.roleDefinitions,f=this.props.roleAssignmentAddPending,g=c.map(this.toSelectOption),b={placeholder:o("users.manageUsersFlyout.addRoleSection.enterEmail"),value:a,onChange:this.inputChangeHandler};return n.a.createElement(d.R,{permissions:l.h.addUser},n.a.createElement(u.f.Section.Container,{collapsable:!1},n.a.createElement(u.f.Section.Header,null,n.a.createElement("div",null,o("users.manageUsersFlyout.addRoleSection.header"),n.a.createElement(d.fb,{content:o("users.manageUsersFlyout.addRoleSection.tooltipText")},n.a.createElement(d.cb,{paths:m.pb.questionBubble})))),n.a.createElement(u.f.Section.Content,null,n.a.createElement("div",{className:"form-control-inputs"},n.a.createElement("div",{className:"add-role-inputs"},n.a.createElement(i.a,{suggestions:s,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:p.b,inputProps:b,renderInputComponent:e=>n.a.createElement("input",Object.assign({},e,{spellCheck:!1}))}),n.a.createElement(d.q,{className:"form-control-group form-role"},n.a.createElement(d.p,{type:"select",className:"role-editor-input form-select-role",onChange:this.roleChangeHandler,disabled:f,options:g,placeholder:o("users.manageUsersFlyout.addRoleSection.selectRole"),value:t}))),n.a.createElement(d.c,null,n.a.createElement(d.b,{primary:!0,onClick:()=>{this.addUser(),h.a.trackEvent({name:"UiEvent:Click: Add User Button"})},disabled:!this.formValid(),type:"submit",id:this.formValid()?"applyRole":"disableRole"},o("users.manageUsersFlyout.addRoleSection.addRole"))),f&&n.a.createElement("div",{className:"role-loader"},n.a.createElement(d.w,null))))))}}}).call(this,a(70))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(0),n=a.n(s),r=a(19),o=a(4),i=a(2),l=a(17);class c extends s.Component{constructor(e){super(e),this.state={deletePending:!1}}render(){const e=this.props.context.t,t=this.props,a=t.deleteRoleAssignmentsById,s=t.successCallback,c=t.clearRolesError,d=this.state.deletePending;return n.a.createElement("div",null,!d&&n.a.createElement(o.R,{permissions:r.h.deleteUser},n.a.createElement(o.b,{svg:i.ob.trash,className:"delete-user",onClick:t=>{l.a.trackEvent({name:"UiEvent:Click: Delete User Button"}),c(),this.setState({deletePending:!0}),a(this.props.node.data.roleAssignment.id,{success:()=>s(e("users.manageUsersFlyout.rolesGridSection.roleDeleteSuccess")),error:()=>{this.setState({deletePending:!1})}})}})),!!d&&n.a.createElement("div",{className:"delete-pending-indicator"},n.a.createElement("center",null,n.a.createElement(o.w,{size:"small"}))))}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(0),n=a.n(s),r=a(15),o=a.n(r),i=(a(442),a(256)),l=a.n(i);class c extends s.Component{render(){return n.a.createElement(l.a,{showDropdowns:!0,maxDate:o()(),opens:"left",onApply:this.props.onApplyEvent},n.a.createElement("button",{className:this.props.className},this.props.t("dashboard.custom")))}}},function(e,t,a){"use strict";var s=a(446);a.d(t,"AssociateDevicesContainer",(function(){return s.a}));a(244),a(247),a(448)},,,function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(1058),o=a(1056),i=a(545),l=a(27),c=a(13),d=a(23),m=a(1054),u=a(4),p=a(2);const h=({children:e})=>n.a.createElement("div",{className:"crumb"},e),f=()=>n.a.createElement(u.bb,{path:p.ob.chevronRight,className:"chevron-icon"}),g=({t:e,crumb:t,match:a,isLast:s})=>{const r=n.a.createElement(f,{key:"".concat(t.to,"-chevron")});return Object(p.J)(t.labelId)&&!Object(p.J)(t.matchParam)?s?n.a.createElement(h,{to:t.to,key:t.to},t.state?t.state.farmName:e(t.labelId)?e(t.labelId):null):[n.a.createElement(m.a,{to:t.to,className:"crumb",key:t.to},e(t.labelId)),r]:!Object(p.J)(t.labelId)&&Object(p.J)(t.matchParam)?n.a.createElement(h,{to:t.to,key:t.to},t.state?t.state.farmName:a.params[t.matchParam]):void 0},b=({t:e,crumbsConfig:t})=>n.a.createElement(r.a,null,t.map(({path:t,crumbs:a})=>n.a.createElement(i.a,{key:t,exact:!0,path:t,render:t=>a.map((s,r)=>n.a.createElement(g,Object.assign({},t,{key:s.to,t:e,crumb:s,isLast:r===a.length-1})))})));var v=a(546),E=a.n(v),y=(a(984),a(17));const S=(e,...t)=>!("string"!==typeof e.className||!e.className.split(" ").some(e=>t.some(t=>t===e)))||e.parentNode&&S(e.parentNode,...t),O=[{translationId:"header.documentation",url:"https://aka.ms/FarmBeatsDocumentation",eventName:"Help_Documentation"},{translationId:"header.sendSuggestion",url:"https://aka.ms/FarmBeatsForum",eventName:"Help_Suggestion"},{translationId:"header.reportIssue",url:"https://aka.ms/FarmBeatsMSDN",eventName:"Help_ReportIssue"}];class C extends s.Component{constructor(e){super(e),this.handleWindowMousedown=({target:e})=>{!S(e,"menu-item","menu-trigger")&&this.state.openDropdown&&this.setState({openDropdown:""})},this.toggleDropdown=e=>()=>{this.setState({openDropdown:e})},this.state={openDropdown:""}}componentDidMount(){window.addEventListener("mousedown",this.handleWindowMousedown)}componentWillUnmount(){window.removeEventListener("mousedown",this.handleWindowMousedown)}render(){return n.a.createElement("header",{className:"app-header",role:"banner"},n.a.createElement("div",{className:"breadcrumbs"},n.a.createElement(b,{t:this.props.t,crumbsConfig:this.props.crumbsConfig})),n.a.createElement("div",{className:"items-container"},n.a.createElement("div",{className:"menu-container"},n.a.createElement("button",{className:"menu-trigger",onClick:this.toggleDropdown("docsDropdown")},n.a.createElement(u.bb,{path:p.ob.questionMark,className:"item-icon"})),"docsDropdown"===this.state.openDropdown&&n.a.createElement("div",{className:"menu"},O.map(({url:e,translationId:t,eventName:a})=>n.a.createElement("a",{key:t,className:"menu-item",target:"_blank",href:e,onClick:()=>{y.a.trackEvent({name:"UiEvent:Click: "+a+" Link"},{type:"External Link Click",toUrl:e})},rel:"noopener noreferrer"},this.props.t(t))))),Object(p.L)(this.props.openSystemSettings)&&n.a.createElement("button",{onClick:this.props.openSystemSettings},n.a.createElement(u.bb,{path:p.ob.settings,className:"item-icon"})),Object(p.L)(this.props.openUserProfile)&&n.a.createElement("button",{className:"item-icon profile",onClick:this.props.openUserProfile},n.a.createElement("img",{src:E.a,alt:this.props.t("header.profile")}))))}}const j=Object(d.b)(null)(C);var N=a(1059),D=a(29);a(985);const M=e=>n.a.createElement(u.bb,Object.assign({},e,{className:"nav-item-icon"})),A=e=>n.a.createElement(m.a,{to:e.to,className:"nav-item",activeClassName:"active"},n.a.createElement(M,{path:e.svg}),n.a.createElement("div",{className:"nav-item-text"},e.t(e.labelId)));class I extends s.Component{constructor(e){super(e),this.collapseNav=()=>{window.innerWidth<800&&window.innerWidth<this.state.lastWidth&&!this.state.collapsed?this.setState({collapsed:!0,lastWidth:window.innerWidth}):this.setState({lastWidth:window.innerWidth})},this.toggleExpanded=e=>{this.setState({collapsed:!this.state.collapsed},()=>window.dispatchEvent(new Event("resize")))},this.state={collapsed:!1,lastWidth:window.innerWidth}}componentDidMount(){window.addEventListener("resize",this.collapseNav)}componentWillUnmount(){window.removeEventListener("resize",this.collapseNav)}render(){const e=!this.state.collapsed,t=this.props,a=t.name,s=t.logo,r=t.isDefaultLogo,o=t.t,i=t.getLogoPending;return n.a.createElement("nav",{className:"app-nav ".concat(e&&"expanded")},n.a.createElement("div",{className:"nav-item company"},i?n.a.createElement(u.w,{size:"medium"}):r?n.a.createElement(M,{path:s}):n.a.createElement("div",{className:"nav-item-icon"},n.a.createElement("img",{src:s,alt:"Logo"})),!i&&n.a.createElement("div",{className:"nav-item-text"},o(a))),n.a.createElement("button",{className:"nav-item hamburger",onClick:this.toggleExpanded,"aria-label":"Hamburger"},n.a.createElement(M,{path:p.ob.hamburger})),this.props.tabs.map((e,t)=>n.a.createElement(A,Object.assign({},e,{t:o,key:t}))))}}var k=I;var F=Object(N.a)(Object(d.b)(e=>({logo:Object(D.k)(e),name:Object(D.m)(e),isDefaultLogo:Object(D.t)(e),getLogoPending:Object(D.l)(e)}))(k));a(986);var w=e=>n.a.createElement("main",{className:"app-main"},n.a.createElement("div",{className:"main-container"},e.children));a(987);const R=Object(l.c)()(({t:e})=>n.a.createElement(u.z,{className:"page-not-found-container"},e("pageNotFound.title"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"quote"},e("pageNotFound.message"))));a(988);class T extends s.Component{constructor(e){super(e),this.state={openFlyout:""}}componentDidMount(){const e=this.props,t=e.history,a=e.registerRouteEvent;t.listen(({pathname:e})=>a(e))}render(){const e=this.props,t=e.tabsConfig,a=e.pagesConfig,s=e.crumbsConfig,d=e.openSystemSettings,m=e.openUserProfile,p=e.t,h=e.theme,f=e.children,g=e.denyAccess,b=e.userEmail;return n.a.createElement("div",{className:"shell-container theme-".concat(h)},g&&n.a.createElement("div",{className:"shell"},n.a.createElement(w,null,n.a.createElement(j,{crumbsConfig:s,t:p}),n.a.createElement("div",{className:"access-denied"},n.a.createElement(l.a,{i18nKey:"accessDenied.message"},"You don't have permissions.",n.a.createElement(u.v,{href:c.a.contextHelpUrls.accessDenied,target:"_blank"},p("accessDenied.learnMore")))))),!g&&a&&n.a.createElement("div",{className:"shell"},n.a.createElement(F,{tabs:t,t:p}),n.a.createElement(w,null,n.a.createElement(j,{crumbsConfig:s,openSystemSettings:d,openUserProfile:m,userEmail:b,t:p}),n.a.createElement(r.a,null,n.a.createElement(o.a,{exact:!0,from:"/",to:a[0].to}),a.map(({to:e,exact:t,component:a})=>n.a.createElement(i.a,{key:e,exact:t,path:e,component:a})),n.a.createElement(i.a,{component:R})),f)))}}t.a=T},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(23),n=a(0),r=a.n(n),o=a(20),i=a.n(o);a(1004),a(1005);i.a.extend("$auto",(e,t)=>i()(t||{},e));class l extends n.Component{constructor(e){super(e),this.handleWindowBlur=()=>this.setState({renderChart:!1}),this.handleWindowFocus=()=>this.setState({renderChart:!0}),this.chartId="telemetry-chart-container-".concat(l.telemetryChartCount++),this.state={renderChart:!0},window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("focus",this.handleWindowFocus),this.tsiClient=new window.TsiClient}componentDidMount(){this.lineChart=new this.tsiClient.ux.LineChart(document.getElementById(this.chartId))}componentWillUnmount(){window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("focus",this.handleWindowFocus)}componentDidUpdate(){const e=this.props,t=e.telemetry,a=e.theme,s=e.telemetryKey;if(Object.keys(t).length&&s&&t[s]){const e=Object.keys(t[s]).map(e=>({[e]:t[s][e]})),n=s===this.props.telemetryKey;setTimeout(()=>{this&&this.state&&this.lineChart&&this.state.renderChart&&this.lineChart.render(e,{grid:!1,legend:"compact",noAnimate:n,tooltip:!0,canDownload:!1,yAxisState:"shared",theme:a,offset:"Local"},this.props.colors)},10)}}render(){return r.a.createElement("div",{className:"telemetry-chart-container"},r.a.createElement("div",{className:"chart-container",id:this.chartId}))}}l.telemetryChartCount=0;const c=Object(s.b)(null)(l)},function(e,t,a){e.exports=a(1044)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(107),o=a.n(r),i=a(23),l=a(1057),c=a(105),d=a(261),m=a(459),u=a(29),p=a(18),h=a(24),f=a(58),g=a(46),b=a(21),v=a(39),E=a(95),y=a(48);const S=[...u.a.getEpics(),...p.a.getEpics(),...h.a.getEpics(),...f.a.getEpics(),...g.a.getEpics(),...b.a.getEpics(),...v.a.getEpics(),...E.a.getEpics(),...y.a.getEpics()];var O=Object(d.a)(...S),C=a(9);var j=Object(c.combineReducers)(Object(C.a)({},u.u,{},p.m,{},v.m,{},h.h,{},f.h,{},g.j,{},b.j,{},E.f,{},y.n));var N=a(1059),D=a(27),M=a(539);const A=Object(N.a)(Object(D.c)()(Object(i.b)(e=>({userEmail:Object(u.j)(e),theme:Object(u.o)(e)}),e=>({fetchUser:()=>e(u.a.actions.fetchUser()),registerRouteEvent:t=>e(u.a.actions.detectRouteChange(t))}))(M.a))),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;let e;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");I?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):F(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):F(e)}),navigator.serviceWorker.addEventListener("controllerchange",(function(){e||(e=!0,window.location.reload())}))}}function F(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),window.confirm("New version available! OK to refresh?")?t.postMessage({type:"SKIP_WAITING"}):console.log("You are vewing old content")):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var w=a(22);a(54),a(406),a(1043);w.b.onLoad(()=>{const e=function(){const e=Object(d.b)(O);return Object(c.createStore)(j,Object(m.composeWithDevTools)(Object(c.applyMiddleware)(e)))}();e.dispatch(u.a.actions.initializeApp()),o.a.render(n.a.createElement(i.a,{store:e},n.a.createElement(l.a,null,n.a.createElement(A,null))),document.getElementById("root")),k()})}],[[558,1,2]]]);
//# sourceMappingURL=main.2a3ee6ff.chunk.js.map
// SIG // Begin signature block
// SIG // MIIjkAYJKoZIhvcNAQcCoIIjgTCCI30CAQExDzANBglg
// SIG // hkgBZQMEAgEFADB3BgorBgEEAYI3AgEEoGkwZzAyBgor
// SIG // BgEEAYI3AgEeMCQCAQEEEBDgyQbOONQRoqMAEEvTUJAC
// SIG // AQACAQACAQACAQACAQAwMTANBglghkgBZQMEAgEFAAQg
// SIG // jgTNptJPWmMPYt45J419SBuo3X28KycfWMDIHLy+sbqg
// SIG // gg2BMIIF/zCCA+egAwIBAgITMwAAAYdyF3IVWUDHCQAA
// SIG // AAABhzANBgkqhkiG9w0BAQsFADB+MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSgwJgYDVQQDEx9NaWNyb3NvZnQgQ29kZSBT
// SIG // aWduaW5nIFBDQSAyMDExMB4XDTIwMDMwNDE4Mzk0N1oX
// SIG // DTIxMDMwMzE4Mzk0N1owdDELMAkGA1UEBhMCVVMxEzAR
// SIG // BgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1JlZG1v
// SIG // bmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlv
// SIG // bjEeMBwGA1UEAxMVTWljcm9zb2Z0IENvcnBvcmF0aW9u
// SIG // MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
// SIG // zrfJC3Oz90+zCiIaLmB3sDBZp6vAMruxToWQkGm1cAad
// SIG // lUuFsgdkHuE0AU/Ggc5wDQxD4xyjXT0/F8+XDWpYulx3
// SIG // n0vIv1l7RdL0rD/DRL+pgR7gNqdX8NsAfxdHR7Cdxn2e
// SIG // XNLDyY5JbImKj8OfcSeeJDPdSDoIjtjlM4zQJYz4m4wl
// SIG // nx+1M0NUzx3OHcHopbPBhCK2wUW+yFsIjmy9do1k+GIe
// SIG // 9TUILyfRZ+vlIQ/cdrpN3S4/OL8LdTbhUIrSicSFdH1b
// SIG // ETUd2m0FTi6qQ7oG69EszS+qPMczhy+Tl4hhsIOnpIlw
// SIG // Nf9l12O8lRXN/bZXnQ7WY0ozW3sdc88ElwIDAQABo4IB
// SIG // fjCCAXowHwYDVR0lBBgwFgYKKwYBBAGCN0wIAQYIKwYB
// SIG // BQUHAwMwHQYDVR0OBBYEFIaL+GcjvemsZCXTI6c7ts1V
// SIG // ziXLMFAGA1UdEQRJMEekRTBDMSkwJwYDVQQLEyBNaWNy
// SIG // b3NvZnQgT3BlcmF0aW9ucyBQdWVydG8gUmljbzEWMBQG
// SIG // A1UEBRMNMjMwMDEyKzQ1ODM4NTAfBgNVHSMEGDAWgBRI
// SIG // bmTlUAXTgqoXNzcitW2oynUClTBUBgNVHR8ETTBLMEmg
// SIG // R6BFhkNodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtp
// SIG // b3BzL2NybC9NaWNDb2RTaWdQQ0EyMDExXzIwMTEtMDct
// SIG // MDguY3JsMGEGCCsGAQUFBwEBBFUwUzBRBggrBgEFBQcw
// SIG // AoZFaHR0cDovL3d3dy5taWNyb3NvZnQuY29tL3BraW9w
// SIG // cy9jZXJ0cy9NaWNDb2RTaWdQQ0EyMDExXzIwMTEtMDct
// SIG // MDguY3J0MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQEL
// SIG // BQADggIBAIsZskuhOr6a1g/ShTSAfRuc8jLiI2QDrlCd
// SIG // RCv1ZYOhW92R1441MAEyiHF2xbhQulq+Cja1OA2P7AVa
// SIG // pmm+QAv43t26VKY7caRMqlKrT3N9MBIP6zvb5ipqiqCz
// SIG // 09+7L3NjVQZhjZfvOajuH1f8OwseydAW6pNfSnETXY7e
// SIG // niqE50zxwR5VR0CB2aTMWnGxTgJCa6gFZGGXc+4pDV08
// SIG // VfhkW9+rQuAcjDcRNgxe7xXb2omT9AlWeQcidoAIVzHS
// SIG // vfrrMc1ZPdd6inXtTgLlnb/q53apACJvH1JUZ6+LGkgo
// SIG // O3CG1MAgn9desFCexLiQ4NLx3soZwnh5wW8h90WZBxIt
// SIG // qH5n4JxSEiWQ3TAHlWRlTodtCaedFwc6qJKT83mes3Nf
// SIG // 4MiCzcolYBPkT5I51ELIXdX9TzIJ97Z7Ngs+2yYlVGqh
// SIG // Dt5/akRYMuSbi2nulMHhnwHjqN3YC2cYpCs2LN4QzGhL
// SIG // SavCD+9XF+0F3upZzJl1Px3X89qfPe2XfpFPr2byiN3M
// SIG // C37lUICtkWds/inNyt3UT89q18nCuVwrkWZrxmm/1m62
// SIG // Ygu8CUGqYAaHZbTCORjHRawYPSHhe/6z+BKlUF3irXr0
// SIG // 5WV46bjYYY7kftgzLf3Vrn416YlvdW6N2h+hGozgC15q
// SIG // MYJbQqdSu4a0uoJrL4/eHC0X+dEEOFPEMIIHejCCBWKg
// SIG // AwIBAgIKYQ6Q0gAAAAAAAzANBgkqhkiG9w0BAQsFADCB
// SIG // iDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEyMDAGA1UEAxMpTWlj
// SIG // cm9zb2Z0IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5
// SIG // IDIwMTEwHhcNMTEwNzA4MjA1OTA5WhcNMjYwNzA4MjEw
// SIG // OTA5WjB+MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2Fz
// SIG // aGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UE
// SIG // ChMVTWljcm9zb2Z0IENvcnBvcmF0aW9uMSgwJgYDVQQD
// SIG // Ex9NaWNyb3NvZnQgQ29kZSBTaWduaW5nIFBDQSAyMDEx
// SIG // MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA
// SIG // q/D6chAcLq3YbqqCEE00uvK2WCGfQhsqa+laUKq4Bjga
// SIG // BEm6f8MMHt03a8YS2AvwOMKZBrDIOdUBFDFC04kNeWSH
// SIG // fpRgJGyvnkmc6Whe0t+bU7IKLMOv2akrrnoJr9eWWcpg
// SIG // GgXpZnboMlImEi/nqwhQz7NEt13YxC4Ddato88tt8zpc
// SIG // oRb0RrrgOGSsbmQ1eKagYw8t00CT+OPeBw3VXHmlSSnn
// SIG // Db6gE3e+lD3v++MrWhAfTVYoonpy4BI6t0le2O3tQ5GD
// SIG // 2Xuye4Yb2T6xjF3oiU+EGvKhL1nkkDstrjNYxbc+/jLT
// SIG // swM9sbKvkjh+0p2ALPVOVpEhNSXDOW5kf1O6nA+tGSOE
// SIG // y/S6A4aN91/w0FK/jJSHvMAhdCVfGCi2zCcoOCWYOUo2
// SIG // z3yxkq4cI6epZuxhH2rhKEmdX4jiJV3TIUs+UsS1Vz8k
// SIG // A/DRelsv1SPjcF0PUUZ3s/gA4bysAoJf28AVs70b1FVL
// SIG // 5zmhD+kjSbwYuER8ReTBw3J64HLnJN+/RpnF78IcV9uD
// SIG // jexNSTCnq47f7Fufr/zdsGbiwZeBe+3W7UvnSSmnEyim
// SIG // p31ngOaKYnhfsi+E11ecXL93KCjx7W3DKI8sj0A3T8Hh
// SIG // hUSJxAlMxdSlQy90lfdu+HggWCwTXWCVmj5PM4TasIgX
// SIG // 3p5O9JawvEagbJjS4NaIjAsCAwEAAaOCAe0wggHpMBAG
// SIG // CSsGAQQBgjcVAQQDAgEAMB0GA1UdDgQWBBRIbmTlUAXT
// SIG // gqoXNzcitW2oynUClTAZBgkrBgEEAYI3FAIEDB4KAFMA
// SIG // dQBiAEMAQTALBgNVHQ8EBAMCAYYwDwYDVR0TAQH/BAUw
// SIG // AwEB/zAfBgNVHSMEGDAWgBRyLToCMZBDuRQFTuHqp8cx
// SIG // 0SOJNDBaBgNVHR8EUzBRME+gTaBLhklodHRwOi8vY3Js
// SIG // Lm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9N
// SIG // aWNSb29DZXJBdXQyMDExXzIwMTFfMDNfMjIuY3JsMF4G
// SIG // CCsGAQUFBwEBBFIwUDBOBggrBgEFBQcwAoZCaHR0cDov
// SIG // L3d3dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNS
// SIG // b29DZXJBdXQyMDExXzIwMTFfMDNfMjIuY3J0MIGfBgNV
// SIG // HSAEgZcwgZQwgZEGCSsGAQQBgjcuAzCBgzA/BggrBgEF
// SIG // BQcCARYzaHR0cDovL3d3dy5taWNyb3NvZnQuY29tL3Br
// SIG // aW9wcy9kb2NzL3ByaW1hcnljcHMuaHRtMEAGCCsGAQUF
// SIG // BwICMDQeMiAdAEwAZQBnAGEAbABfAHAAbwBsAGkAYwB5
// SIG // AF8AcwB0AGEAdABlAG0AZQBuAHQALiAdMA0GCSqGSIb3
// SIG // DQEBCwUAA4ICAQBn8oalmOBUeRou09h0ZyKbC5YR4WOS
// SIG // mUKWfdJ5DJDBZV8uLD74w3LRbYP+vj/oCso7v0epo/Np
// SIG // 22O/IjWll11lhJB9i0ZQVdgMknzSGksc8zxCi1LQsP1r
// SIG // 4z4HLimb5j0bpdS1HXeUOeLpZMlEPXh6I/MTfaaQdION
// SIG // 9MsmAkYqwooQu6SpBQyb7Wj6aC6VoCo/KmtYSWMfCWlu
// SIG // WpiW5IP0wI/zRive/DvQvTXvbiWu5a8n7dDd8w6vmSiX
// SIG // mE0OPQvyCInWH8MyGOLwxS3OW560STkKxgrCxq2u5bLZ
// SIG // 2xWIUUVYODJxJxp/sfQn+N4sOiBpmLJZiWhub6e3dMNA
// SIG // BQamASooPoI/E01mC8CzTfXhj38cbxV9Rad25UAqZaPD
// SIG // XVJihsMdYzaXht/a8/jyFqGaJ+HNpZfQ7l1jQeNbB5yH
// SIG // PgZ3BtEGsXUfFL5hYbXw3MYbBL7fQccOKO7eZS/sl/ah
// SIG // XJbYANahRr1Z85elCUtIEJmAH9AAKcWxm6U/RXceNcbS
// SIG // oqKfenoi+kiVH6v7RyOA9Z74v2u3S5fi63V4GuzqN5l5
// SIG // GEv/1rMjaHXmr/r8i+sLgOppO6/8MO0ETI7f33VtY5E9
// SIG // 0Z1WTk+/gFcioXgRMiF670EKsT/7qMykXcGhiJtXcVZO
// SIG // SEXAQsmbdlsKgEhr/Xmfwb1tbWrJUnMTDXpQzTGCFWcw
// SIG // ghVjAgEBMIGVMH4xCzAJBgNVBAYTAlVTMRMwEQYDVQQI
// SIG // EwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25kMR4w
// SIG // HAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xKDAm
// SIG // BgNVBAMTH01pY3Jvc29mdCBDb2RlIFNpZ25pbmcgUENB
// SIG // IDIwMTECEzMAAAGHchdyFVlAxwkAAAAAAYcwDQYJYIZI
// SIG // AWUDBAIBBQCgga4wGQYJKoZIhvcNAQkDMQwGCisGAQQB
// SIG // gjcCAQQwHAYKKwYBBAGCNwIBCzEOMAwGCisGAQQBgjcC
// SIG // ARUwLwYJKoZIhvcNAQkEMSIEIMWNEjAlNxTFSsUWyEXT
// SIG // 85HW1YDP3L1gVgm/PrJtq94mMEIGCisGAQQBgjcCAQwx
// SIG // NDAyoBSAEgBNAGkAYwByAG8AcwBvAGYAdKEagBhodHRw
// SIG // Oi8vd3d3Lm1pY3Jvc29mdC5jb20wDQYJKoZIhvcNAQEB
// SIG // BQAEggEAIGhhaXZ4E4cLPPLrrF91sLLX/eie9IIMHOWm
// SIG // 7l4CWxsib20maG+c8NJULTwh1NxnlFVu18oNOkdmqltf
// SIG // 7mCmdaigskrypvxjmBmI7RjKdyjA02/f0iSnON8YxL4q
// SIG // 6fSP4l475IztJZRiaGA78QCw+hYDGc64EZtaIBw9QzdI
// SIG // a5zO+oDlOh1/z5oTFOR9s+c8eBMHnrTx2aocmMdMs63f
// SIG // M/xoqCYf77ISkPSt8WFFlMXKGHI3+HpP5FXoYEQvtrUb
// SIG // blmIbrf+OU5WoJ+cXoMhEaeKYBwCiiTle5WOcx7ntbGb
// SIG // y+64dnDKA+nvmczCmCXmRFiNVH60iPYSy8YaVgvAF6GC
// SIG // EvEwghLtBgorBgEEAYI3AwMBMYIS3TCCEtkGCSqGSIb3
// SIG // DQEHAqCCEsowghLGAgEDMQ8wDQYJYIZIAWUDBAIBBQAw
// SIG // ggFVBgsqhkiG9w0BCRABBKCCAUQEggFAMIIBPAIBAQYK
// SIG // KwYBBAGEWQoDATAxMA0GCWCGSAFlAwQCAQUABCD7uQIs
// SIG // guI4HVr5Nxtdr7axi3qJKkKX/P0OfK/jN/A+JwIGXvIC
// SIG // 6hPMGBMyMDIwMDcwMTA1NTUyNi43ODlaMASAAgH0oIHU
// SIG // pIHRMIHOMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2Fz
// SIG // aGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UE
// SIG // ChMVTWljcm9zb2Z0IENvcnBvcmF0aW9uMSkwJwYDVQQL
// SIG // EyBNaWNyb3NvZnQgT3BlcmF0aW9ucyBQdWVydG8gUmlj
// SIG // bzEmMCQGA1UECxMdVGhhbGVzIFRTUyBFU046Nzg4MC1F
// SIG // MzkwLTgwMTQxJTAjBgNVBAMTHE1pY3Jvc29mdCBUaW1l
// SIG // LVN0YW1wIFNlcnZpY2Wggg5EMIIE9TCCA92gAwIBAgIT
// SIG // MwAAASigDoHhNtVPwgAAAAABKDANBgkqhkiG9w0BAQsF
// SIG // ADB8MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGlu
// SIG // Z3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMV
// SIG // TWljcm9zb2Z0IENvcnBvcmF0aW9uMSYwJAYDVQQDEx1N
// SIG // aWNyb3NvZnQgVGltZS1TdGFtcCBQQ0EgMjAxMDAeFw0x
// SIG // OTEyMTkwMTE1MDBaFw0yMTAzMTcwMTE1MDBaMIHOMQsw
// SIG // CQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQ
// SIG // MA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9z
// SIG // b2Z0IENvcnBvcmF0aW9uMSkwJwYDVQQLEyBNaWNyb3Nv
// SIG // ZnQgT3BlcmF0aW9ucyBQdWVydG8gUmljbzEmMCQGA1UE
// SIG // CxMdVGhhbGVzIFRTUyBFU046Nzg4MC1FMzkwLTgwMTQx
// SIG // JTAjBgNVBAMTHE1pY3Jvc29mdCBUaW1lLVN0YW1wIFNl
// SIG // cnZpY2UwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
// SIG // AoIBAQCdkbHW91Tbhj7Nvw4KXPYLe+yxtCT5A+FVk5RC
// SIG // S5Ks50yZfkaGX4jsDeolnz7uJP5I/J8GO6by7NTrAcuP
// SIG // eMrrIOKxy8BzVCT7cNU3OeDDi4HXKLAODcZIu93w8qls
// SIG // A7YznZOh+5DXMwT6gAw+gffKLe+/8EgAgSSMZvagFLna
// SIG // rkuX3MwhdPvmllGrw7uOlN3L+hxIyHVdmXSU1CoOFlCH
// SIG // U2DEFyNPNvqkrOOVgWY3CvfP7SH8fLqvKvJLFhffs1Ix
// SIG // kxYjGih4Z+3EgqBI+xNbVZltPCEqUuu/FhT9vgNDkMGl
// SIG // nCSjQAivifi2uy89mxrqQonThs+Vw3sHNZQ/Zyz3AgMB
// SIG // AAGjggEbMIIBFzAdBgNVHQ4EFgQUhOLyg/F+tTeb1AHD
// SIG // TnR/UATLpvIwHwYDVR0jBBgwFoAU1WM6XIoxkPNDe3xG
// SIG // G8UzaFqFbVUwVgYDVR0fBE8wTTBLoEmgR4ZFaHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvTWljVGltU3RhUENBXzIwMTAtMDctMDEuY3JsMFoG
// SIG // CCsGAQUFBwEBBE4wTDBKBggrBgEFBQcwAoY+aHR0cDov
// SIG // L3d3dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNU
// SIG // aW1TdGFQQ0FfMjAxMC0wNy0wMS5jcnQwDAYDVR0TAQH/
// SIG // BAIwADATBgNVHSUEDDAKBggrBgEFBQcDCDANBgkqhkiG
// SIG // 9w0BAQsFAAOCAQEAi19mRxiFC4A5P4nHB1lMsIw8gLAR
// SIG // 5YZJrZgaeJZXcC93TaNG12WR4kmQfnNis7z6mOuAZRAo
// SIG // 0vz6rq9pvVGk9TdAXlKMER0E/PMHc3feIGKil5iw21Uf
// SIG // MnlYAZHD/yYlVm13UM3M9REx4Fq4frswPAcFIAGhycPp
// SIG // 12HHCLg4DyTNVE3jZfUeTr3/us0dhOWSOA6yKr0uIx+E
// SIG // LKDD059uwIze1WbeGpqEcTCxHEAEu7z09SVFGkRaRR5p
// SIG // FGFZZ9WDLMP//+vevGkb8t3JgpUuOLsZJGiC24YdYdPX
// SIG // o2Yx4axJ/pPTHFZFormO9uIyf+e7cpTOwP48yFjY9RfF
// SIG // ZYZMsjCCBnEwggRZoAMCAQICCmEJgSoAAAAAAAIwDQYJ
// SIG // KoZIhvcNAQELBQAwgYgxCzAJBgNVBAYTAlVTMRMwEQYD
// SIG // VQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25k
// SIG // MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24x
// SIG // MjAwBgNVBAMTKU1pY3Jvc29mdCBSb290IENlcnRpZmlj
// SIG // YXRlIEF1dGhvcml0eSAyMDEwMB4XDTEwMDcwMTIxMzY1
// SIG // NVoXDTI1MDcwMTIxNDY1NVowfDELMAkGA1UEBhMCVVMx
// SIG // EzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1Jl
// SIG // ZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3Jh
// SIG // dGlvbjEmMCQGA1UEAxMdTWljcm9zb2Z0IFRpbWUtU3Rh
// SIG // bXAgUENBIDIwMTAwggEiMA0GCSqGSIb3DQEBAQUAA4IB
// SIG // DwAwggEKAoIBAQCpHQ28dxGKOiDs/BOX9fp/aZRrdFQQ
// SIG // 1aUKAIKF++18aEssX8XD5WHCdrc+Zitb8BVTJwQxH0Eb
// SIG // GpUdzgkTjnxhMFmxMEQP8WCIhFRDDNdNuDgIs0Ldk6zW
// SIG // czBXJoKjRQ3Q6vVHgc2/JGAyWGBG8lhHhjKEHnRhZ5Ff
// SIG // gVSxz5NMksHEpl3RYRNuKMYa+YaAu99h/EbBJx0kZxJy
// SIG // GiGKr0tkiVBisV39dx898Fd1rL2KQk1AUdEPnAY+Z3/1
// SIG // ZsADlkR+79BL/W7lmsqxqPJ6Kgox8NpOBpG2iAg16Hgc
// SIG // sOmZzTznL0S6p/TcZL2kAcEgCZN4zfy8wMlEXV4WnAEF
// SIG // TyJNAgMBAAGjggHmMIIB4jAQBgkrBgEEAYI3FQEEAwIB
// SIG // ADAdBgNVHQ4EFgQU1WM6XIoxkPNDe3xGG8UzaFqFbVUw
// SIG // GQYJKwYBBAGCNxQCBAweCgBTAHUAYgBDAEEwCwYDVR0P
// SIG // BAQDAgGGMA8GA1UdEwEB/wQFMAMBAf8wHwYDVR0jBBgw
// SIG // FoAU1fZWy4/oolxiaNE9lJBb186aGMQwVgYDVR0fBE8w
// SIG // TTBLoEmgR4ZFaHR0cDovL2NybC5taWNyb3NvZnQuY29t
// SIG // L3BraS9jcmwvcHJvZHVjdHMvTWljUm9vQ2VyQXV0XzIw
// SIG // MTAtMDYtMjMuY3JsMFoGCCsGAQUFBwEBBE4wTDBKBggr
// SIG // BgEFBQcwAoY+aHR0cDovL3d3dy5taWNyb3NvZnQuY29t
// SIG // L3BraS9jZXJ0cy9NaWNSb29DZXJBdXRfMjAxMC0wNi0y
// SIG // My5jcnQwgaAGA1UdIAEB/wSBlTCBkjCBjwYJKwYBBAGC
// SIG // Ny4DMIGBMD0GCCsGAQUFBwIBFjFodHRwOi8vd3d3Lm1p
// SIG // Y3Jvc29mdC5jb20vUEtJL2RvY3MvQ1BTL2RlZmF1bHQu
// SIG // aHRtMEAGCCsGAQUFBwICMDQeMiAdAEwAZQBnAGEAbABf
// SIG // AFAAbwBsAGkAYwB5AF8AUwB0AGEAdABlAG0AZQBuAHQA
// SIG // LiAdMA0GCSqGSIb3DQEBCwUAA4ICAQAH5ohRDeLG4Jg/
// SIG // gXEDPZ2joSFvs+umzPUxvs8F4qn++ldtGTCzwsVmyWrf
// SIG // 9efweL3HqJ4l4/m87WtUVwgrUYJEEvu5U4zM9GASinbM
// SIG // QEBBm9xcF/9c+V4XNZgkVkt070IQyK+/f8Z/8jd9Wj8c
// SIG // 8pl5SpFSAK84Dxf1L3mBZdmptWvkx872ynoAb0swRCQi
// SIG // PM/tA6WWj1kpvLb9BOFwnzJKJ/1Vry/+tuWOM7tiX5rb
// SIG // V0Dp8c6ZZpCM/2pif93FSguRJuI57BlKcWOdeyFtw5yj
// SIG // ojz6f32WapB4pm3S4Zz5Hfw42JT0xqUKloakvZ4argRC
// SIG // g7i1gJsiOCC1JeVk7Pf0v35jWSUPei45V3aicaoGig+J
// SIG // FrphpxHLmtgOR5qAxdDNp9DvfYPw4TtxCd9ddJgiCGHa
// SIG // sFAeb73x4QDf5zEHpJM692VHeOj4qEir995yfmFrb3ep
// SIG // gcunCaw5u+zGy9iCtHLNHfS4hQEegPsbiSpUObJb2sgN
// SIG // VZl6h3M7COaYLeqN4DMuEin1wC9UJyH3yKxO2ii4sanb
// SIG // lrKnQqLJzxlBTeCG+SqaoxFmMNO7dDJL32N79ZmKLxvH
// SIG // Ia9Zta7cRDyXUHHXodLFVeNp3lfB0d4wwP3M5k37Db9d
// SIG // T+mdHhk4L7zPWAUu7w2gUDXa7wknHNWzfjUeCLraNtvT
// SIG // X4/edIhJEqGCAtIwggI7AgEBMIH8oYHUpIHRMIHOMQsw
// SIG // CQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQ
// SIG // MA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9z
// SIG // b2Z0IENvcnBvcmF0aW9uMSkwJwYDVQQLEyBNaWNyb3Nv
// SIG // ZnQgT3BlcmF0aW9ucyBQdWVydG8gUmljbzEmMCQGA1UE
// SIG // CxMdVGhhbGVzIFRTUyBFU046Nzg4MC1FMzkwLTgwMTQx
// SIG // JTAjBgNVBAMTHE1pY3Jvc29mdCBUaW1lLVN0YW1wIFNl
// SIG // cnZpY2WiIwoBATAHBgUrDgMCGgMVADE9SxvygBI9F7Ii
// SIG // /Z+5sZl9Wn2boIGDMIGApH4wfDELMAkGA1UEBhMCVVMx
// SIG // EzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1Jl
// SIG // ZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3Jh
// SIG // dGlvbjEmMCQGA1UEAxMdTWljcm9zb2Z0IFRpbWUtU3Rh
// SIG // bXAgUENBIDIwMTAwDQYJKoZIhvcNAQEFBQACBQDipmQ+
// SIG // MCIYDzIwMjAwNzAxMDUyNDE0WhgPMjAyMDA3MDIwNTI0
// SIG // MTRaMHcwPQYKKwYBBAGEWQoEATEvMC0wCgIFAOKmZD4C
// SIG // AQAwCgIBAAICBCECAf8wBwIBAAICEawwCgIFAOKntb4C
// SIG // AQAwNgYKKwYBBAGEWQoEAjEoMCYwDAYKKwYBBAGEWQoD
// SIG // AqAKMAgCAQACAwehIKEKMAgCAQACAwGGoDANBgkqhkiG
// SIG // 9w0BAQUFAAOBgQBJHzaqZVcsIFJ/TPsrujHwXgbzYZz4
// SIG // UX00N3+XeQ+0QjBg/soVK0oJz404ngdq7CtHEijLJv1Y
// SIG // Bmiifk4PorVxYgfRLB8tdhRjhrtdkN9zlBtGCV8R0hhA
// SIG // r+1AQvuIzNFn1oeYd9Qsie2ozJ9xAFiFUzq9fpToNp1n
// SIG // QVwI5MUFQDGCAw0wggMJAgEBMIGTMHwxCzAJBgNVBAYT
// SIG // AlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQH
// SIG // EwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29y
// SIG // cG9yYXRpb24xJjAkBgNVBAMTHU1pY3Jvc29mdCBUaW1l
// SIG // LVN0YW1wIFBDQSAyMDEwAhMzAAABKKAOgeE21U/CAAAA
// SIG // AAEoMA0GCWCGSAFlAwQCAQUAoIIBSjAaBgkqhkiG9w0B
// SIG // CQMxDQYLKoZIhvcNAQkQAQQwLwYJKoZIhvcNAQkEMSIE
// SIG // IC/fvnRVxrtyE+zZj4vD5OoRIN+xHG1kdN/s/08VoA8s
// SIG // MIH6BgsqhkiG9w0BCRACLzGB6jCB5zCB5DCBvQQgvEVq
// SIG // i68FUnfv3BsQ3wakuG9bT14aDxawuteb1dboFNowgZgw
// SIG // gYCkfjB8MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2Fz
// SIG // aGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UE
// SIG // ChMVTWljcm9zb2Z0IENvcnBvcmF0aW9uMSYwJAYDVQQD
// SIG // Ex1NaWNyb3NvZnQgVGltZS1TdGFtcCBQQ0EgMjAxMAIT
// SIG // MwAAASigDoHhNtVPwgAAAAABKDAiBCAVV4atLWkBdKc1
// SIG // +IRrcCT1w6osHUN/JMwthwe4tNYUJTANBgkqhkiG9w0B
// SIG // AQsFAASCAQBqVOvW2gs5yuMLZOCHSm36Qi+gfaExVsYw
// SIG // BZoitbHtk6RgjW1kZKuRrIavuUvWHEBdmCG2k/vkLpJg
// SIG // LXAeffPairBlhxwldOx/vpLiUYZ2unUtcqXVlOmCZgOT
// SIG // zz+gGMYKJudePxnXmOe39xSCgRzZP1P7E43BDpmi5irC
// SIG // 5QRWLMWn3M0xQM/yzqsJIe7SWZA2wNPcj1NxLphfruiG
// SIG // 50ecASVPR+8J1WgsosRHHx4ce5ZmpVtgS2Sh93zf2GSD
// SIG // I+jvIUoYUy56ZE1jZ8o7rrCyXVuUoRGZm9pn9hV9DRNc
// SIG // +zC1NBkZbyTQxb/ITWLyZIHPSXVScd3mR9Og7G20fPrR
// SIG // End signature block
